kola({paths:{_default:"http://s5.cr.itc.cn/j/newt3_A/",kola:"http://s5.cr.itc.cn/j/newt3_A/kola/",sohu:"http://s5.cr.itc.cn/j/newt3_A/sohu/",sohut:"http://s6.cr.itc.cn/j/newt3_A/sohut/",newt:"http://s7.cr.itc.cn/j/newt3_A/newt/"},files:{_urls:["http://s5.cr.itc.cn/j/newt3_A/kola/Package_fcb354367a.js"],"kola.Package":"0",Version:"0","newt.left.Init":"0","newt.timeline.Container":"0","newt.component.Search":"0","jquery.Core":"0","newt.app.recommends.Guess":"0","newt.app.recommends.HotRecommendsSimple":"0","newt.left.Main":"0","newt.util.Browser":"0","newt.ui.window.dialog.ReviewPic":"0","newt.settings.Theme":"0","newt.cr.crGoTop":"0","newt.lib.jqueryScrollTo":"0","newt.cr.crEvent":"0","newt.Config":"0","newt.twitter.Twitter":"0","newt.tool.Tool":"0","newt.ca.ca":"0","newt.fav.Fav":"0","newt.tipbox.Tipbox":"0","newt.composer.Composer":"0","newt.timeline.Plus2":"0","newt.timeline.TwiHelper":"0","newt.service.StatisticService":"0","newt.timeline.Media":"0","newt.tool.Url":"0","newt.imgloader.ImgLoader":"0","newt.cache.PageCache":"0","newt.lib.dateFormat":"0","newt.widget.plus.Input":"0","newt.component.SearchSuggest":"0","newt.window.Window":"0","newt.net.interface.Bubble":"0","sohu.view.Local":"0","newt.swf.SwfUpload":"0","newt.swf.jquerySwfUpload":"0","newt.composer.TwComposer":"0","newt.plug.RadioClass":"0","newt.dialog.Notice":"0","sohu.ctrl.SimplePager":"0","util.data.DataBuffer":"0","newt.data.Synchronizer":"0","newt.cr.cr":"0","newt.tool.Count":"0","newt.data.JData":"0","newt.service.MailService":"0","newt.component.Login":"0","newt.cr.crSimpleEdit":"0","newt.composer.Attip":"0","newt.composer.emote.Emote":"0","newt.dialog.Common":"0","newt.report.Report":"0","newt.cr.crOut":"0","newt.cr.crButton":"0","newt.cr.crInput":"0","newt.lib.autoResize":"0","newt.composer.MultiPicEditor":"0","newt.util.Tool":"0","sohu.ctrl.Tips":"0","newt.util.StrUtil":"0","newt.lib.excanvas":"0","newt.swf.sohuFlash":"0","newt.service.Common":"0","newt.util.MemeryCache":"0","kola.lang.String":"0","newt.cr.crLazyImageLoader":"0","newt.cr.crModalDialog":"0","newt.lib.drag":"0","newt.net.NetCommon":"0","kola.html.Element":"0","sohu.data.Model":"0","kola.lang.Function":"0","kola.lang.Object":"0","newt.cache.MemData":"0","newt.data.Base64":"0","kola.bom.Cookie":"0","newt.component.PassportSC":"0","newt.lib.overlay":"0","newt.cr.crCustomSelect":"0","kola.lang.Array":"0","newt.service.UserService":"0","newt.cr.crTextAreaAssistPosition":"0","newt.cr.crTipMenu":"0","newt.net.interface.Emote":"0","newt.resource.Resource":"0","newt.util.LocalStorage":"0","mvc.view.TemplateEngine":"0","newt.composer.emote.crEmote":"0","newt.composer.PicView":"0","newt.composer.ComboUploader":"0","sohu.anim.Sortable":"0","newt.tipbox.Bubble":"0","mvc.io.XHR":"0","kola.lang.Class":"0","kola.css.Selector":"0","kola.bom.Event":"0","kola.bom.Browser":"0","kola.net.Ajax":"0","newt.lib.jqueryTool":"0","lib.JSON":"0","mvc.view.template.engine.Elapse":"0","newt.widget.CommonDialog":"0","newt.composer.SwfUploader":"0","newt.composer.AjaxUploader":"0","sohu.anim.Draggable":"0","sohu.tool.Selection":"0","newt.util.ImageUtil":"0","newt.timeline.vote.View":"0","newt.timeline.zoom.Magnifier":"0","newt.map.Map":"0","newt.reply.Reply":"0","template.main.app.recommends.guess":"0","newt.comet.News":"0","newt.timeline.DropdownMenu":"0","newt.comet.Feed":"0","newt.monitor.Performance":"0","template.main.app.recommends.hot.simpleface":"0","newt.ca.pv":"0","newt.component.NavBar":"0","sohu.view.Page":"0","newt.usercard.UserCard":"0","sohu.ctrl.ImagePlayer":"0","newt.timeline.zoom.JQueryZoom":"0","newt.timeline.Num":"0","newt.templete.Templete":"0","newt.service.Message":"0","newt.reply.VCode":"0","newt.timeline.Other":"0","template.main.app.recommends.guess_avatar_content":"0","newt.util.helper.AutoFix":"0","sohu.tool.History":"0","sohu.view.TBrowser":"0","kola.bom.Dispatcher":"0","sohu.loader.CssLoader":"0","newt.component.combox.ComboxSearch":"0","newt.component.combox.ComboxManager":"0","newt.group.action.GrpAct":"0","newt.group.action.TwGrpActionMenu":"0","newt.black.blacklist":"0","template.main.app.recommends.hot.sublist":"0","newt.data.Model":"0","newt.model.Security":"0","newt.widget.VerifyCode":"0","newt.service.Recommends":"0","newt.cr.crMenu":"0","newt.service.GroupService":"0","template.main.app.recommends.hot.avatarcontent":"0","mvc.aop.Builder":"0","mvc.aop.Settings":"0","newt.view.template.core.engine":"0",sohuto:"sohuto_0ea38e039e.js","sohuto.tipbox":"tipbox_1b78a12bf2.js","sohuto.component":"component_7b7ea7cb37.js","sohuto.component.combox":"combox_9f4feb2909.js","sohuto.third":"third_2f0bca7a76.js","sohuto.composer":"composer_7ea98a89ce.js","sohuto.composer.vote":"vote_f1dfe206c4.js","sohuto.composer.emote":"emote_c3bb109045.js","sohuto.swf":"swf_49fa00b1c6.js","sohuto.comet":"comet_050592eb8f.js","sohuto.imgloader":"imgloader_4ebe5774a1.js","sohuto.twitter":"twitter_a158c4f9e2.js","sohuto.window":"window_7a963f52db.js","sohuto.dialog":"dialog_e4b1e52137.js","sohuto.reply":"reply_0107b289ed.js","sohuto.data":"data_ee50ded447.js","sohuto.iploc":"iploc_b9a4971701.js","sohuto.plug":"plug_32934314b5.js","sohuto.left":"left_dfa73b04bc.js","sohuto.group":"group_7bbfed0f69.js","sohuto.group.action":"action_fb756d3422.js","sohuto.group.filter":"filter_5b3fd5c823.js","sohuto.group.batch":"batch_367e81ad87.js","sohuto.cache":"cache_cc7ef0ee77.js","sohuto.login":"login_7824f044c7.js","sohuto.black":"black_3694f3b66e.js","sohuto.timeline":"timeline_21f9994609.js","sohuto.timeline.vote":"vote_9bfa49b108.js","sohuto.timeline.menu":"menu_616fdbe278.js","sohuto.right":"right_c99fe3d280.js","sohuto.fav":"fav_f3b146e103.js","sohuto.operation":"operation_a0715c6b44.js","sohuto.templete":"templete_61ff8f138a.js","sohuto.map":"map_e438d452f6.js","sohuto.avatar":"avatar_a1196a147e.js","sohuto.cr":"cr_d15f249863.js","sohuto.resource":"resource_f093da741a.js","sohuto.tool":"tool_bd3419c8f5.js","sohuto.animate":"animate_a54b98af73.js","sohuto.report":"report_ce8c6c1261.js","sohuto.mail":"mail_18be467653.js","sohuto.ca":"ca_4a974eb421.js","sohuto.lib":"lib_2842f9d128.js","sohuto.lib.date97":"date97_2bf8047b48.js","sohuto.find":"find_888669792e.js","sohuto.timer":"timer_ac2cb9fa88.js","newt.guide":"guide_e88a14b740.js","newt.component":"component_db7a746b94.js","newt.component.combox":"combox_700f41b0bf.js","newt.ui.window":"window_d53e7227be.js","newt.ui.window.dialog":"dialog_e856447f72.js","newt.ui.window.dialog.action":"action_9e9e6d6efb.js","newt.ui.window.dialog.realname":"realname_4ed0d18942.js","newt.ui.window.dialog.realname.register":"register_9512c64049.js","newt.ui.window.dialog.realname.phone":"phone_4a2de3b57d.js","newt.toolbar.settings":"settings_08570969a3.js","newt.third":"third_b51861050c.js","newt.third.pub":"pub_e8efbd1b94.js","newt.user":"user_a3f0ea104c.js","newt.user.active":"active_56adc7bc85.js","newt.user.connectactive":"connectactive_111e4c8fed.js","newt.user.register":"register_b44f680f09.js","newt.composer":"composer_7515af2f03.js","newt.composer.vote":"vote_b3df27e8aa.js","newt.comet":"comet_5306d514d8.js","newt.realnameblock":"realnameblock_ea6d03d196.js","newt.window":"window_5c199ad658.js","newt.reply":"reply_2e18aa1e61.js","newt.data":"data_6061aee4a1.js","newt.iploc":"iploc_10f777d9ae.js","newt.plug":"plug_deea3160fa.js","newt.left":"left_f0ec76504d.js","newt.group":"group_7bdaf5086b.js","newt.group.action":"action_a3c5760403.js","newt.group.filter":"filter_80fea7a228.js","newt.group.batch":"batch_c4816dce35.js","newt.service":"service_b43d53340a.js","newt.model":"model_49c2223642.js","newt.util":"util_62555da262.js","newt.util.helper":"helper_5b73b116c1.js","newt.friend":"friend_f2a0c5fee9.js","newt.app.star":"star_f4cda963e6.js","newt.app.recommends":"recommends_73e52134e9.js","newt.timeline":"timeline_8ad534ffb5.js","newt.timeline.menu":"menu_f31fbf7ccb.js","newt.mobile":"mobile_8af9b52294.js","newt.memo":"memo_ea98580f67.js","newt.notice":"notice_83ffbc1531.js","newt.verify":"verify_a955e07907.js","newt.right":"right_00310000b2.js","newt.landingpage":"landingpage_f0620cea6e.js","newt.landingpage.app":"app_4e00f50b59.js","newt.footprint":"footprint_6c52f7d4d9.js","newt.profile":"profile_46574aa3fb.js","newt.net.interface":"interface_b6227ae06e.js","newt.net.interface.util":"util_32e6393866.js","newt.page":"page_46349c22db.js","newt.widget":"widget_d3f3935314.js","newt.widget.plus":"plus_fba79e99c5.js","newt.settings":"settings_9aa0359eaf.js","newt.settings.recommends":"recommends_dd75c03bee.js","newt.settings.recommends.company":"company_69b3df4b39.js","newt.settings.recommends.school":"school_982346952f.js","newt.settings.recommends.hot":"hot_f8bb0d39f6.js","newt.settings.recommends.near":"near_d22d130b85.js","newt.settings.accountconnect":"accountconnect_02d80f1b9d.js","newt.settings.verification":"verification_ae550fa9e2.js","newt.operation":"operation_6cc1a3af11.js","newt.avatar":"avatar_982af2af66.js","newt.cr":"cr_19334ee597.js","newt.tool":"tool_68d19a5f81.js","newt.tool.validator":"validator_2925dca643.js","newt.mail":"mail_46f201e654.js","newt.search":"search_042e9436b1.js","newt.search.pagelogic":"pagelogic_7697d7d725.js","newt.sohutexp":"sohutexp_69460d792e.js","newt.lib":"lib_ca4a2bcc9b.js","newt.lib.date97":"date97_2d55e81a7c.js",mvc:"mvc_639b78253f.js","mvc.service":"service_8964b849f7.js",util:"util_a6549b7ee6.js","util.validator":"validator_71fe41b929.js","util.plus":"plus_463d641146.js","util.data":"data_7d8fe1ab1d.js","util.data.extra":"extra_acd9afd40b.js","util.formvalidator":"formvalidator_548eb750df.js",ckeditor:"ckeditor_cb83b3cd80.js","app.share":"share_de421ff1eb.js","app.tsubject":"tsubject_752477a801.js","app.common":"common_5962f1de1d.js","app.common.tab":"tab_7bd0ba3198.js","app.common.toolbar":"toolbar_22182295eb.js","app.common.image":"image_025d028907.js","app.common.comet":"comet_81b35a2b49.js","app.common.list":"list_b7abc0dcd3.js","app.action":"action_4b342129fa.js","app.action.user.player":"player_2a26f8d660.js","app.action.user.prizeuser":"prizeuser_c197a31cef.js","app.action.user.prizeuser.list":"list_c778eac5e2.js","app.action.composer":"composer_209d0862b6.js","app.action.service":"service_863ccfa367.js","app.action.portal":"portal_5ddbecf95a.js","app.action.prize":"prize_58ce21e299.js","app.action.creator.step2":"step2_b4665fe65e.js","app.action.creator.step3":"step3_fd2800fabd.js","app.action.creator.step1":"step1_642cdac8c7.js","app.action.guess":"guess_f24331acb5.js","app.action.guess.list":"list_8f8a2ee78a.js","app.debate":"debate_9c94c7fdee.js","app.bar":"bar_0bd49c68c6.js","app.bar.recommend":"recommend_55c951cd55.js","app.bar.dialog":"dialog_a4a669a7ce.js","app.bar.dialog.guide":"guide_dac06b3111.js","app.bar.dialog.manage":"manage_8ef13d01b2.js","app.bar.create":"create_7de2b4c819.js","app.bar.model":"model_14cf588975.js","app.bar.slide":"slide_8d6ff34298.js","app.bar.manage":"manage_a18ba64c32.js","app.bar.manage.member":"member_cb364dd713.js","app.bar.manage.mine":"mine_1f80596a08.js","app.bar.manage.invite":"invite_18e3432a70.js","app.bar.gate":"gate_31ca095c71.js","app.bar.search":"search_c7a5c3104a.js","app.chunjie":"chunjie_32e2501178.js","app.chunjie.widget":"widget_f98fba7fe0.js","app.live":"live_86d1a98573.js","app.live.guestlist":"guestlist_256da4594b.js","app.live.compere":"compere_e6233d5b82.js","app.live.list":"list_ee6687a741.js","app.dialog":"dialog_befab1f5c5.js","app.service":"service_ddaa1a1a97.js","app.util":"util_2fb59828a7.js","app.trophy":"trophy_d82d540ca4.js","app.medal":"medal_ff98d2568c.js","app.kezhan":"kezhan_f8a4eabed7.js","app.kezhan.vote":"vote_473896c215.js","app.passport":"passport_8bf71f07c7.js","app.cooperate.femaleWeek":"femaleWeek_c6d068e663.js","app.tms":"tms_f7c50a8354.js","app.tms.recommend":"recommend_cdf5f4c87f.js","app.tms.sohuhome":"sohuhome_8374d8e043.js","app.tms.sohuhome.group":"group_b27b3c1ffb.js","app.tms.widget":"widget_2348d465ca.js","app.gov":"gov_5459351ba6.js","app.talk":"talk_3232923521.js","app.widget":"widget_f49877a00f.js","app.baodiao":"baodiao_faba062859.js","app.exp.lottery":"lottery_06e13594ed.js","app.exp.ad":"ad_1407fdb578.js","app.exp.sohuhome":"sohuhome_224e7e19a0.js","app.exp.sohuhome.service":"service_98e5b33683.js","app.exp.sohuhome.level2":"level2_a1dbdef119.js","app.exp.home":"home_a0aff9083b.js","app.exp.dialog":"dialog_43f22162c5.js","app.exp.model":"model_de42416d81.js","app.exp.util":"util_07bce71628.js","app.exp.bootcamp":"bootcamp_dbd9262569.js","app.exp.task":"task_9b3648cb29.js","app.exp.task.at":"at_9fd8457d61.js","app.exp.task.home":"home_f6f266b445.js","app.gongyi.common.dialog":"dialog_70d5c55659.js","app.gongyi.final":"final_3e88953c08.js","app.gongyi.home":"home_d79151c85c.js","app.gongyi.model":"model_4a974d7867.js","app.gongyi.manage":"manage_649c501950.js","app.gongyi.creator":"creator_d8e101851a.js","app.open":"open_77295f8712.js","app.sault":"sault_a4d834a3eb.js","app.sault.jingxuan":"jingxuan_cd3e9b160a.js","app.timer":"timer_844f032fb9.js","bricks.clay.paging":"paging_cf63b2093e.js","bricks.clay.wheel":"wheel_8ae969dea2.js","bricks.clay.wheel.plugin":"plugin_767f21b875.js",sohut:"sohut_709e42d956.js","sohut.setting":"setting_ec266075e3.js","sohut.user":"user_db76b63e15.js","sohut.plug":"plug_424f2a8613.js","sohut.friend":"friend_f2385b6fb3.js","sohut.previewExperience":"previewExperience_3983f69d93.js","sohut.app":"app_b56d9b3dcb.js","sohut.timeline":"timeline_7472b00278.js","sohut.oneStepReg":"oneStepReg_290c16a9e4.js","sohut.comm":"comm_28a19d91eb.js","sohut.comm.Worker":"Worker_6ad5b57917.js","sohut.vms":"vms_819bfe376f.js","sohut.talk":"talk_cb9e5bb526.js","sohut.friendPlugins":"friendPlugins_2c19fc23cd.js",template:"template_2adbb66acf.js","template.main.regist":"regist_7c65bf5c7e.js","template.main.regist.dialog.exp":"exp_6eabe4c385.js","template.main.regist.dialog.exp.expregister":"expregister_cb75124d91.js","template.main.regist.step1":"step1_a1a6aa3ce8.js","template.main.app.recommends":"recommends_379ae5fc4f.js","template.main.app.recommends.hot":"hot_70b786fe27.js","template.main.profile.follow":"follow_af1aa1b8f2.js","template.main.recommends.settings":"settings_e38c4a7d8c.js","template.main.recommends.settings.hot":"hot_19ae96fdfd.js","template.main.avatar":"avatar_34a40b66f3.js","template.main.emote":"emote_caecf53463.js","template.card.following":"following_ad2a608245.js","template.yunying.action":"action_722a3bb371.js","template.yunying.action.prize.mul":"mul_30386d4a6f.js","template.yunying.action.prize.single":"single_92b6ef78c4.js","template.yunying.action.creator":"creator_62a6b083da.js","template.yunying.action.guess":"guess_8c289498e2.js","template.yunying.bar":"bar_a96e8e986c.js","template.yunying.bar.guide":"guide_0006f4baed.js","template.yunying.bar.dialog":"dialog_37093d9cc0.js","template.yunying.bar.create.edit":"edit_16856398e8.js","template.yunying.bar.slide":"slide_2ba2e0bd61.js","template.yunying.bar.manage":"manage_93ef4b9387.js","template.yunying.bar.gate.follow100":"follow100_a4f7440a04.js","template.yunying.bar.gate.etf":"etf_ec16bed8b3.js","template.yunying.bar.gate.fans100":"fans100_88884c170e.js","template.yunying.bar.gate.bindphone":"bindphone_7f1ec31012.js","template.yunying.dialog":"dialog_ffbb750fbd.js","template.yunying.tms.sorttable":"sorttable_c1ced49057.js","template.yunying.tms.sorttable.sohuhome.group":"group_7ecd832b0d.js","template.yunying.tms.table":"table_cb380dd889.js","template.yunying.tms.table.sohuhome":"sohuhome_5ff9a21c95.js","template.yunying.widget":"widget_23178e3bf5.js","template.yunying.exp.home":"home_065fecdddb.js","template.yunying.exp.dialog":"dialog_0c84737aaa.js","template.yunying.gongyi.manage.dialog":"dialog_c3c4883b58.js","sohutm.module.composer":"composer_e47afc194f.js","sohutm.module.comet":"comet_70ea223954.js","sohutm.module.line":"line_195f9e89b3.js","sohutm.module.fragment":"fragment_b98f023d1c.js","sohutm.module.notice":"notice_e21e21098d.js","sohutm.module.ctrl":"ctrl_32c2de25d9.js","sohutm.store":"store_da26cddc84.js","sohutm.pages":"pages_9f6b05a58b.js","sohutm.data":"data_c2827554dc.js","sohutm.comp":"comp_b487789c51.js","sohutm.readerModule":"readerModule_2f296b406b.js","sohutm.sqlDataBase":"sqlDataBase_5997378fa0.js","sohu.ctrl":"ctrl_1c1d0c1e12.js","sohu.cc":"cc_1525934aae.js","sohu.tool":"tool_99528371b5.js",sohutt:"sohutt_cb6d462537.js","sohutt.superMan":"superMan_8cef1edf3a.js","sohutt.traverse":"traverse_22b4f31e64.js","sohutt.hls":"hls_3210df46e5.js","sohutt.hls.lottery":"lottery_04a8ddc54b.js","sohutt.hls.lottery.rebuild":"rebuild_7e4a2b17c3.js"}});(function(){function p(v){var w=/\s/g;p=function(z){return z.replace(w,"")};return p(v)}function d(A,z){for(var w=0,v=A.length;w<v;w++){z(A[w])}}function u(B,A){var w=[];for(var z=2,v=arguments.length;z<v;z++){w.push(arguments[z])}return function(){var C=w.concat();for(var E=0,D=arguments.length;E<D;E++){C.push(arguments[E])}return B.apply(A,C)}}function m(v){switch(typeof(v)){case"string":v=(v=p(v)).split(",");case"object":if(v!==null&&v.push){if(v.length==0){return null}return v}default:return null}}function q(v){switch(typeof(v)){case"object":if(v!=null&&typeof(v.length)=="number"){return v.concat()}break}return v}var c,r;function k(){c=true;if(!r){return}for(var w=0,v=r.length;w<v;w++){var z=r[w];switch(typeof(z)){case"function":z();break;case"object":if(z.length==3){z[0].apply(z[1],z[2])}break}}r=null}function b(){if(c==true){return}try{document.documentElement.doScroll("left")}catch(v){setTimeout(b,1);return}k()}function t(v){var z=document.readyState;if(typeof(z)=="string"&&(z=="complete")){c=true}else{c=false;r=[];if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);k()},false);window.addEventListener("load",function(){k()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);k()}});window.attachEvent("onload",k);var w=false;try{w=window.frameElement==null}catch(A){}if(document.documentElement.doScroll&&w){b()}}}}t=f;return t(v)}function f(v){var w;return c?v:(function(){var A=[];for(var B=0,z=arguments.length;B<z;B++){A.push(arguments[B])}if(c){v.apply(this,A)}else{r.push([v,this,A.concat()])}})}var j={uninitialized:0,loading:1,loaded:2,interactive:3,complete:4};var s=function(v,w){this._callback=w;this._count=v.length};s.prototype.interactiveOne=function(){if(--this._count<1){this._callback();delete this._callback;delete this._count;return true}return false};s.prototype.count=function(v){this._count=v};var n={_followerMap:{},_statusMap:{},_contentMap:{},_requiresMap:{},_pathStatus:null,require:function(z,B){var v=new s(z,B),A=[],w=0;d(z,u((function(F,C){var E=arguments[2],D=n._status(E);if(D>=C.interactive){return}w++;var G=this._followerMap[E];if(!G){G=this._followerMap[E]=[]}G.push(F);if(D==C.uninitialized){A.push(E)}}),this,v,j));if(w==0){B()}else{v.count(w);d(A,function(C){n._load(C)})}},register:function(w,z,A){var v=this._status(w);if(v>=j.loaded){return null}this._contentMap[w]=A;this._requiresMap[w]=q(z);this._status(w,j.loaded);if(z==null){this._interactive(w)}else{this.require(z,u(this._interactive,this,w))}},exe:function(v,w){this.require(v,u((function(){var z=[];d(v,u((function(B,A){B.push(this._complete(A))}),this,z));w.apply(window,z)}),this))},config:function(v){this._config=v},_path:function(z){var B=this._config;if(!B){var F=document.getElementsByTagName("script"),G="/kola/Package.js",A=G.length;for(var H=0,J=F.length;H<J;H++){var v,I;if(typeof(v=F[H].src)=="string"&&(I=v.indexOf(G))!=-1){this.config({paths:{_default:v.substr(0,I)+"/"}});B=this._config;break}}if(!B){return""}}var D=z.split("."),E=D.concat();if(D.length==0){return""}var w,C;if(w=B.files){if(typeof(C=w[z])=="undefined"){if(C=w[D.slice(0,-1).join(".")]){E=E.slice(0,-2)}}else{E=E.slice(0,-1)}}switch(typeof(C)){case"number":C=w._urls[C];break;case"string":if(C.length<3){C=w._urls[parseInt(C)]}break;default:C=D[D.length-1]+".js";E=E.slice(0,-1)}if(C.indexOf("http")==0){return C}var L=B.paths,K,H=1,J=-E.length;while((--H)>J){if(K=L[(H==0?E.slice(0):E.slice(0,H)).join(".")]){if(H<0){E=E.slice(E.length+H)}else{E=[]}break}}if(!K){K=L._default}return K+(E.length>0?(E.join("/")+"/"):"")+C},_interactive:function(w){this._status(w,j.interactive);var z=this._followerMap[w];if(typeof(z)!="object"||z==null||z.length==0){return null}var v=[];d(z,u((function(A,B){if(!B.interactiveOne()){A.push(B)}}),this,v));if(v.length==0){this._followerMap[w]=null}else{this._followerMap[w]=v}},_complete:function(v){var A=this._contentMap,z=A[v];if(this._status(v)==j.complete){return z}var w=this._requiresMap[v],B=[];if(typeof(w)=="object"&&w!==null&&w.push&&w.length>0){d(w,u((function(D,C){D.push(this._complete(C))}),this,B))}z=A[v]=typeof(z)=="function"?z.apply(window,B):z;this._status(v,j.complete);return z},_status:function(w,v){if(typeof(v)=="undefined"){v=this._statusMap[w];if(typeof(v)!="number"){v=this._statusMap[w]=j.uninitialized}return v}else{this._statusMap[w]=v}},_load:function(w){var z=this._pathStatus;if(!z){this._pathStatus=z={};var A=document.getElementsByTagName("script");for(var C=0,F=A.length;C<F;C++){var v=A[C].src;if(typeof(v)=="string"){z[v]=j.loading}}}var G=this._path(w),B=z[G];if(typeof(B)!="number"){this._pathStatus[G]=j.loading;this._status(w,j.loading);var E=document.createElement("script");E.src=G;E.type="text/javascript";E.charset=this._config.charset?this._config.charset:"GBK";E.onerror=function(){throw new Error("JS文件加载失败："+G)};var D=document.getElementsByTagName("head")[0];D.appendChild(E);D=E=null}}};var h=window.kola?window.kola._cache:null;window.kola=function(B,A,z){var w=typeof(z);if(w=="function"){n.register(B,m(A),z)}else{var C=typeof(A),v=C=="undefined"?1:(w=="undefined"?2:3),D=null,F=null,E=null;switch(v){case 1:if(typeof(B)=="function"){D=B}else{n.config(B);return}break;case 2:if(C=="object"){D=B;F=A}else{E=B;D=A}break;case 3:E=B;D=A;F=z;break}switch(typeof(D)){case"string":D=new Function(D);case"function":if(!!F&&F.scope){D=u(D,F.scope);F.scope=null}break}D=t(D);E=m(E);if(E==null){D()}else{n.exe(E,D)}}};if(navigator.userAgent.toLocaleLowerCase().split(" ").join("").indexOf("msie6")!=-1){var l=kola;kola=function(){(function(w,v){setTimeout(function(){l.apply(w,v)},0)})(this,arguments)}}kola.Package=n;if(h&&typeof(h.length)=="number"&&h.length>0){for(var o=0,g=h.length;o<g;o++){var a=h[o];if(a.length==2&&typeof(a[1])=="object"){h.splice(o--,1);g--;kola.apply(a.shift(),a)}}if(h.length>0){setTimeout((function(){for(o=0,g=h.length;o<g;o++){a=h[o];kola.apply(a.shift(),a)}}),0)}}})();(function(){if(!kola.APPVERSION){kola.APPVERSION="1.6.5.111"}})();kola("newt.left.Init",["newt.cr.crEvent","newt.Config","newt.twitter.Twitter","newt.tool.Tool","newt.ca.ca","newt.cr.crEvent","newt.fav.Fav","newt.tipbox.Tipbox","newt.composer.Composer","newt.timeline.Plus2"],function(b){var a={initMainFunc:function(){var c=this;c._initCommonFunc();c.initGetFreshNews()},initPubFunc:function(){var c=this;c._initCommonFunc();c.initComet()},_initCommonFunc:function(){var c=this;c.initRealNameBlock();c._initPV();c.initNavBar();setTimeout(c.initSysFont,15);window.setTimeout(function(){c.initTitleClass()},100);c.initCloud();c.initTOOL();c.initCA();c._initBeforeUnloadEvent();c.initPageView();c.initUserCard();c.initPlus2();c.initCloseNotice();c.initHeartbeat();c.initChageThemeEvt();c.initMedalCard()},initGetFreshNews:function(){kola("newt.comet.News",function(c){new c()})},initNavBar:function(){$(function(){kola("newt.component.NavBar",function(c){new c("#crjs_headbar",{search:".jumper"})})})},initImageScroll:function(c){$(function(){if($(c).length==0){return false}var f=$(c),d,g;d=f.find(".noticeAdImg");d.children().removeClass("nodis");if(d.children().size()<2){return}if(!d.attr("data-pager")){f.find(".noticeAdnum").remove();d.attr("data-pager","list");d.after('<p class="noticeAdnum" data-pager="numList"><a class="on" href="javascript:void(0);">1</a></p>')}kola("sohu.ctrl.ImagePlayer",function(h){var j=new h(f,{auto:5000,size:1,onClass:"on",effect:"opacity",onChange:function(k){f.trigger("updatePage",k)}})})})},initPageView:function(){var c=this;$(function(){if(!window._view_context||c.PVFlag){return}if($.browser.msie){document.domain="sohu.com"}kola("sohu.view.Page",function(d){d.init()});c.PVFlag=1})},initComet:function(){$(function(){if(window.InterIdN&&window.InterIdN!=""){clearInterval(window.InterIdN)}var c=function(){kola("newt.twitter.Twitter, newt.comet.Feed",function(){tw.build({type:"get_new",success:tw.feed.updateMyStatus})})};c();window.InterIdN=setInterval(function(){c()},30000)})},initDropdownMenu:function(){kola("newt.timeline.DropdownMenu",function(d){var c=new d();c.init()})},initCommentMenu:function(){if($.trim($("#t-comments").find("b").text())!="收到评论"){$("#labRecComNum").addClass("noDis")}},initTitleClass:function(){$(function(){var f=$("#crjs_headbar").find("div.tray").children("div.nav").eq(1).find("li.navL").children("a.nava");var c=$("#crjs_headbar").find("div.tray").children("div.nav").eq(1).find("li.navL").children("a.nava").filter(".on");var d=location.href;var g="";if(d.indexOf("#")>0){g=location.hash.replace(/^#/,"")}else{g=location.pathname;if(g=="/"&&"home"==tw.getPageName().name){c.removeClass("on");f.eq(0).addClass("on");CA.q("newt_home_enter");return}}c.removeClass("on");if(/^\/(home|mentions|comments|favorites)/.test(g)&&"home"==tw.getPageName().name){f.eq(0).addClass("on");CA.q("newt_home_enter")}else{if(/^\/profile/.test(g)){f.eq(1).addClass("on")}else{if(/^\/inbox/.test(g)){f.eq(2).addClass("on")}else{if(/^\/setting/.test(g)){f.eq(4).addClass("on")}}}}})},initRealNameBlock:function(){try{if(typeof window.authTip!="undefined"){if(window.authblock){kola("newt.realnameblock.FocusChecker",function(){window.tw.realNameBlock.turnOn("before")})}else{if(window.authTip){kola("newt.realnameblock.FocusChecker",function(){window.tw.realNameBlock.turnOn("after")})}}}else{if(window.foreUgcleft===0){kola("newt.realnameblock.FocusChecker",function(){window.tw.realNameBlock.turnOn("before")})}else{if(window.foreUgcleft>0){kola("newt.realnameblock.FocusChecker",function(){window.tw.realNameBlock.turnOn("afterThen")})}}}if(window.safeTip){kola("kola.bom.Cookie",function(d){if(d.get("bindphone")!="close"&&location.href.indexOf("home")!=-1){kola("newt.settings.BindMobileWindow",function(f){f()})}})}}catch(c){}},initTOOL:function(){$("body").bind("mousedown",function(c){var d=$(c.target);TOOL.side(TOOL.getSide(d));TOOL.target(d)})},initCA:function(){if(CA&&CA.hasInit){return}CA.init()},initCloud:function(){var c=$("#t-lay div.cloud");if(c.length==1&&c.hasClass("js-newt-left-init-emptybreaker"==false)){window.setTimeout(function(){c.empty()},100)}},initPlus2:function(){kola("newt.timeline.Plus2",function(c){c.init()})},initUserCard:function(){$(function(){kola("newt.usercard.UserCard",function(){tw.usercard.init()})})},initMedalCard:function(){$(function(){kola("app.medal.MedalCard",function(){tw.medalcard.init()})})},_initPV:function(){$(function(){kola("newt.ca.pv",function(c){c()})})},_initBeforeUnloadEvent:function(){$(window).bind("unload",function(){try{$("*").add($(document)).removeData().removeAttr().unbind();$(window).unbind();TOOL.clearObject(tw);if(window.CollectGarbage){window.setTimeout(CollectGarbage,10)}}catch(c){}})},initRightReplyPage:function(){},initLeftReplyPage:function(d){var c=this;$(function(){c._initReplyPage($("#t-user"),d)})},_initReplyPage:function(d,c){$(function(){d.unbind("click.reply").bind("click.reply",function(f){var g=$(f.target).closest("a.crjs_pg");if(g.length>0&&!g.hasClass("dis")){kola("newt.reply.Reply",function(){tw.reply.goPage({url:g.attr("href").replace(HOST,""),box:$("#rebox_"+c)})});return false}})})},initLeftReply:function(){var c=this;$(function(){var d=TOOL.getLeft("div.twiFinal").children("div.twi").attr("id").split("_")[0];if(!d){return}kola("newt.right.Twitter",function(f){new f({msgid:d})});c.initLeftReplyPage(d)})},initTimelineContainer:function(c){$(function(){c=c||"#twitter_container";kola("newt.timeline.Container",function(d){new d({container:c})})})},initComposer:function(c){kola("newt.composer.Composer",function(d){var f=$("#tw_post2");var g=function(){var k=new d(f,{});if(c instanceof Function){try{c(k)}catch(l){}}};if(f.length>0){g();return}var h,j=function(){f=$("#tw_post2");if(f.length==0){return}window.clearInterval(h);g()};h=window.setInterval(j,80)})},initUserOperBar:function(){$(function(){var c=["newt.twitter.Twitter","newt.cr.crEvent","newt.cr.crButton","newt.group.Flgrp","newt.operation.Oper"];kola(c,function(){tw.flgrp.init();CRTWCONFIG.USE_MEMO=true;tw.oper.init();$.cr.event.bind("tw_follow_operation",function(j,h,f){var k=$("#"+h+"_con");tw.setFollowStatus(h,f,"add");k.find("div.group").removeClass("noDis");k.find("div.group li.tag").removeClass("noDis");var g=k.find("b.nm a").text();if(g){$.cr.event.send("tw_show_group_window",h,g)}});$.cr.event.bind("tw_follow_cancel_operation",function(h,g,f){tw.setFollowStatus(g,f,"cancel")});var d=function(g,f){setTimeout(function(){var h="";try{h=tw.getPageName().name}catch(j){}if(h!="home"){window.location.href=window.location.href}},10)};$.cr.event.bind("black_add_fresh",d);$.cr.event.bind("black_del_fresh",d)})})},initCloseNotice:function(){$(function(){kola("newt.cr.cr, newt.ca.ca",function(){window.closeNotice=function(g,c,d){$("div."+g).hide();var f,h;f=new Date(new Date().getTime()+1000*60*60*24*30);if(d){if(d=="session"){f=null}else{d=parseInt(d);f=new Date(new Date().getTime()+d)}}h=$.cr.cookie.get("ck_"+g);if(h.length>0){h+=","}h+=c;$.cr.cookie.set("ck_"+g,h,f);CA.q("tw_"+CRTWCONFIG.CA_SRC+"_"+g+"_close_"+c)}})})},initHeartbeat:function(){var c=this;c._loop()},_loop:function(){$.ajax({type:"GET",dataType:"json",url:"/comet/sub?uid="+UID,success:function(d,c){},complete:function(f,c){var d=60*1000;window.setTimeout(function(){a._loop()},d)}})},buildComet:function(c,d){$(function(){if($("#iframeComet").size()==0){setTimeout(function(){var f=$("<iframe id='iframeComet' class='noDis crjs_comet' src='http://c"+c+".t.sohu.com/index6.html?id="+d+"'></iframe>");$("#t-main").append(f);if(window.isLogin){setTimeout(function(){$.ajax({url:"/comet/c",global:false,type:"post",dataType:"json",data:"",success:function(g){},error:function(g){}})},3000)}},1000)}})},_initSohuEmail:function(c){$(function(){var f=c.emainame,d=c.lookedid,k=c.uid,j={};if(f.indexOf("@sohu")!=-1){j.href="http://mail.sohu.com"}else{if(f.indexOf("@vip")!=-1){j.href="http://vip.sohu.com"}else{return}}var h=$("#js_usericon");var g='<a target="_blank" href="{href}" alt="{title}" title="{title}"><i class="i iH i67 {cls}">{num}</i></a>';if(d==k){$.getJSON("http://register.mail.sohu.com/servlet/getUnreadMailCountServlet?callback=?",function(m){var l=m;if(m>0){if(m>99){l="99+"}if(m<10){l="0"+m.toString()}j.num=l;j.title="你有"+m+"封未读邮件";j.cls="i67_txt"}else{j.title="搜狐邮箱"}h.append($(TOOL.replaceHtml(g,j)))})}else{j.title="搜狐邮箱";h.append($(TOOL.replaceHtml(g,j)))}})},initRightUserNum:function(){if($("body").data("init_right_num")==1){return}var c=this;$.cr.event.bind("tw_del_twi",function(){c._bindChangeNum(3,-1)});$.cr.event.bind("tw_add_twi",function(){c._bindChangeNum(3,1)});$.cr.event.bind("tw_follow_user",function(g,f){var d=f.toString().split(",").length;c._bindChangeNum(1,d)});$.cr.event.bind("tw_cancel_follow",function(f,d){c._bindChangeNum(1,-1)});$("body").data("init_right_num",1)},_bindChangeNum:function(d,h){var f=$("#t-user div.aside").children("div.usrStat").find("div.nexus").find("li >a > q");var g="";switch(d){case 1:g=f.eq(0);break;case 2:g=f.eq(1);break;case 3:g=f.eq(2);break}var c=parseInt(g.text(),10)+h;if(c<1){c=0}g.text(c)},resetCbox:function(d){var c=$(d);if(c.length>0){c.delegate(".cbox","click",function(){var f=$(this).find(":checkbox");f.attr("checked",!f.attr("checked"))});c.delegate("input","click",function(f){f.stopPropagation()})}},initRightMiniGroup:function(){var f=TOOL.getLeft("div.js_minigroup");var d=f.find("h4 a").eq(0),c=f.find("h4 a").eq(1);var g=f.find("ul.lis");g.find("li:hidden").addClass("js_more");d.click(function(){g.find("li").removeClass("noDis");d.addClass("noDis");c.removeClass("noDis")});c.click(function(){g.find("li.js_more").addClass("noDis");c.addClass("noDis");d.removeClass("noDis")})},initMainRecommendArea:function(){var c=$("#twitter_container").children("div.usrRecom");if(c.length<1){return}c.unbind("click.nomsg").bind("click.nomsg",function(f){var g=$(f.target).closest("div.usr4");if(g.size()==1){if(g.hasClass("selected")){g.removeClass("selected")}else{g.addClass("selected")}}g=$(f.target).closest("#followThem2");if(g.size()==1){var d=[];c.find("div.selected").each(function(){d.push($(this).attr("id"))});kola("newt.twitter.Twitter",function(){tw.build({type:"follow5",uid:d.join(",")})})}});c.find("a.checkedAll").click(function(){c.find("div.usr4").addClass("selected")});c.find("a.opositeChecked").click(function(){c.find("div.usr4").each(function(){if($(this).hasClass("selected")){$(this).removeClass("selected")}else{$(this).addClass("selected")}})})},initNewUserGuid:function(){var c=(function(){var f=window.ABOUT_TO_SHOW_BUBBLES;return f&&f.hasOwnProperty("bubble-avatar-dialog")})();if(c){return}var d="";$.ajax({url:"/isNewVersionGuided?t="+new Date().getTime(),dataType:"json",data:"",success:function(f){if(f.status==0){if(f.data.newUserStep2){a.initBubbleTip(2);return}}else{throw ("isNewVersionGuided error!")}}})},initChageThemeEvt:function(){$(function(){kola("newt.settings.Theme",function(c){c.initChangeThemeEvt()})})},initTheme:function(){if(window.LOOKEDUSER&&LOOKEDUSER.theme){$(function(){kola("newt.settings.Theme",function(c){c.initSkinAndBg(LOOKEDUSER.theme)})})}},initBubbleTip:function(c){$(function(){var d='<div class="bubble bubMsg bub2"><div class="bubC"><a class="close" title="关闭" data-ca="newt_newUser_icon_bubble_close" onclick="$(this).closest(\'div.bubMsg\').hide();" href="javascript:void(0);}"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a><i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i><div class="bubBd">有头像的人更容易获得别人的关注！<a target="_self" href="/settings/icon" data-ca="newt_newUser_iconModify_go">立即修改头像</a></div></div></div>';var f='<div class="bubble bubMsg bub2"><div class="bubC"><a class="close" title="关闭" data-ca="newt_newUser_findFriend_bubble_close" onclick="$(this).closest(\'div.bubMsg\').hide();" href="javascript:void(0);"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a><i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i><div class="bubBd">关注更多有趣的人，发现更多好玩的事。<a href="/following/recommend"  data-ca="newt_newUser_findFriend_go">立即去看看</a></div></div></div>';c==1&&$("#tw_post2 p.avt").prepend(d).css("overflow","visible");c==2&&$("div.nexus").prepend(f)})},initSysFont:function(){var d=$.cr.cookie.get("cleartype");if(!d.length){var c=$.cr.hasSmoothing(),f=1;if(!c){f=0;if(navigator.userAgent.indexOf("Windows NT 5.1")>-1){$("html").addClass("noClearType")}}tw.setCookie("cleartype",f,new Date(new Date().getTime()+1000*60*60*24*30))}},initOtherPageCss:function(){var c=tw.getPageName().name;if(c=="people"){$("body").addClass("TheOthers")}else{if(c=="twitter"&&LOOKEDUSER.id!=UID){$("body").addClass("TheOthers")}else{$("body").removeClass("TheOthers")}}},cometCheck:function(){setTimeout(function(){kola("newt.ca.ca",function(){try{if($("iframe.crjs_comet").contents().find("script").length!=3){CA.q("newt_comet_content_error")}else{CA.q("newt_comet_content_success")}}catch(c){CA.q("newt_comet_exception")}})},20*1000)},tipPinSite:function(){if($.browser.msie&&$.browser.version>=9&&!localStorage.getItem("tipPinSite")){if(window.external&&window.external.msIsSiteMode&&window.external.msIsSiteMode()){localStorage.setItem("tipPinSite",1);return}$("#t-sky").append('<p class="pinSite"><a href="javascript:void(0)" onclick="var o=this.parentNode;o.parentNode.removeChild(o);localStorage.setItem(\'tipPinSite\',1)" title="知道了" class="close"><i class="sign signX"><q>&#215;</q><q class="k2">&#215;</q></i></a><b></b><em></em></p>')}},buildBubble:function(c){c=$.extend({name:"",ele:"",brotherEle:"",typeCls:"",content:""},c||{});if(!c.name){return""}kola("newt.tipbox.Bubble",function(d){d.create({name:c.name,pEle:c.ele,brotherEle:c.brotherEle,typeCls:c.typeCls,content:c.content})})},emoteTip:function(c){$(function(){kola("newt.tipbox.Bubble,newt.net.interface.Emote",function(g,f){var d="新增表情啦，试试看~";if(c){d=c}g.create({name:"emote",pEle:"#tw_post2 .crJs_em ",typeCls:"bubD bub2",content:d,closeHandle:function(){CA.q("newt_emote_bubble_close");f.firstTipDone({_ajax:{success:function(h){if(h.status==0){CA.q("newt_emote_bubble_close_success")}}}})}})})})}};return a});kola("newt.timeline.Container",["jquery.Core","newt.timeline.TwiHelper","newt.service.StatisticService","newt.timeline.Media","newt.tool.Url","newt.imgloader.ImgLoader","newt.cache.PageCache","newt.tool.Tool"],function(d,b,c){var a=function(g){var f=this;f.opts=d.extend({push_target:"#twitter_container",container:"#twitter_container",autoScroll:false},g||{});f.container=d(f.opts.container);f.subPageCache="";f.subPageIndex=1;f.SKY=d("div.SKY");f.scDm=CRTWCONFIG.SCROLL_DOM;f.subPageMax=3;d.extend(f,{setOptions:function(j){f.opts=d.extend(f.opts,j||{});f.container=d(f.opts.container)},getTwContent:function(j){return f._getUgcContent(d("#"+j+"_con .ugc:first"))},getReplyContent:function(j){return f._getUgcContent(d("#rp_"+j+" .ugc:first"))},_getUgcContent:function(l){if(d("#rphtmlDiv").length==0){d("body").append("<div id='rphtmlDiv' style='display:none;position:absolute'></div>")}var k="";if(l.find("> i").length>0){var j=l.html();j=j.replace(/<i[^>]+title="?(\S+?)"?\s*><\/i>/ig,"[$1]");k=d("#rphtmlDiv").html(j).text()}else{k=l.text()}return k},getTwSender:function(j){return d("#"+j+"_con .js_name:first").text().replace("@","")},getLastMsgId:function(){var k=0;var j=d("#twitter_container div.twi:first");if(j.length>0){k=j.attr("id").replace("_con","")}return k},bindHover:function(j){if(!d.browser.msie){j.hover(function(){d(this).addClass("hover")},function(){d(this).removeClass("hover")})}setTimeout(function(){},1000)},addOne:function(k){var j=d(k);f.bindHover(j);j.prependTo(f.opts.push_target).hide().slideDown("normal",function(){j.find("a.btn2").css("position","relative");tw.media.init(j);if(f.opts.autoScroll){f.scDm.scrollTo(f.container,200,{axis:"y",offset:-50})}});tw.imgloader.scan(f.container);if(typeof window.CRTWCONFIG.addTwHandle=="function"){window.CRTWCONFIG.addTwHandle.addTwHandle()}},more:function(l){var o,m,k;var n=d(l.THIS).parent();var j=l.msgid;if(n.closest("div.twiRoot").length==1){j=n.closest("div.twiRoot").attr("id").replace(/_con$/,"")}o=n.html();tw.pcache.set(j+"_ugc_less",o);k=tw.pcache.get(j+"_ugc_more");if(k){n.html(k)}else{tw.build({type:"get_msg_more",globalIntercept:false,msgid:l.msgid,success:function(r){var q=d("<a class='fuc fuc6' href='javascript:void(0);' onclick='tw.twcontainer.lessOne({msgid:\""+j+"\",THIS:this});' title='收起'><b><i class='sign signArr6_act'><q>&#9671;</q><q class='k2'>&#215;</q></i></b></a>");var s=r.data;var p=b.getSearchKeywords(n);n.html(s).append(q);tw.pcache.set(j+"_ugc_more",n.html())}})}kola("newt.service.StatisticService",function(p){p.log("newt_msg_detail","click",{page:location.href,twiId:j})})},lessOne:function(j){var k=d(j.THIS).parent();var m=d(j.THIS).closest("div.twi");var l=tw.pcache.get(j.msgid+"_ugc_less");if(m.length>0&&!d.cr.inViewport(m)){CRTWCONFIG.SCROLL_DOM.scrollTo(m,200,{axis:"y",offset:-50})}k.html(l)},delOne:function(j){d("#"+j+"_con").fadeOut(500,function(){d(this).remove()})},filter:function(k,l){var j=l;d(k).each(function(n){var p=d(this).eq(n);var m=parseInt(p.attr("id").replace("_con",""),10);if(m<=j){p.remove()}else{j=m}});return k},addSilence:function(k){var j=f.filter(d(k),f.getLastMsgId());if(f.container.children("div.twi_new:hidden").length==0){d(j.get(-1)).addClass("twi_new")}j.hide().prependTo(f.container)},showSilenceTw:function(){f.container.children("div.twi_new:visible").removeClass("twi_new");var j=f.container.children("div.twi:hidden").show();f.bindHover(j);tw.media.init(j);tw.imgloader.scan(f.container)},getNodisTwsNum:function(){return f.container.children("div.twi:hidden").length},isLoading:false,loadPgDone:function(){f.win.unbind("scroll",f.lzyLoad).unbind("size",f.lzyLoad);f.pgBtn.addClass("noDis");d.cr.event.send("tw_timeline_lazyload_done")},load:function(l,k){if(f.isLoading){return}f.isLoading=true;f.pgBtn.removeClass("noDis");if(!f.lzy){f.lzy=1;kola("newt.twitter.Twitter",function(){tw.build({type:"get_timeline_subpg",pagesize:k||20,BeginMsgId:window.BeginMsgId||1,success:function(m){f.lzy=0;clearTimeout(f.lzyTimer);if(m.getBody()){f.subPageCache=d("<div>"+m.getBody()+"</div>");m.setAfterload()}l()},error:function(){f.removeLoading(true)}})});var j=function(){f.lzy=0;f.loadPgDone()};f.lzyTimer=setTimeout(j,17000)}},loadFromLocal:function(){if(!f.subPageCache.length){f.loadPgDone();return false}f.removeLoading();var k=f.subPageCache;if(k){var j=k.children("div.twi");f.bindHover(j);f.pgBtn.before(j);tw.imgloader.scan(f.container);tw.media.init(f.opts.container);f.subPageCache="";f.subPageIndex+=1}else{f.loadPgDone()}},loadOnce:function(){f.load(function(){var k=f.subPageCache.length;for(var j=0;j<k;j++){f.loadFromLocal()}f.loadPgDone()})},_lzyLoad:function(){if(!f||!f.pgBtn.html()){return}var l=f.scDm.scrollTop(),k=l+f.loadHg,j=f.pgBtn.offset().top;if(j<k){if(f.subPageIndex>f.subPageMax){f.scDm.unbind("scroll.lzy");f.win.unbind("resize.lzy");f.pgBtn.addClass("noDis");f.container.find("div.twiLoad").removeClass("noDis").unbind("click").bind("click",function(){f.pgBtn.data("lazy_click",1);f.load(f.loadFromLocal,20);d(this).addClass("noDis")})}else{f.load(f.loadFromLocal,20);if(f.subPageIndex==f.subPageMax){f.pgBtn.addClass("noDis")}}if(!f.ld_cc){f.ld_cc=1;kola("newt.ca.ca",function(){CA.q("newt_timeline_loading")})}}},lzyLoad:function(){if(!f){return}if(f.timer>0){clearTimeout(f.timer);f.timer=0}f.timer=setTimeout(f._lzyLoad,100)},initLazy:function(){f.win=d(window);f.timer=0;f.loadHg=1500;f.pgBtn=f.container.find("div.loading").removeClass("noDis");if(f.pgBtn.length==0){return false}if(f.container.find("div.noCnt").length>0){f.pgBtn.addClass("noDis");return}f.lzy=0;f.lzyTimer=0;f.subPgIndex=0;if(!d.cr.browser.ipad&&!CRTWCONFIG.LAZYLOAD_ONCE){f.scDm.bind("scroll.lzy",f.lzyLoad).bind("resize.lzy",f.lzyLoad);f.lzyLoad()}else{f.pgBtn.addClass("noDis");var k=f.container.find("div.twiLoad"),j=function(){f.pgBtn.data("lazy_click",1);f.load(f.loadFromLocal,20);k.addClass("noDis")};k.removeClass("noDis").unbind("click").bind("click",j);setTimeout(j,1200)}},removeLoading:function(j){j=j||false;if(f.container.children("div.noCnt").length==1||j){f.scDm.unbind("scroll.lzy");f.win.unbind("resize.lzy");f.pgBtn.addClass("noDis");f.container.children("div.twiLoad").unbind("click").addClass("noDis")}if(f.pgBtn.data("lazy_click")==1){f.pgBtn.addClass("noDis");f.container.children("div.twiLoad").removeClass("noDis")}f.isLoading=false},_disableOne:function(j){return false;d(j).find("a.re_tweet").attr("onclick","return false;").addClass("dis");d(j).find("div.cmts label.cbox").hide()},disableAt:function(j){return false;if(typeof UID!="undefined"){d(j).find("div.twi").each(function(){if(d(this).find("p.avt").attr("ref")==UID){f._disableOne(this)}})}},destory:function(){f.scDm.unbind("scroll.lzy");f.win.unbind("resize.lzy");f=null}});window.tw=window.tw||{};if(typeof tw.ticketView=="undefined"){kola("newt.timeline.vote.View",function(){})}try{if(typeof tw.twcontainer!="undefined"){tw.twcontainer.destory()}}catch(h){}tw.twcontainer=f;tw.media.init(f.opts.container);tw.imgloader.scan(f.container);if(CRTWCONFIG.SUB_PG){f.initLazy()}kola(["newt.map.Map","newt.twitter.Twitter","newt.reply.Reply","newt.fav.Fav"],function(){});window.setTimeout(function(){if(location.hash=="#/home"){var j=d("#t-timeline");j.find("b").text(j.attr("data-menu-title"));d("#t-comp-group").children("a.selected").removeClass("selected");d("#t-comp-group").children("a:first").addClass("selected")}},100);f.container.mousedown(function(k){var n=d(k.target);var m=(function(){var q=d(n).closest(".ugc a");var p=q.attr("href");return q.length>0&&p.indexOf("http:")!=-1})();if(!m){return}var o=(function(){var p=n.closest("div.twiRoot");if(p.length>0){return p}return n.closest("div.twi")})();if(o.length>0){var l=o.attr("id").replace(/_con$|_0$/g,"");var j=n.attr("href");c.log("newt_ugc","click_short_lnk",{msgid:l,url:j})}});f.container.mouseup(function(l){var n=d(l.target);var k=d(n).closest(".ugc").length>0;if(!k){return}var j=(function(){var p=(document.selection?document.selection.createRange().text:document.getSelection().toString());return p.replace(/^\s+/g,"").replace(/\s+$/g,"")})();if(!j){return}var o=(function(){var p=n.closest("div.twiRoot");if(p.length>0){return p}return n.closest("div.twi")})();if(o.length>0){var m=o.attr("id").replace(/_con$|_0$/g,"");c.log("newt_ugc","select_text",{msgid:m})}})};return a});kola("newt.component.Search",["newt.lib.dateFormat","newt.widget.plus.Input","newt.component.SearchSuggest","newt.ca.ca"],function(c,d,b){var a=function(g){var f=this;f.search=$("#"+g.searchDivId);f.searchInupt=f.search.find('input[data-tx="1"]');f.searchIcon=f.search.find('a[data-bn="1"]');f.advancedSearch=$("#"+g.advancedDivId);f.adSearchButton=f.advancedSearch.find('[data-bn="1"]');f.adSearchInput=f.advancedSearch.find('input[name="key"]');f.url=g.url;f.canvas=g.canvas||"t-user";f.status=0;$.extend(f,{init:function(){this.bindToggleEvent();this.initDate();this.bindSearchButtonEvents();this.checkButton();window.setTimeout(function(){f.initSearchInput()},0)},initDate:function(){var h=new c().date(new Date(),"yyyy-MM-dd");var j=f.advancedSearch;j.find('input[name="start_time"]').attr("placeholder","选择时间");j.find('input[name="end_time"]').attr("value",h);j.find(".frmC .time").parent().append('<p class="frmTip time_err"> <i class="i"></i> <b>开始日期不能大于结束日期</b></p>')},initSearchInput:function(){var l=this;var h=f.searchInupt;var k=f.adSearchInput;var j=(window.currentLocation&&window.currentLocation=="profile");this.initSearchSuggest(h,{groupSize:(j?10:3),searchRange:(j?"weibo":"weibo|my-follow")});h.bind("keyup",function(n){if(n.keyCode==13){var m=($(this).attr("data-has-handle-keydown")=="true");if(!m&&this.value){l.sendSearchReq()}$(this).attr("data-has-handle-keydown","false")}});this.initSearchSuggest(k,{groupSize:10,searchRange:"weibo"});k.bind("keyup",function(o){if(o.keyCode==13){var m=l.adSearchButton;var p=!m.hasClass("btn_dis");var n=($(this).attr("data-has-handle-keydown")=="true");if(!n&&p){l.sendAdSearchReq()}$(this).attr("data-has-handle-keydown","false")}else{l.checkAdvancedData()}});d.INIT_PLACEHOLDER({input:h});d.INIT_PLACEHOLDER({input:k})},bindSearchButtonEvents:function(){var k=this.adSearchButton;var h=this.searchIcon;var j=this;h.bind("click",j.sendSearchReq);k.bind("click",function(){var l=!$(this).hasClass("btn_dis");if(l){j.sendAdSearchReq()}})},initSearchSuggest:function(j,h){new b($.extend({input:j,handlerScope:this,showGroupTitle:false,onSuggestSelected:this.onSuggestSelected},h))},onSuggestSelected:function(k){var j=k.type;if(j!="suggest-item"){return}var m=k.group;var l=k.target;var h=$(l).attr("data-url");var n=(this.searchIcon.is(":visible")?this.searchIcon:this.adSearchButton);if(m=="weibo"){n.trigger("click")}else{window.setTimeout(function(){window.location.href=h},0)}},checkAdvancedData:function(){var j=f.advancedSearch.find('input[name="start_time"]').attr("value"),m=f.advancedSearch.find('input[name="end_time"]').attr("value"),k=f.toDate(j),p=f.toDate(m),n=f.advancedSearch.find(".time_err"),o=f.advancedSearch.find('input[name="key"]'),q=o.attr("value"),l=f.adSearchButton,h=true;if(!q.replace(/\s*/g,"")||k>p||o.hasClass("blur")){f.status=0;h=false}else{f.status=1}if(k>p){n.show();h=false}else{n.hide()}if(h){$(l).removeClass("btn_dis")}else{$(l).addClass("btn_dis")}},sendAdSearchReq:function(){var n=f.advancedSearch.find(":checkbox"),k=f.advancedSearch.find('input[name="key"]').attr("value"),l=f.advancedSearch.find('input[name="start_time"]').attr("value"),h=f.advancedSearch.find('input[name="end_time"]').attr("value"),o=$("#t-timeline").attr("href"),m=((typeof o=="undefined"||$("#t-timeline").text()=="全部分组")?-1:o.indexOf("group")),p="";k=encodeURIComponent(encodeURIComponent(k));p+="key="+k+"&end_time="+h+"&start_time="+((l==""||l=="选择时间")?"2009-12-01":l)+(m==-1?"":("&"+o.substr(m)));p+=f.getPeople();for(var j=0;j<n.length;j++){if(n.get(j).checked){p+="&"+n.eq(j).attr("name")+"=1"}}f.ajaxRequest(p);CA.q("click_advanced_search_in_"+f.canvas)},sendSearchReq:function(){var l=f.search.find("ul li .tab"),k=f.search.find("input").attr("value"),n=$("#t-timeline").attr("href"),m=((typeof n=="undefined"||$("#t-timeline").text()=="全部分组")?-1:n.indexOf("group")),p="",o="";if(!k.replace(/\s*/g,"")){return}k=encodeURIComponent(encodeURIComponent(k));o=("key="+k+(m==-1?"":("&"+n.substr(m))));o+=f.getPeople();for(var j=0,h=l.length;j<h;j++){if(l.eq(j).hasClass("on")){p=l.eq(j).text();switch(p){case"全部":break;case"原创":o+="&is_ori=1";break;case"转发":o+="&is_forward=1";break;case"图片":o+="&is_pic=1";break;case"视频":o+="&is_video=1";break}}l.eq(j).attr("href","javascript:void(0)").unbind().bind("click",function(){f.search.find("ul li .on").removeClass("on");$(this).addClass("on");f.sendSearchReq()})}f.ajaxRequest(o);CA.q("click_search_in_"+f.canvas)},bindToggleEvent:function(){f.search.find('a[class="fuc"]').unbind().bind("click",f.toggleAdvancedPanel);f.advancedSearch.find('a[class="close"]').unbind().bind("click",f.toggleAdvancedPanel)},toggleAdvancedPanel:function(){var m=f.search;var o=f.advancedSearch;var n=m.find('input[data-tx="1"]');var l=o.find("input[name=key]");var h,k,p,j;if(n[0].offsetWidth>0){h=l;k=n}else{h=n;k=l}j=k.val();p=k.attr("placeholder");if(j&&j!=p){h.val(j)}f.checkAdvancedData();m.toggleClass("noDis");o.toggleClass("noDis");if(typeof $dp=="undefined"){kola("newt.widget.DatePicker",function(q){q();WdatePicker()})}f.bindDatePicker();CA.q("toggle_advanced_search_in_"+f.canvas)},bindDatePicker:function(){f.advancedSearch.find('input[name="start_time"]').unbind().bind("click",f.dateEvent);f.advancedSearch.find('input[name="end_time"]').unbind().bind("click",f.dateEvent)},dateEvent:function(){var h=new c().date(new Date(),"yyyy-MM-dd");WdatePicker({dateFmt:"yyyy-MM-dd",maxDate:h,minDate:"2009-12-01",onpicked:f.checkAdvancedData})},ajaxRequest:function(h){$.ajax({type:"get",url:"http://"+window.location.host+f.url,data:h,dataType:"json",cache:false,beforeSend:function(){f._startLoading()},success:function(j){$("#"+f.canvas+" .hasCnt").parent().remove();$("#"+f.canvas+" .stream").replaceWith(j.data.body);kola("newt.timeline.Container",function(k){new k({container:"#twitter_container_u"})});f.parseATab();f._endLoading()}})},checkButton:function(){var h=this.adSearchButton;if(!f.status){h.addClass("btn_dis");h.unbind("click",f.sendAdSearchReq)}else{h.removeClass("btn_dis");h.unbind("click",f.sendAdSearchReq).bind("click",f.sendAdSearchReq)}},toDate:function(j){if(j==""||j=="选择时间"){return 0}var k=j.split("-"),h=new Date(k[0],k[1],k[2]);return Number(h)},getPeople:function(){if(f.canvas!="t-people"){return""}return"&uid="+LOOKEDUSER.id},_startLoading:function(){var h=$("#search_loading");$("#"+f.canvas+" .hasCnt").parent().remove();$("#"+f.canvas+" .stream").empty();$("#"+f.canvas+" .noticeWrap").remove();if(h.length==0){$("#"+f.canvas+" .stream").before('<div class="loading" id="search_loading"> <i title="iLoading" class="i iLoading"></i> 加载中...</div>')}else{h.removeClass("noDis")}},_endLoading:function(){$("#search_loading").remove()},parseATab:function(){$("#twitter_container_u").find(".page a").each(function(){var h=$(this);if(h.hasClass("dis")){return}h.attr("data-href",h.attr("href"));h.attr("href","javascript:void(0)");h.bind("click",f.nextPage)})},nextPage:function(){var j=$(this).attr("data-href"),h=j.substr(j.indexOf("?")+1);f.ajaxRequest(h);$("#gotoTop").getCrControl("crGoTop").goSomewhere($("#t-user .tabs ul"),-35)}})};return a});
/*!
 * jQuery JavaScript Library v1.6.1
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu May 12 15:04:36 2011 -0400
 */
kola("jquery.Core",null,function(){(function(bf,O){var av=bf.document,bx=bf.navigator,bo=bf.location;var b=(function(){var bI=function(b2,b3){return new bI.fn.init(b2,b3,bG)},bX=bf.jQuery,bK=bf.$,bG,b1=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bQ=/\S/,bM=/^\s+/,bH=/\s+$/,bL=/\d/,bE=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bR=/^[\],:{}\s]*$/,bZ=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bT=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bN=/(?:^|:|,)(?:\s*\[)+/g,bC=/(webkit)[ \/]([\w.]+)/,bV=/(opera)(?:.*version)?[ \/]([\w.]+)/,bU=/(msie) ([\w.]+)/,bW=/(mozilla)(?:.*? rv:([\w.]+))?/,b0=bx.userAgent,bY,bF,by,bP=Object.prototype.toString,bJ=Object.prototype.hasOwnProperty,bD=Array.prototype.push,bO=Array.prototype.slice,bS=String.prototype.trim,bz=Array.prototype.indexOf,bB={};bI.fn=bI.prototype={constructor:bI,init:function(b2,b6,b5){var b4,b7,b3,b8;if(!b2){return this}if(b2.nodeType){this.context=this[0]=b2;this.length=1;return this}if(b2==="body"&&!b6&&av.body){this.context=av;this[0]=av.body;this.selector=b2;this.length=1;return this}if(typeof b2==="string"){if(b2.charAt(0)==="<"&&b2.charAt(b2.length-1)===">"&&b2.length>=3){b4=[null,b2,null]}else{b4=b1.exec(b2)}if(b4&&(b4[1]||!b6)){if(b4[1]){b6=b6 instanceof bI?b6[0]:b6;b8=(b6?b6.ownerDocument||b6:av);b3=bE.exec(b2);if(b3){if(bI.isPlainObject(b6)){b2=[av.createElement(b3[1])];bI.fn.attr.call(b2,b6,true)}else{b2=[b8.createElement(b3[1])]}}else{b3=bI.buildFragment([b4[1]],[b8]);b2=(b3.cacheable?bI.clone(b3.fragment):b3.fragment).childNodes}return bI.merge(this,b2)}else{b7=av.getElementById(b4[2]);if(b7&&b7.parentNode){if(b7.id!==b4[2]){return b5.find(b2)}this.length=1;this[0]=b7}this.context=av;this.selector=b2;return this}}else{if(!b6||b6.jquery){return(b6||b5).find(b2)}else{return this.constructor(b6).find(b2)}}}else{if(bI.isFunction(b2)){return b5.ready(b2)}}if(b2.selector!==O){this.selector=b2.selector;this.context=b2.context}return bI.makeArray(b2,this)},selector:"",jquery:"1.6.1",length:0,size:function(){return this.length},toArray:function(){return bO.call(this,0)},get:function(b2){return b2==null?this.toArray():(b2<0?this[this.length+b2]:this[b2])},pushStack:function(b3,b5,b2){var b4=this.constructor();if(bI.isArray(b3)){bD.apply(b4,b3)}else{bI.merge(b4,b3)}b4.prevObject=this;b4.context=this.context;if(b5==="find"){b4.selector=this.selector+(this.selector?" ":"")+b2}else{if(b5){b4.selector=this.selector+"."+b5+"("+b2+")"}}return b4},each:function(b3,b2){return bI.each(this,b3,b2)},ready:function(b2){bI.bindReady();bF.done(b2);return this},eq:function(b2){return b2===-1?this.slice(b2):this.slice(b2,+b2+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bO.apply(this,arguments),"slice",bO.call(arguments).join(","))},map:function(b2){return this.pushStack(bI.map(this,function(b4,b3){return b2.call(b4,b3,b4)}))},end:function(){return this.prevObject||this.constructor(null)},push:bD,sort:[].sort,splice:[].splice};bI.fn.init.prototype=bI.fn;bI.extend=bI.fn.extend=function(){var cb,b4,b2,b3,b8,b9,b7=arguments[0]||{},b6=1,b5=arguments.length,ca=false;if(typeof b7==="boolean"){ca=b7;b7=arguments[1]||{};b6=2}if(typeof b7!=="object"&&!bI.isFunction(b7)){b7={}}if(b5===b6){b7=this;--b6}for(;b6<b5;b6++){if((cb=arguments[b6])!=null){for(b4 in cb){b2=b7[b4];b3=cb[b4];if(b7===b3){continue}if(ca&&b3&&(bI.isPlainObject(b3)||(b8=bI.isArray(b3)))){if(b8){b8=false;b9=b2&&bI.isArray(b2)?b2:[]}else{b9=b2&&bI.isPlainObject(b2)?b2:{}}b7[b4]=bI.extend(ca,b9,b3)}else{if(b3!==O){b7[b4]=b3}}}}}return b7};bI.extend({noConflict:function(b2){if(bf.$===bI){bf.$=bK}if(b2&&bf.jQuery===bI){bf.jQuery=bX}return bI},isReady:false,readyWait:1,holdReady:function(b2){if(b2){bI.readyWait++}else{bI.ready(true)}},ready:function(b2){if((b2===true&&!--bI.readyWait)||(b2!==true&&!bI.isReady)){if(!av.body){return setTimeout(bI.ready,1)}bI.isReady=true;if(b2!==true&&--bI.readyWait>0){return}bF.resolveWith(av,[bI]);if(bI.fn.trigger){bI(av).trigger("ready").unbind("ready")}}},bindReady:function(){if(bF){return}bF=bI._Deferred();if(av.readyState==="complete"){return setTimeout(bI.ready,1)}if(av.addEventListener){av.addEventListener("DOMContentLoaded",by,false);bf.addEventListener("load",bI.ready,false)}else{if(av.attachEvent){av.attachEvent("onreadystatechange",by);bf.attachEvent("onload",bI.ready);var b2=false;try{b2=bf.frameElement==null}catch(b3){}if(av.documentElement.doScroll&&b2){bA()}}}},isFunction:function(b2){return bI.type(b2)==="function"},isArray:Array.isArray||function(b2){return bI.type(b2)==="array"},isWindow:function(b2){return b2&&typeof b2==="object"&&"setInterval" in b2},isNaN:function(b2){return b2==null||!bL.test(b2)||isNaN(b2)},type:function(b2){return b2==null?String(b2):bB[bP.call(b2)]||"object"},isPlainObject:function(b3){if(!b3||bI.type(b3)!=="object"||b3.nodeType||bI.isWindow(b3)){return false}if(b3.constructor&&!bJ.call(b3,"constructor")&&!bJ.call(b3.constructor.prototype,"isPrototypeOf")){return false}var b2;for(b2 in b3){}return b2===O||bJ.call(b3,b2)},isEmptyObject:function(b3){for(var b2 in b3){return false}return true},error:function(b2){throw b2},parseJSON:function(b2){if(typeof b2!=="string"||!b2){return null}b2=bI.trim(b2);if(bf.JSON&&bf.JSON.parse){return bf.JSON.parse(b2)}if(bR.test(b2.replace(bZ,"@").replace(bT,"]").replace(bN,""))){return(new Function("return "+b2))()}bI.error("Invalid JSON: "+b2)},parseXML:function(b4,b2,b3){if(bf.DOMParser){b3=new DOMParser();b2=b3.parseFromString(b4,"text/xml")}else{b2=new ActiveXObject("Microsoft.XMLDOM");b2.async="false";b2.loadXML(b4)}b3=b2.documentElement;if(!b3||!b3.nodeName||b3.nodeName==="parsererror"){bI.error("Invalid XML: "+b4)}return b2},noop:function(){},globalEval:function(b2){if(b2&&bQ.test(b2)){(bf.execScript||function(b3){bf["eval"].call(bf,b3)})(b2)}},nodeName:function(b3,b2){return b3.nodeName&&b3.nodeName.toUpperCase()===b2.toUpperCase()},each:function(b5,b8,b4){var b3,b6=0,b7=b5.length,b2=b7===O||bI.isFunction(b5);if(b4){if(b2){for(b3 in b5){if(b8.apply(b5[b3],b4)===false){break}}}else{for(;b6<b7;){if(b8.apply(b5[b6++],b4)===false){break}}}}else{if(b2){for(b3 in b5){if(b8.call(b5[b3],b3,b5[b3])===false){break}}}else{for(;b6<b7;){if(b8.call(b5[b6],b6,b5[b6++])===false){break}}}}return b5},trim:bS?function(b2){return b2==null?"":bS.call(b2)}:function(b2){return b2==null?"":b2.toString().replace(bM,"").replace(bH,"")},makeArray:function(b5,b3){var b2=b3||[];if(b5!=null){var b4=bI.type(b5);if(b5.length==null||b4==="string"||b4==="function"||b4==="regexp"||bI.isWindow(b5)){bD.call(b2,b5)}else{bI.merge(b2,b5)}}return b2},inArray:function(b4,b5){if(bz){return bz.call(b5,b4)}for(var b2=0,b3=b5.length;b2<b3;b2++){if(b5[b2]===b4){return b2}}return -1},merge:function(b6,b4){var b5=b6.length,b3=0;if(typeof b4.length==="number"){for(var b2=b4.length;b3<b2;b3++){b6[b5++]=b4[b3]}}else{while(b4[b3]!==O){b6[b5++]=b4[b3++]}}b6.length=b5;return b6},grep:function(b3,b8,b2){var b4=[],b7;b2=!!b2;for(var b5=0,b6=b3.length;b5<b6;b5++){b7=!!b8(b3[b5],b5);if(b2!==b7){b4.push(b3[b5])}}return b4},map:function(b2,b9,ca){var b7,b8,b6=[],b4=0,b3=b2.length,b5=b2 instanceof bI||b3!==O&&typeof b3==="number"&&((b3>0&&b2[0]&&b2[b3-1])||b3===0||bI.isArray(b2));if(b5){for(;b4<b3;b4++){b7=b9(b2[b4],b4,ca);if(b7!=null){b6[b6.length]=b7}}}else{for(b8 in b2){b7=b9(b2[b8],b8,ca);if(b7!=null){b6[b6.length]=b7}}}return b6.concat.apply([],b6)},guid:1,proxy:function(b6,b5){if(typeof b5==="string"){var b4=b6[b5];b5=b6;b6=b4}if(!bI.isFunction(b6)){return O}var b2=bO.call(arguments,2),b3=function(){return b6.apply(b5,b2.concat(bO.call(arguments)))};b3.guid=b6.guid=b6.guid||b3.guid||bI.guid++;return b3},access:function(b2,ca,b8,b4,b7,b9){var b3=b2.length;if(typeof ca==="object"){for(var b5 in ca){bI.access(b2,b5,ca[b5],b4,b7,b8)}return b2}if(b8!==O){b4=!b9&&b4&&bI.isFunction(b8);for(var b6=0;b6<b3;b6++){b7(b2[b6],ca,b4?b8.call(b2[b6],b6,b7(b2[b6],ca)):b8,b9)}return b2}return b3?b7(b2[0],ca):O},now:function(){return(new Date()).getTime()},uaMatch:function(b3){b3=b3.toLowerCase();var b2=bC.exec(b3)||bV.exec(b3)||bU.exec(b3)||b3.indexOf("compatible")<0&&bW.exec(b3)||[];return{browser:b2[1]||"",version:b2[2]||"0"}},sub:function(){function b2(b5,b6){return new b2.fn.init(b5,b6)}bI.extend(true,b2,this);b2.superclass=this;b2.fn=b2.prototype=this();b2.fn.constructor=b2;b2.sub=this.sub;b2.fn.init=function b4(b5,b6){if(b6&&b6 instanceof bI&&!(b6 instanceof b2)){b6=b2(b6)}return bI.fn.init.call(this,b5,b6,b3)};b2.fn.init.prototype=b2.fn;var b3=b2(av);return b2},browser:{}});bI.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b3,b2){bB["[object "+b2+"]"]=b2.toLowerCase()});bY=bI.uaMatch(b0);if(bY.browser){bI.browser[bY.browser]=true;bI.browser.version=bY.version}if(bI.browser.webkit){bI.browser.safari=true}if(bQ.test("\xA0")){bM=/^[\s\xA0]+/;bH=/[\s\xA0]+$/}bG=bI(av);if(av.addEventListener){by=function(){av.removeEventListener("DOMContentLoaded",by,false);bI.ready()}}else{if(av.attachEvent){by=function(){if(av.readyState==="complete"){av.detachEvent("onreadystatechange",by);bI.ready()}}}}function bA(){if(bI.isReady){return}try{av.documentElement.doScroll("left")}catch(b2){setTimeout(bA,1);return}bI.ready()}return bI})();var a="done fail isResolved isRejected promise then always pipe".split(" "),aK=[].slice;b.extend({_Deferred:function(){var bB=[],bC,bz,bA,by={done:function(){if(!bA){var bE=arguments,bF,bI,bH,bG,bD;if(bC){bD=bC;bC=0}for(bF=0,bI=bE.length;bF<bI;bF++){bH=bE[bF];bG=b.type(bH);if(bG==="array"){by.done.apply(by,bH)}else{if(bG==="function"){bB.push(bH)}}}if(bD){by.resolveWith(bD[0],bD[1])}}return this},resolveWith:function(bE,bD){if(!bA&&!bC&&!bz){bD=bD||[];bz=1;try{while(bB[0]){bB.shift().apply(bE,bD)}}catch(bF){}finally{bC=[bE,bD];bz=0}}return this},resolve:function(){by.resolveWith(this,arguments);return this},isResolved:function(){return !!(bz||bC)},cancel:function(){bA=1;bB=[];return this}};return by},Deferred:function(bz){var by=b._Deferred(),bB=b._Deferred(),bA;b.extend(by,{then:function(bD,bC){by.done(bD).fail(bC);return this},always:function(){return by.done.apply(by,arguments).fail.apply(this,arguments)},fail:bB.done,rejectWith:bB.resolveWith,reject:bB.resolve,isRejected:bB.isResolved,pipe:function(bD,bC){return b.Deferred(function(bE){b.each({done:[bD,"resolve"],fail:[bC,"reject"]},function(bG,bJ){var bF=bJ[0],bI=bJ[1],bH;if(b.isFunction(bF)){by[bG](function(){bH=bF.apply(this,arguments);if(bH&&b.isFunction(bH.promise)){bH.promise().then(bE.resolve,bE.reject)}else{bE[bI](bH)}})}else{by[bG](bE[bI])}})}).promise()},promise:function(bD){if(bD==null){if(bA){return bA}bA=bD={}}var bC=a.length;while(bC--){bD[a[bC]]=by[a[bC]]}return bD}});by.done(bB.cancel).fail(by.cancel);delete by.cancel;if(bz){bz.call(by,by)}return by},when:function(bE){var bz=arguments,bA=0,bD=bz.length,bC=bD,by=bD<=1&&bE&&b.isFunction(bE.promise)?bE:b.Deferred();function bB(bF){return function(bG){bz[bF]=arguments.length>1?aK.call(arguments,0):bG;if(!(--bC)){by.resolveWith(by,aK.call(bz,0))}}}if(bD>1){for(;bA<bD;bA++){if(bz[bA]&&b.isFunction(bz[bA].promise)){bz[bA].promise().then(bB(bA),by.reject)}else{--bC}}if(!bC){by.resolveWith(by,bz)}}else{if(by!==bE){by.resolveWith(by,bD?[bE]:[])}}return by.promise()}});b.support=(function(){var bI=av.createElement("div"),bO=av.documentElement,bC,bP,bJ,bA,bH,bD,bF,bz,bG,by,bL,bB,bE,bM,bQ;bI.setAttribute("className","t");bI.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bC=bI.getElementsByTagName("*");bP=bI.getElementsByTagName("a")[0];if(!bC||!bC.length||!bP){return{}}bJ=av.createElement("select");bA=bJ.appendChild(av.createElement("option"));bH=bI.getElementsByTagName("input")[0];bF={leadingWhitespace:(bI.firstChild.nodeType===3),tbody:!bI.getElementsByTagName("tbody").length,htmlSerialize:!!bI.getElementsByTagName("link").length,style:/top/.test(bP.getAttribute("style")),hrefNormalized:(bP.getAttribute("href")==="/a"),opacity:/^0.55$/.test(bP.style.opacity),cssFloat:!!bP.style.cssFloat,checkOn:(bH.value==="on"),optSelected:bA.selected,getSetAttribute:bI.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bH.checked=true;bF.noCloneChecked=bH.cloneNode(true).checked;bJ.disabled=true;bF.optDisabled=!bA.disabled;try{delete bI.test}catch(bN){bF.deleteExpando=false}if(!bI.addEventListener&&bI.attachEvent&&bI.fireEvent){bI.attachEvent("onclick",function bK(){bF.noCloneEvent=false;bI.detachEvent("onclick",bK)});bI.cloneNode(true).fireEvent("onclick")}bH=av.createElement("input");bH.value="t";bH.setAttribute("type","radio");bF.radioValue=bH.value==="t";bH.setAttribute("checked","checked");bI.appendChild(bH);bz=av.createDocumentFragment();bz.appendChild(bI.firstChild);bF.checkClone=bz.cloneNode(true).cloneNode(true).lastChild.checked;bI.innerHTML="";bI.style.width=bI.style.paddingLeft="1px";bG=av.createElement("body");by={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(bM in by){bG.style[bM]=by[bM]}bG.appendChild(bI);bO.insertBefore(bG,bO.firstChild);bF.appendChecked=bH.checked;bF.boxModel=bI.offsetWidth===2;if("zoom" in bI.style){bI.style.display="inline";bI.style.zoom=1;bF.inlineBlockNeedsLayout=(bI.offsetWidth===2);bI.style.display="";bI.innerHTML="<div style='width:4px;'></div>";bF.shrinkWrapBlocks=(bI.offsetWidth!==2)}bI.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bL=bI.getElementsByTagName("td");bQ=(bL[0].offsetHeight===0);bL[0].style.display="";bL[1].style.display="none";bF.reliableHiddenOffsets=bQ&&(bL[0].offsetHeight===0);bI.innerHTML="";if(av.defaultView&&av.defaultView.getComputedStyle){bD=av.createElement("div");bD.style.width="0";bD.style.marginRight="0";bI.appendChild(bD);bF.reliableMarginRight=(parseInt((av.defaultView.getComputedStyle(bD,null)||{marginRight:0}).marginRight,10)||0)===0}bG.innerHTML="";bO.removeChild(bG);if(bI.attachEvent){for(bM in {submit:1,change:1,focusin:1}){bE="on"+bM;bQ=(bE in bI);if(!bQ){bI.setAttribute(bE,"return;");bQ=(typeof bI[bE]==="function")}bF[bM+"Bubbles"]=bQ}}return bF})();b.boxModel=b.support.boxModel;var aR=/^(?:\{.*\}|\[.*\])$/,aA=/([a-z])([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(by){by=by.nodeType?b.cache[by[b.expando]]:by[b.expando];return !!by&&!X(by)},data:function(bB,bz,bD,bC){if(!b.acceptData(bB)){return}var bG=b.expando,bF=typeof bz==="string",bE,bH=bB.nodeType,by=bH?b.cache:bB,bA=bH?bB[b.expando]:bB[b.expando]&&b.expando;if((!bA||(bC&&bA&&!by[bA][bG]))&&bF&&bD===O){return}if(!bA){if(bH){bB[b.expando]=bA=++b.uuid}else{bA=b.expando}}if(!by[bA]){by[bA]={};if(!bH){by[bA].toJSON=b.noop}}if(typeof bz==="object"||typeof bz==="function"){if(bC){by[bA][bG]=b.extend(by[bA][bG],bz)}else{by[bA]=b.extend(by[bA],bz)}}bE=by[bA];if(bC){if(!bE[bG]){bE[bG]={}}bE=bE[bG]}if(bD!==O){bE[b.camelCase(bz)]=bD}if(bz==="events"&&!bE[bz]){return bE[bG]&&bE[bG].events}return bF?bE[b.camelCase(bz)]:bE},removeData:function(bC,bA,bD){if(!b.acceptData(bC)){return}var bF=b.expando,bG=bC.nodeType,bz=bG?b.cache:bC,bB=bG?bC[b.expando]:b.expando;if(!bz[bB]){return}if(bA){var bE=bD?bz[bB][bF]:bz[bB];if(bE){delete bE[bA];if(!X(bE)){return}}}if(bD){delete bz[bB][bF];if(!X(bz[bB])){return}}var by=bz[bB][bF];if(b.support.deleteExpando||bz!=bf){delete bz[bB]}else{bz[bB]=null}if(by){bz[bB]={};if(!bG){bz[bB].toJSON=b.noop}bz[bB][bF]=by}else{if(bG){if(b.support.deleteExpando){delete bC[b.expando]}else{if(bC.removeAttribute){bC.removeAttribute(b.expando)}else{bC[b.expando]=null}}}}},_data:function(bz,by,bA){return b.data(bz,by,bA,true)},acceptData:function(bz){if(bz.nodeName){var by=b.noData[bz.nodeName.toLowerCase()];if(by){return !(by===true||bz.getAttribute("classid")!==by)}}return true}});b.fn.extend({data:function(bC,bE){var bD=null;if(typeof bC==="undefined"){if(this.length){bD=b.data(this[0]);if(this[0].nodeType===1){var by=this[0].attributes,bA;for(var bB=0,bz=by.length;bB<bz;bB++){bA=by[bB].name;if(bA.indexOf("data-")===0){bA=b.camelCase(bA.substring(5));a8(this[0],bA,bD[bA])}}}}return bD}else{if(typeof bC==="object"){return this.each(function(){b.data(this,bC)})}}var bF=bC.split(".");bF[1]=bF[1]?"."+bF[1]:"";if(bE===O){bD=this.triggerHandler("getData"+bF[1]+"!",[bF[0]]);if(bD===O&&this.length){bD=b.data(this[0],bC);bD=a8(this[0],bC,bD)}return bD===O&&bF[1]?this.data(bF[0]):bD}else{return this.each(function(){var bH=b(this),bG=[bF[0],bE];bH.triggerHandler("setData"+bF[1]+"!",bG);b.data(this,bC,bE);bH.triggerHandler("changeData"+bF[1]+"!",bG)})}},removeData:function(by){return this.each(function(){b.removeData(this,by)})}});function a8(bA,bz,bB){if(bB===O&&bA.nodeType===1){var by="data-"+bz.replace(aA,"$1-$2").toLowerCase();bB=bA.getAttribute(by);if(typeof bB==="string"){try{bB=bB==="true"?true:bB==="false"?false:bB==="null"?null:!b.isNaN(bB)?parseFloat(bB):aR.test(bB)?b.parseJSON(bB):bB}catch(bC){}b.data(bA,bz,bB)}else{bB=O}}return bB}function X(bz){for(var by in bz){if(by!=="toJSON"){return false}}return true}function bk(bC,bB,bE){var bA=bB+"defer",bz=bB+"queue",by=bB+"mark",bD=b.data(bC,bA,O,true);if(bD&&(bE==="queue"||!b.data(bC,bz,O,true))&&(bE==="mark"||!b.data(bC,by,O,true))){setTimeout(function(){if(!b.data(bC,bz,O,true)&&!b.data(bC,by,O,true)){b.removeData(bC,bA,true);bD.resolve()}},0)}}b.extend({_mark:function(bz,by){if(bz){by=(by||"fx")+"mark";b.data(bz,by,(b.data(bz,by,O,true)||0)+1,true)}},_unmark:function(bC,bB,bz){if(bC!==true){bz=bB;bB=bC;bC=false}if(bB){bz=bz||"fx";var by=bz+"mark",bA=bC?0:((b.data(bB,by,O,true)||1)-1);if(bA){b.data(bB,by,bA,true)}else{b.removeData(bB,by,true);bk(bB,bz,"mark")}}},queue:function(bz,by,bB){if(bz){by=(by||"fx")+"queue";var bA=b.data(bz,by,O,true);if(bB){if(!bA||b.isArray(bB)){bA=b.data(bz,by,b.makeArray(bB),true)}else{bA.push(bB)}}return bA||[]}},dequeue:function(bB,bA){bA=bA||"fx";var by=b.queue(bB,bA),bz=by.shift(),bC;if(bz==="inprogress"){bz=by.shift()}if(bz){if(bA==="fx"){by.unshift("inprogress")}bz.call(bB,function(){b.dequeue(bB,bA)})}if(!by.length){b.removeData(bB,bA+"queue",true);bk(bB,bA,"queue")}}});b.fn.extend({queue:function(by,bz){if(typeof by!=="string"){bz=by;by="fx"}if(bz===O){return b.queue(this[0],by)}return this.each(function(){var bA=b.queue(this,by,bz);if(by==="fx"&&bA[0]!=="inprogress"){b.dequeue(this,by)}})},dequeue:function(by){return this.each(function(){b.dequeue(this,by)})},delay:function(bz,by){bz=b.fx?b.fx.speeds[bz]||bz:bz;by=by||"fx";return this.queue(by,function(){var bA=this;setTimeout(function(){b.dequeue(bA,by)},bz)})},clearQueue:function(by){return this.queue(by||"fx",[])},promise:function(bH,bA){if(typeof bH!=="string"){bA=bH;bH=O}bH=bH||"fx";var by=b.Deferred(),bz=this,bC=bz.length,bF=1,bD=bH+"defer",bE=bH+"queue",bG=bH+"mark",bB;function bI(){if(!(--bF)){by.resolveWith(bz,[bz])}}while(bC--){if((bB=b.data(bz[bC],bD,O,true)||(b.data(bz[bC],bE,O,true)||b.data(bz[bC],bG,O,true))&&b.data(bz[bC],bD,b._Deferred(),true))){bF++;bB.done(bI)}}bI();return by.promise()}});var aP=/[\n\t\r]/g,ag=/\s+/,aT=/\r/g,g=/^(?:button|input)$/i,H=/^(?:button|input|object|select|textarea)$/i,m=/^a(?:rea)?$/i,ao=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bb=/\:/,a6,a0;b.fn.extend({attr:function(by,bz){return b.access(this,by,bz,true,b.attr)},removeAttr:function(by){return this.each(function(){b.removeAttr(this,by)})},prop:function(by,bz){return b.access(this,by,bz,true,b.prop)},removeProp:function(by){by=b.propFix[by]||by;return this.each(function(){try{this[by]=O;delete this[by]}catch(bz){}})},addClass:function(bF){if(b.isFunction(bF)){return this.each(function(bI){var bH=b(this);bH.addClass(bF.call(this,bI,bH.attr("class")||""))})}if(bF&&typeof bF==="string"){var by=(bF||"").split(ag);for(var bB=0,bA=this.length;bB<bA;bB++){var bz=this[bB];if(bz.nodeType===1){if(!bz.className){bz.className=bF}else{var bC=" "+bz.className+" ",bE=bz.className;for(var bD=0,bG=by.length;bD<bG;bD++){if(bC.indexOf(" "+by[bD]+" ")<0){bE+=" "+by[bD]}}bz.className=b.trim(bE)}}}}return this},removeClass:function(bD){if(b.isFunction(bD)){return this.each(function(bH){var bG=b(this);bG.removeClass(bD.call(this,bH,bG.attr("class")))})}if((bD&&typeof bD==="string")||bD===O){var bE=(bD||"").split(ag);for(var bA=0,bz=this.length;bA<bz;bA++){var bC=this[bA];if(bC.nodeType===1&&bC.className){if(bD){var bB=(" "+bC.className+" ").replace(aP," ");for(var bF=0,by=bE.length;bF<by;bF++){bB=bB.replace(" "+bE[bF]+" "," ")}bC.className=b.trim(bB)}else{bC.className=""}}}}return this},toggleClass:function(bB,bz){var bA=typeof bB,by=typeof bz==="boolean";if(b.isFunction(bB)){return this.each(function(bD){var bC=b(this);bC.toggleClass(bB.call(this,bD,bC.attr("class"),bz),bz)})}return this.each(function(){if(bA==="string"){var bE,bD=0,bC=b(this),bF=bz,bG=bB.split(ag);while((bE=bG[bD++])){bF=by?bF:!bC.hasClass(bE);bC[bF?"addClass":"removeClass"](bE)}}else{if(bA==="undefined"||bA==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bB===false?"":b._data(this,"__className__")||""}}})},hasClass:function(by){var bB=" "+by+" ";for(var bA=0,bz=this.length;bA<bz;bA++){if((" "+this[bA].className+" ").replace(aP," ").indexOf(bB)>-1){return true}}return false},val:function(bB){var by,bz,bA=this[0];if(!arguments.length){if(bA){by=b.valHooks[bA.nodeName.toLowerCase()]||b.valHooks[bA.type];if(by&&"get" in by&&(bz=by.get(bA,"value"))!==O){return bz}return(bA.value||"").replace(aT,"")}return O}var bC=b.isFunction(bB);return this.each(function(bE){var bD=b(this),bF;if(this.nodeType!==1){return}if(bC){bF=bB.call(this,bE,bD.val())}else{bF=bB}if(bF==null){bF=""}else{if(typeof bF==="number"){bF+=""}else{if(b.isArray(bF)){bF=b.map(bF,function(bG){return bG==null?"":bG+""})}}}by=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!by||!("set" in by)||by.set(this,bF,"value")===O){this.value=bF}})}});b.extend({valHooks:{option:{get:function(by){var bz=by.attributes.value;return !bz||bz.specified?by.value:by.text}},select:{get:function(by){var bE,bC=by.selectedIndex,bF=[],bG=by.options,bB=by.type==="select-one";if(bC<0){return null}for(var bz=bB?bC:0,bD=bB?bC+1:bG.length;bz<bD;bz++){var bA=bG[bz];if(bA.selected&&(b.support.optDisabled?!bA.disabled:bA.getAttribute("disabled")===null)&&(!bA.parentNode.disabled||!b.nodeName(bA.parentNode,"optgroup"))){bE=b(bA).val();if(bB){return bE}bF.push(bE)}}if(bB&&!bF.length&&bG.length){return b(bG[bC]).val()}return bF},set:function(bz,bA){var by=b.makeArray(bA);b(bz).find("option").each(function(){this.selected=b.inArray(b(this).val(),by)>=0});if(!by.length){bz.selectedIndex=-1}return by}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(bE,bB,bF,bD){var bz=bE.nodeType;if(!bE||bz===3||bz===8||bz===2){return O}if(bD&&bB in b.attrFn){return b(bE)[bB](bF)}if(!("getAttribute" in bE)){return b.prop(bE,bB,bF)}var bA,by,bC=bz!==1||!b.isXMLDoc(bE);bB=bC&&b.attrFix[bB]||bB;by=b.attrHooks[bB];if(!by){if(ao.test(bB)&&(typeof bF==="boolean"||bF===O||bF.toLowerCase()===bB.toLowerCase())){by=a0}else{if(a6&&(b.nodeName(bE,"form")||bb.test(bB))){by=a6}}}if(bF!==O){if(bF===null){b.removeAttr(bE,bB);return O}else{if(by&&"set" in by&&bC&&(bA=by.set(bE,bF,bB))!==O){return bA}else{bE.setAttribute(bB,""+bF);return bF}}}else{if(by&&"get" in by&&bC){return by.get(bE,bB)}else{bA=bE.getAttribute(bB);return bA===null?O:bA}}},removeAttr:function(bz,by){var bA;if(bz.nodeType===1){by=b.attrFix[by]||by;if(b.support.getSetAttribute){bz.removeAttribute(by)}else{b.attr(bz,by,"");bz.removeAttributeNode(bz.getAttributeNode(by))}if(ao.test(by)&&(bA=b.propFix[by]||by) in bz){bz[bA]=false}}},attrHooks:{type:{set:function(by,bz){if(g.test(by.nodeName)&&by.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&bz==="radio"&&b.nodeName(by,"input")){var bA=by.value;by.setAttribute("type",bz);if(bA){by.value=bA}return bz}}}},tabIndex:{get:function(bz){var by=bz.getAttributeNode("tabIndex");return by&&by.specified?parseInt(by.value,10):H.test(bz.nodeName)||m.test(bz.nodeName)&&bz.href?0:O}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bD,bB,bE){var bz=bD.nodeType;if(!bD||bz===3||bz===8||bz===2){return O}var bA,by,bC=bz!==1||!b.isXMLDoc(bD);bB=bC&&b.propFix[bB]||bB;by=b.propHooks[bB];if(bE!==O){if(by&&"set" in by&&(bA=by.set(bD,bE,bB))!==O){return bA}else{return(bD[bB]=bE)}}else{if(by&&"get" in by&&(bA=by.get(bD,bB))!==O){return bA}else{return bD[bB]}}},propHooks:{}});a0={get:function(bz,by){return bz[b.propFix[by]||by]?by.toLowerCase():O},set:function(bz,bB,by){var bA;if(bB===false){b.removeAttr(bz,by)}else{bA=b.propFix[by]||by;if(bA in bz){bz[bA]=bB}bz.setAttribute(by,by.toLowerCase())}return by}};b.attrHooks.value={get:function(bz,by){if(a6&&b.nodeName(bz,"button")){return a6.get(bz,by)}return bz.value},set:function(bz,bA,by){if(a6&&b.nodeName(bz,"button")){return a6.set(bz,bA,by)}bz.value=bA}};if(!b.support.getSetAttribute){b.attrFix=b.propFix;a6=b.attrHooks.name=b.valHooks.button={get:function(bA,bz){var by;by=bA.getAttributeNode(bz);return by&&by.nodeValue!==""?by.nodeValue:O},set:function(bA,bB,bz){var by=bA.getAttributeNode(bz);if(by){by.nodeValue=bB;return bB}}};b.each(["width","height"],function(bz,by){b.attrHooks[by]=b.extend(b.attrHooks[by],{set:function(bA,bB){if(bB===""){bA.setAttribute(by,"auto");return bB}}})})}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bz,by){b.attrHooks[by]=b.extend(b.attrHooks[by],{get:function(bB){var bA=bB.getAttribute(by,2);return bA===null?O:bA}})})}if(!b.support.style){b.attrHooks.style={get:function(by){return by.style.cssText.toLowerCase()||O},set:function(by,bz){return(by.style.cssText=""+bz)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bz){var by=bz.parentNode;if(by){by.selectedIndex;if(by.parentNode){by.parentNode.selectedIndex}}}})}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(by){return by.getAttribute("value")===null?"on":by.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(by,bz){if(b.isArray(bz)){return(by.checked=b.inArray(b(by).val(),bz)>=0)}}})});var aH=Object.prototype.hasOwnProperty,a2=/\.(.*)$/,bh=/^(?:textarea|input|select)$/i,R=/\./g,bl=/ /g,aG=/[^\w\s.|`]/g,K=function(by){return by.replace(aG,"\\$&")};b.event={add:function(bB,bF,bK,bD){if(bB.nodeType===3||bB.nodeType===8){return}if(bK===false){bK=bn}else{if(!bK){return}}var bz,bJ;if(bK.handler){bz=bK;bK=bz.handler}if(!bK.guid){bK.guid=b.guid++}var bG=b._data(bB);if(!bG){return}var bL=bG.events,bE=bG.handle;if(!bL){bG.events=bL={}}if(!bE){bG.handle=bE=function(bM){return typeof b!=="undefined"&&(!bM||b.event.triggered!==bM.type)?b.event.handle.apply(bE.elem,arguments):O}}bE.elem=bB;bF=bF.split(" ");var bI,bC=0,by;while((bI=bF[bC++])){bJ=bz?b.extend({},bz):{handler:bK,data:bD};if(bI.indexOf(".")>-1){by=bI.split(".");bI=by.shift();bJ.namespace=by.slice(0).sort().join(".")}else{by=[];bJ.namespace=""}bJ.type=bI;if(!bJ.guid){bJ.guid=bK.guid}var bA=bL[bI],bH=b.event.special[bI]||{};if(!bA){bA=bL[bI]=[];if(!bH.setup||bH.setup.call(bB,bD,by,bE)===false){if(bB.addEventListener){bB.addEventListener(bI,bE,false)}else{if(bB.attachEvent){bB.attachEvent("on"+bI,bE)}}}}if(bH.add){bH.add.call(bB,bJ);if(!bJ.handler.guid){bJ.handler.guid=bK.guid}}bA.push(bJ);b.event.global[bI]=true}bB=null},global:{},remove:function(bN,bI,bA,bE){if(bN.nodeType===3||bN.nodeType===8){return}if(bA===false){bA=bn}var bQ,bD,bF,bK,bL=0,bB,bG,bJ,bC,bH,by,bP,bM=b.hasData(bN)&&b._data(bN),bz=bM&&bM.events;if(!bM||!bz){return}if(bI&&bI.type){bA=bI.handler;bI=bI.type}if(!bI||typeof bI==="string"&&bI.charAt(0)==="."){bI=bI||"";for(bD in bz){b.event.remove(bN,bD+bI)}return}bI=bI.split(" ");while((bD=bI[bL++])){bP=bD;by=null;bB=bD.indexOf(".")<0;bG=[];if(!bB){bG=bD.split(".");bD=bG.shift();bJ=new RegExp("(^|\\.)"+b.map(bG.slice(0).sort(),K).join("\\.(?:.*\\.)?")+"(\\.|$)")}bH=bz[bD];if(!bH){continue}if(!bA){for(bK=0;bK<bH.length;bK++){by=bH[bK];if(bB||bJ.test(by.namespace)){b.event.remove(bN,bP,by.handler,bK);bH.splice(bK--,1)}}continue}bC=b.event.special[bD]||{};for(bK=bE||0;bK<bH.length;bK++){by=bH[bK];if(bA.guid===by.guid){if(bB||bJ.test(by.namespace)){if(bE==null){bH.splice(bK--,1)}if(bC.remove){bC.remove.call(bN,by)}}if(bE!=null){break}}}if(bH.length===0||bE!=null&&bH.length===1){if(!bC.teardown||bC.teardown.call(bN,bG)===false){b.removeEvent(bN,bD,bM.handle)}bQ=null;delete bz[bD]}}if(b.isEmptyObject(bz)){var bO=bM.handle;if(bO){bO.elem=null}delete bM.events;delete bM.handle;if(b.isEmptyObject(bM)){b.removeData(bN,O,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(by,bF,bD,bK){var bI=by.type||by,bA=[],bz;if(bI.indexOf("!")>=0){bI=bI.slice(0,-1);bz=true}if(bI.indexOf(".")>=0){bA=bI.split(".");bI=bA.shift();bA.sort()}if((!bD||b.event.customEvent[bI])&&!b.event.global[bI]){return}by=typeof by==="object"?by[b.expando]?by:new b.Event(bI,by):new b.Event(bI);by.type=bI;by.exclusive=bz;by.namespace=bA.join(".");by.namespace_re=new RegExp("(^|\\.)"+bA.join("\\.(?:.*\\.)?")+"(\\.|$)");if(bK||!bD){by.preventDefault();by.stopPropagation()}if(!bD){b.each(b.cache,function(){var bM=b.expando,bL=this[bM];if(bL&&bL.events&&bL.events[bI]){b.event.trigger(by,bF,bL.handle.elem)}});return}if(bD.nodeType===3||bD.nodeType===8){return}by.result=O;by.target=bD;bF=bF?b.makeArray(bF):[];bF.unshift(by);var bJ=bD,bB=bI.indexOf(":")<0?"on"+bI:"";do{var bG=b._data(bJ,"handle");by.currentTarget=bJ;if(bG){bG.apply(bJ,bF)}if(bB&&b.acceptData(bJ)&&bJ[bB]&&bJ[bB].apply(bJ,bF)===false){by.result=false;by.preventDefault()}bJ=bJ.parentNode||bJ.ownerDocument||bJ===by.target.ownerDocument&&bf}while(bJ&&!by.isPropagationStopped());if(!by.isDefaultPrevented()){var bC,bH=b.event.special[bI]||{};if((!bH._default||bH._default.call(bD.ownerDocument,by)===false)&&!(bI==="click"&&b.nodeName(bD,"a"))&&b.acceptData(bD)){try{if(bB&&bD[bI]){bC=bD[bB];if(bC){bD[bB]=null}b.event.triggered=bI;bD[bI]()}}catch(bE){}if(bC){bD[bB]=bC}b.event.triggered=O}}return by.result},handle:function(bF){bF=b.event.fix(bF||bf.event);var bz=((b._data(this,"events")||{})[bF.type]||[]).slice(0),bE=!bF.exclusive&&!bF.namespace,bC=Array.prototype.slice.call(arguments,0);bC[0]=bF;bF.currentTarget=this;for(var bB=0,by=bz.length;bB<by;bB++){var bD=bz[bB];if(bE||bF.namespace_re.test(bD.namespace)){bF.handler=bD.handler;bF.data=bD.data;bF.handleObj=bD;var bA=bD.handler.apply(this,bC);if(bA!==O){bF.result=bA;if(bA===false){bF.preventDefault();bF.stopPropagation()}}if(bF.isImmediatePropagationStopped()){break}}}return bF.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(bC){if(bC[b.expando]){return bC}var bz=bC;bC=b.Event(bz);for(var bA=this.props.length,bE;bA;){bE=this.props[--bA];bC[bE]=bz[bE]}if(!bC.target){bC.target=bC.srcElement||av}if(bC.target.nodeType===3){bC.target=bC.target.parentNode}if(!bC.relatedTarget&&bC.fromElement){bC.relatedTarget=bC.fromElement===bC.target?bC.toElement:bC.fromElement}if(bC.pageX==null&&bC.clientX!=null){var bB=bC.target.ownerDocument||av,bD=bB.documentElement,by=bB.body;bC.pageX=bC.clientX+(bD&&bD.scrollLeft||by&&by.scrollLeft||0)-(bD&&bD.clientLeft||by&&by.clientLeft||0);bC.pageY=bC.clientY+(bD&&bD.scrollTop||by&&by.scrollTop||0)-(bD&&bD.clientTop||by&&by.clientTop||0)}if(bC.which==null&&(bC.charCode!=null||bC.keyCode!=null)){bC.which=bC.charCode!=null?bC.charCode:bC.keyCode}if(!bC.metaKey&&bC.ctrlKey){bC.metaKey=bC.ctrlKey}if(!bC.which&&bC.button!==O){bC.which=(bC.button&1?1:(bC.button&2?3:(bC.button&4?2:0)))}return bC},guid:100000000,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(by){b.event.add(this,r(by.origType,by.selector),b.extend({},by,{handler:am,guid:by.handler.guid}))},remove:function(by){b.event.remove(this,r(by.origType,by.selector),by)}},beforeunload:{setup:function(bA,bz,by){if(b.isWindow(this)){this.onbeforeunload=by}},teardown:function(bz,by){if(this.onbeforeunload===by){this.onbeforeunload=null}}}}};b.removeEvent=av.removeEventListener?function(bz,by,bA){if(bz.removeEventListener){bz.removeEventListener(by,bA,false)}}:function(bz,by,bA){if(bz.detachEvent){bz.detachEvent("on"+by,bA)}};b.Event=function(bz,by){if(!this.preventDefault){return new b.Event(bz,by)}if(bz&&bz.type){this.originalEvent=bz;this.type=bz.type;this.isDefaultPrevented=(bz.defaultPrevented||bz.returnValue===false||bz.getPreventDefault&&bz.getPreventDefault())?j:bn}else{this.type=bz}if(by){b.extend(this,by)}this.timeStamp=b.now();this[b.expando]=true};function bn(){return false}function j(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=j;var by=this.originalEvent;if(!by){return}if(by.preventDefault){by.preventDefault()}else{by.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=j;var by=this.originalEvent;if(!by){return}if(by.stopPropagation){by.stopPropagation()}by.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j;this.stopPropagation()},isDefaultPrevented:bn,isPropagationStopped:bn,isImmediatePropagationStopped:bn};var af=function(bz){var by=bz.relatedTarget;bz.type=bz.data;try{if(by&&by!==av&&!by.parentNode){return}while(by&&by!==this){by=by.parentNode}if(by!==this){b.event.handle.apply(this,arguments)}}catch(bA){}},aW=function(by){by.type=by.data;b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bz,by){b.event.special[bz]={setup:function(bA){b.event.add(this,by,bA&&bA.selector?aW:af,bz)},teardown:function(bA){b.event.remove(this,by,bA&&bA.selector?aW:af)}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(bz,by){if(!b.nodeName(this,"form")){b.event.add(this,"click.specialSubmit",function(bC){var bB=bC.target,bA=bB.type;if((bA==="submit"||bA==="image")&&b(bB).closest("form").length){aZ("submit",this,arguments)}});b.event.add(this,"keypress.specialSubmit",function(bC){var bB=bC.target,bA=bB.type;if((bA==="text"||bA==="password")&&b(bB).closest("form").length&&bC.keyCode===13){aZ("submit",this,arguments)}})}else{return false}},teardown:function(by){b.event.remove(this,".specialSubmit")}}}if(!b.support.changeBubbles){var bq,l=function(bz){var by=bz.type,bA=bz.value;if(by==="radio"||by==="checkbox"){bA=bz.checked}else{if(by==="select-multiple"){bA=bz.selectedIndex>-1?b.map(bz.options,function(bB){return bB.selected}).join("-"):""}else{if(b.nodeName(bz,"select")){bA=bz.selectedIndex}}}return bA},ad=function ad(bA){var by=bA.target,bz,bB;if(!bh.test(by.nodeName)||by.readOnly){return}bz=b._data(by,"_change_data");bB=l(by);if(bA.type!=="focusout"||by.type!=="radio"){b._data(by,"_change_data",bB)}if(bz===O||bB===bz){return}if(bz!=null||bB){bA.type="change";bA.liveFired=O;b.event.trigger(bA,arguments[1],by)}};b.event.special.change={filters:{focusout:ad,beforedeactivate:ad,click:function(bA){var bz=bA.target,by=b.nodeName(bz,"input")?bz.type:"";if(by==="radio"||by==="checkbox"||b.nodeName(bz,"select")){ad.call(this,bA)}},keydown:function(bA){var bz=bA.target,by=b.nodeName(bz,"input")?bz.type:"";if((bA.keyCode===13&&!b.nodeName(bz,"textarea"))||(bA.keyCode===32&&(by==="checkbox"||by==="radio"))||by==="select-multiple"){ad.call(this,bA)}},beforeactivate:function(bz){var by=bz.target;b._data(by,"_change_data",l(by))}},setup:function(bA,bz){if(this.type==="file"){return false}for(var by in bq){b.event.add(this,by+".specialChange",bq[by])}return bh.test(this.nodeName)},teardown:function(by){b.event.remove(this,".specialChange");return bh.test(this.nodeName)}};bq=b.event.special.change.filters;bq.focus=bq.beforeactivate}function aZ(bz,bB,by){var bA=b.extend({},by[0]);bA.type=bz;bA.originalEvent={};bA.liveFired=O;b.event.handle.call(bB,bA);if(bA.isDefaultPrevented()){by[0].preventDefault()}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bB,by){var bz=0;b.event.special[by]={setup:function(){if(bz++===0){av.addEventListener(bB,bA,true)}},teardown:function(){if(--bz===0){av.removeEventListener(bB,bA,true)}}};function bA(bC){var bD=b.event.fix(bC);bD.type=by;bD.originalEvent={};b.event.trigger(bD,null,bD.target);if(bD.isDefaultPrevented()){bC.preventDefault()}}})}b.each(["bind","one"],function(bz,by){b.fn[by]=function(bF,bG,bE){var bD;if(typeof bF==="object"){for(var bC in bF){this[by](bC,bG,bF[bC],bE)}return this}if(arguments.length===2||bG===false){bE=bG;bG=O}if(by==="one"){bD=function(bH){b(this).unbind(bH,bD);return bE.apply(this,arguments)};bD.guid=bE.guid||b.guid++}else{bD=bE}if(bF==="unload"&&by!=="one"){this.one(bF,bG,bE)}else{for(var bB=0,bA=this.length;bB<bA;bB++){b.event.add(this[bB],bF,bD,bG)}}return this}});b.fn.extend({unbind:function(bC,bB){if(typeof bC==="object"&&!bC.preventDefault){for(var bA in bC){this.unbind(bA,bC[bA])}}else{for(var bz=0,by=this.length;bz<by;bz++){b.event.remove(this[bz],bC,bB)}}return this},delegate:function(by,bz,bB,bA){return this.live(bz,bB,bA,by)},undelegate:function(by,bz,bA){if(arguments.length===0){return this.unbind("live")}else{return this.die(bz,null,bA,by)}},trigger:function(by,bz){return this.each(function(){b.event.trigger(by,bz,this)})},triggerHandler:function(by,bz){if(this[0]){return b.event.trigger(by,bz,this[0],true)}},toggle:function(bB){var bz=arguments,by=bB.guid||b.guid++,bA=0,bC=function(bD){var bE=(b.data(this,"lastToggle"+bB.guid)||0)%bA;b.data(this,"lastToggle"+bB.guid,bE+1);bD.preventDefault();return bz[bE].apply(this,arguments)||false};bC.guid=by;while(bA<bz.length){bz[bA++].guid=by}return this.click(bC)},hover:function(by,bz){return this.mouseenter(by).mouseleave(bz||by)}});var aU={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(bz,by){b.fn[by]=function(bJ,bG,bL,bC){var bK,bH=0,bI,bB,bN,bE=bC||this.selector,bA=bC?this:b(this.context);if(typeof bJ==="object"&&!bJ.preventDefault){for(var bM in bJ){bA[by](bM,bG,bJ[bM],bE)}return this}if(by==="die"&&!bJ&&bC&&bC.charAt(0)==="."){bA.unbind(bC);return this}if(bG===false||b.isFunction(bG)){bL=bG||bn;bG=O}bJ=(bJ||"").split(" ");while((bK=bJ[bH++])!=null){bI=a2.exec(bK);bB="";if(bI){bB=bI[0];bK=bK.replace(a2,"")}if(bK==="hover"){bJ.push("mouseenter"+bB,"mouseleave"+bB);continue}bN=bK;if(aU[bK]){bJ.push(aU[bK]+bB);bK=bK+bB}else{bK=(aU[bK]||bK)+bB}if(by==="live"){for(var bF=0,bD=bA.length;bF<bD;bF++){b.event.add(bA[bF],"live."+r(bK,bE),{data:bG,selector:bE,handler:bL,origType:bK,origHandler:bL,preType:bN})}}else{bA.unbind("live."+r(bK,bE),bL)}}return this}});function am(bJ){var bG,bB,bP,bD,by,bL,bI,bK,bH,bO,bF,bE,bN,bM=[],bC=[],bz=b._data(this,"events");if(bJ.liveFired===this||!bz||!bz.live||bJ.target.disabled||bJ.button&&bJ.type==="click"){return}if(bJ.namespace){bE=new RegExp("(^|\\.)"+bJ.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}bJ.liveFired=this;var bA=bz.live.slice(0);for(bI=0;bI<bA.length;bI++){by=bA[bI];if(by.origType.replace(a2,"")===bJ.type){bC.push(by.selector)}else{bA.splice(bI--,1)}}bD=b(bJ.target).closest(bC,bJ.currentTarget);for(bK=0,bH=bD.length;bK<bH;bK++){bF=bD[bK];for(bI=0;bI<bA.length;bI++){by=bA[bI];if(bF.selector===by.selector&&(!bE||bE.test(by.namespace))&&!bF.elem.disabled){bL=bF.elem;bP=null;if(by.preType==="mouseenter"||by.preType==="mouseleave"){bJ.type=by.preType;bP=b(bJ.relatedTarget).closest(by.selector)[0];if(bP&&b.contains(bL,bP)){bP=bL}}if(!bP||bP!==bL){bM.push({elem:bL,handleObj:by,level:bF.level})}}}}for(bK=0,bH=bM.length;bK<bH;bK++){bD=bM[bK];if(bB&&bD.level>bB){break}bJ.currentTarget=bD.elem;bJ.data=bD.handleObj.data;bJ.handleObj=bD.handleObj;bN=bD.handleObj.origHandler.apply(bD.elem,arguments);if(bN===false||bJ.isPropagationStopped()){bB=bD.level;if(bN===false){bG=false}if(bJ.isImmediatePropagationStopped()){break}}}return bG}function r(bz,by){return(bz&&bz!=="*"?bz+".":"")+by.replace(R,"`").replace(bl,"&")}b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(bz,by){b.fn[by]=function(bB,bA){if(bA==null){bA=bB;bB=null}return arguments.length>0?this.bind(by,bB,bA):this.trigger(by)};if(b.attrFn){b.attrFn[by]=true}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bI=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bJ=0,bM=Object.prototype.toString,bD=false,bC=true,bK=/\\/g,bQ=/\W/;[0,0].sort(function(){bC=false;return 0});var bA=function(bW,bR,bZ,b0){bZ=bZ||[];bR=bR||av;var b2=bR;if(bR.nodeType!==1&&bR.nodeType!==9){return[]}if(!bW||typeof bW!=="string"){return bZ}var bT,b4,b7,bS,b3,b6,b5,bY,bV=true,bU=bA.isXML(bR),bX=[],b1=bW;do{bI.exec("");bT=bI.exec(b1);if(bT){b1=bT[3];bX.push(bT[1]);if(bT[2]){bS=bT[3];break}}}while(bT);if(bX.length>1&&bE.exec(bW)){if(bX.length===2&&bF.relative[bX[0]]){b4=bN(bX[0]+bX[1],bR)}else{b4=bF.relative[bX[0]]?[bR]:bA(bX.shift(),bR);while(bX.length){bW=bX.shift();if(bF.relative[bW]){bW+=bX.shift()}b4=bN(bW,b4)}}}else{if(!b0&&bX.length>1&&bR.nodeType===9&&!bU&&bF.match.ID.test(bX[0])&&!bF.match.ID.test(bX[bX.length-1])){b3=bA.find(bX.shift(),bR,bU);bR=b3.expr?bA.filter(b3.expr,b3.set)[0]:b3.set[0]}if(bR){b3=b0?{expr:bX.pop(),set:bG(b0)}:bA.find(bX.pop(),bX.length===1&&(bX[0]==="~"||bX[0]==="+")&&bR.parentNode?bR.parentNode:bR,bU);b4=b3.expr?bA.filter(b3.expr,b3.set):b3.set;if(bX.length>0){b7=bG(b4)}else{bV=false}while(bX.length){b6=bX.pop();b5=b6;if(!bF.relative[b6]){b6=""}else{b5=bX.pop()}if(b5==null){b5=bR}bF.relative[b6](b7,b5,bU)}}else{b7=bX=[]}}if(!b7){b7=b4}if(!b7){bA.error(b6||bW)}if(bM.call(b7)==="[object Array]"){if(!bV){bZ.push.apply(bZ,b7)}else{if(bR&&bR.nodeType===1){for(bY=0;b7[bY]!=null;bY++){if(b7[bY]&&(b7[bY]===true||b7[bY].nodeType===1&&bA.contains(bR,b7[bY]))){bZ.push(b4[bY])}}}else{for(bY=0;b7[bY]!=null;bY++){if(b7[bY]&&b7[bY].nodeType===1){bZ.push(b4[bY])}}}}}else{bG(b7,bZ)}if(bS){bA(bS,b2,bZ,b0);bA.uniqueSort(bZ)}return bZ};bA.uniqueSort=function(bS){if(bL){bD=bC;bS.sort(bL);if(bD){for(var bR=1;bR<bS.length;bR++){if(bS[bR]===bS[bR-1]){bS.splice(bR--,1)}}}}return bS};bA.matches=function(bR,bS){return bA(bR,null,null,bS)};bA.matchesSelector=function(bR,bS){return bA(bS,null,null,[bR]).length>0};bA.find=function(bY,bR,bZ){var bX;if(!bY){return[]}for(var bU=0,bT=bF.order.length;bU<bT;bU++){var bV,bW=bF.order[bU];if((bV=bF.leftMatch[bW].exec(bY))){var bS=bV[1];bV.splice(1,1);if(bS.substr(bS.length-1)!=="\\"){bV[1]=(bV[1]||"").replace(bK,"");bX=bF.find[bW](bV,bR,bZ);if(bX!=null){bY=bY.replace(bF.match[bW],"");break}}}}if(!bX){bX=typeof bR.getElementsByTagName!=="undefined"?bR.getElementsByTagName("*"):[]}return{set:bX,expr:bY}};bA.filter=function(b2,b1,b5,bV){var bX,bR,bT=b2,b7=[],bZ=b1,bY=b1&&b1[0]&&bA.isXML(b1[0]);while(b2&&b1.length){for(var b0 in bF.filter){if((bX=bF.leftMatch[b0].exec(b2))!=null&&bX[2]){var b6,b4,bS=bF.filter[b0],bU=bX[1];bR=false;bX.splice(1,1);if(bU.substr(bU.length-1)==="\\"){continue}if(bZ===b7){b7=[]}if(bF.preFilter[b0]){bX=bF.preFilter[b0](bX,bZ,b5,b7,bV,bY);if(!bX){bR=b6=true}else{if(bX===true){continue}}}if(bX){for(var bW=0;(b4=bZ[bW])!=null;bW++){if(b4){b6=bS(b4,bX,bW,bZ);var b3=bV^!!b6;if(b5&&b6!=null){if(b3){bR=true}else{bZ[bW]=false}}else{if(b3){b7.push(b4);bR=true}}}}}if(b6!==O){if(!b5){bZ=b7}b2=b2.replace(bF.match[b0],"");if(!bR){return[]}break}}}if(b2===bT){if(bR==null){bA.error(b2)}else{break}}bT=b2}return bZ};bA.error=function(bR){throw"Syntax error, unrecognized expression: "+bR};var bF=bA.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(bR){return bR.getAttribute("href")},type:function(bR){return bR.getAttribute("type")}},relative:{"+":function(bX,bS){var bU=typeof bS==="string",bW=bU&&!bQ.test(bS),bY=bU&&!bW;if(bW){bS=bS.toLowerCase()}for(var bT=0,bR=bX.length,bV;bT<bR;bT++){if((bV=bX[bT])){while((bV=bV.previousSibling)&&bV.nodeType!==1){}bX[bT]=bY||bV&&bV.nodeName.toLowerCase()===bS?bV||false:bV===bS}}if(bY){bA.filter(bS,bX,true)}},">":function(bX,bS){var bW,bV=typeof bS==="string",bT=0,bR=bX.length;if(bV&&!bQ.test(bS)){bS=bS.toLowerCase();for(;bT<bR;bT++){bW=bX[bT];if(bW){var bU=bW.parentNode;bX[bT]=bU.nodeName.toLowerCase()===bS?bU:false}}}else{for(;bT<bR;bT++){bW=bX[bT];if(bW){bX[bT]=bV?bW.parentNode:bW.parentNode===bS}}if(bV){bA.filter(bS,bX,true)}}},"":function(bU,bS,bW){var bV,bT=bJ++,bR=bO;if(typeof bS==="string"&&!bQ.test(bS)){bS=bS.toLowerCase();bV=bS;bR=by}bR("parentNode",bS,bT,bU,bV,bW)},"~":function(bU,bS,bW){var bV,bT=bJ++,bR=bO;if(typeof bS==="string"&&!bQ.test(bS)){bS=bS.toLowerCase();bV=bS;bR=by}bR("previousSibling",bS,bT,bU,bV,bW)}},find:{ID:function(bS,bT,bU){if(typeof bT.getElementById!=="undefined"&&!bU){var bR=bT.getElementById(bS[1]);return bR&&bR.parentNode?[bR]:[]}},NAME:function(bT,bW){if(typeof bW.getElementsByName!=="undefined"){var bS=[],bV=bW.getElementsByName(bT[1]);for(var bU=0,bR=bV.length;bU<bR;bU++){if(bV[bU].getAttribute("name")===bT[1]){bS.push(bV[bU])}}return bS.length===0?null:bS}},TAG:function(bR,bS){if(typeof bS.getElementsByTagName!=="undefined"){return bS.getElementsByTagName(bR[1])}}},preFilter:{CLASS:function(bU,bS,bT,bR,bX,bY){bU=" "+bU[1].replace(bK,"")+" ";if(bY){return bU}for(var bV=0,bW;(bW=bS[bV])!=null;bV++){if(bW){if(bX^(bW.className&&(" "+bW.className+" ").replace(/[\t\n\r]/g," ").indexOf(bU)>=0)){if(!bT){bR.push(bW)}}else{if(bT){bS[bV]=false}}}}return false},ID:function(bR){return bR[1].replace(bK,"")},TAG:function(bS,bR){return bS[1].replace(bK,"").toLowerCase()},CHILD:function(bR){if(bR[1]==="nth"){if(!bR[2]){bA.error(bR[0])}bR[2]=bR[2].replace(/^\+|\s*/g,"");var bS=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(bR[2]==="even"&&"2n"||bR[2]==="odd"&&"2n+1"||!/\D/.test(bR[2])&&"0n+"+bR[2]||bR[2]);bR[2]=(bS[1]+(bS[2]||1))-0;bR[3]=bS[3]-0}else{if(bR[2]){bA.error(bR[0])}}bR[0]=bJ++;return bR},ATTR:function(bV,bS,bT,bR,bW,bX){var bU=bV[1]=bV[1].replace(bK,"");if(!bX&&bF.attrMap[bU]){bV[1]=bF.attrMap[bU]}bV[4]=(bV[4]||bV[5]||"").replace(bK,"");if(bV[2]==="~="){bV[4]=" "+bV[4]+" "}return bV},PSEUDO:function(bV,bS,bT,bR,bW){if(bV[1]==="not"){if((bI.exec(bV[3])||"").length>1||/^\w/.test(bV[3])){bV[3]=bA(bV[3],null,null,bS)}else{var bU=bA.filter(bV[3],bS,bT,true^bW);if(!bT){bR.push.apply(bR,bU)}return false}}else{if(bF.match.POS.test(bV[0])||bF.match.CHILD.test(bV[0])){return true}}return bV},POS:function(bR){bR.unshift(true);return bR}},filters:{enabled:function(bR){return bR.disabled===false&&bR.type!=="hidden"},disabled:function(bR){return bR.disabled===true},checked:function(bR){return bR.checked===true},selected:function(bR){if(bR.parentNode){bR.parentNode.selectedIndex}return bR.selected===true},parent:function(bR){return !!bR.firstChild},empty:function(bR){return !bR.firstChild},has:function(bT,bS,bR){return !!bA(bR[3],bT).length},header:function(bR){return(/h\d/i).test(bR.nodeName)},text:function(bT){var bR=bT.getAttribute("type"),bS=bT.type;return bT.nodeName.toLowerCase()==="input"&&"text"===bS&&(bR===bS||bR===null)},radio:function(bR){return bR.nodeName.toLowerCase()==="input"&&"radio"===bR.type},checkbox:function(bR){return bR.nodeName.toLowerCase()==="input"&&"checkbox"===bR.type},file:function(bR){return bR.nodeName.toLowerCase()==="input"&&"file"===bR.type},password:function(bR){return bR.nodeName.toLowerCase()==="input"&&"password"===bR.type},submit:function(bS){var bR=bS.nodeName.toLowerCase();return(bR==="input"||bR==="button")&&"submit"===bS.type},image:function(bR){return bR.nodeName.toLowerCase()==="input"&&"image"===bR.type},reset:function(bS){var bR=bS.nodeName.toLowerCase();return(bR==="input"||bR==="button")&&"reset"===bS.type},button:function(bS){var bR=bS.nodeName.toLowerCase();return bR==="input"&&"button"===bS.type||bR==="button"},input:function(bR){return(/input|select|textarea|button/i).test(bR.nodeName)},focus:function(bR){return bR===bR.ownerDocument.activeElement}},setFilters:{first:function(bS,bR){return bR===0},last:function(bT,bS,bR,bU){return bS===bU.length-1},even:function(bS,bR){return bR%2===0},odd:function(bS,bR){return bR%2===1},lt:function(bT,bS,bR){return bS<bR[3]-0},gt:function(bT,bS,bR){return bS>bR[3]-0},nth:function(bT,bS,bR){return bR[3]-0===bS},eq:function(bT,bS,bR){return bR[3]-0===bS}},filter:{PSEUDO:function(bT,bY,bX,bZ){var bR=bY[1],bS=bF.filters[bR];if(bS){return bS(bT,bX,bY,bZ)}else{if(bR==="contains"){return(bT.textContent||bT.innerText||bA.getText([bT])||"").indexOf(bY[3])>=0}else{if(bR==="not"){var bU=bY[3];for(var bW=0,bV=bU.length;bW<bV;bW++){if(bU[bW]===bT){return false}}return true}else{bA.error(bR)}}}},CHILD:function(bR,bU){var bX=bU[1],bS=bR;switch(bX){case"only":case"first":while((bS=bS.previousSibling)){if(bS.nodeType===1){return false}}if(bX==="first"){return true}bS=bR;case"last":while((bS=bS.nextSibling)){if(bS.nodeType===1){return false}}return true;case"nth":var bT=bU[2],b0=bU[3];if(bT===1&&b0===0){return true}var bW=bU[0],bZ=bR.parentNode;if(bZ&&(bZ.sizcache!==bW||!bR.nodeIndex)){var bV=0;for(bS=bZ.firstChild;bS;bS=bS.nextSibling){if(bS.nodeType===1){bS.nodeIndex=++bV}}bZ.sizcache=bW}var bY=bR.nodeIndex-b0;if(bT===0){return bY===0}else{return(bY%bT===0&&bY/bT>=0)}}},ID:function(bS,bR){return bS.nodeType===1&&bS.getAttribute("id")===bR},TAG:function(bS,bR){return(bR==="*"&&bS.nodeType===1)||bS.nodeName.toLowerCase()===bR},CLASS:function(bS,bR){return(" "+(bS.className||bS.getAttribute("class"))+" ").indexOf(bR)>-1},ATTR:function(bW,bU){var bT=bU[1],bR=bF.attrHandle[bT]?bF.attrHandle[bT](bW):bW[bT]!=null?bW[bT]:bW.getAttribute(bT),bX=bR+"",bV=bU[2],bS=bU[4];return bR==null?bV==="!=":bV==="="?bX===bS:bV==="*="?bX.indexOf(bS)>=0:bV==="~="?(" "+bX+" ").indexOf(bS)>=0:!bS?bX&&bR!==false:bV==="!="?bX!==bS:bV==="^="?bX.indexOf(bS)===0:bV==="$="?bX.substr(bX.length-bS.length)===bS:bV==="|="?bX===bS||bX.substr(0,bS.length+1)===bS+"-":false},POS:function(bV,bS,bT,bW){var bR=bS[2],bU=bF.setFilters[bR];if(bU){return bU(bV,bT,bS,bW)}}}};var bE=bF.match.POS,bz=function(bS,bR){return"\\"+(bR-0+1)};for(var bB in bF.match){bF.match[bB]=new RegExp(bF.match[bB].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bF.leftMatch[bB]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bF.match[bB].source.replace(/\\(\d+)/g,bz))}var bG=function(bS,bR){bS=Array.prototype.slice.call(bS,0);if(bR){bR.push.apply(bR,bS);return bR}return bS};try{Array.prototype.slice.call(av.documentElement.childNodes,0)[0].nodeType}catch(bP){bG=function(bV,bU){var bT=0,bS=bU||[];if(bM.call(bV)==="[object Array]"){Array.prototype.push.apply(bS,bV)}else{if(typeof bV.length==="number"){for(var bR=bV.length;bT<bR;bT++){bS.push(bV[bT])}}else{for(;bV[bT];bT++){bS.push(bV[bT])}}}return bS}}var bL,bH;if(av.documentElement.compareDocumentPosition){bL=function(bS,bR){if(bS===bR){bD=true;return 0}if(!bS.compareDocumentPosition||!bR.compareDocumentPosition){return bS.compareDocumentPosition?-1:1}return bS.compareDocumentPosition(bR)&4?-1:1}}else{bL=function(bZ,bY){if(bZ===bY){bD=true;return 0}else{if(bZ.sourceIndex&&bY.sourceIndex){return bZ.sourceIndex-bY.sourceIndex}}var bW,bS,bT=[],bR=[],bV=bZ.parentNode,bX=bY.parentNode,b0=bV;if(bV===bX){return bH(bZ,bY)}else{if(!bV){return -1}else{if(!bX){return 1}}}while(b0){bT.unshift(b0);b0=b0.parentNode}b0=bX;while(b0){bR.unshift(b0);b0=b0.parentNode}bW=bT.length;bS=bR.length;for(var bU=0;bU<bW&&bU<bS;bU++){if(bT[bU]!==bR[bU]){return bH(bT[bU],bR[bU])}}return bU===bW?bH(bZ,bR[bU],-1):bH(bT[bU],bY,1)};bH=function(bS,bR,bT){if(bS===bR){return bT}var bU=bS.nextSibling;while(bU){if(bU===bR){return -1}bU=bU.nextSibling}return 1}}bA.getText=function(bR){var bS="",bU;for(var bT=0;bR[bT];bT++){bU=bR[bT];if(bU.nodeType===3||bU.nodeType===4){bS+=bU.nodeValue}else{if(bU.nodeType!==8){bS+=bA.getText(bU.childNodes)}}}return bS};(function(){var bS=av.createElement("div"),bT="script"+(new Date()).getTime(),bR=av.documentElement;bS.innerHTML="<a name='"+bT+"'/>";bR.insertBefore(bS,bR.firstChild);if(av.getElementById(bT)){bF.find.ID=function(bV,bW,bX){if(typeof bW.getElementById!=="undefined"&&!bX){var bU=bW.getElementById(bV[1]);return bU?bU.id===bV[1]||typeof bU.getAttributeNode!=="undefined"&&bU.getAttributeNode("id").nodeValue===bV[1]?[bU]:O:[]}};bF.filter.ID=function(bW,bU){var bV=typeof bW.getAttributeNode!=="undefined"&&bW.getAttributeNode("id");return bW.nodeType===1&&bV&&bV.nodeValue===bU}}bR.removeChild(bS);bR=bS=null})();(function(){var bR=av.createElement("div");bR.appendChild(av.createComment(""));if(bR.getElementsByTagName("*").length>0){bF.find.TAG=function(bS,bW){var bV=bW.getElementsByTagName(bS[1]);if(bS[1]==="*"){var bU=[];for(var bT=0;bV[bT];bT++){if(bV[bT].nodeType===1){bU.push(bV[bT])}}bV=bU}return bV}}bR.innerHTML="<a href='#'></a>";if(bR.firstChild&&typeof bR.firstChild.getAttribute!=="undefined"&&bR.firstChild.getAttribute("href")!=="#"){bF.attrHandle.href=function(bS){return bS.getAttribute("href",2)}}bR=null})();if(av.querySelectorAll){(function(){var bR=bA,bU=av.createElement("div"),bT="__sizzle__";bU.innerHTML="<p class='TEST'></p>";if(bU.querySelectorAll&&bU.querySelectorAll(".TEST").length===0){return}bA=function(b5,bW,b0,b4){bW=bW||av;if(!b4&&!bA.isXML(bW)){var b3=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b5);if(b3&&(bW.nodeType===1||bW.nodeType===9)){if(b3[1]){return bG(bW.getElementsByTagName(b5),b0)}else{if(b3[2]&&bF.find.CLASS&&bW.getElementsByClassName){return bG(bW.getElementsByClassName(b3[2]),b0)}}}if(bW.nodeType===9){if(b5==="body"&&bW.body){return bG([bW.body],b0)}else{if(b3&&b3[3]){var bZ=bW.getElementById(b3[3]);if(bZ&&bZ.parentNode){if(bZ.id===b3[3]){return bG([bZ],b0)}}else{return bG([],b0)}}}try{return bG(bW.querySelectorAll(b5),b0)}catch(b1){}}else{if(bW.nodeType===1&&bW.nodeName.toLowerCase()!=="object"){var bX=bW,bY=bW.getAttribute("id"),bV=bY||bT,b7=bW.parentNode,b6=/^\s*[+~]/.test(b5);if(!bY){bW.setAttribute("id",bV)}else{bV=bV.replace(/'/g,"\\$&")}if(b6&&b7){bW=bW.parentNode}try{if(!b6||b7){return bG(bW.querySelectorAll("[id='"+bV+"'] "+b5),b0)}}catch(b2){}finally{if(!bY){bX.removeAttribute("id")}}}}}return bR(b5,bW,b0,b4)};for(var bS in bR){bA[bS]=bR[bS]}bU=null})()}(function(){var bR=av.documentElement,bT=bR.matchesSelector||bR.mozMatchesSelector||bR.webkitMatchesSelector||bR.msMatchesSelector;if(bT){var bV=!bT.call(av.createElement("div"),"div"),bS=false;try{bT.call(av.documentElement,"[test!='']:sizzle")}catch(bU){bS=true}bA.matchesSelector=function(bX,bZ){bZ=bZ.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bA.isXML(bX)){try{if(bS||!bF.match.PSEUDO.test(bZ)&&!/!=/.test(bZ)){var bW=bT.call(bX,bZ);if(bW||!bV||bX.document&&bX.document.nodeType!==11){return bW}}}catch(bY){}}return bA(bZ,null,null,[bX]).length>0}}})();(function(){var bR=av.createElement("div");bR.innerHTML="<div class='test e'></div><div class='test'></div>";if(!bR.getElementsByClassName||bR.getElementsByClassName("e").length===0){return}bR.lastChild.className="e";if(bR.getElementsByClassName("e").length===1){return}bF.order.splice(1,0,"CLASS");bF.find.CLASS=function(bS,bT,bU){if(typeof bT.getElementsByClassName!=="undefined"&&!bU){return bT.getElementsByClassName(bS[1])}};bR=null})();function by(bS,bX,bW,b0,bY,bZ){for(var bU=0,bT=b0.length;bU<bT;bU++){var bR=b0[bU];if(bR){var bV=false;bR=bR[bS];while(bR){if(bR.sizcache===bW){bV=b0[bR.sizset];break}if(bR.nodeType===1&&!bZ){bR.sizcache=bW;bR.sizset=bU}if(bR.nodeName.toLowerCase()===bX){bV=bR;break}bR=bR[bS]}b0[bU]=bV}}}function bO(bS,bX,bW,b0,bY,bZ){for(var bU=0,bT=b0.length;bU<bT;bU++){var bR=b0[bU];if(bR){var bV=false;bR=bR[bS];while(bR){if(bR.sizcache===bW){bV=b0[bR.sizset];break}if(bR.nodeType===1){if(!bZ){bR.sizcache=bW;bR.sizset=bU}if(typeof bX!=="string"){if(bR===bX){bV=true;break}}else{if(bA.filter(bX,[bR]).length>0){bV=bR;break}}}bR=bR[bS]}b0[bU]=bV}}}if(av.documentElement.contains){bA.contains=function(bS,bR){return bS!==bR&&(bS.contains?bS.contains(bR):true)}}else{if(av.documentElement.compareDocumentPosition){bA.contains=function(bS,bR){return !!(bS.compareDocumentPosition(bR)&16)}}else{bA.contains=function(){return false}}}bA.isXML=function(bR){var bS=(bR?bR.ownerDocument||bR:0).documentElement;return bS?bS.nodeName!=="HTML":false};var bN=function(bR,bY){var bW,bU=[],bV="",bT=bY.nodeType?[bY]:bY;while((bW=bF.match.PSEUDO.exec(bR))){bV+=bW[0];bR=bR.replace(bF.match.PSEUDO,"")}bR=bF.relative[bR]?bR+"*":bR;for(var bX=0,bS=bT.length;bX<bS;bX++){bA(bR,bT[bX],bU)}return bA.filter(bV,bU)};b.find=bA;b.expr=bA.selectors;b.expr[":"]=b.expr.filters;b.unique=bA.uniqueSort;b.text=bA.getText;b.isXMLDoc=bA.isXML;b.contains=bA.contains})();var ac=/Until$/,aq=/^(?:parents|prevUntil|prevAll)/,bd=/,/,bt=/^.[^:#\[\.,]*$/,T=Array.prototype.slice,L=b.expr.match.POS,ay={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(by){var bA=this,bC,bz;if(typeof by!=="string"){return b(by).filter(function(){for(bC=0,bz=bA.length;bC<bz;bC++){if(b.contains(bA[bC],this)){return true}}})}var bB=this.pushStack("","find",by),bE,bF,bD;for(bC=0,bz=this.length;bC<bz;bC++){bE=bB.length;b.find(by,this[bC],bB);if(bC>0){for(bF=bE;bF<bB.length;bF++){for(bD=0;bD<bE;bD++){if(bB[bD]===bB[bF]){bB.splice(bF--,1);break}}}}}return bB},has:function(bz){var by=b(bz);return this.filter(function(){for(var bB=0,bA=by.length;bB<bA;bB++){if(b.contains(this,by[bB])){return true}}})},not:function(by){return this.pushStack(aF(this,by,false),"not",by)},filter:function(by){return this.pushStack(aF(this,by,true),"filter",by)},is:function(by){return !!by&&(typeof by==="string"?b.filter(by,this).length>0:this.filter(by).length>0)},closest:function(bI,bz){var bF=[],bC,bA,bH=this[0];if(b.isArray(bI)){var bE,bB,bD={},by=1;if(bH&&bI.length){for(bC=0,bA=bI.length;bC<bA;bC++){bB=bI[bC];if(!bD[bB]){bD[bB]=L.test(bB)?b(bB,bz||this.context):bB}}while(bH&&bH.ownerDocument&&bH!==bz){for(bB in bD){bE=bD[bB];if(bE.jquery?bE.index(bH)>-1:b(bH).is(bE)){bF.push({selector:bB,elem:bH,level:by})}}bH=bH.parentNode;by++}}return bF}var bG=L.test(bI)||typeof bI!=="string"?b(bI,bz||this.context):0;for(bC=0,bA=this.length;bC<bA;bC++){bH=this[bC];while(bH){if(bG?bG.index(bH)>-1:b.find.matchesSelector(bH,bI)){bF.push(bH);break}else{bH=bH.parentNode;if(!bH||!bH.ownerDocument||bH===bz||bH.nodeType===11){break}}}}bF=bF.length>1?b.unique(bF):bF;return this.pushStack(bF,"closest",bI)},index:function(by){if(!by||typeof by==="string"){return b.inArray(this[0],by?b(by):this.parent().children())}return b.inArray(by.jquery?by[0]:by,this)},add:function(by,bz){var bB=typeof by==="string"?b(by,bz):b.makeArray(by&&by.nodeType?[by]:by),bA=b.merge(this.get(),bB);return this.pushStack(G(bB[0])||G(bA[0])?bA:b.unique(bA))},andSelf:function(){return this.add(this.prevObject)}});function G(by){return !by||!by.parentNode||by.parentNode.nodeType===11}b.each({parent:function(bz){var by=bz.parentNode;return by&&by.nodeType!==11?by:null},parents:function(by){return b.dir(by,"parentNode")},parentsUntil:function(bz,by,bA){return b.dir(bz,"parentNode",bA)},next:function(by){return b.nth(by,2,"nextSibling")},prev:function(by){return b.nth(by,2,"previousSibling")},nextAll:function(by){return b.dir(by,"nextSibling")},prevAll:function(by){return b.dir(by,"previousSibling")},nextUntil:function(bz,by,bA){return b.dir(bz,"nextSibling",bA)},prevUntil:function(bz,by,bA){return b.dir(bz,"previousSibling",bA)},siblings:function(by){return b.sibling(by.parentNode.firstChild,by)},children:function(by){return b.sibling(by.firstChild)},contents:function(by){return b.nodeName(by,"iframe")?by.contentDocument||by.contentWindow.document:b.makeArray(by.childNodes)}},function(by,bz){b.fn[by]=function(bD,bA){var bC=b.map(this,bz,bD),bB=T.call(arguments);if(!ac.test(by)){bA=bD}if(bA&&typeof bA==="string"){bC=b.filter(bA,bC)}bC=this.length>1&&!ay[by]?b.unique(bC):bC;if((this.length>1||bd.test(bA))&&aq.test(by)){bC=bC.reverse()}return this.pushStack(bC,by,bB.join(","))}});b.extend({filter:function(bA,by,bz){if(bz){bA=":not("+bA+")"}return by.length===1?b.find.matchesSelector(by[0],bA)?[by[0]]:[]:b.find.matches(bA,by)},dir:function(bA,bz,bC){var by=[],bB=bA[bz];while(bB&&bB.nodeType!==9&&(bC===O||bB.nodeType!==1||!b(bB).is(bC))){if(bB.nodeType===1){by.push(bB)}bB=bB[bz]}return by},nth:function(bC,by,bA,bB){by=by||1;var bz=0;for(;bC;bC=bC[bA]){if(bC.nodeType===1&&++bz===by){break}}return bC},sibling:function(bA,bz){var by=[];for(;bA;bA=bA.nextSibling){if(bA.nodeType===1&&bA!==bz){by.push(bA)}}return by}});function aF(bB,bA,by){bA=bA||0;if(b.isFunction(bA)){return b.grep(bB,function(bD,bC){var bE=!!bA.call(bD,bC,bD);return bE===by})}else{if(bA.nodeType){return b.grep(bB,function(bD,bC){return(bD===bA)===by})}else{if(typeof bA==="string"){var bz=b.grep(bB,function(bC){return bC.nodeType===1});if(bt.test(bA)){return b.filter(bA,bz,!by)}else{bA=b.filter(bA,bz)}}}}return b.grep(bB,function(bD,bC){return(b.inArray(bD,bA)>=0)===by})}var ah=/ jQuery\d+="(?:\d+|null)"/g,ar=/^\s+/,W=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,A=/<tbody/i,Z=/<|&#?\w+;/,S=/<(?:script|object|embed|option|style)/i,p=/checked\s*(?:[^=]|=\s*.checked.)/i,bp=/\/(java|ecma)script/i,aO=/^\s*<!(?:\[CDATA\[|\-\-)/,ax={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};ax.optgroup=ax.option;ax.tbody=ax.tfoot=ax.colgroup=ax.caption=ax.thead;ax.th=ax.td;if(!b.support.htmlSerialize){ax._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(by){if(b.isFunction(by)){return this.each(function(bA){var bz=b(this);bz.text(by.call(this,bA,bz.text()))})}if(typeof by!=="object"&&by!==O){return this.empty().append((this[0]&&this[0].ownerDocument||av).createTextNode(by))}return b.text(this)},wrapAll:function(by){if(b.isFunction(by)){return this.each(function(bA){b(this).wrapAll(by.call(this,bA))})}if(this[0]){var bz=b(by,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bz.insertBefore(this[0])}bz.map(function(){var bA=this;while(bA.firstChild&&bA.firstChild.nodeType===1){bA=bA.firstChild}return bA}).append(this)}return this},wrapInner:function(by){if(b.isFunction(by)){return this.each(function(bz){b(this).wrapInner(by.call(this,bz))})}return this.each(function(){var bz=b(this),bA=bz.contents();if(bA.length){bA.wrapAll(by)}else{bz.append(by)}})},wrap:function(by){return this.each(function(){b(this).wrapAll(by)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(by){if(this.nodeType===1){this.appendChild(by)}})},prepend:function(){return this.domManip(arguments,true,function(by){if(this.nodeType===1){this.insertBefore(by,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bz){this.parentNode.insertBefore(bz,this)})}else{if(arguments.length){var by=b(arguments[0]);by.push.apply(by,this.toArray());return this.pushStack(by,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bz){this.parentNode.insertBefore(bz,this.nextSibling)})}else{if(arguments.length){var by=this.pushStack(this,"after",arguments);by.push.apply(by,b(arguments[0]).toArray());return by}}},remove:function(by,bB){for(var bz=0,bA;(bA=this[bz])!=null;bz++){if(!by||b.filter(by,[bA]).length){if(!bB&&bA.nodeType===1){b.cleanData(bA.getElementsByTagName("*"));b.cleanData([bA])}if(bA.parentNode){bA.parentNode.removeChild(bA)}}}return this},empty:function(){for(var by=0,bz;(bz=this[by])!=null;by++){if(bz.nodeType===1){b.cleanData(bz.getElementsByTagName("*"))}while(bz.firstChild){bz.removeChild(bz.firstChild)}}return this},clone:function(bz,by){bz=bz==null?false:bz;by=by==null?bz:by;return this.map(function(){return b.clone(this,bz,by)})},html:function(bA){if(bA===O){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ah,""):null}else{if(typeof bA==="string"&&!S.test(bA)&&(b.support.leadingWhitespace||!ar.test(bA))&&!ax[(d.exec(bA)||["",""])[1].toLowerCase()]){bA=bA.replace(W,"<$1></$2>");try{for(var bz=0,by=this.length;bz<by;bz++){if(this[bz].nodeType===1){b.cleanData(this[bz].getElementsByTagName("*"));this[bz].innerHTML=bA}}}catch(bB){this.empty().append(bA)}}else{if(b.isFunction(bA)){this.each(function(bD){var bC=b(this);bC.html(bA.call(this,bD,bC.html()))})}else{this.empty().append(bA)}}}return this},replaceWith:function(by){if(this[0]&&this[0].parentNode){if(b.isFunction(by)){return this.each(function(bB){var bA=b(this),bz=bA.html();bA.replaceWith(by.call(this,bB,bz))})}if(typeof by!=="string"){by=b(by).detach()}return this.each(function(){var bA=this.nextSibling,bz=this.parentNode;b(this).remove();if(bA){b(bA).before(by)}else{b(bz).append(by)}})}else{return this.length?this.pushStack(b(b.isFunction(by)?by():by),"replaceWith",by):this}},detach:function(by){return this.remove(by,true)},domManip:function(bF,bJ,bI){var bB,bC,bE,bH,bG=bF[0],bz=[];if(!b.support.checkClone&&arguments.length===3&&typeof bG==="string"&&p.test(bG)){return this.each(function(){b(this).domManip(bF,bJ,bI,true)})}if(b.isFunction(bG)){return this.each(function(bL){var bK=b(this);bF[0]=bG.call(this,bL,bJ?bK.html():O);bK.domManip(bF,bJ,bI)})}if(this[0]){bH=bG&&bG.parentNode;if(b.support.parentNode&&bH&&bH.nodeType===11&&bH.childNodes.length===this.length){bB={fragment:bH}}else{bB=b.buildFragment(bF,this,bz)}bE=bB.fragment;if(bE.childNodes.length===1){bC=bE=bE.firstChild}else{bC=bE.firstChild}if(bC){bJ=bJ&&b.nodeName(bC,"tr");for(var bA=0,by=this.length,bD=by-1;bA<by;bA++){bI.call(bJ?be(this[bA],bC):this[bA],bB.cacheable||(by>1&&bA<bD)?b.clone(bE,true,true):bE)}}if(bz.length){b.each(bz,bs)}}return this}});function be(by,bz){return b.nodeName(by,"table")?(by.getElementsByTagName("tbody")[0]||by.appendChild(by.ownerDocument.createElement("tbody"))):by}function v(by,bF){if(bF.nodeType!==1||!b.hasData(by)){return}var bE=b.expando,bB=b.data(by),bC=b.data(bF,bB);if((bB=bB[bE])){var bG=bB.events;bC=bC[bE]=b.extend({},bB);if(bG){delete bC.handle;bC.events={};for(var bD in bG){for(var bA=0,bz=bG[bD].length;bA<bz;bA++){b.event.add(bF,bD+(bG[bD][bA].namespace?".":"")+bG[bD][bA].namespace,bG[bD][bA],bG[bD][bA].data)}}}}}function ai(bz,by){var bA;if(by.nodeType!==1){return}if(by.clearAttributes){by.clearAttributes()}if(by.mergeAttributes){by.mergeAttributes(bz)}bA=by.nodeName.toLowerCase();if(bA==="object"){by.outerHTML=bz.outerHTML}else{if(bA==="input"&&(bz.type==="checkbox"||bz.type==="radio")){if(bz.checked){by.defaultChecked=by.checked=bz.checked}if(by.value!==bz.value){by.value=bz.value}}else{if(bA==="option"){by.selected=bz.defaultSelected}else{if(bA==="input"||bA==="textarea"){by.defaultValue=bz.defaultValue}}}}by.removeAttribute(b.expando)}b.buildFragment=function(bD,bB,bz){var bC,by,bA,bE=(bB&&bB[0]?bB[0].ownerDocument||bB[0]:av);if(bD.length===1&&typeof bD[0]==="string"&&bD[0].length<512&&bE===av&&bD[0].charAt(0)==="<"&&!S.test(bD[0])&&(b.support.checkClone||!p.test(bD[0]))){by=true;bA=b.fragments[bD[0]];if(bA&&bA!==1){bC=bA}}if(!bC){bC=bE.createDocumentFragment();b.clean(bD,bE,bC,bz)}if(by){b.fragments[bD[0]]=bA?bC:1}return{fragment:bC,cacheable:by}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(by,bz){b.fn[by]=function(bA){var bD=[],bG=b(bA),bF=this.length===1&&this[0].parentNode;if(bF&&bF.nodeType===11&&bF.childNodes.length===1&&bG.length===1){bG[bz](this[0]);return this}else{for(var bE=0,bB=bG.length;bE<bB;bE++){var bC=(bE>0?this.clone(true):this).get();b(bG[bE])[bz](bC);bD=bD.concat(bC)}return this.pushStack(bD,by,bG.selector)}}});function bi(by){if("getElementsByTagName" in by){return by.getElementsByTagName("*")}else{if("querySelectorAll" in by){return by.querySelectorAll("*")}else{return[]}}}function az(by){if(by.type==="checkbox"||by.type==="radio"){by.defaultChecked=by.checked}}function I(by){if(b.nodeName(by,"input")){az(by)}else{if(by.getElementsByTagName){b.grep(by.getElementsByTagName("input"),az)}}}b.extend({clone:function(bC,bE,bA){var bD=bC.cloneNode(true),by,bz,bB;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bC.nodeType===1||bC.nodeType===11)&&!b.isXMLDoc(bC)){ai(bC,bD);by=bi(bC);bz=bi(bD);for(bB=0;by[bB];++bB){ai(by[bB],bz[bB])}}if(bE){v(bC,bD);if(bA){by=bi(bC);bz=bi(bD);for(bB=0;by[bB];++bB){v(by[bB],bz[bB])}}}return bD},clean:function(bA,bC,bL,bE){var bJ;bC=bC||av;if(typeof bC.createElement==="undefined"){bC=bC.ownerDocument||bC[0]&&bC[0].ownerDocument||av}var bM=[],bF;for(var bI=0,bD;(bD=bA[bI])!=null;bI++){if(typeof bD==="number"){bD+=""}if(!bD){continue}if(typeof bD==="string"){if(!Z.test(bD)){bD=bC.createTextNode(bD)}else{bD=bD.replace(W,"<$1></$2>");var bO=(d.exec(bD)||["",""])[1].toLowerCase(),bB=ax[bO]||ax._default,bH=bB[0],bz=bC.createElement("div");bz.innerHTML=bB[1]+bD+bB[2];while(bH--){bz=bz.lastChild}if(!b.support.tbody){var by=A.test(bD),bG=bO==="table"&&!by?bz.firstChild&&bz.firstChild.childNodes:bB[1]==="<table>"&&!by?bz.childNodes:[];for(bF=bG.length-1;bF>=0;--bF){if(b.nodeName(bG[bF],"tbody")&&!bG[bF].childNodes.length){bG[bF].parentNode.removeChild(bG[bF])}}}if(!b.support.leadingWhitespace&&ar.test(bD)){bz.insertBefore(bC.createTextNode(ar.exec(bD)[0]),bz.firstChild)}bD=bz.childNodes}}var bK;if(!b.support.appendChecked){if(bD[0]&&typeof(bK=bD.length)==="number"){for(bF=0;bF<bK;bF++){I(bD[bF])}}else{I(bD)}}if(bD.nodeType){bM.push(bD)}else{bM=b.merge(bM,bD)}}if(bL){bJ=function(bP){return !bP.type||bp.test(bP.type)};for(bI=0;bM[bI];bI++){if(bE&&b.nodeName(bM[bI],"script")&&(!bM[bI].type||bM[bI].type.toLowerCase()==="text/javascript")){bE.push(bM[bI].parentNode?bM[bI].parentNode.removeChild(bM[bI]):bM[bI])}else{if(bM[bI].nodeType===1){var bN=b.grep(bM[bI].getElementsByTagName("script"),bJ);bM.splice.apply(bM,[bI+1,0].concat(bN))}bL.appendChild(bM[bI])}}}return bM},cleanData:function(bz){var bC,bA,by=b.cache,bH=b.expando,bF=b.event.special,bE=b.support.deleteExpando;for(var bD=0,bB;(bB=bz[bD])!=null;bD++){if(bB.nodeName&&b.noData[bB.nodeName.toLowerCase()]){continue}bA=bB[b.expando];if(bA){bC=by[bA]&&by[bA][bH];if(bC&&bC.events){for(var bG in bC.events){if(bF[bG]){b.event.remove(bB,bG)}else{b.removeEvent(bB,bG,bC.handle)}}if(bC.handle){bC.handle.elem=null}}if(bE){delete bB[b.expando]}else{if(bB.removeAttribute){bB.removeAttribute(b.expando)}}delete by[bA]}}}});function bs(by,bz){if(bz.src){b.ajax({url:bz.src,async:false,dataType:"script"})}else{b.globalEval((bz.text||bz.textContent||bz.innerHTML||"").replace(aO,"/*$0*/"))}if(bz.parentNode){bz.parentNode.removeChild(bz)}}var al=/alpha\([^)]*\)/i,au=/opacity=([^)]*)/,aY=/-([a-z])/ig,D=/([A-Z]|^ms)/g,bg=/^-?\d+(?:px)?$/i,br=/^-?\d/,M=/^[+\-]=/,ak=/[^+\-\.\de]+/g,ba={position:"absolute",visibility:"hidden",display:"block"},an=["Left","Right"],a4=["Top","Bottom"],aa,aJ,aX,o=function(by,bz){return bz.toUpperCase()};b.fn.css=function(by,bz){if(arguments.length===2&&bz===O){return this}return b.access(this,by,bz,true,function(bB,bA,bC){return bC!==O?b.style(bB,bA,bC):b.css(bB,bA)})};b.extend({cssHooks:{opacity:{get:function(bA,bz){if(bz){var by=aa(bA,"opacity","opacity");return by===""?"1":by}else{return bA.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true,widows:true,orphans:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bA,bz,bG,bB){if(!bA||bA.nodeType===3||bA.nodeType===8||!bA.style){return}var bE,bF,bC=b.camelCase(bz),by=bA.style,bH=b.cssHooks[bC];bz=b.cssProps[bC]||bC;if(bG!==O){bF=typeof bG;if(bF==="number"&&isNaN(bG)||bG==null){return}if(bF==="string"&&M.test(bG)){bG=+bG.replace(ak,"")+parseFloat(b.css(bA,bz))}if(bF==="number"&&!b.cssNumber[bC]){bG+="px"}if(!bH||!("set" in bH)||(bG=bH.set(bA,bG))!==O){try{by[bz]=bG}catch(bD){}}}else{if(bH&&"get" in bH&&(bE=bH.get(bA,false,bB))!==O){return bE}return by[bz]}},css:function(bC,bB,bz){var bA,by;bB=b.camelCase(bB);by=b.cssHooks[bB];bB=b.cssProps[bB]||bB;if(bB==="cssFloat"){bB="float"}if(by&&"get" in by&&(bA=by.get(bC,true,bz))!==O){return bA}else{if(aa){return aa(bC,bB)}}},swap:function(bB,bA,bC){var by={};for(var bz in bA){by[bz]=bB.style[bz];bB.style[bz]=bA[bz]}bC.call(bB);for(bz in bA){bB.style[bz]=by[bz]}},camelCase:function(by){return by.replace(aY,o)}});b.curCSS=b.css;b.each(["height","width"],function(bz,by){b.cssHooks[by]={get:function(bC,bB,bA){var bD;if(bB){if(bC.offsetWidth!==0){bD=q(bC,by,bA)}else{b.swap(bC,ba,function(){bD=q(bC,by,bA)})}if(bD<=0){bD=aa(bC,by,by);if(bD==="0px"&&aX){bD=aX(bC,by,by)}if(bD!=null){return bD===""||bD==="auto"?"0px":bD}}if(bD<0||bD==null){bD=bC.style[by];return bD===""||bD==="auto"?"0px":bD}return typeof bD==="string"?bD:bD+"px"}},set:function(bA,bB){if(bg.test(bB)){bB=parseFloat(bB);if(bB>=0){return bB+"px"}}else{return bB}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(bz,by){return au.test((by&&bz.currentStyle?bz.currentStyle.filter:bz.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":by?"1":""},set:function(bC,bD){var bB=bC.style,bz=bC.currentStyle;bB.zoom=1;var by=b.isNaN(bD)?"":"alpha(opacity="+bD*100+")",bA=bz&&bz.filter||bB.filter||"";bB.filter=al.test(bA)?bA.replace(al,by):bA+" "+by}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bA,bz){var by;b.swap(bA,{display:"inline-block"},function(){if(bz){by=aa(bA,"margin-right","marginRight")}else{by=bA.style.marginRight}});return by}}}});if(av.defaultView&&av.defaultView.getComputedStyle){aJ=function(bC,bA){var bz,bB,by;bA=bA.replace(D,"-$1").toLowerCase();if(!(bB=bC.ownerDocument.defaultView)){return O}if((by=bB.getComputedStyle(bC,null))){bz=by.getPropertyValue(bA);if(bz===""&&!b.contains(bC.ownerDocument.documentElement,bC)){bz=b.style(bC,bA)}}return bz}}if(av.documentElement.currentStyle){aX=function(bC,bA){var bD,bz=bC.currentStyle&&bC.currentStyle[bA],by=bC.runtimeStyle&&bC.runtimeStyle[bA],bB=bC.style;if(!bg.test(bz)&&br.test(bz)){bD=bB.left;if(by){bC.runtimeStyle.left=bC.currentStyle.left}bB.left=bA==="fontSize"?"1em":(bz||0);bz=bB.pixelLeft+"px";bB.left=bD;if(by){bC.runtimeStyle.left=by}}return bz===""?"auto":bz}}aa=aJ||aX;function q(bA,bz,by){var bC=bz==="width"?an:a4,bB=bz==="width"?bA.offsetWidth:bA.offsetHeight;if(by==="border"){return bB}b.each(bC,function(){if(!by){bB-=parseFloat(b.css(bA,"padding"+this))||0}if(by==="margin"){bB+=parseFloat(b.css(bA,"margin"+this))||0}else{bB-=parseFloat(b.css(bA,"border"+this+"Width"))||0}});return bB}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bA){var bz=bA.offsetWidth,by=bA.offsetHeight;return(bz===0&&by===0)||(!b.support.reliableHiddenOffsets&&(bA.style.display||b.css(bA,"display"))==="none")};b.expr.filters.visible=function(by){return !b.expr.filters.hidden(by)}}var k=/%20/g,ap=/\[\]$/,bw=/\r?\n/g,bu=/#.*$/,aD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,a1=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aN=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,aQ=/^(?:GET|HEAD)$/,c=/^\/\//,P=/\?/,a9=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:select|textarea)/i,h=/\s+/,bv=/([?&])_=[^&]*/,N=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,E=b.fn.load,ab={},t={},aE,u;try{aE=bo.href}catch(aw){aE=av.createElement("a");aE.href="";aE=aE.href}u=N.exec(aE.toLowerCase())||[];function f(by){return function(bC,bE){if(typeof bC!=="string"){bE=bC;bC="*"}if(b.isFunction(bE)){var bB=bC.toLowerCase().split(h),bA=0,bD=bB.length,bz,bF,bG;for(;bA<bD;bA++){bz=bB[bA];bG=/^\+/.test(bz);if(bG){bz=bz.substr(1)||"*"}bF=by[bz]=by[bz]||[];bF[bG?"unshift":"push"](bE)}}}}function aV(bz,bI,bD,bH,bF,bB){bF=bF||bI.dataTypes[0];bB=bB||{};bB[bF]=true;var bE=bz[bF],bA=0,by=bE?bE.length:0,bC=(bz===ab),bG;for(;bA<by&&(bC||!bG);bA++){bG=bE[bA](bI,bD,bH);if(typeof bG==="string"){if(!bC||bB[bG]){bG=O}else{bI.dataTypes.unshift(bG);bG=aV(bz,bI,bD,bH,bG,bB)}}}if((bC||!bG)&&!bB["*"]){bG=aV(bz,bI,bD,bH,"*",bB)}return bG}b.fn.extend({load:function(bA,bD,bE){if(typeof bA!=="string"&&E){return E.apply(this,arguments)}else{if(!this.length){return this}}var bC=bA.indexOf(" ");if(bC>=0){var by=bA.slice(bC,bA.length);bA=bA.slice(0,bC)}var bB="GET";if(bD){if(b.isFunction(bD)){bE=bD;bD=O}else{if(typeof bD==="object"){bD=b.param(bD,b.ajaxSettings.traditional);bB="POST"}}}var bz=this;b.ajax({url:bA,type:bB,dataType:"html",data:bD,complete:function(bG,bF,bH){bH=bG.responseText;if(bG.isResolved()){bG.done(function(bI){bH=bI});bz.html(by?b("<div>").append(bH.replace(a9,"")).find(by):bH)}if(bE){bz.each(bE,[bH,bF,bG])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||s.test(this.nodeName)||a1.test(this.type))}).map(function(by,bz){var bA=b(this).val();return bA==null?null:b.isArray(bA)?b.map(bA,function(bC,bB){return{name:bz.name,value:bC.replace(bw,"\r\n")}}):{name:bz.name,value:bA.replace(bw,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(by,bz){b.fn[bz]=function(bA){return this.bind(bz,bA)}});b.each(["get","post"],function(by,bz){b[bz]=function(bA,bC,bD,bB){if(b.isFunction(bC)){bB=bB||bD;bD=bC;bC=O}return b.ajax({type:bz,url:bA,data:bC,success:bD,dataType:bB})}});b.extend({getScript:function(by,bz){return b.get(by,O,bz,"script")},getJSON:function(by,bz,bA){return b.get(by,bz,bA,"json")},ajaxSetup:function(bA,by){if(!by){by=bA;bA=b.extend(true,b.ajaxSettings,by)}else{b.extend(true,bA,b.ajaxSettings,by)}for(var bz in {context:1,url:1}){if(bz in by){bA[bz]=by[bz]}else{if(bz in b.ajaxSettings){bA[bz]=b.ajaxSettings[bz]}}}return bA},ajaxSettings:{url:aE,isLocal:aN.test(u[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bf.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML}},ajaxPrefilter:f(ab),ajaxTransport:f(t),ajax:function(bC,bA){if(typeof bC==="object"){bA=bC;bC=O}bA=bA||{};var bG=b.ajaxSetup({},bA),bV=bG.context||bG,bJ=bV!==bG&&(bV.nodeType||bV instanceof b)?b(bV):b.event,bU=b.Deferred(),bQ=b._Deferred(),bE=bG.statusCode||{},bF,bK={},bR={},bT,bB,bO,bH,bL,bD=0,bz,bN,bM={readyState:0,setRequestHeader:function(bX,bY){if(!bD){var bW=bX.toLowerCase();bX=bR[bW]=bR[bW]||bX;bK[bX]=bY}return this},getAllResponseHeaders:function(){return bD===2?bT:null},getResponseHeader:function(bX){var bW;if(bD===2){if(!bB){bB={};while((bW=aD.exec(bT))){bB[bW[1].toLowerCase()]=bW[2]}}bW=bB[bX.toLowerCase()]}return bW===O?null:bW},overrideMimeType:function(bW){if(!bD){bG.mimeType=bW}return this},abort:function(bW){bW=bW||"abort";if(bO){bO.abort(bW)}bI(0,bW);return this}};function bI(b1,bZ,b2,bY){if(bD===2){return}bD=2;if(bH){clearTimeout(bH)}bO=O;bT=bY||"";bM.readyState=b1?4:0;var bW,b6,b5,b0=b2?bm(bG,bM,b2):O,bX,b4;if(b1>=200&&b1<300||b1===304){if(bG.ifModified){if((bX=bM.getResponseHeader("Last-Modified"))){b.lastModified[bF]=bX}if((b4=bM.getResponseHeader("Etag"))){b.etag[bF]=b4}}if(b1===304){bZ="notmodified";bW=true}else{try{b6=J(bG,b0);bZ="success";bW=true}catch(b3){bZ="parsererror";b5=b3}}}else{b5=bZ;if(!bZ||b1){bZ="error";if(b1<0){b1=0}}}bM.status=b1;bM.statusText=bZ;if(bW){bU.resolveWith(bV,[b6,bZ,bM])}else{bU.rejectWith(bV,[bM,bZ,b5])}bM.statusCode(bE);bE=O;if(bz){bJ.trigger("ajax"+(bW?"Success":"Error"),[bM,bG,bW?b6:b5])}bQ.resolveWith(bV,[bM,bZ]);if(bz){bJ.trigger("ajaxComplete",[bM,bG]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bU.promise(bM);bM.success=bM.done;bM.error=bM.fail;bM.complete=bQ.done;bM.statusCode=function(bX){if(bX){var bW;if(bD<2){for(bW in bX){bE[bW]=[bE[bW],bX[bW]]}}else{bW=bX[bM.status];bM.then(bW,bW)}}return this};bG.url=((bC||bG.url)+"").replace(bu,"").replace(c,u[1]+"//");bG.dataTypes=b.trim(bG.dataType||"*").toLowerCase().split(h);if(bG.crossDomain==null){bL=N.exec(bG.url.toLowerCase());bG.crossDomain=!!(bL&&(bL[1]!=u[1]||bL[2]!=u[2]||(bL[3]||(bL[1]==="http:"?80:443))!=(u[3]||(u[1]==="http:"?80:443))))}if(bG.data&&bG.processData&&typeof bG.data!=="string"){bG.data=b.param(bG.data,bG.traditional)}aV(ab,bG,bA,bM);if(bD===2){return false}bz=bG.global;bG.type=bG.type.toUpperCase();bG.hasContent=!aQ.test(bG.type);if(bz&&b.active++===0){b.event.trigger("ajaxStart")}if(!bG.hasContent){if(bG.data){bG.url+=(P.test(bG.url)?"&":"?")+bG.data}bF=bG.url;if(bG.cache===false){var by=b.now(),bS=bG.url.replace(bv,"$1_="+by);bG.url=bS+((bS===bG.url)?(P.test(bG.url)?"&":"?")+"_="+by:"")}}if(bG.data&&bG.hasContent&&bG.contentType!==false||bA.contentType){bM.setRequestHeader("Content-Type",bG.contentType)}if(bG.ifModified){bF=bF||bG.url;if(b.lastModified[bF]){bM.setRequestHeader("If-Modified-Since",b.lastModified[bF])}if(b.etag[bF]){bM.setRequestHeader("If-None-Match",b.etag[bF])}}bM.setRequestHeader("Accept",bG.dataTypes[0]&&bG.accepts[bG.dataTypes[0]]?bG.accepts[bG.dataTypes[0]]+(bG.dataTypes[0]!=="*"?", */*; q=0.01":""):bG.accepts["*"]);for(bN in bG.headers){bM.setRequestHeader(bN,bG.headers[bN])}if(bG.beforeSend&&(bG.beforeSend.call(bV,bM,bG)===false||bD===2)){bM.abort();return false}for(bN in {success:1,error:1,complete:1}){bM[bN](bG[bN])}bO=aV(t,bG,bA,bM);if(!bO){bI(-1,"No Transport")}else{bM.readyState=1;if(bz){bJ.trigger("ajaxSend",[bM,bG])}if(bG.async&&bG.timeout>0){bH=setTimeout(function(){bM.abort("timeout")},bG.timeout)}try{bD=1;bO.send(bK,bI)}catch(bP){if(status<2){bI(-1,bP)}else{b.error(bP)}}}return bM},param:function(by,bA){var bz=[],bC=function(bD,bE){bE=b.isFunction(bE)?bE():bE;bz[bz.length]=encodeURIComponent(bD)+"="+encodeURIComponent(bE)};if(bA===O){bA=b.ajaxSettings.traditional}if(b.isArray(by)||(by.jquery&&!b.isPlainObject(by))){b.each(by,function(){bC(this.name,this.value)})}else{for(var bB in by){z(bB,by[bB],bA,bC)}}return bz.join("&").replace(k,"+")}});function z(bA,bC,bz,bB){if(b.isArray(bC)){b.each(bC,function(bE,bD){if(bz||ap.test(bA)){bB(bA,bD)}else{z(bA+"["+(typeof bD==="object"||b.isArray(bD)?bE:"")+"]",bD,bz,bB)}})}else{if(!bz&&bC!=null&&typeof bC==="object"){for(var by in bC){z(bA+"["+by+"]",bC[by],bz,bB)}}else{bB(bA,bC)}}}b.extend({active:0,lastModified:{},etag:{}});function bm(bH,bG,bD){var bz=bH.contents,bF=bH.dataTypes,bA=bH.responseFields,bC,bE,bB,by;for(bE in bA){if(bE in bD){bG[bA[bE]]=bD[bE]}}while(bF[0]==="*"){bF.shift();if(bC===O){bC=bH.mimeType||bG.getResponseHeader("content-type")}}if(bC){for(bE in bz){if(bz[bE]&&bz[bE].test(bC)){bF.unshift(bE);break}}}if(bF[0] in bD){bB=bF[0]}else{for(bE in bD){if(!bF[0]||bH.converters[bE+" "+bF[0]]){bB=bE;break}if(!by){by=bE}}bB=bB||by}if(bB){if(bB!==bF[0]){bF.unshift(bB)}return bD[bB]}}function J(bL,bD){if(bL.dataFilter){bD=bL.dataFilter(bD,bL.dataType)}var bH=bL.dataTypes,bK={},bE,bI,bA=bH.length,bF,bG=bH[0],bB,bC,bJ,bz,by;for(bE=1;bE<bA;bE++){if(bE===1){for(bI in bL.converters){if(typeof bI==="string"){bK[bI.toLowerCase()]=bL.converters[bI]}}}bB=bG;bG=bH[bE];if(bG==="*"){bG=bB}else{if(bB!=="*"&&bB!==bG){bC=bB+" "+bG;bJ=bK[bC]||bK["* "+bG];if(!bJ){by=O;for(bz in bK){bF=bz.split(" ");if(bF[0]===bB||bF[0]==="*"){by=bK[bF[1]+" "+bG];if(by){bz=bK[bz];if(bz===true){bJ=by}else{if(by===true){bJ=bz}}break}}}}if(!(bJ||by)){b.error("No conversion from "+bC.replace(" "," to "))}if(bJ!==true){bD=bJ?bJ(bD):by(bz(bD))}}}}return bD}var aC=b.now(),w=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aC++)}});b.ajaxPrefilter("json jsonp",function(bH,bE,bG){var bB=bH.contentType==="application/x-www-form-urlencoded"&&(typeof bH.data==="string");if(bH.dataTypes[0]==="jsonp"||bH.jsonp!==false&&(w.test(bH.url)||bB&&w.test(bH.data))){var bF,bA=bH.jsonpCallback=b.isFunction(bH.jsonpCallback)?bH.jsonpCallback():bH.jsonpCallback,bD=bf[bA],by=bH.url,bC=bH.data,bz="$1"+bA+"$2";if(bH.jsonp!==false){by=by.replace(w,bz);if(bH.url===by){if(bB){bC=bC.replace(w,bz)}if(bH.data===bC){by+=(/\?/.test(by)?"&":"?")+bH.jsonp+"="+bA}}}bH.url=by;bH.data=bC;bf[bA]=function(bI){bF=[bI]};bG.always(function(){bf[bA]=bD;if(bF&&b.isFunction(bD)){bf[bA](bF[0])}});bH.converters["script json"]=function(){if(!bF){b.error(bA+" was not called")}return bF[0]};bH.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(by){b.globalEval(by);return by}}});b.ajaxPrefilter("script",function(by){if(by.cache===O){by.cache=false}if(by.crossDomain){by.type="GET";by.global=false}});b.ajaxTransport("script",function(bA){if(bA.crossDomain){var by,bz=av.head||av.getElementsByTagName("head")[0]||av.documentElement;return{send:function(bB,bC){by=av.createElement("script");by.async="async";if(bA.scriptCharset){by.charset=bA.scriptCharset}by.src=bA.url;by.onload=by.onreadystatechange=function(bE,bD){if(bD||!by.readyState||/loaded|complete/.test(by.readyState)){by.onload=by.onreadystatechange=null;if(bz&&by.parentNode){bz.removeChild(by)}by=O;if(!bD){bC(200,"success")}}};bz.insertBefore(by,bz.firstChild)},abort:function(){if(by){by.onload(0,1)}}}}});var F=bf.ActiveXObject?function(){for(var by in Q){Q[by](0,1)}}:false,C=0,Q;function aM(){try{return new bf.XMLHttpRequest()}catch(by){}}function aj(){try{return new bf.ActiveXObject("Microsoft.XMLHTTP")}catch(by){}}b.ajaxSettings.xhr=bf.ActiveXObject?function(){return !this.isLocal&&aM()||aj()}:aM;(function(by){b.extend(b.support,{ajax:!!by,cors:!!by&&("withCredentials" in by)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(by){if(!by.crossDomain||b.support.cors){var bz;return{send:function(bF,bA){var bE=by.xhr(),bD,bC;if(by.username){bE.open(by.type,by.url,by.async,by.username,by.password)}else{bE.open(by.type,by.url,by.async)}if(by.xhrFields){for(bC in by.xhrFields){bE[bC]=by.xhrFields[bC]}}if(by.mimeType&&bE.overrideMimeType){bE.overrideMimeType(by.mimeType)}if(!by.crossDomain&&!bF["X-Requested-With"]){bF["X-Requested-With"]="XMLHttpRequest"}try{for(bC in bF){bE.setRequestHeader(bC,bF[bC])}}catch(bB){}bE.send((by.hasContent&&by.data)||null);bz=function(bO,bI){var bJ,bH,bG,bM,bL;try{if(bz&&(bI||bE.readyState===4)){bz=O;if(bD){bE.onreadystatechange=b.noop;if(F){delete Q[bD]}}if(bI){if(bE.readyState!==4){bE.abort()}}else{bJ=bE.status;bG=bE.getAllResponseHeaders();bM={};bL=bE.responseXML;if(bL&&bL.documentElement){bM.xml=bL}bM.text=bE.responseText;try{bH=bE.statusText}catch(bN){bH=""}if(!bJ&&by.isLocal&&!by.crossDomain){bJ=bM.text?200:404}else{if(bJ===1223){bJ=204}}}}}catch(bK){if(!bI){bA(-1,bK)}}if(bM){bA(bJ,bH,bM,bG)}};if(!by.async||bE.readyState===4){bz()}else{bD=++C;if(F){if(!Q){Q={};b(bf).unload(F)}Q[bD]=bz}bE.onreadystatechange=bz}},abort:function(){if(bz){bz(0,1)}}}}})}var U={},bc,n,aB=/^(?:toggle|show|hide)$/,aS=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,a5,aI=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a7,V=bf.webkitRequestAnimationFrame||bf.mozRequestAnimationFrame||bf.oRequestAnimationFrame;b.fn.extend({show:function(bB,bE,bD){var bA,bC;if(bB||bB===0){return this.animate(a3("show",3),bB,bE,bD)}else{for(var bz=0,by=this.length;bz<by;bz++){bA=this[bz];if(bA.style){bC=bA.style.display;if(!b._data(bA,"olddisplay")&&bC==="none"){bC=bA.style.display=""}if(bC===""&&b.css(bA,"display")==="none"){b._data(bA,"olddisplay",B(bA.nodeName))}}}for(bz=0;bz<by;bz++){bA=this[bz];if(bA.style){bC=bA.style.display;if(bC===""||bC==="none"){bA.style.display=b._data(bA,"olddisplay")||""}}}return this}},hide:function(bA,bD,bC){if(bA||bA===0){return this.animate(a3("hide",3),bA,bD,bC)}else{for(var bz=0,by=this.length;bz<by;bz++){if(this[bz].style){var bB=b.css(this[bz],"display");if(bB!=="none"&&!b._data(this[bz],"olddisplay")){b._data(this[bz],"olddisplay",bB)}}}for(bz=0;bz<by;bz++){if(this[bz].style){this[bz].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bA,bz,bB){var by=typeof bA==="boolean";if(b.isFunction(bA)&&b.isFunction(bz)){this._toggle.apply(this,arguments)}else{if(bA==null||by){this.each(function(){var bC=by?bA:b(this).is(":hidden");b(this)[bC?"show":"hide"]()})}else{this.animate(a3("toggle",3),bA,bz,bB)}}return this},fadeTo:function(by,bB,bA,bz){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bB},by,bA,bz)},animate:function(bC,bz,bB,bA){var by=b.speed(bz,bB,bA);if(b.isEmptyObject(bC)){return this.each(by.complete,[false])}bC=b.extend({},bC);return this[by.queue===false?"each":"queue"](function(){if(by.queue===false){b._mark(this)}var bG=b.extend({},by),bN=this.nodeType===1,bK=bN&&b(this).is(":hidden"),bD,bH,bF,bM,bL,bJ,bE,bI,bO;bG.animatedProperties={};for(bF in bC){bD=b.camelCase(bF);if(bF!==bD){bC[bD]=bC[bF];delete bC[bF]}bH=bC[bD];if(b.isArray(bH)){bG.animatedProperties[bD]=bH[1];bH=bC[bD]=bH[0]}else{bG.animatedProperties[bD]=bG.specialEasing&&bG.specialEasing[bD]||bG.easing||"swing"}if(bH==="hide"&&bK||bH==="show"&&!bK){return bG.complete.call(this)}if(bN&&(bD==="height"||bD==="width")){bG.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{bM=B(this.nodeName);if(bM==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(bG.overflow!=null){this.style.overflow="hidden"}for(bF in bC){bL=new b.fx(this,bG,bF);bH=bC[bF];if(aB.test(bH)){bL[bH==="toggle"?bK?"show":"hide":bH]()}else{bJ=aS.exec(bH);bE=bL.cur();if(bJ){bI=parseFloat(bJ[2]);bO=bJ[3]||(b.cssNumber[bF]?"":"px");if(bO!=="px"){b.style(this,bF,(bI||1)+bO);bE=((bI||1)/bL.cur())*bE;b.style(this,bF,bE+bO)}if(bJ[1]){bI=((bJ[1]==="-="?-1:1)*bI)+bE}bL.custom(bE,bI,bO)}else{bL.custom(bE,bH,"")}}}return true})},stop:function(bz,by){if(bz){this.queue([])}this.each(function(){var bB=b.timers,bA=bB.length;if(!by){b._unmark(true,this)}while(bA--){if(bB[bA].elem===this){if(by){bB[bA](true)}bB.splice(bA,1)}}});if(!by){this.dequeue()}return this}});function bj(){setTimeout(at,0);return(a7=b.now())}function at(){a7=O}function a3(bz,by){var bA={};b.each(aI.concat.apply([],aI.slice(0,by)),function(){bA[this]=bz});return bA}b.each({slideDown:a3("show",1),slideUp:a3("hide",1),slideToggle:a3("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(by,bz){b.fn[by]=function(bA,bC,bB){return this.animate(bz,bA,bC,bB)}});b.extend({speed:function(bA,bB,bz){var by=bA&&typeof bA==="object"?b.extend({},bA):{complete:bz||!bz&&bB||b.isFunction(bA)&&bA,duration:bA,easing:bz&&bB||bB&&!b.isFunction(bB)&&bB};by.duration=b.fx.off?0:typeof by.duration==="number"?by.duration:by.duration in b.fx.speeds?b.fx.speeds[by.duration]:b.fx.speeds._default;by.old=by.complete;by.complete=function(bC){if(by.queue!==false){b.dequeue(this)}else{if(bC!==false){b._unmark(this)}}if(b.isFunction(by.old)){by.old.call(this)}};return by},easing:{linear:function(bA,bB,by,bz){return by+bz*bA},swing:function(bA,bB,by,bz){return((-Math.cos(bA*Math.PI)/2)+0.5)*bz+by}},timers:[],fx:function(bz,by,bA){this.options=by;this.elem=bz;this.prop=bA;by.orig=by.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var by,bz=b.css(this.elem,this.prop);return isNaN(by=parseFloat(bz))?!bz||bz==="auto"?0:bz:by},custom:function(bE,bD,bB){var by=this,bA=b.fx,bC;this.startTime=a7||bj();this.start=bE;this.end=bD;this.unit=bB||this.unit||(b.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function bz(bF){return by.step(bF)}bz.elem=this.elem;if(bz()&&b.timers.push(bz)&&!a5){if(V){a5=1;bC=function(){if(a5){V(bC);bA.tick()}};V(bC)}else{a5=setInterval(bA.tick,bA.interval)}}},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bC){var bB=a7||bj(),by=true,bD=this.elem,bz=this.options,bA,bF;if(bC||bB>=bz.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bz.animatedProperties[this.prop]=true;for(bA in bz.animatedProperties){if(bz.animatedProperties[bA]!==true){by=false}}if(by){if(bz.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bG,bH){bD.style["overflow"+bH]=bz.overflow[bG]})}if(bz.hide){b(bD).hide()}if(bz.hide||bz.show){for(var bE in bz.animatedProperties){b.style(bD,bE,bz.orig[bE])}}bz.complete.call(bD)}return false}else{if(bz.duration==Infinity){this.now=bB}else{bF=bB-this.startTime;this.state=bF/bz.duration;this.pos=b.easing[bz.animatedProperties[this.prop]](this.state,bF,0,1,bz.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){for(var bz=b.timers,by=0;by<bz.length;++by){if(!bz[by]()){bz.splice(by--,1)}}if(!bz.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(a5);a5=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(by){b.style(by.elem,"opacity",by.now)},_default:function(by){if(by.elem.style&&by.elem.style[by.prop]!=null){by.elem.style[by.prop]=(by.prop==="width"||by.prop==="height"?Math.max(0,by.now):by.now)+by.unit}else{by.elem[by.prop]=by.now}}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(by){return b.grep(b.timers,function(bz){return by===bz.elem}).length}}function B(bA){if(!U[bA]){var by=b("<"+bA+">").appendTo("body"),bz=by.css("display");by.remove();if(bz==="none"||bz===""){if(!bc){bc=av.createElement("iframe");bc.frameBorder=bc.width=bc.height=0}av.body.appendChild(bc);if(!n||!bc.createElement){n=(bc.contentWindow||bc.contentDocument).document;n.write("<!doctype><html><body></body></html>")}by=n.createElement(bA);n.body.appendChild(by);bz=b.css(by,"display");av.body.removeChild(bc)}U[bA]=bz}return U[bA]}var Y=/^t(?:able|d|h)$/i,ae=/^(?:body|html)$/i;if("getBoundingClientRect" in av.documentElement){b.fn.offset=function(bL){var bB=this[0],bE;if(bL){return this.each(function(bM){b.offset.setOffset(this,bL,bM)})}if(!bB||!bB.ownerDocument){return null}if(bB===bB.ownerDocument.body){return b.offset.bodyOffset(bB)}try{bE=bB.getBoundingClientRect()}catch(bI){}var bK=bB.ownerDocument,bz=bK.documentElement;if(!bE||!b.contains(bz,bB)){return bE?{top:bE.top,left:bE.left}:{top:0,left:0}}var bF=bK.body,bG=aL(bK),bD=bz.clientTop||bF.clientTop||0,bH=bz.clientLeft||bF.clientLeft||0,by=bG.pageYOffset||b.support.boxModel&&bz.scrollTop||bF.scrollTop,bC=bG.pageXOffset||b.support.boxModel&&bz.scrollLeft||bF.scrollLeft,bJ=bE.top+by-bD,bA=bE.left+bC-bH;return{top:bJ,left:bA}}}else{b.fn.offset=function(bJ){var bD=this[0];if(bJ){return this.each(function(bK){b.offset.setOffset(this,bJ,bK)})}if(!bD||!bD.ownerDocument){return null}if(bD===bD.ownerDocument.body){return b.offset.bodyOffset(bD)}b.offset.initialize();var bG,bA=bD.offsetParent,bz=bD,bI=bD.ownerDocument,bB=bI.documentElement,bE=bI.body,bF=bI.defaultView,by=bF?bF.getComputedStyle(bD,null):bD.currentStyle,bH=bD.offsetTop,bC=bD.offsetLeft;while((bD=bD.parentNode)&&bD!==bE&&bD!==bB){if(b.offset.supportsFixedPosition&&by.position==="fixed"){break}bG=bF?bF.getComputedStyle(bD,null):bD.currentStyle;bH-=bD.scrollTop;bC-=bD.scrollLeft;if(bD===bA){bH+=bD.offsetTop;bC+=bD.offsetLeft;if(b.offset.doesNotAddBorder&&!(b.offset.doesAddBorderForTableAndCells&&Y.test(bD.nodeName))){bH+=parseFloat(bG.borderTopWidth)||0;bC+=parseFloat(bG.borderLeftWidth)||0}bz=bA;bA=bD.offsetParent}if(b.offset.subtractsBorderForOverflowNotVisible&&bG.overflow!=="visible"){bH+=parseFloat(bG.borderTopWidth)||0;bC+=parseFloat(bG.borderLeftWidth)||0}by=bG}if(by.position==="relative"||by.position==="static"){bH+=bE.offsetTop;bC+=bE.offsetLeft}if(b.offset.supportsFixedPosition&&by.position==="fixed"){bH+=Math.max(bB.scrollTop,bE.scrollTop);bC+=Math.max(bB.scrollLeft,bE.scrollLeft)}return{top:bH,left:bC}}}b.offset={initialize:function(){var by=av.body,bz=av.createElement("div"),bC,bE,bD,bF,bA=parseFloat(b.css(by,"marginTop"))||0,bB="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(bz.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});bz.innerHTML=bB;by.insertBefore(bz,by.firstChild);bC=bz.firstChild;bE=bC.firstChild;bF=bC.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(bE.offsetTop!==5);this.doesAddBorderForTableAndCells=(bF.offsetTop===5);bE.style.position="fixed";bE.style.top="20px";this.supportsFixedPosition=(bE.offsetTop===20||bE.offsetTop===15);bE.style.position=bE.style.top="";bC.style.overflow="hidden";bC.style.position="relative";this.subtractsBorderForOverflowNotVisible=(bE.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(by.offsetTop!==bA);by.removeChild(bz);b.offset.initialize=b.noop},bodyOffset:function(by){var bA=by.offsetTop,bz=by.offsetLeft;b.offset.initialize();if(b.offset.doesNotIncludeMarginInBodyOffset){bA+=parseFloat(b.css(by,"marginTop"))||0;bz+=parseFloat(b.css(by,"marginLeft"))||0}return{top:bA,left:bz}},setOffset:function(bB,bK,bE){var bF=b.css(bB,"position");if(bF==="static"){bB.style.position="relative"}var bD=b(bB),bz=bD.offset(),by=b.css(bB,"top"),bI=b.css(bB,"left"),bJ=(bF==="absolute"||bF==="fixed")&&b.inArray("auto",[by,bI])>-1,bH={},bG={},bA,bC;if(bJ){bG=bD.position();bA=bG.top;bC=bG.left}else{bA=parseFloat(by)||0;bC=parseFloat(bI)||0}if(b.isFunction(bK)){bK=bK.call(bB,bE,bz)}if(bK.top!=null){bH.top=(bK.top-bz.top)+bA}if(bK.left!=null){bH.left=(bK.left-bz.left)+bC}if("using" in bK){bK.using.call(bB,bH)}else{bD.css(bH)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bA=this[0],bz=this.offsetParent(),bB=this.offset(),by=ae.test(bz[0].nodeName)?{top:0,left:0}:bz.offset();bB.top-=parseFloat(b.css(bA,"marginTop"))||0;bB.left-=parseFloat(b.css(bA,"marginLeft"))||0;by.top+=parseFloat(b.css(bz[0],"borderTopWidth"))||0;by.left+=parseFloat(b.css(bz[0],"borderLeftWidth"))||0;return{top:bB.top-by.top,left:bB.left-by.left}},offsetParent:function(){return this.map(function(){var by=this.offsetParent||av.body;while(by&&(!ae.test(by.nodeName)&&b.css(by,"position")==="static")){by=by.offsetParent}return by})}});b.each(["Left","Top"],function(bz,by){var bA="scroll"+by;b.fn[bA]=function(bD){var bB,bC;if(bD===O){bB=this[0];if(!bB){return null}bC=aL(bB);return bC?("pageXOffset" in bC)?bC[bz?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bC.document.documentElement[bA]||bC.document.body[bA]:bB[bA]}return this.each(function(){bC=aL(this);if(bC){bC.scrollTo(!bz?bD:b(bC).scrollLeft(),bz?bD:b(bC).scrollTop())}else{this[bA]=bD}})}});function aL(by){return b.isWindow(by)?by:by.nodeType===9?by.defaultView||by.parentWindow:false}b.each(["Height","Width"],function(bz,by){var bA=by.toLowerCase();b.fn["inner"+by]=function(){return this[0]?parseFloat(b.css(this[0],bA,"padding")):null};b.fn["outer"+by]=function(bB){return this[0]?parseFloat(b.css(this[0],bA,bB?"margin":"border")):null};b.fn[bA]=function(bC){var bD=this[0];if(!bD){return bC==null?null:this}if(b.isFunction(bC)){return this.each(function(bH){var bG=b(this);bG[bA](bC.call(this,bH,bG[bA]()))})}if(b.isWindow(bD)){var bE=bD.document.documentElement["client"+by];return bD.document.compatMode==="CSS1Compat"&&bE||bD.document.body["client"+by]||bE}else{if(bD.nodeType===9){return Math.max(bD.documentElement["client"+by],bD.body["scroll"+by],bD.documentElement["scroll"+by],bD.body["offset"+by],bD.documentElement["offset"+by])}else{if(bC===O){var bF=b.css(bD,bA),bB=parseFloat(bF);return b.isNaN(bB)?bF:bB}else{return this.css(bA,typeof bC==="string"?bC:bC+"px")}}}}});bf.jQuery=bf.$=b})(window);return window.jQuery});kola("newt.app.recommends.Guess",["jquery.Core","util.data.DataBuffer","newt.data.Synchronizer","newt.service.StatisticService"],function(f,g,d,c){var a={SCHOOL:"school",COMPANY:"company",NEAR:"near",ALL:"_all"};function b(j){var h=this;j=f.extend({pageSize:3,cacheSize:9},j);f.extend(this,j);f.extend(this,{target:f(j.target),firstGetData:true,widgetid:"guess_"+(++b.COUNT),dataBuffer:new g({bufferSize:h.cacheSize,filler:function(m,n,l){kola("newt.service.Recommends",function(o){o.getGuessRecommends({params:{cons:a.ALL+","+m+","+n,src:"widget"},beforeCall:function(){h.MOREGUESS_LOCKED=true},complete:function(){h.MOREGUESS_LOCKED=false},success:function(p){h.MOREGUESS_LOCKED=false;if(l){l(p.data)}}})})}})});h.target.attr("data-widgetid",h.widgetid);f("[data-widgetid='"+h.widgetid+"'] div.js-user").live("mouseenter",function(){f(this).find("a.js-remove").show()}).live("mouseleave",function(){f(this).find("a.js-remove").hide()});var k=[];d.watch("follow_op_list",function(n){if(n){var o=n.dataSet;for(var l in o){if(o[l].value==true){k.push(l);var m=h.target.find("div.js-user-"+l).find("a.js-add-follow").addClass("fuc_dis").find("b:first").html("已关注")}}d.sync("usercard_status")}});d.watch("usercard_status",function(o){if(o=="hide"||!o){for(var m=k.length-1;m>=0;--m){var l=k.pop();var n=h.target.find("div.js-user-"+l);if(n.size()<=0||n.data("fadeoutting")==true){continue}n.data("fadeoutting",true);n.find("a.js-add-follow").addClass("fuc_dis").find("b:first").html("已关注");(function(q,p){setTimeout(function(){h.reFillPeople({uid:q,complete:function(){p.data("fadeoutting",false)}})},500)})(l,n)}}});h.target.bind("click",function(n){var l=f(n.target).closest("a");if(l.hasClass("js-next")){h.next()}if(l.hasClass("js-remove")&&l.data("sending")!=true){var m=l.attr("data-userid");kola("newt.service.Recommends",function(o){o.removeGuess({params:{uid:m},beforeCall:function(){l.data("sending",true)},complete:function(){h.reFillPeople({uid:m})}})})}if(l.hasClass("js-add-follow")&&l.data("sending")!=true){kola("newt.service.Follows",function(o){var p=[l.parents("div.js-user").attr("data-userid")];o.follow({params:{uids:p},beforeCall:function(){l.data("sending",true)},success:function(q){if(q.status!=0){l.data("sending",false);kola("newt.dialog.Notice",function(){tw.notice.alert(q.statusText)})}},fail:function(){l.data("sending",false);kola("newt.dialog.Notice",function(){tw.notice.alert("平地惊雷一声响！服务器爆炸咯~请稍后再试亲~")})}})})}});h.next();if(b.COUNT<=1){f("[data-st]",h.target).live("mousedown",function(){var m=f(this).attr("data-st");try{var l=f.parseJSON(m);if(l){c.log(l.position,"click",{uid:l.uid})}}catch(n){}})}}b.COUNT=0;b.prototype.next=function(j){var h=this;if(h.MOREGUESS_LOCKED==true){return}kola("mvc.view.TemplateEngine",function(k){k.getTemplate({name:"template.main.app.recommends.guess",complete:function(l){h.dataBuffer.getData({num:h.pageSize,complete:function(p){if(p.length<=0&&h.firstGetData){h.target.remove();return}h.firstGetData=false;var o=f(l.render({data:p}));for(var n=0,m=p.length;n<m;++n){c.log("Guess","be-recommend",{uid:p[n].id,recmdReason:p[n].recmdReason})}h.target.html("").append(o);h.target.find("div.js-guess-userlist").fadeIn(300)}})}})})};b.prototype.reFillPeople=function(j){j=f.extend({complete:function(){}},j);var h=this;kola("mvc.view.TemplateEngine",function(k){k.getTemplate({name:"template.main.app.recommends.guess_avatar_content",complete:function(l){var m=h.target.find("div.js-user-"+j.uid);h.dataBuffer.getData({num:1,complete:function(n){if(n.length>0){n=n[0];if(h.target.find("div.js-user-"+n.id).size()){h.reFillPeople({uid:j.uid});return}}else{m.remove();j.complete();if(h.target.find("div.js-user").size()<=0){h.next()}return}m.html("");m.removeClass("js-user-"+j.uid).addClass("js-user-"+n.id).attr("data-userid",n.id);c.log("Guess","be-recommend",{uid:n.id,recmdReason:n.recmdReason});var o=f(l.render({data:n}));m.css("display","none").append(o).fadeIn(300,function(){j.complete()})}})}})})};return b});kola("newt.app.recommends.HotRecommendsSimple",["jquery.Core","util.data.DataBuffer","newt.data.Synchronizer"],function(b,d,a){function c(h){var f={"娱乐":"yule","热点":"hot","搞笑":"funny","美图":"photo",ALL:"_all"};var g=this;h=b.extend({pageSize:4,cacheSize:20},h);b.extend(this,h);b.extend(this,{target:b(h.target),firstGetData:true,widgetid:"hrs_"+(++c.COUNT),dataBuffer:new d({bufferSize:g.cacheSize,filler:function(l,m,k){kola("newt.service.Recommends",function(n){n.getHotRecommends({params:{cons:f.ALL+","+l+","+m},beforeCall:function(){g.HOTRECOMMENDS_LOCKED=true},complete:function(){g.HOTRECOMMENDS_LOCKED=false},success:function(o){g.HOTRECOMMENDS_LOCKED=false;if(k){k(o.data)}}})})}})});g.target.attr("data-widgetid",g.widgetid);b("[data-widgetid='"+g.widgetid+"'] div.js-user").live("mouseenter",function(){b(this).find("a.js-del").show()}).live("mouseleave",function(){b(this).find("a.js-del").hide()});var j=[];a.watch("follow_op_list",function(m){if(m){var n=m.dataSet;for(var k in n){if(n[k].value==true){j.push(k);var l=g.target.find("div.js-user-"+k).find("a.js-add-follow").addClass("fuc_dis").find("b:first").html("已关注")}}a.sync("usercard_status")}});a.watch("usercard_status",function(n){if(n=="hide"||!n){for(var l=j.length-1;l>=0;--l){var k=j.pop();var m=g.target.find("div.js-user-"+k);if(m.size()<=0||m.data("fadeoutting")==true){continue}m.data("fadeoutting",true);m.find("a.js-add-follow").addClass("fuc_dis").find("b:first").html("已关注");(function(p,o){setTimeout(function(){g.reFillPeople({uid:p,complete:function(){o.data("fadeoutting",false)}})},500)})(k,m)}}});g.target.bind("click",function(l){var k=b(l.target).closest("a");if(k.hasClass("js-next")){g.next()}if(k.hasClass("js-del")){g.reFillPeople({uid:k.attr("data-userid")})}if(k.hasClass("js-add-follow")&&k.data("sending")!=true){kola("newt.service.Follows",function(m){var n=[k.parents("div.js-user").attr("data-userid")];m.follow({params:{uids:n},beforeCall:function(){k.data("sending",true)},success:function(o){if(o.status!=0){k.data("sending",false);kola("newt.dialog.Notice",function(){tw.notice.alert(o.statusText)})}},fail:function(){k.data("sending",false);kola("newt.dialog.Notice",function(){tw.notice.alert("平地惊雷一声响！服务器爆炸咯~请稍后再试亲~")})}})})}});b(function(){g.next()})}c.COUNT=0;c.prototype.next=function(g){var f=this;if(f.HOTRECOMMENDS_LOCKED==true){return}kola("mvc.view.TemplateEngine",function(h){h.getTemplate({name:"template.main.app.recommends.hot.simpleface",complete:function(j){f.dataBuffer.getData({num:f.pageSize,complete:function(l){if(l.length<=0&&f.firstGetData){f.target.remove();return}f.firstGetData=false;var k=b(j.render({data:{widget:"simple",list:l}}));f.target.html("").append(k);f.target.find("div.js-recommends-list").fadeIn(300)}})}})})};c.prototype.reFillPeople=function(g){g=b.extend({complete:function(){}},g);var f=this;kola("mvc.view.TemplateEngine",function(h){h.getTemplate({name:"template.main.app.recommends.hot.avatarcontent",complete:function(j){var k=f.target.find("div.js-user-"+g.uid);f.dataBuffer.getData({num:1,complete:function(l){if(l.length>0){l=l[0];if(f.target.find("div.js-user-"+l.id).size()){f.reFillPeople({uid:g.uid});return}}else{k.remove();g.complete();if(f.target.find("div.js-user").size()<=0){f.next()}return}k.html("");k.removeClass("js-user-"+g.uid).addClass("js-user-"+l.id).attr("data-userid",l.id);var m=b(j.render({data:l}));k.css("display","none").append(m).fadeIn(300,function(){g.complete()})}})}})})};return c});kola("newt.left.Main",["newt.left.Init"],function(a){var b={init:function(d){var c=this;c._initVar();a.initMainFunc();a.initDropdownMenu();window.CRTWCONFIG.C_CACHE=true;a.initComposer();a.initRightUserNum();a.tipPinSite();kola("newt.comet.Feed",function(){tw.feed.init()});c.initHotTwi();c.initHotTwiTag();c.initDelTwi();kola("newt.monitor.Performance",function(f){setTimeout(function(){f.sendLog("newtNavTimingHome")},10000)})},_initVar:function(){document.domain="sohu.com"},initSohuEmail:function(c){a._initSohuEmail(c)},initHotTwiTag:function(){var c=$("div .twiHot");c.delegate("div.twiC","mouseenter",function(){$("div.twiSign a i").attr("style","background-position: -125px -150px;")});c.delegate("div.twiC","mouseleave",function(){$("div.twiSign a i").removeAttr("style")})},initHotTwi:function(){var g,f,d=0,c;g=function(h,k){var j=$(h).find(".bubble");if(k){$("div.twiSign a i").attr("style","background-position: -125px -150px;");j.removeClass("noDis")}else{j.addClass("noDis")}};f=function(){tw.notice.confirm({msg:"确认不再接收此类微博吗？",subMsg:"确认后，这类微博将不会出现在你的微博列表中<br>可在个性设置中再次开启接收",title:"提示信息",subHandle:function(){$.ajax({url:"/settings/private/closeShowTopMsg",type:"get",dataType:"json",data:"topMsg=0",success:function(h){if(h.status==0){tw.notice.showTip("操作成功")}else{tw.notice.showErrTip("操作失败")}}})}})};c=$("#twitter_container");c.delegate("div.twiSign","mouseenter",function(){d=$(this).data("tid");clearTimeout(d);g(this,1)});c.delegate("div.twiSign","mouseleave",function(){var h=this;$("div.twiSign a i").removeAttr("style");d=setTimeout(function(){g(h,0)},500);$(h).data("tid",d)});c.delegate("div.twiSign","click",function(j){var h=$(j.target).closest("a.jsBtnAcceptHot");if(h.size()>0){g(this,0);f()}})},initDelTwi:function(){function d(){var j,h,g,f=false;j=window.location.href;h=j.split("/");if(h.length>0){j=h[h.length-1];f=j.indexOf("home")>-1?true:false}return f}var c=function(m){if(!d()){return}var h=$(this);var g=$(m.target).closest("p.twiOpt>a");if(g.size()==0){return}var k,f,j;k=$(this).find(">div.twiT");f=k.find("b.nm a").text();j=k.find(">p.avt").attr("ref");kola("newt.ca.ca",function(){CA.q("timeline_cancelFollow_click")});kola("newt.dialog.Notice",function(o){tw.notice.confirm({title:"提示信息",msg:"对 "+f+" 的微博不感兴趣，取消对TA的关注？",subMsg:"取消对TA的关注，TA的新微博将不会出现在你的微博列表中",subHandle:function(){kola("newt.ca.ca",function(){CA.q("timeline_cancelFollow_sure")});kola("newt.service.Follows,newt.ca.ca",function(p){p.cancelFollow({params:{uid:j},success:function(q){if(q.status==0||q.status==2){CA.q("timeline_cancelFollow_sure_success");h.fadeOut("slow",function(){h.remove()})}else{tw.notice.showErrTip("操作失败")}},fail:function(){tw.notice.showErrTip("操作失败")}})})}})});var n=$(this).closest('.twi[id$="_con"]');var l=n.attr("id").match(/\d+/)[0];kola("newt.service.StatisticService",function(o){o.log("newt_msg_cancle_follow","click",{page:location.href,twiId:l})})};$("div.twi").live({mouseenter:function(){if(d()){$(this).addClass("twi_hover")}},mouseleave:function(){if(d()){$(this).removeClass("twi_hover")}},click:c})},initComposerAd:function(){var c=$("#original").find("em");kola("newt.widget.Flow2",function(d){d(c,{type:"shift",invTime:5000})})},initPicAd:function(f){var d,h;d=$("#dAdNotice");h=$(f);h.find(".noticeAdImg").find("li").addClass("nodis");h.find(".noticeAdnum").find("li").removeClass("on");d.before(h);d.remove();var j=$("#imgtxt_notice_scroll_div");var c=h.find(".adDrop ul");var g=false;h.hover(function(k){g=true;var l=j.find("li:visible").attr("seq");c.children().eq(l-1).removeClass("noDis")},function(){g=false;c.find("li:visible").addClass("noDis")});j.bind("updatePage",function(k,l){if(!g){return}c.find("li:visible").addClass("noDis");c.children().eq(l-1).removeClass("noDis")});a.initImageScroll(j)},showFilter:function(c){var d=$("#t-type");if(d.hasClass("noDis")){d.removeClass("noDis");$(c).addClass("act");$(c).attr("title","隐藏高级筛选");kola("kola.bom.Cookie",function(f){f.set("t-g-toggle","1","never","/","t.sohu.com");f.set("t-g-toggle","1","never","/",".t.sohu.com")})}else{d.addClass("noDis");$(c).removeClass("act");$(c).attr("title","展开高级筛选");kola("kola.bom.Cookie",function(f){f.remove("t-g-toggle","/","t.sohu.com");f.remove("t-g-toggle","/",".t.sohu.com")})}}};return b});kola("newt.util.Browser",null,function(){var ua=navigator.userAgent,ieReg=/msie\s+(\d+\.\d+)/i,match=ua.match(ieReg);isIE=match!=null,ieV=((match&&match[1])||""),isIPad=ua.indexOf("ipad")!=-1;var isSafari=ua.indexOf("Safari")!=-1,isFirefox=ua.indexOf("Firefox")!=-1,isOpera=ua.indexOf("Opera")!=-1,isChrome=ua.indexOf("Chrome")!=-1,isWebKit=ua.indexOf("WebKit")!=-1;var isWin=ua.indexOf("Windows")!=-1,isLinux=ua.indexOf("Linux")!=-1,isMac=ua.indexOf("Mac")!=-1,isiOS=ua.indexOf("iPhone OS")!=-1;var testInput=document.createElement("input");return{isIPad:isIPad,isIPhone:!isIPad&&ua.indexOf("iphone")!=-1,isIE:isIE,isIE6:isIE&&ieV=="6.0",isIE7:isIE&&ieV=="7.0",isIE8:isIE&&document.documentMode==8,isIE9:isIE&&document.documentMode==9,isChrome:isChrome,isSafari:isSafari&&!isChrome,isFirefox:isFirefox,isOpera:isOpera,isWebKit:isWebKit,getPlatform:function(){if(ua.indexOf("Windows")!=-1){return"Windows"}if(ua.indexOf("Linux")!=-1){return"Linux"}if(ua.indexOf("Mac")!=-1){return"Mac"}if(ua.indexOf("iPhone OS")!=-1){return"iOS"}},supportPlaceholder:function(){return"placeholder" in testInput},supportDataURL:function(){return !(this.isIE6||this.isIE7)},supportFlash:function(){return checkPlugins("Shockwave","ShockwaveFlash.ShockwaveFlash")},supportAjaxUpload:function(){var isSafari=this.isSafari;var isWindows=this.getPlatform()=="Windows";if(typeof FormData=="undefined"){return false}if(isSafari&&isWindows){return false}return true},supportCaptureOpt:function(){return isIE||isFirefox},supportPlugin:function(pluginName,actvxName){return checkPlugins(pluginName,actvxName)},isDragFile:function(e){var transfer=e.dataTransfer;var evtType=e.type;if(evtType=="drop"||evtType=="dragdrop"){var files=transfer.files;if(files){return files&&files.length>0}else{return !(transfer.getData("Text")||transfer.getData("URL"))}}if(evtType=="dragover"){if(transfer.types){var type,types=transfer.types;var i,len,isDrag=true;for(i=0,len=types.length;i<len;i++){type=types[i];if(type=="text/html"||type=="text/plain"){isDrag=false;break}}return isDrag}else{return !(transfer.getData("Text")||transfer.getData("URL"))}}}};function checkPlugins(pluginsName,activexObjectName){if(!activexObjectName){activexObjectName=pluginsName+"."+pluginsName}var np=navigator.plugins;if(np&&np.length){for(var i=0;i<np.length;i++){if(np[i].name.indexOf(pluginsName)!=-1){return true}}return false}else{if(window.ActiveXObject){try{var axobj=eval("new ActiveXObject(activexObjectName);");return axobj?true:false}catch(e){return false}}else{return false}}}});kola("newt.ui.window.dialog.ReviewPic",["jquery.Core","newt.window.Window","newt.net.interface.Bubble","newt.ca.ca"],function(d,c,f){var b=function(){return['<div class="mwBd">','<a class="btn jsClose" data-ca="newt_bubble_reviewPic_know" href="javascript:void(0)">',"<b>知道了</b>","</a>",'<a class="fuc jsClose" data-ca="newt_bubble_reviewPic_more" href="http://t.sohu.com/help/domain?key=help_01012" target="_blank">',"<b>了解更多</b>...","</a>","</div>"]};var a={show:function(g){this._build({name:g})},_build:function(m){if(!m){return}var j=this;var h="tw_bubble_"+m.name;var k=d("#"+h);if(k.size()==0){var l=tw.window.build(h,b,{parentFixed:false,expose:{opacity:0.5,color:"#000000"}},{prefixHtml:c.prototype.winNoFootBtnPrefix(),suffixHtml:c.prototype.winNoFootBtnSuffix()});l.setTitle("");var g=d(l.getElement());g.addClass("mwFcwi");l.show();k=d("#"+h);k.find(".mwHd").remove();k.attr("data-mt","bubble");k.attr("data-mode","model");k.find("a.jsClose").bind("click",function(){l.close();j._closeByServer(m.name)});k.find("a.close").mousedown(function(){CA.q("newt_bubble_close_"+m.name);j._closeByServer(m.name)})}},_closeByServer:function(g){f.closeCommonBubble({name:g})}};return a});kola("newt.settings.Theme",["sohu.view.Local","newt.tool.Url","newt.timeline.Container","newt.swf.SwfUpload","newt.swf.jquerySwfUpload","newt.Config","newt.composer.TwComposer","newt.plug.RadioClass","newt.twitter.Twitter","newt.dialog.Notice","newt.ca.ca","sohu.ctrl.SimplePager"],function(Local){var Theme={status:0,DATA:{SKINTEMPLATE:("<style type='text/css' id='skin2'>  .land{background-repeat:{DISPLAY}}  .land{background-position:{ALIGN}} {TOPHEIGHT}  .land{background-image:{BACKPIC}}  .land{background-attachment: {BK_SCROLL}}</style>"),SKINTEMPLATE1:("<style type='text/css' id='skin2'> .land {background:none}  body{background-repeat:{DISPLAY}}  body{background-position:{ALIGN}} {TOPHEIGHT}  body{background-image:{BACKPIC}}  body{background-attachment: {BK_SCROLL}}</style>"),PICTEMPLATE:(".land {background-image:{PIC}}"),TOPHEIGHT:[""," .LANDBG {padding-top:110px} "," .LANDBG {padding-top:165px} "],DISPLAY:["no-repeat","repeat"],BK_SCROLL:["fixed","scroll"],ALIGN:[{left:"left 0",middle:"center 0",right:"right 0"},{left:"left 35px",middle:"center 35px",right:"right 35px"},{left:"left 180px",middle:"center 180px",right:"right 180px"}]},fontTipHtml:function(){var arr=['<span class="bubble bubD">','<span class="bubC">','<a href="javascript:void(0);" title="关闭" class="close"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a>	<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<span class="bubBd">字体可以设置了，<br>快点开试试！</span>',"</span>","</span>"];return arr.join("")},ChgThemeTipHtml:function(){var arr=['<span class="bubble  bub2 bubL">','<span class="bubC">','<a href="javascript:void(0);" title="关闭" class="close"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a>	<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<span class="bubBd">喜欢Ta的模板吗？<br>点击此处就可使用！</span>',"</span>","</span>"];return arr.join("")},initPage:function(){var that=this;if($.cr.cookie.get("tc-settheme")=="1"){tw.delCookie("tc-settheme");Local.asView("#_toolbar_theme")}else{if($.url.param("from")=="timeline"){Local.asView("#_toolbar_theme")}}that.initChangeThemeEvt()},initChangeThemeEvt:function(){var that=this;var ele,hasInit;ele=$("#changeSameTheme");if(ele.size()==0){return}hasInit=ele.data("hasInit");if(hasInit){return}ele.find("i.p").mouseenter(function(e){that.play(e)}).mouseleave(function(e){that.stop(e)}).click(function(e){that.changeTheme(e)});ele.data("hasInit",1)},changeTheme:function(event){var self=this;var lookedId=0;var f=false,pageName;if(typeof(LOOKEDUSER)!="undefined"&&LOOKEDUSER.id){lookedId=LOOKEDUSER.id}try{pageName=tw.getPageName().name;if(pageName.indexOf("people")>-1&&lookedId!=0&&lookedId!=UID){f=true}}catch(ex){f=false}if(f){var pd={};if(!LOOKEDUSER.theme.isSlefTheme){pd.tid=LOOKEDUSER.theme.cthemeid}else{pd=LOOKEDUSER.theme.ndft;pd.tid=pd.gobbasethemeid}tw.notice.confirm({msg:'您确定要使用"'+LOOKEDUSER.name+'"用的这套模板吗？',subHandle:function(){self.themeAjax(pd,"/settings/theme/set",{okHandle:function(json){if(json&&json.status==0){self.showAddWin("更换模板","更换模板成功!","@"+LOOKEDUSER.name+" 的模板还真不错，我换装了一样的，你不来试试？ "+HOST+"/u/"+LOOKEDUSER.id,"")}else{tw.notice.alert("换装失败，请稍候再试！")}},errHandle:function(xmlReq,err){tw.notice.alert("换肤失败, 请稍后重试!")}})}})}else{CA.q("newt_theme_change_rightEnter");self.navTheme(event)}return false},navTheme:function(event){var self=this;var e=event||window.event;var f=false,pageName;try{pageName=tw.getPageName().name;if((pageName.indexOf("home")>-1||pageName.indexOf("profile")>-1)&&self.status==0){f=true;Local.asView("#_toolbar_theme")}}catch(ex){f=false}if(!f){tw.setCookie("tc-settheme","1",null);setTimeout(function(){window.location.href="/home"},10)}if(e&&e.cancelBubble){e.cancelBubble=true}if(e&&e.stopPropagation){e.stopPropagation()}},initSkinAndBg:function(opt){var skinUrl=opt.skin;if(skinUrl==""){skinUrl="#"}$("#skin").attr("href",skinUrl);if(!opt.isSlefTheme){$("#skin2").remove()}else{this.setCurTheme(opt.ndft);this.initBg()}},init:function(opt){var self=this;self.initStyle(opt);self.picInit();self.initTab();self.initpager();self.regCustomTabEvents();self.initCustomTabDisplay();$("#iHelpBtn").mouseenter(function(){$("#sBubTip").removeClass("noDis")});$("#pNoteBtn").mouseleave(function(){$("#sBubTip").addClass("noDis")});$("#themeallType").find("#btnSave").click(function(){self.closeThemePanel();self.save();if(self.isSelf){self.changeStyle()}});$("#themeallType").find("#btnCancel").click(function(){if($.url.param("from")=="timeline"){setTimeout(function(){location.href="/home"},10);return false}self.closeThemePanel();self.cancel();if(self.isSelf){self.changeStyle()}});self.openThemePanel();if(self.isSelf){self.changeStyle()}},initStyle:function(opt){var hasSelf=opt.hasSelf;var curTheme=opt.curtheme;if(!curTheme.lastSelfPic){curTheme.align="middle";curTheme.type="_self";curTheme.topheight=0;curTheme.display=1;curTheme.isScroll=false}this.tlist=opt.tlist;this.oldid=opt.oldid;this.isStar=opt.isStar;this.currentid=opt.currentid;this.curtheme=opt.curtheme;if(hasSelf&&(hasSelf==true||$.trim(hasSelf)=="true")){hasSelf=true}else{hasSelf=false}this.UID=UID;this.isSelf=hasSelf;this.fontType=$("span.jsFontCSS a.on").attr("data-fonttype");this.oldHtmlCss=$("html").attr("class");this.oldIsSelf=hasSelf;this.setOldTheme(opt.curtheme)},initCustomTabDisplay:function(){if(!this.curtheme){return}var panel=$(".themeUp");var theme=this.curtheme;var fnSelectBtn=function(items,index){var i,len=items.length;for(i=0;i<len;i++){if(i==index){$(items[i]).addClass("on")}else{$(items[i]).removeClass("on")}}};var align=theme.align;fnSelectBtn(panel.find('[data-mt="align-set"] .btnR'),(align=="left"?0:align=="middle"?1:2));fnSelectBtn(panel.find('[data-mt="top-pos-set"] .btnR'),theme.topheight);var type=this.curtheme.type;var isShowBgImg=(type=="_self"||type=="_self");panel.find("#themeUsePic").attr("checked",isShowBgImg);var isRepeatBgImage=this.curtheme.display==1;panel.find('[data-mt="bg-repeat"]').attr("checked",isRepeatBgImage);var isBgImageFixed=!this.curtheme.isScroll;panel.find('[data-mt="bg-fixed"]').attr("checked",isBgImageFixed);if(theme.lastSelfPic){panel.find('[data-mt="example"]').addClass("nodis");panel.find('[for="themeUsePic"]').removeClass("nodis");panel.find("#theme_complete").removeClass("nodis");panel.find(".swfuploadbutton").html("更换图片")}},play:function(e){var time=100,themePanel=$("#changeSameTheme");themePanel.attr("class","usetheme usetheme_1");setTimeout(function(){themePanel.attr("class","usetheme usetheme_2");setTimeout(function(){themePanel.attr("class","usetheme usetheme_3")},time)},time)},stop:function(e){var time=100;var start=$("#changeSameTheme").attr("class");start=parseInt(start.substr(start.length-1,1))-1;if(start>0){$("#changeSameTheme").attr("class","usetheme usetheme_"+start)}switch(start){case 2:setTimeout(function(){$("#changeSameTheme").attr("class","usetheme usetheme_1");setTimeout(function(){$("#changeSameTheme").attr("class","usetheme")},time)},time);break;case 1:setTimeout(function(){$("#changeSameTheme").attr("class","usetheme")},time);break;default:$("#changeSameTheme").attr("class","usetheme")}},openThemePanel:function(){this.status=1;var land=$("div.land");var allType=$("#themeallType");var curTop=0;var maxTop=180;var move=20;var interval=50;var thread;$("body").addClass("HasTheme");$("div.land").animate({marginTop:"180px"},"normal");$("#themeallType").css("top","35px").animate({top:"180px"},"normal")},closeThemePanel:function(){this.status=0;$("#_toolbar_theme").removeAttr("data-view-disabled");$("body").removeClass("HasTheme");$("div.land").animate({marginTop:"35px"},"normal");$("#themeallType").animate({top:"35px"},"normal")},picInit:function(){if(typeof UID=="undefined"){return}var button_placeholder=$("<span></span>").insertBefore("#themeallType .swfuploadbutton")[0];var penel=$(".themeUp");var me=this;penel.swfupload({upload_url:CRTWCONFIG.UPURL,file_size_limit:3*1024+"",file_types:"*.jpg;*.png;*.gif;*.JPG;*.PNG;*.GIF;",file_types_description:"Image Files",file_upload_limit:"0",button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,flash_url:CRTWCONFIG.UPLOAD_SWF,button_image_url:CRTWCONFIG.C_SWF,button_width:100,button_height:16,button_placeholder:button_placeholder,debug:false,post_params:{uid:UID,serviceid:"34"},file_post_name:"Filedata",custom_settings:{something:"here"}}).bind("fileQueued",function(event,file){CA.q("newt_theme_changePic");$(this).swfupload("startUpload")}).bind("uploadStart",function(event,file){penel.find(".theme").removeClass("themeNan themeLoading")}).bind("uploadSuccess",function(event,file,serverData){var args=[].slice.call(arguments);me.onPicUpload.apply(me,args)}).bind("fileQueueError",function(o,f,ec,mg){if(ec==-110){tw.notice.alert("上传图片超过了最大限制(3m)，请选择其它图片上传~")}})},onPicUpload:function(event,file,serverData){var data,srcF,panel=$(".themeUp");panel.find('[data-mt="example"]').addClass("nodis");panel.find('[for="themeUsePic"]').removeClass("nodis").find("input").attr("checked",true);$("#theme_complete").removeClass("nodis");data=eval("("+serverData+")");srcF=data.data;icon_path=data.statusText;panel.find(".swfuploadbutton").html("更换图片");this.loadimg(srcF,icon_path)},loadimg:function(src,icon_path){if(typeof src=="undefined"||src==""||typeof icon_path=="undefined"||icon_path==""){return}var srcF=src;var index=srcF.indexOf("/"+icon_path);if(index==-1){return}srcF=srcF.substring(0,index)+"/f_"+icon_path;$("#themeImgId").attr("src",srcF);this.curtheme.bPicUrl=src;this.curtheme.sPicUrl=srcF;this.curtheme.type="_self";var isSelectUsePic=$("#themeUsePic").attr("checked");if(isSelectUsePic){this.initBg()}},initpager:function(){$("div.Theme>div.themeSel").simplepager({one:7,distance:826})},regCustomTabEvents:function(){var panel=$(".themeUp");var me=this;var onPanelBtnClick=function(){var val=$(this).data("val");var handler=$(this).data("handler");var parent=$(this).parent();try{me[handler](val)}catch(e){}$(parent.children()).removeClass("on");$(this).addClass("on")};var bindPanelBtnsEvent=function(items,vals,handler){for(var i=0,len=items.length;i<len;i++){$(items[i]).data("val",vals[i]).data("handler",handler).click(onPanelBtnClick)}};bindPanelBtnsEvent(panel.find('[data-mt="align-set"] .btnR'),["left","middle","right"],"changeAlign");bindPanelBtnsEvent(panel.find('[data-mt="top-pos-set"] .btnR'),["0","1","2"],"changeTopHeight");$("#themeUsePic").click(function(){me.curtheme.type=(this.checked?"_self":"_self_null");me.initBg()});panel.find('[data-mt="bg-repeat"]').click(function(){me.changeDis(this.checked?"1":"0")});panel.find('[data-mt="bg-fixed"]').click(function(){me.changeBg(this.checked?"0":"1")})},initTab:function(){var that=this;$("#t-theme-tabC").RadioClass({clicktag:"a",afterclick:function(fe){var id=fe.attr("id").split("_")[1];$("[id^=tabCId_]").addClass("nodis");$("#tabCId_"+id).removeClass("nodis");if(id==7){that.isSelf=true;var href,$id,item;if(that.curtheme&&that.curtheme.gobbasethemeid){$id=that.curtheme.gobbasethemeid;item=$("#theme_color_"+$id).addClass("selected");href=item.attr("ref")}else{item=$("#themeColorSelect").find("a:first").addClass("selected");$id=item.attr("id").split("_")[2];href=item.attr("ref")}that.curtheme.gobbasethemeid=$id;that.changeSkin(href,$id);that.initBg()}}});$("#themeallType").find("div.themeSel").find(".themes").RadioClass({tag:"a",focusClass:"selected",afterclick:function(li){var href=li.attr("ref"),$id=li.attr("id").split("_")[2];$("#skin2").remove();that.isSelf=false;that.changeSkin(href,$id)}});$("#themeColorSelect").RadioClass({tag:"a",focusClass:"selected",afterclick:function(li){var href=li.attr("ref"),$id=li.attr("id").split("_")[2];that.isSelf=true;that.curtheme.gobbasethemeid=$id;that.changeSkin(href,$id)}});$("span.jsFontCSS").RadioClass({tag:"a",focusClass:"on",afterclick:function(e){var ft=e.attr("data-fontType");that.changeFontType(ft)}});$("span.jsFontCSS a").mouseenter(function(e){var ft=$(e.target).attr("data-fontType");that.showFontType(ft)}).mouseleave(function(){var ft=$("span.jsFontCSS a.on").attr("data-fontType");that.showFontType(ft)})},setOldTheme:function(theme){this.oldtheme={topheight:theme.topheight,lastSelfPic:theme.lastSelfPic,align:theme.align,display:theme.display,sLastSPic:theme.sLastSPic,gobbasethemeid:theme.gobbasethemeid,type:theme.type,sPicUrl:theme.sPicUrl,bPicUrl:theme.bPicUrl,isScroll:theme.isScroll}},setCurTheme:function(theme){var self=this;self.curtheme={topheight:theme.topheight,lastSelfPic:theme.lastSelfPic,align:theme.align,display:theme.display,sLastSPic:theme.sLastSPic,gobbasethemeid:theme.gobbasethemeid,type:theme.type,sPicUrl:theme.sPicUrl,bPicUrl:theme.bPicUrl,isScroll:theme.isScroll}},changeSkin:function(skinaddr,tid){if(this.currentid!=tid){if(skinaddr==""){$("#skin").removeAttr("href")}else{$("#skin").attr("href",skinaddr)}this.currentid=tid}},initBg:function(){this.changeStyle();var caStr=(this.curtheme.type=="_self"?"newt_theme_use_bg_image":"newt_theme_not_use_bg_image");CA.q(caStr)},changeStyle:function(ppp){var self=this;if(self.curtheme.type=="_self_null"){$("#skin2").remove();return}var bod=$("body");var cont=this.DATA.SKINTEMPLATE+"";if(!self.curtheme.isScroll){cont=this.DATA.SKINTEMPLATE1+""}var topht=self.curtheme.topheight;if(topht<0||topht>2){topht=0}var tvl=self.DATA.TOPHEIGHT[topht];if(typeof tvl=="undefined"){tvl=""}if(topht==1){self.curtheme.topheight=1}else{if(topht==2){self.curtheme.topheight=2}else{self.curtheme.topheight=0}}cont=cont.replace("{TOPHEIGHT}",tvl);var dis=self.curtheme.display;var svl=self.DATA.DISPLAY[dis];if(typeof svl=="undefined"||svl.length<=0){svl=self.DATA.DISPLAY[0]}if(dis==1){self.curtheme.display=1}else{self.curtheme.display=0}cont=cont.replace("{DISPLAY}",svl);var align=self.curtheme.align;var aIndex=0;if(!self.curtheme.isScroll){if(self.status==0){aIndex=1}else{aIndex=2}}var avl=self.DATA.ALIGN[aIndex][align];if(typeof avl=="undefined"||avl.length<=0){avl=self.DATA.ALIGN[aIndex]["left"]}if(align=="middle"){self.curtheme.align="middle"}else{if(align=="right"){self.curtheme.align="right"}else{self.curtheme.align="left"}}cont=cont.replace("{ALIGN}",avl);var src="";var pic=self.curtheme.bPicUrl;if(typeof pic!="undefined"&&pic.length>0){src="url("+pic+")"}else{src="none"}cont=cont.replace("{BACKPIC}",src);var scroll=self.DATA.BK_SCROLL[0];if(self.curtheme.isScroll){scroll=self.DATA.BK_SCROLL[1]}cont=cont.replace("{BK_SCROLL}",scroll);$("#skin2").remove();$("#skin").after(cont);if($.browser.msie){setTimeout(function(){$("head").append($("#skin"));$("head").append($("#skin2"))},10)}},changeAlign:function(value){var bod=$("body");var align=value;if(align=="middle"){this.curtheme.align="middle"}else{if(align=="right"){this.curtheme.align="right"}else{this.curtheme.align="left"}}this.changeStyle();CA.q("newt_theme_align_"+this.curtheme.align)},changeDis:function(value){var dis=value;if(dis==1){this.curtheme.display=1}else{this.curtheme.display=0}this.changeStyle();CA.q("newt_theme_display_"+this.curtheme.display)},changeTopHeight:function(value){var topht=value;if(topht==1){this.curtheme.topheight=1}else{if(topht==2){this.curtheme.topheight=2}else{this.curtheme.topheight=0}}this.changeStyle();CA.q("newt_theme_topheight_"+this.curtheme.topheight)},changeBg:function(value){var bg=value;if(bg==1){this.curtheme.isScroll=1}else{this.curtheme.isScroll=0}this.changeStyle(1);CA.q("newt_theme_isScroll_"+this.curtheme.isScroll)},changeFontType:function(fType){var self=this;fType=parseInt(fType);switch(fType){case 1:$("html").removeClass("FontSys").removeClass("FontSimsun").addClass("FontYahei");self.fontType=1;break;case 0:$("html").removeClass("FontSys").removeClass("FontYahei").addClass("FontSimsun");self.fontType=0;break;case -1:default:$("html").removeClass("FontYahei").removeClass("FontSimsun").addClass("FontSys");self.fontType=-1;break}},showFontType:function(fType){var self=this;fType=parseInt(fType);switch(fType){case 1:$("div.fontEg").removeClass("fontEg_2").addClass("fontEg_1");break;case 0:$("div.fontEg").removeClass("fontEg_1").addClass("fontEg_2");break;case -1:default:$("div.fontEg").removeClass("fontEg_1").removeClass("fontEg_2");break}},save:function(){var self=this;var pd={};if(self.isSelf){pd=self.curtheme;pd.tid=pd.gobbasethemeid}else{pd.tid=self.currentid}var oldFontType,newFontType,fontFlag=0;oldFontType=$.cr.cookie.get("fontType");if(oldFontType==""){oldFontType=-1}newFontType=self.fontType;if(newFontType!=oldFontType){fontFlag=1;if(newFontType==-1){tw.delCookie("fontType")}else{tw.setCookie("fontType",newFontType,new Date(new Date().getTime()+1000*60*60*24*365))}}var themeFlag=self.isThemeModify();if(themeFlag==0&&fontFlag==1){setTimeout(function(){var ft=$.cr.cookie.get("fontType");if(newFontType==-1&&ft==""){tw.notice.showTip("保存成功")}else{if(ft!=""){tw.notice.showTip("保存成功")}else{tw.notice.showTip("保存失败")}}},100);return}if(themeFlag==0){return}self.themeAjax(pd,"/settings/theme/set",{okHandle:function(json){if(json){if(json.status==0){var showWinCont="模板更换成功！";var id=parseInt(pd.tid);self.showAddWin("更换模板",showWinCont,self.tlist[id].spread,self.tlist[id].thumb)}else{self.recoverTheme();tw.notice.alert(json.statusText)}}else{self.recoverTheme();tw.notice.alert("换肤失败, 请稍后重试!")}},errHandle:function(xmlReq,err){self.recoverTheme();tw.notice.alert("换肤失败, 请稍后重试!")}})},cancel:function(){var self=this;var tid,flag=0,fontFlag=0,oldFontType,newFontType,tip="模板与字体已做修改，是否保存？";oldFontType=$.cr.cookie.get("fontType");if(oldFontType==""){oldFontType=-1}newFontType=self.fontType;if(newFontType!=oldFontType){fontFlag=1}if(self.isSelf){tid=self.curtheme.gobbasethemeid}else{tid=self.currentid}var themeFlag=self.isThemeModify();if(themeFlag==1&&fontFlag==1){flag=1;tip="模板与字体已做修改，是否保存？"}else{if(themeFlag==1){flag=1;tip="模板已做修改，是否保存？"}else{if(fontFlag==1){flag=1;tip="字体已做修改，是否保存？"}}}if(flag==1){self.saveFlag=0;tw.notice.confirm({msg:tip,okBtnTxt:"保存",subHandle:function(){self.saveFlag=1;self.save()},cancelHandle:function(){if(self.saveFlag==1){return}self.recoverTheme()}})}},isThemeModify:function(){var ret=0;var self=this;var tid=0;if(self.isSelf){tid=self.curtheme.gobbasethemeid;if(self.oldid!=tid){ret=1}else{if(self.curtheme.type!=self.oldtheme.type){ret=1}if(self.curtheme.align!=self.oldtheme.align){ret=1}if(self.curtheme.display!=self.oldtheme.display){ret=1}if(self.curtheme.topheight!=self.oldtheme.topheight){ret=1}if(self.curtheme.isScroll!=self.oldtheme.isScroll){ret=1}if(self.curtheme.bPicUrl!=self.oldtheme.bPicUrl){ret=1}}}else{tid=self.currentid;if(self.oldid!=tid){ret=1}}return ret},recoverTheme:function(){var self=this;if(self.oldIsSelf){self.setCurTheme(self.oldtheme);setTimeout(function(){var cur=$("#theme_color_"+self.oldtheme.gobbasethemeid);self.isSelf=true;$("#skin").attr("href",cur.attr("ref"));self.initBg()},100)}else{setTimeout(function(){var skin=$("#theme_sys_"+self.oldid).attr("ref");if(!skin){skin="#"}$("#skin2").remove();$("#skin").attr("href",skin)},100)}if(self.oldHtmlCss!=""){$("html").attr("class",self.oldHtmlCss)}},showAddWin:function(title,tips,msg,pic){if(pic!=""){pic=pic.replace("/s_p.jpg","/f_p.jpg")}tw.composer.showWinStyle1({title:title,tips:tips,msg:msg,pic:pic,extra:"js_announce",success:function(json){if(json.status===0){if($.url.param("from")=="timeline"){setTimeout(function(){location.href="/home"},10)}else{if(tw.twcontainer){tw.twcontainer.addOne(json.data)}}}}})},themeAjax:function(p,url,opts){$.ajax({url:HOST+url,global:false,type:"post",dataType:"json",data:p,success:function(json){opts.okHandle(json)},error:function(xmlReq,err){opts.errHandle(xmlReq,err)}})}};return Theme});kola("newt.cr.crGoTop",["jquery.Core","newt.lib.jqueryScrollTo","newt.cr.crEvent"],function(a){var b=function(f,d){var c=this;c.opt=a.extend({scrollDom:CRTWCONFIG.SCROLL_DOM,referenceDom:"div.aside",margin:20,toShow:1480},d||{});c.elem=a(f).hide();c.scrDm=a(c.opt.scrollDom);c.refDom=a(c.opt.referenceDom);c.e_a=c.elem.find("a");c.e_i=c.elem.find("i.ii");c.dis=1;c.timer=0;c.scrLf=-1;a.extend(c,{init:function(){c.elem.click(function(){c.goSomewhere()});c.scrDm.scroll(c.checkStatus);c.checkStatus()},goSomewhere:function(h,g){h=h||0;g=g||0;c.elem.addClass("gotop2");c.scrDm.scrollTo(h,400,{onAfter:c._afterScroll,offset:g});if(a.browser.msie){c.scrDm.unbind("scroll",c.checkStatus);c.hide()}},setPosition:function(g){var h=c.scrDm.scrollLeft();if(g&&"scroll"==g.type&&h==c.scrLf){return}else{c.scrLf=h}var j=c.refDom.offset();c.elem.css({left:j.left+c.refDom.width()+c.opt.margin-(a.browser.msie?0:h)})},hide:function(){if(!c.getStatus()){return false}if(!a.browser.msie){c.elem.fadeOut(150)}else{c.elem.hide()}c.setStatus(0)},_show:function(){c.setStatus(1);if(!a.browser.msie){c.elem.fadeIn(150)}else{c.elem.show()}},show:function(){if(c.getStatus()){return false}c.setStatus(1);c.elem.show()},setStatus:function(g){c.dis=g},getStatus:function(){return c.dis},checkStatus:function(g){var h=c.scrDm.scrollTop();if(h<c.opt.toShow){c.hide();c.elem.hide();c.resetStatus()}else{if(a.browser.msie){c.hide()}c.elem.show();c.show()}},resetStatus:function(){c.elem.removeClass("gotop2");c.scrDm.unbind("scroll",c.checkStatus).bind("scroll",c.checkStatus);c.hide()},_afterScroll:function(){c.resetStatus();a.cr.event.send("tw_gotop_end")}});c.init()};a.fn.crGoTop=function(c){return a(this).each(function(){a(this).removeData("crGoTop").data("crGoTop",new b(this,c))})}});kola("newt.lib.jqueryScrollTo","jquery.Core",function(c){var a=c.scrollTo=function(g,f,d){c(window).scrollTo(g,f,d)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var f=this,d=!f.nodeName||c.inArray(f.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!d){return f}var g=(f.contentWindow||f).document||f.ownerDocument||f;return c.browser.safari||g.compatMode=="BackCompat"?g.body:g.documentElement})};c.fn.scrollTo=function(g,f,d){if(typeof f=="object"){d=f;f=0}if(typeof d=="function"){d={onAfter:d}}if(g=="max"){g=9000000000}d=c.extend({},a.defaults,d);f=f||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){f/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var n=this,l=c(n),m=g,k,h={},o=l.is("html,body");switch(typeof m){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(m)){m=b(m);break}m=c(m,this);case"object":if(m.is||m.style){k=(m=c(m)).offset()}}c.each(d.axis.split(""),function(s,t){var u=t=="x"?"Left":"Top",w=u.toLowerCase(),r="scroll"+u,q=n[r],p=a.max(n,t);if(k){h[r]=k[w]+(o?0:q-l.offset()[w]);if(d.margin){h[r]-=parseInt(m.css("margin"+u))||0;h[r]-=parseInt(m.css("border"+u+"Width"))||0}h[r]+=d.offset[w]||0;if(d.over[w]){h[r]+=m[t=="x"?"width":"height"]()*d.over[w]}}else{var v=m[w];h[r]=v.slice&&v.slice(-1)=="%"?parseFloat(v)/100*p:v}if(/^\d+$/.test(h[r])){h[r]=h[r]<=0?0:Math.min(h[r],p)}if(!s&&d.queue){if(q!=h[r]){j(d.onAfterFirst)}delete h[r]}});j(d.onAfter);function j(p){l.animate(h,f,d.easing,p&&function(){p.call(this,g,d)})}}).end()};a.max=function(l,k){var j=k=="x"?"Width":"Height",f="scroll"+j;if(!c(l).is("html,body")){return l[f]-c(l)[j.toLowerCase()]()}var h="client"+j,g=l.ownerDocument.documentElement,d=l.ownerDocument.body;return Math.max(g[f],d[f])-Math.min(g[h],d[h])};function b(d){return typeof d=="object"?d:{top:d,left:d}}return""});kola("newt.cr.crEvent",["jquery.Core","newt.cr.cr"],function(){var b=function(){var c=this;c.elem=null;$.extend(c,{init:function(d){if(!d){d=$("body")}c.elem=$(d);c.elem=$("<div>")},bind:function(f,g,d){d=d||false;if(!c.elem){c.elem=$("body")}if(!c.isbind(f)){c.elem.bind(f,g)}else{if(d){c.elem.unbind(f);c.elem.bind(f,g)}else{c.elem.bind(f,g)}}},unbind:function(d,f){c.elem.unbind(d,f)},isbind:function(d){var f=c.elem.data("events");if(f&&f[d]!=undefined&&f[d].length>0){return true}else{return false}},send:function(){var f=[];for(var g=1,d=arguments.length;g<d;g++){f.push(arguments[g])}c.elem.trigger(arguments[0],f)}});c.init()};var a=new b();$.cr.event=a;return a});kola("newt.Config",["jquery.Core"],function(){var a={VERSION:"0.1.",CKEDITOR_BASEPATH:"http://t.sohu.com/t/editor/ckeditor/",CKEDITOR_URI:"http://t.sohu.com/t/editor/ckeditor/ckeditor.js",BACK_URL:location.href,VOTE_INIT_PROCESSER:null,VOTE_POST_PROCESSER:null,NUM:140,G_NUM:10,CAN_UPLOAD_PIC_WHEN_REPLY:!!window.CAN_UPLOAD_PIC_WHEN_REPLY,CAN_UPLOAD_PIC_WHEN_TRANSF:!!window.CAN_UPLOAD_PIC_WHEN_TRANSF,MG_NUM:10,CUT:200,CA:true,CA_SRC:"other",CA_SN:"",REPLY_POST_PROCESSER:null,AT_POST_PROCESSER:null,INSERT_WEIBO_URL:null,PULS2_POST_PROCESSER:null,TRANS_SHOW_OK:null,COMMENT_PROXY:null,UPURL:"http://up.t.sohu.com/twitter/upload.php",MULTI_PIC_UPLOAD_URL:"http://up.t.sohu.com/twitter/mupload.do",UPLOAD_LOCAL_VIDEO_URL:"http://my.tv.sohu.com/user/third/t_upload.do",C_AUTO:true,C_CACHE:false,C_TIP:true,C_ADD:true,C_SYS_TIP:"",C_ADD_SUCCESS:function(c){},TW_DEL_SUCCESS:function(c){},ST_URL:"http://s6.cr.itc.cn/user",TOPIC_SEARCH_URL:"/search/topic_inc.jsp",UPLOAD_SWF:"http://s4.cr.itc.cn/img/t/fl/swfupload.swf",C_SWF:"http://s1.cr.itc.cn/img/s/i.gif",I_SWF:"http://s2.cr.itc.cn/img/t/iptfile4.png",AT_ADD:false,SUB_PG:true,SUB_PG_NUM:5,PR_EMOTE:"",MAP:"http://s2.cr.itc.cn/twitter/map/1.4/",MAP_ENGINE:"http://lspengine.go2map.com/EngineV5/Engine",MAP_ICON:"/t/",IPLOC:"http://s1.cr.itc.cn/twitter/iploc/cr.iploc.min.js",FED:false,FT:5000,UPDATE_MODE:"direct",SAD:"/twAction/insertTwitter",ADP:{},RP_P:{},STATIC_GROUPBY:true,USE_MEMO:false,LAZYLOAD_ONCE:false,GLOBAL_UNLOGIN_BEHAVIOR:"slient",GUB_MODAL_LOGIN_TOREGISTER:"default",GUB_MODAL_REGISTER_TOLOGIN:"default",GUB_MODAL_REGISTER_OTHERPARAMS:null,GUB_MODAL_ON_CLOSE:"default",GUB_MODAL_ON_SHOW:"default",GUB_MODAL_EMAILACTIVE_ADDRESS:"none",GUB_MODAL_EMAILACTIVE_PASSPORTID:"none",GUB_EXP_TWITTER_OPS:null,EVENTCENTER_CONFIG:null,AJAX_STATUS:{SUCCESS:0},BINDMOBILE_FORWARD_URL:"",ERPLY_URL:null,MODELWINDOW_OVERLAY_COLOR:null,MODELWINDOW_OVERLAY_OPACITY:null};window.CRTWCONFIG=$.extend(a,window.CRTWCONFIG||{});if(window.location.href.indexOf("chinaren.com")>0){window.CRTWCONFIG.UPURL="http://upload.chinaren.com/twitter/upload.php"}window.HOST="http://"+document.location.host;window.CRTWCONFIG.UPLOAD_SWF=window.HOST+"/t/swf/swfupload.swf";window.CRTWCONFIG.MUPLOAD_SWF_SRC="http://t.sohu.com/t/swf/swfupload-43.swf";var b=$("body").get(0);window.CRTWCONFIG.SCROLL_DOM=$((b&&b.currentStyle&&b.currentStyle.noScroll)?$("#t-sys"):window);if(window.navigator.userAgent.search("Chrome")!=-1){window.CRTWCONFIG.SCROLL_ElEMENT=(b&&b.currentStyle&&b.currentStyle.noScroll)?$("#t-sys")[0]:document.body}else{window.CRTWCONFIG.SCROLL_ElEMENT=(b&&b.currentStyle&&b.currentStyle.noScroll)?$("#t-sys")[0]:document.documentElement}window.CRTWCONFIG.IS_SKY_FIXED=$("#t-sky").css("position")=="fixed"?true:false;window.tw=window.tw||{};return a});kola("newt.twitter.Twitter",["newt.data.Synchronizer","newt.data.JData","newt.Config","newt.service.MailService","newt.component.Login","newt.cr.crSimpleEdit","newt.composer.Attip","newt.composer.emote.Emote","newt.timeline.Container","newt.dialog.Notice","newt.window.Window","newt.dialog.Common","newt.Config","newt.report.Report","newt.cr.crEvent","newt.ca.ca"],function(f,b,a,h){var g=arguments[1];function d(j){return $.cr.encodeUTF(j)}$.fn.selectRange=function(k,j){return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(k,j)}else{if(this.createTextRange){var l=this.createTextRange();l.collapse(true);l.moveEnd("character",j);l.moveStart("character",k);l.select()}}})};var c={pong:null,lastLength:0,streams:[],listeners:{},currMenu:{},init:function(){},setCookie:function(j,l,k){$.cr.cookie.set(j,l,k,"/",".t.sohu.com");$.cr.cookie.set(j,l,k,"/","t.sohu.com");$.cr.cookie.set(j,l,k)},delCookie:function(j){$.cr.cookie.del(j,"/",".t.sohu.com");$.cr.cookie.del(j,"/","t.sohu.com");$.cr.cookie.del(j)},build:function(j){if(j.type!="all"&&j.type!="menu"&&j.type!="group_comet"&&j.type!="update_group_tw"&&j.type!="get_new"&&j.type!="rp_show"&&j.type!="get_card"&&j.type!="show_pic"){var m={};if(j.disLoginCard){m.showLoginCard=false}if(window.loginType&&window.loginType>1){m.pretaste={};m.loginType=0;switch(j.type){case"preWithName":m.pretaste.name=j.uName||"";m.pretaste.icon=j.uSrc||"";m.pretaste.type=j.preType||"e";m.loginType=window.loginType;if(j.uid){var l=isLogin;isLogin=true;tw.build({type:"follow",uid:j.uid,selfSuccess:1,success:function(){}});isLoign=l}break}}if(a.GUB_EXP_TWITTER_OPS){if($.inArray(j.type,a.GUB_EXP_TWITTER_OPS.split("|"))!=-1){j.globalIntercept=false}}var k=j.globalIntercept==false?true:tw.login.check(m);if(!k){return false}}this.contentLength=j.length||2000;this.textDefaultValue="...";switch(j.type){case"at":this.at(j);break;case"rp":this.rp(j);break;case"at_source":this.at_source(j);break;case"rp_source":this.rp_source(j);break;case"add_tw":this.add_tw(j);break;case"del_tw":this.del_tw(j);break;case"rp_del":this.rp_del(j);break;case"rp_rp":this.rp_rp(j);break;case"rp_show":this.rp_show(j);break;case"show_pic":this.show_pic(j);break;case"follow":this.follow(j);break;case"follow2":this.follow2(j);break;case"follow3":this.follow3(j);break;case"follow4":this.follow4(j);break;case"follow5":this.follow5(j);break;case"follow6":this.follow6(j);break;case"follow7":this.follow7(j);break;case"follow_from_hint":this.follow_from_hint(j);break;case"follow2hide":this._follow2hide(j);break;case"followProfile":this.follow_profile(j);break;case"follow_from_active":this.follow_from_active(j);break;case"cancel_follow":this.cancel_follow(j);break;case"follow_cancel2":this.cancel_follow2(j);break;case"follow_cancel3":this.cancel_follow3(j);break;case"follow_cancel4":this.cancel_follow4(j);break;case"follow_cancel_operation":this.cancel_follow_operation(j);break;case"report":this._report(j);break;case"report_twitter":this.report_twitter(j);break;case"report_sb":this.report_sb(j);break;case"recommend":this.recommend(j);break;case"menu":this.menu(j);break;case"comet":this.comet(j.data);break;case"getNameByUid":this.getNameByUid(j);break;case"getNameCard":this.getNameCard(j);break;case"group_comet":this.group_comet(j.data);break;case"groupJoin":this.groupJoin(j);break;case"groupAppoint":this.groupAppoint(j);break;case"groupQuit":this.groupQuit(j);break;case"update_tw":this.update_tw(j);break;case"get_new":this.get_new(j);break;case"get_video_info":this.get_video_info(j);break;case"mail":this.build_mail(j);break;case"send_mail":this.send_mail(j);break;case"reply_mail":this.reply_mail(j);break;case"del_mail":this.del_mail(j);break;case"get_friends":this.get_friends(j);break;case"get_card":this.get_card(j);break;case"get_relation":this.get_relation(j);break;case"post_longtw":this.post_longtw(j);break;case"fav_add":this.fav_add(j);break;case"fav_cancel":this.fav_cancel(j);break;case"update_group_tw":this.update_group_tw(j);break;case"change_theme":this.change_theme(j);break;case"add_black_list":this.add_black_list(j);break;case"del_black_list":this.del_black_list(j);break;case"get_following_grp":j._url="/follow/getfriendgroupbyinfo";j._param="sid="+j.uid;this._following_grp_action(j);break;case"addgrp_following_grp":j._url="/follow/addgroupby";j._param="name="+d(j.name);this._following_grp_action(j);break;case"delgrp_following_grp":j._url="/follow/deletegroupby";j._param="groupbyid="+j.gid;this._following_grp_action(j);break;case"updategrp_following_grp":j._url="/follow/updategroupby";j._param="groupbyid="+j.gid+"&name="+d(j.name);this._following_grp_action(j);break;case"add_user_following_grp":j._param="act=addmembers&group="+j.gid+"&members="+j.members;this._following_grp_action(j);break;case"del_user_following_grp":j._param="act=rmmembers&group="+j.gid+"&members="+j.members;this._following_grp_action(j);break;case"get_userinfo_following_grp":j._url="/follow/getfriendgroupbyinfo";j._param="sid="+j.sid;this._following_grp_action(j);break;case"oper_members_following_grp":j._url="/follow/opermembers";j._param="groupbyids="+j.gid+"&friendids="+j.members;this._following_grp_action(j);break;case"get_user_info":this._get_userInfo(j);break;case"get_msg_more":this._get_msg_more(j);break;case"get_timeline_subpg":this._getTimelineSubPg(j);break;case"cancel_follow_pre":this.cancel_follow_pre(j);break;case"follow_pre":this.follow_pre(j);break;case"user_recommend_action":this.user_recommend_action(j);break;case"user_add_memo":this.user_add_memo(j);break;case"replyGoPage":this.replyGoPage(j);break;case"insert_tw":this.insert_tw(j);break;case"new_vote":this._new_vote(j);break;case"atTa":this.atTa(j);break}},user_recommend_action:function(k){var j="";if(k.act=="get"){j="/user/recommend/get"}else{if(k.act=="del"){j="/user/recommend/del"}}var l=(k.uid?("uid="+k.uid):"");$.ajax({url:HOST+j,global:false,type:"post",dataType:"json",data:l,success:function(m){if(!tw.sysout(m,k.globalIntercept)){return false}if(typeof(k.success)=="function"){k.success(m)}},error:function(m){if(typeof k.error=="function"){k.error(m)}}})},_get_msg_more:function(j){$.ajax({url:HOST+"/twAction/msgMore",global:false,type:"get",dataType:"json",data:"msgid="+j.msgid,success:function(k){if(!tw.sysout(k)){return}if(typeof(j.success)=="function"){j.success(k)}},error:function(k){if(typeof j.error=="function"){j.error(k)}}})},_get_userInfo:function(j){$.ajax({url:HOST+"/user/getUserInfo.jsp",global:false,type:"get",dataType:"json",data:"uid="+j.userids,success:function(k){if(!tw.sysout(k)){return false}if(typeof(j.success)=="function"){j.success(k)}},error:function(k){if(typeof j.error=="function"){j.error(k)}}})},_following_grp_action:function(j){$.ajax({url:HOST+j._url,global:false,type:"post",dataType:"json",data:j._param,success:function(k){if(j.selfSuccess!=1){if(!tw.sysout(k)){return false}}if(typeof(j.success)=="function"){j.success(k)}},error:function(k){if(typeof j.error=="function"){j.error(k)}}})},_black_list:function(k){var l="looked_userid="+k.uid;var j="";switch(k.type){case"add_black_list":j="/settings/blackList/set";break;case"del_black_list":j="/settings/blackList/delete";break}if(window.LOOKEDUSER&&LOOKEDUSER.id){l+="&uid="+LOOKEDUSER.id}$.ajax({url:HOST+j,global:false,type:"post",dataType:"json",data:l,success:function(m){if(typeof(k.success)=="function"){k.success(m)}},error:function(m){if(typeof k.error=="function"){k.error(m)}}})},add_black_list:function(j){j.act="set";this._black_list(j)},del_black_list:function(j){j.act="delete";this._black_list(j)},change_theme:function(j){var k="tid="+j.tid;$.ajax({url:HOST+"/user/updatethemeAction.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},update_group_tw:function(j){var k="act=getGroupNewTwitter&msgid="+j.data+"&gid="+j.gid;$.ajax({url:HOST+"/group/action/twAction.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(l&&l.data){if(tw.sysout(l)){j.success(l.data)}}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},_getTimelineSubPg:function(k){var j=$.url.param("pageNo"),l=$.url.param("next_cursor"),m="pagesize="+k.pagesize;if(!window.next_page_url){k.error();return}$.ajax({url:window.next_page_url,global:false,type:"post",dataType:"json",data:m,success:function(n){n=new g(n);if(typeof(k.success)=="function"){k.success(n)}},error:function(n){if(typeof k.error=="function"){k.error(n)}}})},fav_add:function(j){var k="msgid="+j.msgid;$.ajax({url:HOST+"/twAction/favorite",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},fav_cancel:function(j){var k="msgid="+j.msgid+"&act=cancel";$.ajax({url:HOST+"/twAction/favorite",global:false,type:"post",dataType:"json",data:k,success:function(l){l=new g(l);if(!l.getStatus()){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},post_longtw:function(j){var k="msgid="+j.msgid+"&msg="+d(j.msg);$.ajax({url:HOST+"/t/msgAction.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},get_relation:function(j){$.ajax({url:HOST+"/follow/getfriendship?friendid="+j.uid,global:false,type:"post",dataType:"json",success:function(k){if(!tw.sysout(k)){return false}if(typeof(j.success)=="function"){j.success(k)}},error:function(k){if(typeof j.error=="function"){j.error(k)}}})},get_card:function(j){var k="uid="+j.uid;$.ajax({url:HOST+"/g/u_info.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},get_friends:function(j){var k="time="+new Date();$.ajax({url:HOST+"/friend/common/followings",global:false,type:"get",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.successHandle)=="function"){j.successHandle(l)}},error:function(l){if(typeof j.errorHandle=="function"){j.errorHandle(l)}}})},del_mail:function(k){var l="",j="";switch(k.act){case"delrec":j="/inbox/delrec";break;case"delsend":j="/inbox/delsend";break;case"delallr":j="/inbox/delallr";break;case"delalls":j="/inbox/delalls";break}if(k.msgid){l+="&msgid="+k.msgid}$.ajax({url:HOST+j,global:false,type:"post",dataType:"json",data:l,success:function(m){if(typeof(k.successHandle)=="function"){k.successHandle(m)}},error:function(m){if(typeof k.errorHandle=="function"){k.errorHandle(m)}}})},reply_mail:function(j){var k="act=reply&stp=0&msg="+d(j.msg)+"&uid="+j.uid+"&msgid="+j.msgid;if(j.name){k+="&uname="+d(j.name)}$.ajax({url:HOST+"/inbox/mail",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.successHandle)=="function"){j.successHandle(l)}},error:function(l){if(typeof j.errorHandle=="function"){j.errorHandle(l)}}})},send_mail:function(k){var j=k.uid;var l=k.msg;if(!j||!l){return}var m={friendId:j,content:l,success:function(n){if(!tw.sysout(n)){return false}if(typeof(k.successHandle)=="function"){k.successHandle(n)}},error:function(n){if(typeof k.errorHandle=="function"){k.errorHandle(n)}}};if(k.captchaCode){m.captchaSeed=k.captchaSeed;m.captchaCode=k.captchaCode}h.sendMail(m)},build_mail:function(j){kola("newt.mail.MailWin",function(k){k.init(j)})},get_new:function(j){var k="";$.ajax({url:HOST+"/twAction/getNew.do?ts="+(new Date()).getTime(),global:false,type:"get",dataType:"json",data:k,success:function(l){if(!l){return}if(l.status!=0){return}if(l.data){j.success(l.data)}},error:function(l){}})},get_video_info:function(j){var k="vid="+j.vidStr;$.ajax({url:HOST+"/twAction/getVideoInfo.do",global:false,type:"post",dataType:"json",data:k,success:function(l){j.success(l)},error:function(l){}})},update_tw:function(j){var k="msgid="+j.data;$.ajax({url:HOST+"/twAction/getNewTwitter.do",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return}j.success(l.data)},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},group_comet:function(j){tw.feed.twFeedGroup()},comet:function(j){if(!$.isArray(j)){j=[j]}$.each(j,function(k,n){if(n){if(n.type=="task"){kola("app.exp.task.Task",function(o){o.processMessage(n)})}else{var l=n.message;if(l&&l!="0"){var m=l.split(",");if(m.length==1){return}kola("newt.comet.Feed",function(){tw.feed.twFeed({count:m[0],twid:m[1]})})}}}})},at:function(j){kola("newt.reply.At",function(k){var l=$.extend({onSend:function(m){c.insert_tw(m)}},j||{});new k(l)});return false},atTa:function(j){kola("newt.ui.window.dialog.SendMsg",function(k){k.init({title:"对"+j.name+"说",msgBuilder:function(l){return"@"+j.name+" "+l}});k.show()})},recommend:function(l){var n=tw.window.getWindow("recommend");var m=function(){var o=$("#recommend div.post").getCrControl("crSimpleEdit").getVal();o+="@"+$("#recommend").data("_name")+" 的微博不错，推荐大家去看看！";kola("newt.model.User",function(p){p.recommend({params:"msg="+$.cr.encodeUTF($.cr.decode(o))+"&uid="+(l.uid||""),success:function(q){if(!tw.sysout(q)){if(q&&417==q.status){kola("newt.ui.window.dialog.realname.ValidIDCardModel",function(r){r.show({style:"plain"})})}return false}n.close();common.showTip(q.statusText);if("home"==tw.getPageName().name&&CRTWCONFIG.C_ADD){kola("newt.timeline.Container",function(){tw.twcontainer.addOne(q.data)})}}})})};var j=$("#recommend_submit").unbind().removeClass("").click(m);$("#recommend div.post").crSimpleEdit({intxt:"写下你的推荐语吧！",max:140,status:".postMax i",ctrlEnterHandle:m});var k="";if(typeof l.uname!="undefined"){k=l.uname}else{k=$("b.jsNickBox_"+l.uid+" b.nm a:first").text()}if(!k){k=$("#"+l.uid+"_con b.nm a:first").text()}if(!k){k=$("#t-user-card b.nm a:first").text()}$("#recommend h4").text("推荐 "+k+" 给粉丝");$("#recommend div.tarea").addClass("blur");$("#recommend").data("_name",k);tw.emote.initEmoteBtn(n.getElement(),$("#recommend div.post").getCrControl("crSimpleEdit"));new tw.AtTip($("#recommend div.post"));n.show()},show_pic:function(k){if($("#twitter_pic").length==0){var l='<table id="twitter_pic" class="mwin mwin2 novis"><thead><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></thead><tfoot><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></tfoot><tbody><tr><td class="bx"></td><td class="by">';l+='<!--S 关闭按钮--><a href="javascript:void(0);" class="mw_close close overlayCanB" title="关闭"><b>关闭</b></a><!--E 关闭按钮--';l+='<!--S 模态窗标题--><div class="mwt"><div class="ttl"><p class="picoper"><a target="_blank" class="fuc0" title="新窗口打开"><i class="i i43"></i><b>查看大图</b></a></p></div></div><!--E 模态窗标题-->';l+='<!--S 模态窗内容--><div class="mw mw_b mw03"><div class="mwc overlayCanB"><i class="pic2"><img src="" alt=""></i><q class="ugc"></q></div></div><!--E 模态窗内容--></td><td class="bz"></td></tr></tbody></table>';$(l).prependTo("body")}$("#"+k.msgid+"_con p.pics i.ifake").removeClass("novis");$("#"+k.msgid+"_con p.pics i.ifake i").addClass("loading2");var j=new Image();$(j).load(function(){var m=j.width,n=j.height;m=parseInt(m)>400?400:m;n=(parseInt(m)*parseInt(n))/parseInt(j.width);$("#twitter_pic i.pic2").html("").append(this).find("img").css({width:m,height:n});$("#twitter_pic p.picoper a").attr("href",k.path.replace("/m_","/"));$("#twitter_pic").overlay({top:"center",expose:{color:"transparent",loadSpeed:200,opacity:"transparent",onClose:function(){}},closeOnClick:true,close:".overlayCanB",api:true}).load();$("#"+k.msgid+"_con p.pics i.ifake i").removeClass("loading2");$("#"+k.msgid+"_con p.pics i.ifake").addClass("novis");$("#twitter_pic").removeClass("novis")}).attr("src",k.path);return false},add_tw:function(j){if(j.url==null||j.url==""||j.url===undefined){j.url=CRTWCONFIG.SAD}tw._add_tw(j)},insert_tw:function(k){k.url=a.INSERT_WEIBO_URL||"/twAction/reTwitter";var j=k.success;k.success=function(m,l){if(m.status===0){tw.twcontainer.addOne(m.data.timeline);j(m);if(a.TRANS_SHOW_OK!=false){common.showTip("操作成功")}}else{if(m.status===417){j(m)}else{if(typeof(l)!="undefined"&&l===false){if(typeof(k.sysError)=="function"){k.sysError(m)}}}}};c._add_tw(k)},_add_tw:function(j){var l=d(j.content);var m="msg="+l;if(typeof TOPICID!="undefined"){m+="&act=insertWeiPing&topicid="+TOPICID;if(typeof j.msgid!="undefined"){m+="&wpat="+j.msgid}}else{}if(j.pics){m+="&pics="+d(j.pics)}if(j.pic&&j.pic!=""){m+="&pic="+d(j.pic)}if(j.rf_pics&&j.rf_pics!=""){m+="&rf_pics="+d(j.rf_pics)}if(j.at&&typeof j.at!="string"){j.at=j.at.toString()}if(j.at&&j.at.indexOf("_")>0){j.at=j.at.split("_")[1]}if(j.at&&j.at!=""){m+="&at="+j.at}if(j.same_to_reply){m+="&same_to_reply="+d(j.same_to_reply)}if(j.geo){m+="&geo={web_longitude:"+j.geo.longitude+",web_latitude:"+j.geo.latitude+"}"}if(typeof FROM_TYPE!="undefined"){m+="&type="+FROM_TYPE}if(j.voteid){m+="&voteid="+j.voteid}if(typeof TAG!="undefined"){m+="&tag="+d(TAG)}if(typeof FROMTAG!="undefined"){m+="&fromtag="+FROMTAG}if(j.voteParams){m+="&"+j.voteParams}if(j.captchaSeed){m+="&captchaSeed="+j.captchaSeed+"&captchaCode="+j.captchaCode}if(j.userName){m+="&userName="+d(j.userName)}for(var k in CRTWCONFIG.ADP){m+="&"+k+"="+d(CRTWCONFIG.ADP[k])}$.ajax({url:HOST+j.url,global:false,type:"post",dataType:"json",data:m,success:function(o){var n=tw.sysout(o);if(o.status==0){$.cr.event.send("tw_add_twi")}j.success(o,n)},error:function(){if(j.error){j.error()}}})},del_tw:function(j){var k=function(){var l="msgid="+j.msgid;$.ajax({url:HOST+"/twAction/deleteTwitter",global:false,type:"post",dataType:"json",data:l,success:function(m){if(m.status=="401"){tw.showSysMsg(m.statusText);return}m=new g(m);if(!m.getStatus()){return false}if(m.getStatus()){tw.twcontainer.delOne(j.msgid);kola("newt.timeline.Other",function(){tw.other.delTwitter(j.msgid)});$.cr.event.send("tw_del_twi");if(typeof CRTWCONFIG.TW_DEL_SUCCESS=="function"){CRTWCONFIG.TW_DEL_SUCCESS(m)}}else{common.showTip(m.getStatusText())}},error:function(m){}})};kola("newt.tipbox.Tipbox",function(){var l=j.ele||$("#"+j.msgid+"_con a.crJs_del");tw.tipbox.delTwTipbox({msg:"确认删除这条微博吗？",submitHandle:k,elem:l})})},rp:function(l){var j=d(l.rp);var n="msg="+j+"&msgid="+l.msgid;if(l.vchannel&&l.vchannel=="vchannel"){n+="&vchannel=vchannel"}var k="/twAction/insertReply";if(l.url){k=l.url;n+="&at="+l.msgid;n+=l.uid?"&uid="+l.uid:""}if(l.rpOpt){n+="&replyid="+l.rpOpt.replyTo+(l.rpOpt.cmtid?("&cmtid="+l.rpOpt.cmtid):"")}if(l.last&&l.last==1){n+="&lastpage=1"}if(l.same_to_twitter&&l.same_to_twitter==1){n+="&same_to_twitter=1"}if(typeof l.pic!="undefined"){n+="&rf_pics="+l.pic}if(typeof(l.userName)!="undefined"){n+="&userName="+d(l.userName)}if(typeof l.captchaSeed!="undefined"){n+="&captchaSeed="+l.captchaSeed;n+="&captchaCode="+l.captchaCode}for(var m in CRTWCONFIG.RP_P){n+="&"+m+"="+d(CRTWCONFIG.RP_P[m])}n+=("&type="+(window.FROM_TYPE||""));$.ajax({url:HOST+k,global:false,type:"post",dataType:"json",data:n,success:function(o){if(o.status=="404"||"416"==o.status){tw.showSysMsg(o.statusText);l.error();return false}if(!tw.sysout(o)){l.error();return false}if(l.url=="/twAction/reTwitter"){$.cr.event.send("tw_add_twi")}if(typeof l.success=="function"){l.success(o)}},error:function(o){}})},rp_rp:function(m){if(m.replyTo){var l="@"+m.replyName+" ";var k=$("#in_"+m.msgid).val().replace(l,"");if(this._reply&&this._reply.name){k=k.replace(""+this._reply.name+"","")}$("#in_"+m.msgid).val(l);this._reply={id:m.rpid,name:m.replyName,to:m.replyTo}}var j=$("#in_"+m.msgid).val().length;$("#in_"+m.msgid).selectRange(j,j);$("#in_"+m.msgid).focus()},rp_show:function(l){var m="msgid="+l.msgid+"&pageNo="+l.pageNo;var j=(a.CAN_UPLOAD_PIC_WHEN_REPLY?HOST+"/reply/replyNew":HOST+"/reply");if(l.cursor){m+="&"+l.cursor}var k=a.REPLY_POST_PROCESSER||function(o,n){n(o)};k(m,function(n){$.ajax({url:j,global:false,type:"post",dataType:"json",data:n,success:function(o){if(o.status==401){if(l.globalIntercept!=false){kola("newt.util.Tool",function(p){p.iNoLogin()})}return}o=new g(o);if(!o.getStatus()){return false}if(typeof l.success=="function"){l.success(o)}$.cr.event.send("reply_success",o)},error:function(o){}})})},tFocus:function(l){var k=$("#in_"+l);var j=k.val().length;k.selectRange(j,j);k.focus()},rp_del:function(j){var k="replyid="+j.msgid;if(j.ptid){k+="&msgid="+j.ptid}$.ajax({url:HOST+"/twAction/deleteReply",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof j.success=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}tw.showSysMsg("网络错误！")}})},fav_del:function(j){var k="act=fav_del&msgid="+j.msgid;$.ajax({url:HOST+"/t/twAction.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}},error:function(l){}})},_follow:function(j){var k={act:"follow",friendids:j.uid,type:j.type};if(typeof(window.SRC_ID)!="undefined"){k.from=window.SRC_ID}if(window.LOOKEDUSER&&LOOKEDUSER.id){k.uid=LOOKEDUSER.id}$.ajax({url:HOST+"/follow/addfollows",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(l.data){if(typeof(l.data.samefollowingcount)!="undefine"){$.cr.event.send("tw_follow_user",j.uid,l.data.cnt,l.data)}else{$.cr.event.send("tw_follow_user",j.uid,l.data.cnt,l.data)}}if(typeof j.success=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},_batchfollow:function(j){var k="friendids="+j.uid;if(j.type){k+="&type="+j.type}if(window.LOOKEDUSER&&LOOKEDUSER.id){k+="&uid="+LOOKEDUSER.id}$.ajax({url:HOST+"/follow/addfollows",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof j.success=="function"){j.success(l);if(l.data){if(typeof(l.data.samefollowingcount)!="undefine"){$.cr.event.send("tw_follow_user",j.uid,l.data.cnt,l.data)}else{$.cr.event.send("tw_follow_user",j.uid,l.data.cnt)}}}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},follow:function(j){if(j.selfSuccess!=1){j.success=function(k){if(k&&k.status==1){common.showTip(k.statusText)}else{tw.showSysMsg(k.statusText)}}}this._follow(j)},_follow2hide:function(j){j.success=function(k){if(k&&k.status==0){$("#follow2hideBtn_"+j.uid).addClass("noDis")}};this._follow(j)},follow6:function(j){j.success=function(k){if(k&&k.status==0){$("#user_card p.oper").html('<i class="added">已关注</i>');$("#user_card div.connect li.t2 em").each(function(){$(this).html(parseInt($(this).html())+1)})}};this._follow(j)},follow_from_hint:function(j){j.success=function(k){if(k&&k.status==0){$("#hint_follow_btn_"+j.uid+"").html('<a href="javascript:void(1)" class="fuc fucAdd fuc_dis" title="已关注"><b>已关注</b></a>')}else{tw.showSysMsg(k.statusText)}};this._follow(j)},follow7:function(j){j.success=function(k){if(k&&k.status==0){$("#follow7_btn_"+j.uid+"").html('<a href="javascript:void(1)" class="fuc fucAdd dis" title="已关注"><b>已关注</b></a>');tw.notice.showTip("关注成功")}else{tw.showSysMsg(k.statusText)}};this._follow(j)},follow5:function(j){j.success=function(k){if(k&&k.status==0){common.showTip(k.statusText);document.location.href="/home"}};this._follow(j)},follow2:function(j){kola("newt.service.Follows",function(k){j.uids=[j.uid];k.follow({params:j,success:function(l,m){if(l&&l.status==0){$("#star_"+j.uid).find("a.fucAdd").attr("title","已关注").removeAttr("onclick").addClass("fuc_dis").find("b").html("已关注");$.cr.event.send("tw_show_group_window",m.params.uids[0],l.data.name)}}})})},follow_profile:function(){options.success=function(j){if(j&&j.status==0){$("#star_"+options.uid).find("a.fucAdd").addClass("fuc_dis").find("b").html("已关注");if(j.data){$.cr.event.send("tw_show_group_window",options.uid,j.data.name)}}};this._follow(options)},follow_pre:function(j){j.success=function(m){if(m&&m.status==1){$("#star_"+j.uid+"").html('<i class="added">已关注</i>');$.cr.event.send("tw_prehome_rightFollowed_update",j);var l=$(m.data);tw.twcontainer.addOne(l)}};var k="act=follow&uid="+j.uid;$.ajax({url:HOST+"/follow/followAction_nologin.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof j.success=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},follow3:function(j){j.success=function(k){if(k&&k.status==0){if(k.data){$.cr.event.send("tw_show_group_window",j.uid,k.data.name)}$("#"+j.uid+"_con .follow").addClass("nodis");if($("#"+j.uid+"_con .fed").length>0){$("#"+j.uid+"_con .stat").html('<i title="互相加了关注" class="i iS iEachother"/>')}else{$("#"+j.uid+"_con .stat").html('<i class="i iS iAdded" title="已关注"></i>')}}$("#"+j.uid+"_rec .fucAdd").addClass("fuc_dis").attr("onclick","").find("b").html("已关注")};this._follow(j)},follow4:function(j){kola(["newt.group.action.GrpAct","newt.group.Flgrp"],function(){tw.flgrp.getGrpInfoCache(function(){})});j.success=function(k){if(k&&k.status==0){$("#"+j.uid+"_con div.group").removeClass("noDis");$("#"+j.uid+"_con div.group li.tag").removeClass("noDis");$.cr.event.send("tw_show_group_window",j.uid,j.name);tw.setFollowStatus(j.uid,j.followed,"add")}else{tw.showSysMsg(k.statusText)}};this._follow(j)},setFollowStatus:function(l,m,n){var j=$("#t-user").add("#t-user-card").find("#"+l+"_rel"),k=m?2:1;switch(n){case"add":j.each(function(){$(this).find(".crJs_s0").addClass("noDis");$(this).find(".crJs_s"+k).removeClass("noDis")});break;case"cancel":j.each(function(){$(this).find(".crJs_s0").removeClass("noDis");$(this).find(".crJs_s"+k).addClass("noDis")});break;case"addBlock":j.each(function(){$(this).find(".crJs_s0").addClass("noDis");$(this).find(".crJs_s4").removeClass("noDis")});break;case"delBlock":j.each(function(){$(this).find(".crJs_s0").removeClass("noDis");$(this).find(".crJs_s4").addClass("noDis")});break}},follow_from_active:function(j){j.type="follow_from_active";this._batchfollow(j)},_cancel_follow:function(j){var k="act=cancel_follow&friendid="+j.uid;if(window.LOOKEDUSER&&LOOKEDUSER.id){k+="&uid="+LOOKEDUSER.id}$.ajax({url:HOST+"/follow/deletefollow",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof j.success=="function"){j.success(l);if(l.status==0&&l.data){if(typeof(l.data.samefollowingcount)!="undefine"){$.cr.event.send("tw_cancel_follow",j.uid,l.data);$.cr.event.send("tw_update_follow_del",j.uid,l.data.cnt,l.data)}else{$.cr.event.send("tw_cancel_follow",j.uid);$.cr.event.send("tw_update_follow_del",j.uid,l.data.cnt)}}}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},cancel_follow:function(j){j.success=function(k){if(k&&k.status==0){common.showTip(k.statusText)}};this._cancel_follow(j)},cancel_follow2:function(j){j.success=function(k){if(isSelf){$("#"+j.uid+"_con").fadeOut()}else{$("#"+j.uid+"_con .ibtn2").removeClass("nodis");$("#"+j.uid+"_con .stat").html("")}};this._cancel_follow(j)},cancel_follow3:function(j){j.success=function(k){$("#"+j.uid+"_con .ibtn2").removeClass("nodis");$("#"+j.uid+"_con .stat").html("")};this._cancel_follow(j)},cancel_follow_operation:function(j){this._cancel_follow(j)},cancel_follow4:function(j){j.success=function(k){tw.setFollowStatus(j.uid,j.followed,"cancel");$("#"+j.uid+"_con").find("div.group").addClass("noDis");isFollowing=false};this._cancel_follow(j)},cancel_follow_pre:function(j){j.success=function(k){$.cr.event.send("tw_cancel_follow_pre",k)};this._cancel_follow(j)},menu:function(j){var k=['<div id="menu_follow" class="drop nodis">','<div class="c">',"<ul>",'<li class="l1"><a href="javascript:void(0);" class="fuc c1"><i class="i i30"></i><b>推荐给粉丝</b></a></li>',"</ul>","<ul>",'<li class="l3"><a href="javascript:void(0);" class="fuc c2"><i class="i i34"></i><b>发私信</b></a></li>','<li class="l2"><a href="javascript:void(0);" class="fuc c3"><i class="i i32"></i><b>取消关注</b></a></li>','<li class="l5"><a href="javascript:void(0);" class="fuc c5"><i class="i i45"></i><b>屏蔽此人</b></a></li>','<li class="twReport"><a href="javascript:void(0);" class="fuc c4"><i class="i i31"></i><b>举报</b></a></li>',"</ul>","</div>",'<i class="close nodis"></i>',"</div>"];$(k.join("")).prependTo("div.bdy >  div.c0");$("#menu_follow a.c1").click(function(){tw.build({type:"recommend",uid:$(this).attr("rel")})});$("#menu_follow a.c2").click(j.fn2);$("#menu_follow a.c3").click(j.fn3);$("#menu_follow a.c5").click(j.addblack);$("#menu_follow a.c4").click(function(){tw.build({type:"report_sb",uid:$(this).attr("rel")})});var l=this.getOffset;$("a.ibtn3").each(function(n){var m=$(this);m.click(function(p){currMenu=tw.currMenu;if(currMenu.currentBtn){currMenu.currentBtn.removeClass("btn_act")}currMenu.currentBtn=m;var r=m.attr("rel");if(currMenu!={}){if(currMenu[r]){if(currMenu[r]==""){currMenu[r]="on";m.addClass("btn_act")}else{currMenu[r]="";m.removeClass("btn_act");if($("#menu_follow").overlay()){$("#menu_follow").overlay().close()}return false}}else{currMenu[r]="on";m.addClass("btn_act")}}else{currMenu[r]="on";m.addClass("btn_act")}$("#menu_follow").removeClass("nodis");$("#menu_follow a.c1").attr("rel",r);$("#menu_follow a.c2").attr("rel",r);if(typeof(isSearchUser)!="undefined"||typeof(isFollow)!="undefined"){if($("div.ulist a.btn_act").parent().parent().find("div.stat").hasClass("fed")||$("div.ulist a.btn_act").attr("openmail")){$("#menu_follow li.l3").removeClass("nodis")}else{$("#menu_follow li.l3").addClass("nodis")}}if(typeof(isUserPage)!="undefined"){if(isFollowed||(typeof openMail!="undefined"&&openMail)){$("#menu_follow li.l3").removeClass("nodis")}else{$("#menu_follow li.l3").addClass("nodis")}$("#menu_follow li.twReport").removeClass("nodis")}$("#menu_follow a.c3").attr("rel",r);$("#menu_follow a.c4").attr("rel",r);$("#menu_follow a.c5").attr("rel",r);if($("#"+r+"_con .ibtn2").hasClass("nodis")){$("#menu_follow .l2").removeClass("nodis")}else{$("#menu_follow .l2").addClass("nodis")}if($("#"+r+"_con .crJs_s0").length>0){if($("#"+r+"_con .c .crJs_s0").hasClass("nodis")){$("#menu_follow .l2").removeClass("nodis")}else{$("#menu_follow .l2").addClass("nodis")}}$.cr.event.send("tw_options_menu_show");var q=l(m,$("div.bdy > div.c0"));$("#menu_follow").css("top",parseInt(q.bottom)+2);$("#menu_follow").overlay({top:parseInt(q.bottom)+4,left:parseInt(q.left),absolute:true,closeOnClick:true,close:".overlayCanB",speed:0,api:true}).load();$("#menu_follow").css("top",parseInt(q.bottom)+2+3);$("#menu_follow").css("left",parseInt(q.left));return false})})},getOffset:function(s,k){var r=$(s);var n=k.offset();var l=r.offset();var p=l.top-n.top;var q=l.left+r.width()-n.left;var j=l.top+r.height()-n.top;var m=l.left-n.left;return{top:p,right:q,bottom:j,left:m}},_report:function(j){var k="rtype="+j.act+"&type="+j.rpType+"&msg="+d(j.rpNote);if(typeof(j.rpId)!="undefined"){k+="&msgid="+j.rpId}if(typeof(j.rpUid)!="undefined"){k+="&uid="+j.rpUid}$.ajax({url:HOST+"/report/addreport",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(n,m,l){}})},report_twitter:function(j){kola("newt.report.Report",function(){tw.report.reportTw(j)});return false},groupJoin:function(j){var k="id="+j.id+"&act="+j.act;$.ajax({url:HOST+"/group/action/approvedAction.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},groupAppoint:function(j){var k="gid="+j.gid+"&uid="+j.uid+"&act="+j.act;$.ajax({url:HOST+"/group/action/appointAction.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(typeof(j.success)=="function"){j.success(l)}},error:function(l){if(typeof j.error=="function"){j.error(l)}}})},groupQuit:function(j){var k="gid="+j.gid+"&act=quit";$.ajax({url:HOST+"/group/action/quitAction.jsp",global:false,type:"post",dataType:"json",data:k,success:function(l){if(!tw.sysout(l)){return false}if(l.status==0){window.location.reload()}else{tw.showSysMsg("操作失败，请稍后再试")}},error:function(l){tw.showSysMsg("操作失败，请稍后再试")}})},showSysMsg:function(k,j){kola("newt.dialog.Notice",function(){tw.notice.alert(k,j)})},sysout:function(k,j){if(k&&-9==k.status){if(window.IFRAME_ALERT){alert(k.statusText)}else{tw.showSysMsg(k.statusText)}return false}if(k&&-13==k.status){tw.notice.bindPhone(k.data);return false}if(k&&-11==k.status){tw.notice.showActiveWin(k.data);return false}if(k&&k.status=="401"){if(j!=false){kola("newt.util.Tool",function(l){l.iNoLogin()})}return false}if(k&&k.status>0){if(417!=k.status){tw.showSysMsg(k.statusText)}return false}return true},getNameByUid:function(j){$.ajax({url:HOST+"/news/var.jsp",dataType:"json",type:"POST",data:"",success:function(k){if(typeof j.success=="function"){j.success(k)}}})},getStaticUrl:function(j){var k="000000"+j.uid,l=k.length;return CRTWCONFIG.ST_URL+"/"+k.substr(l-2,2)+"/"+k.substr(l-4,2)+"/"+k.substr(l-6,2)+"/"+j.uid+"_"+j.mName+".js"},report_sb:function(j){tw.report.reportUser(j);return false},user_add_memo:function(j){var k=j.success||function(){};$.ajax({url:HOST+"/follow/markfriend",type:"post",dataType:"json",data:"act=addMemo&friendid="+j.uid+"&name="+$.cr.encodeUTF(j.memo),success:function(l){j.success(l)}})},replyGoPage:function(j){$.ajax({url:HOST+j.url,type:"post",dataType:"json",data:"",success:function(k){if(k.status=="401"){tw.showSysMsg(k.statusText);return}k=new g(k);if(!k.getStatus()){return}j.success(k.getBody())}})},_new_vote:function(j){$.ajax({url:HOST+"/twapp/vote/newvote",type:"post",dataType:"json",data:"",success:function(k){k=new g(k);if(!k.getStatus()){return}j.success(k)}})},getPageName:function(){var k,j="",m="",l;k={name:"",info:""};l=_view_context;if(!l){return k}if(l.indexOf("sys\n\nuser\n\nmain")>-1){j="home"}else{if(l.indexOf("sys\n\nuser\n\nprofile")>-1){j="profile"}else{if(l.indexOf("sys\n\nuser\n\npeople")>-1){if(window.UID&&window.LOOKEDUSER&&LOOKEDUSER.id&&LOOKEDUSER.id==UID){j="profile"}else{j="people"}}else{if(l.indexOf("sys\n\nuser\n\ninbox")>-1){j="mail"}else{if(l.indexOf("sys\n\nsettings")>-1){j="settings"}else{if(l.indexOf("sys\n\nuser\n\nmsg")>-1){j="twitter"}else{if(l.indexOf("sys\n\nuser\n\nfriend\n")>-1){j="friend";if(l.indexOf("followed")>-1){m="followers"}else{if(l.indexOf("following")>-1){m="following"}}}}}}}}}k.name=j;k.info=m;return k},getNameCard:function(j){var k="";if(j.uid){k="uid="+j.uid}if(j.name){k="nm="+d(j.name)}$.ajax({url:HOST+"/vcard",type:"post",dataType:"json",data:k,success:function(l){j.success(l)}})}};$.extend(tw,c);return c});kola("newt.tool.Tool",["jquery.Core","newt.tool.Count"],function(d){var g="div.LAND",c="div.SKY",h="#t-main";var b="",f=null;var a={side:function(j){if(j){b=j}else{return b}},target:function(j){if(j){f=j}else{return f}},getLeft:function(j){return d(g).find(j)},getRight:function(j){return d(c).find(j)},getSide:function(j){if(j.closest(g).length==1){return"L"}else{if(j.closest(c).length==1){return"R"}else{return""}}},getAll:function(j){return this.getLeft(j).add(this.getRight(j))},getCurrent:function(j){if(this.side()=="L"){return this.getLeft(j)}else{if(this.side()=="R"){return this.getRight(j)}}},getTarget:function(j,k){this.side(k);return this.getCurrent(j)},getPart:function(){var j=0;if(this.side()=="R"){j=2}else{if(this.side()=="L"){if(this.target().closest(h).length==1){j=1}else{j=3}}}return j},replaceHtml:function(m,l){for(var k in l){var j=new RegExp("{"+k+"}","gi");m=m.replace(j,l[k])}return m.replace(/{\w+}/gi,"")},addLabelId:function(j){j.find("label").each(function(){var l=d(this),k=l.find("input");if(k.length!=1||k.attr("id")){return}var m="lp_"+tw.count_id.get();l.attr("for",m);k.attr("id",m)})},clearBindEvent:function(j,k){k=k||function(){};if(!j){return}d(j).find("*").add(d(j)).unbind().removeData().removeAttr();k()},clearObject:function(l,k){k=k||false;if(!l){return}for(var j in l){if(!k){a.clearObject(l[j],true)}else{l[j]=null}delete l[j]}l=null}};window.TOOL=a;return a});kola("newt.ca.ca",["jquery.Core"],function(b){var a={hasInit:0,arrImg:[],maxLength:4,taskQueue:[],init:function(){var c=this;if(c.hasInit||b("body").size()==0){return}b("body").bind("mousedown",function(g){var h=b(g.target);while(h.length>0){if(h[0]==b("body")[0]){break}try{var d=h.attr("data-ca");if(d){c.q(d);c.log(d,"click",{page:location.href});return true}}catch(f){}h=h.parent()}});c.hasInit=1},q:function(f){if(typeof(f)=="undefined"||f==""){return}var h=this,c=[],g,d="http://z.t.sohu.com/cc.gif?";g=document.referrer;if(g){g=encodeURIComponent(g)}else{g=""}c.push("t="+(new Date()).getTime());c.push("r="+g);c.push("from="+f);c.push("version=1.5");h.send(d+c.join("&"))},log:function(h,j,c,f){var k=this,d,m,g=[],l=(f||"http://z.t.sohu.com/ca.gif");if(c!=null){for(d in c){if(c.hasOwnProperty(d)){m=c[d];g.push(('"'+d+'":')+(typeof m==="string"?'"'+m+'"':m))}}}k.send(l+"?t="+(new Date().getTime())+"&position="+encodeURIComponent(h)+"&operation="+encodeURIComponent(j)+"&details="+encodeURIComponent(g.join(",")))},send:function(h){if(typeof(h)=="undefined"||h==""){return}var k=this,d,l,g,c=0,f=-1;g=k.arrImg;c=g.length;for(var j=0;j<c;j++){if(g[j].f==0){f=j;break}}if(f==-1){if(c==k.maxLength){k.taskQueue.push(h);return}d=b(new Image());g.push({f:1,img:d});f=(c==0?0:c)}else{d=g[f].img}g[f].f=1;d.data("vid",f);l=function(){var m=b(this).data("vid");if(m>=0){g[m].f=0}if(k.taskQueue.length>0){k.send(k.taskQueue.shift())}};d.unbind().load(l).error(l);b(d).attr("src",h)}};window.CA=a;return a});kola("newt.fav.Fav",["jquery.Core","sohu.ctrl.Tips"],function(b,c){var a=function(){var d=this;function f(k,h){var g,j;if(h){g=b(h).closest("div.twiRoot");if(g.size()==0){g=b(h).closest("div.twi")}}else{g=b("#"+k+"_con")}j=g.find("a.crJs_fav");return j}b.extend(d,{add:function(g){if(window.isLogin!=true){kola("newt.util.Tool",function(k){k.iNoLogin()});return false}var j=f(g.msgid,g.ele);var h={type:"fav_add",msgid:g.msgid,success:function(l){var k='<a title="已收藏，点击可取消" class="fuc crJs_fav" onclick="kola(\'newt.fav.Fav\',function(){tw.fav.cancel1({msgid:\''+g.msgid+'\',ele:this})},{scope:this});" href="javascript:void(1);"><i class="i iS iCollect_act"></i></a>';c.showBubbleAt(j,-50,{xMargin:-20,content:"收藏成功",bubbleClass:"combo combo2"});j.closest("li.tag").html(k)}};kola("newt.twitter.Twitter",function(){tw.build(h)});kola("newt.service.StatisticService",function(k){k.log("newt_msg_add_favorite","click",{page:location.href,twiId:g.msgid})});return false},cancel:function(g){var j,m,k,l;k=g.ele;l=g.msgid;if(k){j=b(k).closest("div.twiRoot");if(j.size()==0){j=b(k).closest("div.twi")}}else{j=b("#"+l+"_con")}m=j.find("a.crJs_fav");var h=function(){var n={type:"fav_cancel",msgid:g.msgid,success:function(o){if(o.getStatus()){j.fadeOut("fast")}}};kola("newt.twitter.Twitter",function(){tw.build(n)})};kola("newt.tipbox.Tipbox",function(){tw.tipbox.delTwTipbox({msg:"确认要取消这条收藏么？",submitHandle:h,elem:m})});return false},cancel1:function(g){var j=f(g.msgid,g.ele);var h=function(){var k={type:"fav_cancel",msgid:g.msgid,success:function(m){if(m.getStatus()){var l='<a title="收藏" class="fuc crJs_fav" onclick="kola(\'newt.fav.Fav\',function(){tw.fav.add({msgid:\''+g.msgid+'\',ele:this})},{scope:this});" href="javascript:void(1);"><i class="i iS iCollect"></i></a>';j.closest("li.tag").html(l)}}};kola("newt.twitter.Twitter",function(){tw.build(k)})};kola("newt.tipbox.Tipbox",function(){tw.tipbox.delTwTipbox({msg:"确认要取消这条收藏么？",submitHandle:h,elem:j})});return false}})};tw=tw||{};tw.fav=new a();return a});kola("newt.tipbox.Tipbox","jquery.Core",function(){var a=function(){var b=this;var g=['<div style="position:absolute;z-index:9999;" class="prompt">','<div class="c">','<p class="ttl crJSmsg"></p>','<p class="btns3"><a href="javascript:void(0);" class="btn btnm8 crJSyes"><b>确认</b></a>','<a href="javascript:void(0);" class="fuc crJSno"><b>取消</b></a></p></div></div>'];var c=['<div class="bubble bubAsk" style="text-align:left;">','<div class="bubC">','<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<div class="bubBd crJSmsg"></div>','<div class="bubFt"><p class="btns3"><a class="btn btnM crJSyes" href="javascript:void(0);"><b>确定</b></a>','<a class="btn btnM3 crJSno" href="javascript:void(0);"><b>取消</b></a></p></div>',"</div></div>"];var f=$(c.join(""));var d={parent:$("body"),elem:"",onEsc:true,msg:"",submitHandle:function(){},cancelHandle:function(){},btnY:".crJSyes",btnN:".crJSno",msgC:".crJSmsg",type:"dom",posi:1,onOut:false};$.extend(b,{delTwTipbox:function(h){b.showBox(h)},showBox:function(h){if(!h.posi){h.posi=1}var j=$.extend(d,h||{});b.init();b.show()},init:function(){b._initView();b._initEvent()},_initView:function(){f.appendTo(d.parent).find(d.msgC).text(d.msg)},_initEvent:function(){f.find(d.btnY).click(function(){d.submitHandle();b.hide()});f.find(d.btnN).click(function(){d.cancelHandle();b.hide()});if(d.onEsc){$(document).keydown(function(h){if(h.keyCode==27){b.hide()}})}if(d.onOut){f.crOut({outItems:d.elem,outHandle:function(){return false}})}},setPos:function(){if(d.type=="body"){f.css("position","absolute");var n=$(d.elem),m=d.parent;var l=n.offset().left+m.offset().left-65,k=n.offset().top+m.offset().top;var j=f.height();f.css({left:l,top:k-j});if($(window).scrollTop()>k-j){$(window).scrollTop(k-j)}}else{if(d.type=="dom"){var n=$(d.elem);n.before(f);if(d.posi==2){f.css({})}else{if(d.posi==1){f.css({})}}}}},show:function(){b.setPos();f.show()},hide:function(){f.remove()}})};window.tw=window.tw||{};window.tw.tipbox=new a();return a});kola("newt.composer.Composer",["newt.Config","newt.util.Browser","newt.twitter.Twitter","newt.cr.cr","newt.cr.crOut","newt.cr.crSimpleEdit","newt.cr.crButton","newt.cr.crInput","newt.composer.Attip","newt.lib.autoResize","newt.composer.emote.Emote","newt.composer.MultiPicEditor","newt.dialog.Notice","newt.util.Tool","newt.ca.ca"],function(a,c){var b=function(w,u){var p=this;p.elem=$(w);p.opti=$.extend({em:"li.crJs_em",ig:"li.crJs_ig",mv:"li.crJs_mv",tp:"li.crJs_tp",tk:".crJs_tk",ps:".crjs_ps",edit:"div.post",btn:"a.crJs_submit"},u||{});p._edit=p._btn="";var s,t,k,o,r,d,g,A,v,s=p.elem.find(p.opti.edit),l=s.find(".tarea"),k=p.elem.find(p.opti.btn),o=p.elem.find(p.opti.em),r=p.elem.find(p.opti.ig),f=p.elem.find("div.crJs_ig_v"),n=f.find("div.crJs_view"),j=n.find("div.pics"),q=n.find("img"),B=f.find("div.crJs_pend"),h=B.find("p"),d=p.elem.find(p.opti.mv),g=p.elem.find(p.opti.tp),A=p.elem.find(p.opti.tk);$.extend(p,{img:"",mv:"",vote:""});p.addMsgUrl=u.addMsgUrl;p.topic=u.topic;var z=0,m="",C="";$.extend(p,{init:function(){if(p.elem.data("tw_composer_init")){return false}p._initBtn();p._initTextarea();o.length==1&&p._initEmote();r.length==1&&p._initImg();d.length==1&&p._initVideo();g.length==1&&p._initTopic();A.length==1&&p._initVote();p.elem.data("tw_composer_init",true);$(function(){var E=$.cr.cookie.get("composer"),D=$.cr.cookie.get("twComposerH");if(E){p._edit.setVal(E);$.cr.event.send("composer_cookie_text",this);l.removeClass("tarea_min");t.css("height",D);p._edit.setCursorEnd()}})},_initTextarea:function(){p._edit=s.crSimpleEdit({ctrlEnterHandle:function(){p._btn.setLoading();p._submit();CA.q("tw_composer_sbumit_keyboard")},syncHandle:function(){try{if($.trim(p._edit.getVal())==""){p._btn.setDisable()}else{p._btn.setEnable();p._btn.removeLoading()}}catch(E){}},focusHandle:function(){l.removeClass("tarea_min");p.elem.find("p.ad_gov").addClass("ad_gov_act")},blurHandle:function(){if($.trim(p._edit.getVal())==""){p.elem.find("p.ad_gov").removeClass("ad_gov_act")}}}).getCrControl("crSimpleEdit");s.crOut({outHandle:function(){var E=p._edit.getVal();if(!E){t.css("height",v);l.addClass("tarea_min")}}});var D=new tw.AtTip(s);t=p._edit.getElement();v=t.height();if(t.data("autoResize")!="true"){t.autoResize({extraSpace:25,limit:110}).data("autoResze","true")}$(window).bind("unload",function(){if(CRTWCONFIG.C_CACHE){$.cr.cookie.set("composer",p._edit.getVal(),new Date(new Date().getTime()+1000*60*60*24))}var E=t.height();$.cr.cookie.set("twComposerH",E,new Date(new Date().getTime()+1000*60*60*24))})},_initBtn:function(){p._btn=k.crButton({loadingClass:"btn_loading",submitHandle:function(){if(window.isLogin===true){p._submit()}else{kola("newt.util.Tool",function(D){D.globalQuickLogin()});p._btn.removeLoading()}}}).getCrControl("crButton")},getPostData:function(){if($.trim(p._edit.getVal())==""){return}var E=p.picEditor;var F="";if(E){var D=E.getStatus();if(D!=E.STATUS_NOT_SELECT){if(D==E.STATUS_UPLOADING){return null}F=E.getValue()}}var G=$.trim(p._edit.getVal());return{msg:G,pic:p.miniImg,pics:F}},_submit:function(){if($.trim(p._edit.getVal())==""){return}var E=p.picEditor;var G="";if(E){var D=E.getStatus();if(D!=E.STATUS_NOT_SELECT){if(D==E.STATUS_UPLOADING){tw.notice.alert("图片正在上传，请稍后再发表");p._btn.setEnable();p._btn.removeLoading();return}G=E.getValue()}}var H=$.trim(p._edit.getVal());if(p.topic){H=p.topic+H}var F={type:"add_tw",content:H,pic:p.miniImg,url:p.addMsgUrl,pics:G,success:function(I){p._btn.removeLoading();if(I.status){p._btn.setEnable()}if(p.timer>0){clearTimeout(p.timer)}if(I&&!I.status&&I.data){kola("newt.comet.Feed",function(){tw.feed.showTw()});if(CRTWCONFIG.C_ADD){kola("newt.timeline.Container",function(){tw.twcontainer.addOne(I.data)})}if(CRTWCONFIG.C_TIP&&$("#twitter_container_u").length!=0){common.showTip("发布成功!")}p._resetComposer();if(p.picEditor){p.picEditor.close(false)}if(typeof CRTWCONFIG.C_ADD_SUCCESS=="function"){CRTWCONFIG.C_ADD_SUCCESS(I)}$.cr.event.send("tw_add_tw",I)}else{if(I&&417==I.status){kola("newt.ui.window.dialog.realname.ValidIDCardModel",function(J){J.show({style:"plain"})})}}},error:function(){p._btn.removeLoading();p.submitFault()}};if(z&&p._edit.getval().indexOf("["+m+"]")!=-1){F.voteid=z}z=0;tw.build(F);return false},submitFault:function(){tw.showSysMsg("发送失败，请稍后再试！")},_resetComposer:function(){p._edit.setVal("");l.addClass("tarea_min");t.css("height",v);p._btn.setDisable();$.cr.cookie.set("composer","");p._resetUp()},rewrite:function(){p._edit.setVal(p._edit.getVal())},setComposerTxt:function(D){p._edit.setVal(D)},_initEmote:function(){kola("newt.composer.emote.Emote",function(){tw.emote.initEmoteBtn(o,p._edit,2)})},_initImg:function(){if(!isLogin){$(function(){var E=$("#tw_swfuploadbutton").parent();E.bind("click",function(){kola("newt.util.Tool",function(F){F.iNoLogin()})})});return}var D=function(E,F){p.picEditor=new E({id:"editor1",anchor:F,dragAnchor:document.body,postParams:{uid:UID,serviceid:"32"},uploadUrl:CRTWCONFIG.MULTI_PIC_UPLOAD_URL,fileFilter:"jpg, jpeg, png, gif, bmp, JPG, JPEG, GIF, BMP",maxFileSize:10*1024*1024,MAX_SELECT_COUNT:12,onOpen:function(){kola("newt.tipbox.Bubble",function(G){G.close("newMultiPicBubble")});$("#tw_post2 .dropDown").each(function(){var G=$(this);if(G.attr("id")!="editor1"){G.addClass("noDis")}});if($.trim(p._edit.getVal())==""){p._edit.setVal("分享图片");l.removeClass("tarea_min")}p._edit.setCursorEnd()},onAddPic:function(H){var G=p._edit.getVal();var I=G&&G!="分享图片";if(G==""){p._edit.setVal("分享图片");l.removeClass("tarea_min")}p._edit.setCursorEnd()},onDelPic:function(H){var G=p._edit.getVal();var J=G&&G!="分享图片";var I=H.getValue()!="";if(!J&&!I){p._edit.setVal("")}p._edit.setCursorEnd()},onClose:function(L,H){var J=p._edit.getVal();var G=J&&J!="分享图片";var K=L.getPicViews().length;var I=(H&&!G)||(!H&&K>0)||(!H&&K==0&&!G);if(I){p._edit.setVal("")}p._edit.setCursorEnd()},onAnchorClick:function(){$.cr.event.send("pic_click",{})}})};kola("newt.composer.MultiPicEditor",function(G){var H=$("#tw_swfuploadbutton");if(H.length>0){D(G,H.parent());return}var F,E=function(){H=$("#tw_swfuploadbutton");if(H.length==0){return}D(G,H.parent());window.clearInterval(F)};F=window.setInterval(E,80)})},_initVideo:function(){var D=d.find("div.dropVideo"),G=D.find("a.cr_input_sBtn"),E=D.crInput({syncHandle:function(){var I=E.getVal();if(/http:\/\/.+/i.test(I)){G.removeClass("btn_dis")}else{G.addClass("btn_dis")}},submitHandle:function(){var I=E.getVal();if(!/http:\/\/.+/i.test(I)){return}p._edit.insert(I+" ");D.addClass("noDis");E.setVal("http://");p._edit.setCursorEnd()}}).getCrControl("crInput");d.find("a.crJs_btn").click(function(){var I={preventDefault:false};$.cr.event.send("video_show",I);if(I.preventDefault){return}D.toggleClass("noDis");if(!d.data("tw_input")){E.setVal("http://");d.data("tw_input",1)}D.find("input").select();kola("newt.tipbox.Bubble",function(J){J.close("videoUploadBubble")})});D.find("a.close").click(function(){E.setVal("http://");D.addClass("noDis")});d.crOut({outHandle:function(){D.addClass("noDis")}});var F=D.find('[data-mt="btn-upv"]');var H=0;if(F.length>0){F.bind("click",function(K){var L="__vup"+(H++);var I=500;var P=c.isChrome?330:310;var J=F.parents(".dropD")[0].getBoundingClientRect();var Q=(K.clientX-J.left);var N=(K.clientY-J.top);var O=K.screenX-Q;var M=K.screenY-N;p._showVideoUploadWin(L,O,M,I,P)})}},_showVideoUploadWin:function(I,F,K,D,L){var G=("menubar=no,toolbar=no,resizable=no,scrollbars=no,status=no,width="+D+",height="+L+",left="+F+",top="+K);var J=/SE \d+\.X/.test(navigator.userAgent);var H=document.all;var E=!(H&&J);if(E){window.open("about:blank",I,G)}p._postContentToUpWin(I)},_postContentToUpWin:function(D){var G=a.UPLOAD_LOCAL_VIDEO_URL;var F=p._edit.getval()||"";var E=(function(){if(!document.forms.__VUP_FORM__){$(document.body).append("<form name='__VUP_FORM__' method='post'><textarea name='content'></textarea></form>")}return document.forms.__VUP_FORM__})();E.elements.content.value=escape(F);E.target=D;E.action=G;E.submit()},_initTopic:function(){var E="输入话题标题";var D="#"+E+"#";g.bind("click",function(G){var F={preventDefault:false};$.cr.event.send("topic_show",F);if(F.preventDefault){G.preventDefault();return}if(p._edit.getVal().indexOf(D)<0){p._edit.insert(D+" ")}p._edit.selectionTxt(D,1,E.length)})},_initVote:function(){var D=A.children("a"),E=A.children(".dropVote");A.crOut({outHandle:function(){E.addClass("noDis")}});E.find("a.close").unbind().click(function(){C.resetVote();E.addClass("noDis")});D.unbind().click(function(G){var F={preventDefault:false};$.cr.event.send("vote_show",F);if(F.preventDefault){G.preventDefault();return}if(D.data("init")==1){E.removeClass("noDis");return}kola("newt.widget.DatePicker",function(H){tw.build({type:"new_vote",success:function(I){E.find("div.dropC").html(I.getBody());p._initVoteEvent();E.removeClass("noDis");if(typeof $dp=="undefined"){H();WdatePicker()}D.data("init",1)}})})})},_initVoteEvent:function(){kola("newt.composer.vote.Vote",function(D){C=new D($("#crjs_newvote"),{success:function(E){A.children(".dropVote").addClass("noDis");p._edit.insert("发起了投票["+E.title+"] ");p._edit.setCursorEnd();m=E.title;z=E.vid;C.resetVote()}})})},_picRotate:function(D,F){if(!UID){return}j.addClass("loading2");var E="left"==F?"-90":"90";$.ajax({url:"/pic/proxy",global:false,type:"post",dataType:"json",data:"act=rotate&serviceid=32&uid="+UID+"&name="+escape(D)+"&rdep="+E+"&t="+new Date().getTime(),success:function(G){if(G&&!G.status){p.img=G.statusText;p.miniImg=G.data.replace(G.statusText,"f_"+G.statusText);p._setViewImg(p.miniImg)}},error:function(G){}})},_startUp:function(){f.removeClass("noDis");n.addClass("noDis");h.css("width",0);B.removeClass("noDis");j.addClass("loading2")},_resetUp:function(){f.addClass("noDis");n.addClass("noDis");h.css("width",0);q.attr("src","http://s1.cr.itc.cn/img/s/ico/0168.gif");p.img="";p.miniImg="";if("分享图片"==p._edit.getVal()){p._edit.setVal("")}},_upSuccess:function(){if(r.find("div.pend").hasClass("noDis")){p.img="";p.miniImg="";return false}p._setViewImg(p.miniImg);if($.trim(p._edit.getVal())==""){p._edit.setVal("分享图片");l.removeClass("tarea_min")}p._edit.setCursorEnd()},_setViewImg:function(E){var D=new Image();D.onload=function(){D.onload=function(){};q.attr("src",E);B.addClass("noDis");j.removeClass("loading2");if(parseInt(D.height)<80){j.css("height",80)}else{j.css("height","auto")}n.removeClass("noDis")};D.src=E}});p.init()};return b});kola("newt.timeline.Plus2",["jquery.Core","sohu.ctrl.Tips","newt.util.Browser","newt.service.StatisticService","newt.cr.crEvent","newt.dialog.Notice","newt.Config","newt.cr.cr"],function(g,m,l,h,f,a,d,c){function k(p,o){if(console&&console.log){console.log(p+": execute error callback error info: "+o)}}function j(p,A,w,o,v,t){var s,u,q,z,r=[];for(s=0,u=v.length;s<u;s++){q=v[s];if(!t.hasOwnProperty(q)){throw"Plus2: except param:"+q}}var B={};for(q in t){if(t.hasOwnProperty(q)){z=t[q];if(typeof z!="object"&&typeof z!="function"){B[q]=z;r.push(q+"="+z)}}}g.ajax({url:w,type:o,dataType:t.dataType||"json",data:r.join("&"),success:function(F){if(!F||(F.status&&F.status!=0)){if(t.error instanceof Function){try{t.error.call(t.scope,F)}catch(J){k("Plus2."+p+"#error",J)}}return}if(typeof(t.success)=="function"){try{t.success.call(t.scope,F)}catch(J){k("Plus2."+p+"#success",J)}}if(A&&F.data){if(F.data){F.data.__opName="+2"}var E,C,H;var I=F.data;var D=A.split(/\s*,\s*/);var G=g.extend({sendData:B},I);for(E=0,C=D.length;E<C;E++){H=D[E];try{f.send(H,G)}catch(J){k("Plus2."+p+"#error",J)}}}},error:function(C){if(typeof t.error=="function"){try{t.error.call(t.scope,C)}catch(D){k("Plus2."+p+"#error",D)}}}})}var n={forward:function(q){if(!q||!q.msgid){return}q.at=q.msgid;q.msg=(q.content?g.cr.encodeUTF(q.content):"");var u="transf_weibo_success, plus2:plus2_ok,tw_add_twi";var t="post";var s="forward";var p="/twAction/reTwitter";var r=["at"];var o=d.PULS2_POST_PROCESSER||function(A,B,v,z,D,w,C){C(A,B,v,z,D,w)};o(s,u,p,t,r,q,j)}};var b={hasInit:false,guidBubble:null,isSendReq:false,init:function(o){if(this.hasInit){return}this.hasInit=true;this.bindEvents();if(o&&o.showGuidBuuble){this.showGuidBubble()}},bindEvents:function(){var o=this;g(".crJs_plus2").live({click:function(){var p=g(this);o.onPlusLnkClick(p)}})},onPlusLnkClick:function(s){if(this.isSendReq){return}var q=this;var p=false;var u=g(s).closest('[id$="_con"]');var r=u.attr("id").match(/\d+/)[0];var t=function(A){var z=g(s).closest(".ad");if(z.size()){q.insertWeibo(u,A);return}var w=g(s).closest(".tags,.crJs_tags");var v=w.find(".crJs_rt");var B=w.find(".crJs_rp");q.updateTagOptNum(B);q.updateTagOptNum(v);if(v.is(":visible")){m.showBubbleAt(v,-50,{content:"+1",bubbleClass:"combo combo3",onmoveend:function(){window.setTimeout(function(){q.insertWeibo(u,A);q.insertReply(u,A)},0)}})}if(B.is(":visible")){m.showBubbleAt(B,-50,{content:"+1",bubbleClass:"combo combo3"})}};var o=function(A){var v=parseInt(A.status);var z=A.statusText;switch(v){case -9:tw.notice.alert(z);break;case 401:kola("newt.util.Tool",function(B){B.iNoLogin()});break;case 416:tw.notice.alert("微博发布太频繁了，过段时间再试试吧~");break;case 417:if(!p){var w="newt.ui.window.dialog.realname.ValidIDCardModel";kola(w,function(B){p=true;closeHandler=function(){p=false};B.show({style:"plain",closeHandle:closeHandler})})}break;default:if(z){tw.notice.alert(z)}else{tw.notice.alert("操作失败，请稍后再试！")}}};this.isSendReq=true;this.closeGuidBubble();window.setTimeout(function(){q.isSendReq=false},500);n.forward({msgid:r,error:o,success:t,content:g.cr.decode("+2"),type:(window.FROM_TYPE||"")});h.log("plus2_lnk","click",{page:location.href,twiId:r})},updateTagOptNum:function(o){var q=g(o).find("b q");if(q.length==0){return}var p=(function(){var s=g.trim(q.html());if(!s){return 0}var r=s.match(/\d+/);return(r&&r[0]?(parseInt(r[0],10)||0):0)})();q.html("("+(p+1)+")")},insertWeibo:function(r,o){try{var p=o.data.timeline;tw.twcontainer.addOne(p)}catch(q){}},insertReply:function(s,o){var r=(function(){var u=g(u).find(".crjs_cmt");return(u.length>1?u:g(".crjs_cmt"))})();var q=(r.length>0&&r.height()>0);if(!q){return}var t=r.find('[id^="rebox_"]');if(t.length==0){return}var p=t.children();if(p.length>0){g(o.data.reply).insertBefore(p[0])}else{g(o.data.reply).appendTo(t)}},showGuidBubble:function(q){if(this.guidBubble){return}q=q||this.DEFAULT_GUID_BUBBLE;var r=this;var s=g(".twis .twi:visible:first");var p=s.find(".crJs_plus2");var o=g(q).insertBefore(p);this.guidBubble=o;o.find(".close").click(function(){r.closeGuidBubble()})},closeGuidBubble:function(){if(!this.guidBubble){return}this.guidBubble.remove();this.guidBubble=null;kola("newt.net.interface.Bubble",function(o){o.closeCommonBubble({name:"bubble-plus2"})})},DEFAULT_GUID_BUBBLE:('<div class="bubble bub2 bubR"><div class="bubC bubCSelect"><a href="javascript:void(0)" title="关闭" class="close"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a><i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i><div class="bubBd"></div></div></div>')};return b});kola("newt.timeline.TwiHelper",["newt.util.StrUtil","newt.util.Browser"],function(b,a){return{showContentAsRich:function(k,c){var j=$("#"+k+"_con");if(j.length==0){return}var h=this;var l=j.find(">.twiCtr");var f=function(){var p=j.find(">.twiM");var n=j.find(">.twiC .ugc:eq(0)");var m=c&&c.focusEl||null;var q=c&&c.callback;l=j.find(">.twiCtr");p.addClass("nodis");n.addClass("nodis");j.addClass("twiShow");l.removeClass("nodis");if(q&&q instanceof Function){try{q.call()}catch(o){if(window.console&&console.log){console.log(o)}}}};var d=l.attr("data-hasLoad")=="true"||l.children().length>0;if(d){f();return}var g=function(n){var o=n.contents;var m=$('<div class="twiCtr">'+o+"</div>");var p=function(){var r=this;var t=$(r).closest(".picB");var q=t.find(".crjs_canvas");var s=t.find(".iFake");s.addClass("noDis");q.removeClass("nodis");q[0].style.height="";r.style.display="";r.onload=null};$(".media .picB>.crjs_canvas",m).each(function(){var s=$(this);var r=s.find("img")[0];var q=r.height>0;if(q){p.call(r)}else{r.onload=p;r.src=r.src}});$(m).insertBefore($(j).children()[0]).attr("data-hasLoad","true");f()};this.getRichContent(k,{success:g,scope:this})},showContentAsSimple:function(j,c){var h=$("#"+j+"_con");if(h.length==0){return}var k=h.find(">.twiCtr");var f=function(){if(c&&c.callback instanceof Function){try{c.callback()}catch(l){if(window.console&&console.log){console.log(l)}}}};if(k.length==0){f()}if(k.attr("data-can-not-unexpand")=="true"){f();return}var g=h.find(">.twiM");var d=h.find(">.twiC .ugc:eq(0)");h.removeClass("twiShow");k.addClass("nodis");g.removeClass("nodis");d.removeClass("nodis");f()},getRichContent:function(g,d){var c="/twAction/getPageContentThePicIn?msgid="+g;var h=d.success instanceof Function?d.success:null;var f=d.error instanceof Function?d.error:null;$.ajax({url:c,type:"get",dataType:"json",success:function(j){if(j.status!=0){if(f){try{f.call(j)}catch(k){}}return}try{h.call(d.scope,j.data)}catch(k){}},error:function(j){try{f.call(d.scope,j)}catch(k){}}})},getSearchKeywords:function(k){if(!k){return[]}var j=this.getTwiNode(k);var d=j.find(">.twiC>.ugc");var h=d.html();var g=/<span\s+class="em4">(.+?)<\/span>/gi;var c,f=[];while(c=g.exec(h)){if(c[1]){f.push(c[1])}}if(f.length>0){f.sort(function(m,l){return m<l?1:-1})}return f},highLightKeywords:function(f,c){if(!f||!c||c.length==0){return}var d=this.getTwiNode(f);this.highLightKeywordsTwi(d,c)},highLightKeywordsTwi:function(h,d){var c=h.find(">.twiC>.ugc");var f=c.html();var g=new RegExp("("+d.join("|")+")","g");c.html(f.replace(g,'<span class="em4">$1</span>'))},showPicBubble:function(m,q,j,l){q=parseInt(q);m=$(m);if(m.length==0||!q||!j||!l){return}var n=this;var f=20;var o=this.getPicBubble();var d=q>this.BUBBLE_PIC_MAX_H?this.BUBBLE_PIC_MAX_H:q;var p=m[0].getBoundingClientRect();var k=p.top>q+f;var g=new Image();var c,h;o.find(".bubBd").css("height",d+"px").find(".img");o.attr("loadingUrl",j);g.onload=function(){var t=o.attr("loadingUrl");var s=this.src;var r="url("+s+")";if(s.indexOf(t)!=-1){o.find(".bubBd .img").css("backgroundImage",r)}};g.src=j;c=$(m).children();h=c.length;if(k&&h>0){if(c[0]!=o[0]){o.remove().removeClass("bubD").insertBefore(c[0])}}else{if(h>0&&c[h-1]!=o[0]){o.remove().addClass("bubD").appendTo(m)}}o.show()},isBubbleIn:function(d){d=d.length>0?d[0]:d;var c=this.getPicBubble()[0];return $.contains(d,c)},focusToEl:function(f){if(!f||$(f).length==0){return}var d=a.isIE6?$("#t-sys"):document;var l=$(f)[0].getBoundingClientRect();var k=$(d).scrollTop();var n=k+l.top;var h=l.bottom-l.top;var o=this.getClientH();var c=l.bottom<o;var m,j=50;var g=function(){var u=(f[0].tagName=="IMG"||$(f).closest(".picB").length>0);var s=!(a.isIE6||a.isIE7||a.isIE8);if(!s||!u){return}var r=0,t=10,q=80;var p=window.setInterval(function(){if(r>t){window.clearInterval(p);return}var w=(r++)%5;var v=w+"px "+w+"px "+w+"px #888";f[0].style.boxShadow=v},q)};if(!c){m=(h+j)<o?n+h+j-o:n-j;this.scrollTo(m,g,300)}else{g()}},scrollTo:function(g,f,d){var c=a.isIE6?$("#t-sys"):document;$(c).scrollTo(g,{axis:"y",duration:d||500,onAfter:f})},getClientH:function(){return(document.compatMode=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight)},getPicBubble:function(){var c=$("#__pic_bubble__");if(c.length==0){c=$(this.PIC_BUBBLE).appendTo(document.body)}return c},getTwiNode:function(c){var f=typeof c=="string"?$("#"+c+"_con, #prev_"+c+", #disp_"+c):$(c);var d;f=f.hasClass(".twi")?f:f.closest(".twi");d=f.closest(".twiRoot");return(d.length>0?d.closest(".twi"):f)},getPicData:function(o,l){var n=$("#"+o+"_con");var p=n.find('meta[id="'+l+'"]');if(p.length==0){return null}var g,h,k,j={},d,c,f,m=p[0].attributes;for(g=0,h=m.length;g<h;g++){k=m[g];d=k.name;f=k.value;if(d&&f){j[d]=f}}if(j.url){c=j.url;j.surl=c.replace(/\/m_/i,"/f_");j.burl=c.replace(/\/m_/i,"/")}return h>0?j:null},isElInCommentList:function(c){return $(c).closest(".cmt").length>0},isElInSourceTwi:function(c){return $(c).closest(".twiRoot").length>0},isContentShowAsRich:function(f){var d=this.getTwiNode(f);var c=d.find(".twiCtr");return c.length>0&&c[0].offsetHeight>0},isTransfered:function(d){var c=this.getTwiNode(d);return c.find(".twiRoot").length>0},isContentHasPic:function(f){var d=this.getTwiNode(f);var c='>.twiC .ugc [data-mt="pic_icon"]';return $(d).hasClass("twiTraPic")||$(d).find(c).length>0},hasVideo:function(d){var c=this.getTwiNode(d);return $(c).find(".picV").length>0},hasPic:function(d){var c=this.getTwiNode(d);return $(c).hasClass("twiHasPic")||$(c).hasClass("twiTraPic")},hasMPic:function(d){var c=this.getTwiNode(d);return $(c).find(".twiM-Ps,.twiM-Ps-V").length>0},sourceTwiHasPic:function(g){var f=this.getTwiNode(g);var d=$(f).find(".twiRoot >.twi >.twiM .pics >.pic");var c=d.length;if(c>0){d.each(function(){if($(this).hasClass("picV")){c--}})}return c>0},sourceTwiHasMPic:function(d){var c=this.getTwiNode(d);return $(c).find(".twiRoot").find(".twiM-Ps,.twiM-Ps-V").length>0},sourceTwiHasVdo:function(d){var c=this.getTwiNode(d);return $(c).find(".twiRoot .picV").length>0},getMsgId:function(g){var f=this.getTwiNode(g);var c=this.isTransfered(f);var d=(c?f.find(".twiRoot").attr("id"):f.attr("id"));return d.replace("_con",c?"":"_0")},getMediaPreNode:function(f){var d=this.getTwiNode(f);var c=this.isTransfered(f);return c?$(d).find(".twiRoot >.twi >.twiM .pics"):$(d).find(">.twiM .pics")},getMediaDispNode:function(f){var d=this.getTwiNode(f);var c=this.isTransfered(f);return c?$(d).find(".twiRoot >.twi >.twiM .media"):$(d).find(">.twiM .media")},getContext:function(c,j){var h=this.getTwiNode(c);var g=h.attr("id").replace("_con","");var d="";var f=this;c=$(c);if(c.length>0){d=c.attr("data-id")||c.attr("id")}return{srcEl:c,twiId:g,srcElId:d,twiNode:h,isTransfered:function(){return f.isTransfered(h)},isContentShowAsRich:function(){return f.isContentShowAsRich(h)},isContentHasPic:function(){return f.isContentHasPic(h)},hasVideo:function(){return f.hasVideo(h)},hasPic:function(){return f.hasPic(h)},hasMPic:function(){return f.hasMPic(h)},sourceTwiHasPic:function(){return f.sourceTwiHasPic(h)},sourceTwiHasMPic:function(){return f.sourceTwiHasMPic(h)},sourceTwiHasVdo:function(){return f.sourceTwiHasVdo(h)},getMsgId:function(){return f.getMsgId(h)},getMediaPreNode:function(){return f.getMediaPreNode(h)},getMediaDispNode:function(){return f.getMediaDispNode(h)}}},grabData:function(g,f){var n=f instanceof Array?f:[].slice.call(arguments,1);var r=this.getTwiNode(g);var l=r.html();var h,j,q,p=0,o={};var d=new RegExp(("("+n.join("|")+")\\s*:\\s*(\\'|\")(.*?)\\2"),"g");while(h=d.exec(l)){j=h[1];q=h[3];if(j&&q&&!o.hasOwnProperty(j)){p++;o[j]=q}}return p>0?o:null},BUBBLE_PIC_MAX_H:216,PIC_BUBBLE:('<span id="__pic_bubble__" class="bubble bubPpv"><span class="bubC"><i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i><span class="bubBd" style=" height:170px"><i class="img"></i></span></span></span>')}});kola("newt.service.StatisticService",null,function(){var f="http://z.t.sohu.com/ca.gif",a="http://z.t.sohu.com/ca.gif",h="http://z.t.sohu.com/cc.gif";var d=[],b=false,c=new Image(),j=function(l){if(b){d.push(l)}else{b=true;c.src=l}},k=function(){b=false;if(d.length>0){j(d.shift())}};c.onload=k;c.onerror=k;var g={ca:function(l){this.log(l,"click",{page:encodeURI(location.href)})},cc:function(l){kola("newt.ca.ca",function(m){m.q(l)})},log:function(r,n,q,m){var t,o,l=[],s=(m||f);if(q!=null){for(t in q){if(q.hasOwnProperty(t)){o=q[t];l.push(('"'+t+'":')+(typeof o==="string"?'"'+o+'"':o))}}}j(s+"?t="+(new Date().getTime())+"&position="+encodeURIComponent(r)+"&operation="+encodeURIComponent(n)+"&details="+encodeURIComponent(l.join(",")))}};return g});kola("newt.timeline.Media",["newt.util.StrUtil","newt.timeline.TwiHelper","newt.util.Browser","newt.cr.cr","newt.ca.ca","newt.lib.excanvas","newt.swf.sohuFlash","newt.lib.jqueryScrollTo","newt.tool.Tool"],function(f,a,d){var c=['<p class="oper">',"{expandLnk}",'<a href="{url}" target="_blank" class="fuc0 crJs_video_url" title="{title}">','<i class="i i42"></i>',"</a>","</p>",'<div class="vdo" id="dis_{timestamp}"></div>'].join("");var b=function(){var h,g,j;j=false;h=g=this;g.v={};$.extend(g,{init:function(k){$(k).find("a.uri[media=video]").each(function(){$(this).removeAttr("target").unbind("click").click(function(n){var l,o,m,p="";l=$(this).closest("div.twi");m=l.find("div.vdo");if(m.size()>0){o=m.closest("div.smedia");if(o.size()==0){o=m.closest("div.media")}}if($("div.twiFinal").size()>0){p="final"}g.showVideo({vid:$(this).attr("mediaurl"),ele:this,disPanel:o,autoPlay:1,from:p});n.stopPropagation();return false})});this.regEvent()},regEvent:function(){if(j){return}else{j=true}var k=this;kola("newt.timeline.zoom.Magnifier",function(l){l.listenArea(".mainC")});$('[data-mt="pic_icon"]').live({mouseenter:function(l){k.onMouseEnterIcon(this,l)},mouseleave:function(l){k.onMouseLeaveIcon(this,l)},click:function(m){var l=a.getContext(this,m);k.onClickContentPicIcon(l,m);CA.q("click_pic_icon_in_weibo_content")}});$(".twiCtr .picB").live({click:function(n){var m=$(n.target).closest(".nm").length>0;if(!m){var l=a.getContext(this);k.onClickContentPic(l,n)}}});$(".twiTraPic>.twiM a").live({click:function(n){var m=n.target;var l=a.getContext(m,n);try{k.onClickTranMedia(l,n)}catch(n){if(window.console&&console.log){console.log(n)}}}});$(".twiCtr .oper .fuc").live({click:function(m){var l=a.getContext(this,m);k.onClickOptPanel(l,m)}})},onMediaExpand:function(k){var o=k.twiNode;if(d.isIE6){var l=o.find(".twiRoot>.twi>.cmt");var n=(l.length>0&&l[0].offsetHeight>0);if(n){l.attr("class",l.attr("class"))}}if(d.isIE7||d.isIE8){var m=o.find(".twi:first");if(m.children(".cmt:visible").length>0){m.css("zoom","")}}},onMediaUnexpand:function(k){var m=k.twiNode;if(d.isIE7||d.isIE8){var l=m.find(".twi:first");if(l.children(".cmt:visible").length>0){l.css("zoom",0)}}},onClickContentPicIcon:function(k,m){var l=function(){var r=k.twiNode;var q='.twiCtr [data-id="'+k.srcElId+'"]';var n=r.find(q);if(n.length==0){return}var p=n[0].offsetHeight>0;var o=p?n:n.closest(".picB").find(".iFake");a.focusToEl(o)};this.expandMedia({ctx:k,callback:l})},onClickContentPic:function(k,l){h.hideDisPanel({ele:k.srcEl,ctx:k})},onClickTranMedia:function(k,m){var l=k.srcEl;h.expandMedia({ctx:k,srcEl:l,callback:function(){var q=k.twiNode;var p=$(l).closest(".picV").length>0;var o=$(l).closest(".traM").length>0;var n=p?".vdo:eq(0)":o?".twiRoot":".twiCtr [data-id]:eq(0)";a.focusToEl(q.find(n))}})},onClickOptPanel:function(k,o){var l=k.srcEl;var n=$(l).find("i");var m=n.length==0?null:n.hasClass("i41")?"close":n.hasClass("iCw")?"r-left":n.hasClass("iCcw")?"r-right":n.hasClass("i43")?"open-win":"unknown";switch(m){case"close":this.hideDisPanel({ele:k.srcEl,ctx:k});break;case"r-left":this.rotate({rotate:"left",THIS:l});break;case"r-right":this.rotate({rotate:"right",THIS:l});break}},onMouseEnterIcon:function(l,p){var k=a.getContext(l,p);var o=k.twiId;var m=k.srcElId;var n=a.getPicData(o,m);$(l).attr("isMouseIn","true").addClass("picPv_hover");a.showPicBubble(l,n.sh,n.surl,p)},onMouseLeaveIcon:function(k,l){$(k).attr("isMouseIn","false");window.setTimeout(function(){var n=a.getPicBubble();var o=$(k).attr("isMouseIn")=="true";var m=a.isBubbleIn(k);if(o){return}$(k).removeClass("picPv_hover");if(m){n.hide()}},this.BUBBLE_SHOW_TIME_AFTER_LEAVE)},expandMedia:function(l){var k=l.ctx||a.getContext(l.srcEl);var m=k.srcEl;var n=$(m).closest(".picV").length>0;var p=this;var q=(function(){var s=k.sourceTwiHasPic();var t=k.sourceTwiHasMPic();var r=k.sourceTwiHasVdo();var u=$(m).closest(".traM").length>0;if(u){return(n?(t?"showVideoImg":"showVideo"):(t?"showImgVideo":"showImg"))}if(s){return t?"showImgVideo":"showImg"}if(r){return t?"showVideoImg":"showVideo"}})();if(q){var o=(function(){var r,s={msgid:k.getMsgId(),autoScroll:false};r=a.grabData(k.twiNode,"vid","path");if(r){s.path=r.path||"";s.vid=r.vid||""}if(q=="showVideo"){s.autoPlay=n}return $.extend(l,s)})();this[q](o)}else{a.showContentAsRich(k.twiId,{callback:function(){if(l.callback instanceof Function){try{l.callback()}catch(r){}}p._fireCustomEvent("onMediaExpand",k)}})}},showImg:function(l){var m=l.srcEl||l.ele;var k=l.ctx||a.getContext(m);var o=a.isElInCommentList(m);var n=a.isElInSourceTwi(m);var p=k.twiId;if(!o&&!n&&k.isTransfered()&&k.isContentHasPic()){a.showContentAsRich(p,{callback:function(){h._showImg(l);h._fireCustomEvent("onMediaExpand",k)}})}else{this._showImg(l)}kola("newt.service.StatisticService",function(q){q.log("newt_image_click","click",{page:location.href,twiId:l.msgid})})},showVideo:function(l){var m=l.srcEl||l.ele||l.msgid;var k=l.ctx||a.getContext(m);var n=a.isElInSourceTwi(m);var o=k.twiId;if(!n&&k.isTransfered()&&k.isContentHasPic()){a.showContentAsRich(o,{callback:function(){h._doShowVideo(l);h._fireCustomEvent("onMediaExpand",k)}})}else{this._doShowVideo(l)}return false},showImgVideo:function(l){if(!l||!l.msgid){return}var m=l.srcEl||l.ele;var k=l.ctx||a.getContext(m);var n=a.isElInSourceTwi(m);var o=k.twiId;if(!n&&k.isTransfered()&&k.isContentHasPic()){a.showContentAsRich(o,{callback:function(){h._showImgVideo(l);h._fireCustomEvent("onMediaExpand",k)}})}else{this._showImgVideo(l)}},showVideoImg:function(l){if(!l||!l.msgid){return}var m=l.srcEl||l.ele;var k=l.ctx||a.getContext(m);var n=a.isElInSourceTwi(m);var o=k.twiId;if(!n&&k.isTransfered()&&k.isContentHasPic()){a.showContentAsRich(o,{callback:function(){h._showVideoImg(l);h._fireCustomEvent("onMediaExpand",k)}})}else{this._showVideoImg(l)}},hideDisPanel:function(l){if(!l){return}var m=l.srcEl||l.ele;var k=l.ctx||a.getContext(m);var o=a.isElInCommentList(m);var p=k.twiId;var n=this;var q=function(){var w=k.twiNode;var u,t,s,v,r;l.autoScroll=false;n._hideDisPanel(l);n._fireCustomEvent("onMediaUnexpand",k);u=$(l.focusEl||w);if(u&&u.length>0){t=u[0].getBoundingClientRect();if(t.top<0){s=d.isIE6?$("#t-sys"):document;v=$(s).scrollTop();r=v+t.top-50;a.scrollTo(r)}}};if(!l.ctx){l.ctx=k}if(!o&&k.isTransfered()&&k.isContentHasPic()){a.showContentAsSimple(p,{callback:q})}else{this._hideDisPanel(l)}},_showImg:function(n){var q,p,m,k,r,l;if(n.ele){r=$(n.ele).closest(".twi");m=r.find(">.twiM .pics");k=r.find(">.twiM .media");q=m.attr("id").replace(/prev_/gi,"");p=q.toString().replace(/_0$/,"")}else{if(n.msgid){q=n.msgid;p=q.toString().replace(/_0$/,"");r=$("#"+p+"_con");m=$("#prev_"+q);k=$("#disp_"+q)}else{return}}n.disPanel=k;m.find("i.iFake").removeClass("noDis");k.empty();g.buildImg(n);k.show();m.find("i.iFake").addClass("noDis");m.addClass("noSize");this._modifyTwi(p,{ele:r});l=$.cr.inViewport("#"+p+"_con",{ele:r});if(n.autoScroll!=false&&!l){CRTWCONFIG.SCROLL_DOM.scrollTo(r,200,{axis:"y",offset:-100})}if(n.callback instanceof Function){try{n.callback.call(n.scope)}catch(o){}}CA.q("tblog_img_click")},_doShowVideo:function(m){g.flag=false;var q=m.msgid||"",p=m.from||"",l=m.vid,k="";if(!q){var n=$(m.ele).parents("div.twiRoot");if(n.length>0){q=n.attr("id").replace("_con","")}else{if($(m.ele).closest("div.twi").find("div.twiRoot").length){return true}}if(!q){q=$(m.ele).closest("div.twi").attr("id").replace("_con","")+"_0"}}k=g.v[l];if(k){g._showVideo(q,l,p,m)}else{g.getVideoInfo(l,function(){if(g.v[l]){g._showVideo(q,l,p,m)}else{tw.showSysMsg("视频初始化失败，请稍后再试！")}})}if(m.callback instanceof Function){try{m.callback.call(m.scope)}catch(o){}}return false},_showImgVideo:function(k){if(k){k.autoPlay=0;k.priority=0}g.showAllImg(k);if(k.callback instanceof Function){try{k.callback.call(k.scope)}catch(l){}}CA.q("tblog_img_cover_click")},_showVideoImg:function(k){if(k){k.autoPlay=1;k.priority=1}this.showAllImg(k);if(k.callback instanceof Function){try{k.callback.call(k.scope)}catch(l){}}CA.q("tblog_img_cover_click")},_hideDisPanel:function(o){var p,r=o.msgid;var l,m,q;var k,n=o.ele;if(o.ele){if(a.isElInCommentList(n)){l=$(n).closest("div.media");m=$(n).closest("div.twiM").find(".pics")}else{k=o.ctx?o.ctx:a.getContext(n);l=k.getMediaDispNode();m=k.getMediaPreNode()}q=m.closest("div.twi")}else{if(r){p=r.toString().replace(/_0$/,"");l=$("#disp_"+r);m=$("#prev_"+r);q=$("#"+p+"_con")}else{return}}l.removeData("hasClicked").removeData("preVid").removeData("videoSrc").removeData("rot").hide().children().remove();m.removeClass("noSize noDis");if(o.autoScroll!=false&&!$.cr.inViewport(q)){CRTWCONFIG.SCROLL_DOM.scrollTo(q,200,{axis:"y",offset:-100})}g.flag=false;this._clearModify(o.msgid,{ele:q});return false},_modifyTwi:function(l,k){var m=null;if(k&&k.ele){m=$(k.ele)}else{if(l){l=l.replace(/_0$/,"");m=$("#"+l+"_con");if(!m.length){m=$("#rp_"+l)}}}if(m&&m.hasClass("twiRoot")){m=m.find(">.twi")}if(m&&!m.hasClass("twiShow")){m.addClass("twiShow")}},_clearModify:function(l,k){var m=null;if(k&&k.ele){m=$(k.ele)}else{if(l){l=l.replace(/_0$/,"");m=$("#"+l+"_con");if(!m.length){m=$(k.ele)}}}m.removeClass("twiShow")},_fireCustomEvent:function(m,k){if(!m||!k||!this.hasOwnProperty(m)){return}try{this[m](k)}catch(l){if(widnow.console&&console.log){console.log('Media._fireCustomEvent: execute event "'+m+'" error, info:'+l)}}},_showVideo:function(l,w,z,C){var A=l,n,q,B;if(C.disPanel){n=$(C.disPanel)}else{n=$("#disp_"+A)}q=n.data("hasClicked");B=n.data("preVid");if(q&&B==w){var v=n.data("videoSrc");if(v){this._openVideoSourcePage(v)}return false}else{n.data("hasClicked","true");n.data("preVid",w)}var t,s,m,p,o,k;t=new Date().getTime();s=$("#prev_"+A);m=g.v[w];o=m.url;k=m.title;if(z=="final"&&n.closest(".twiRoot").size()>0){z=""}m.from=z;p=this._getDisPanelHtml(m,t);n.html("");$(p).appendTo(n);n.find("a.crJs_video_hide").unbind("click").click(function(){g.hideDisPanel({msgid:l,ele:n});return false});var r=$.cr.browser,u=!(r.isIPad||r.isIPhone);if(u){this._showVideoBySwf(n,w,m,C)}else{if(m.html5VideoUrl){this._showVideoByHtml5(n,w,m,C)}else{n.data("videoSrc",o);this._openVideoSourcePage(o);return false}}if(s.length>0){s.addClass("noDis")}n.show();this._modifyTwi(A);if(C.autoScroll!=false){CRTWCONFIG.SCROLL_DOM.scrollTo($("#"+A.replace(/_0$/,"")+"_con"),200,{axis:"y",offset:-100})}},_getDisPanelHtml:function(k,m){var l=['<a href="javascript:void(1)" ','class="fuc0 crJs_video_hide" ','title="收起">','<i class="i i41"></i>',"</a>"].join("");return f.format(c,{expandLnk:("final"==k.from?"":l),timestamp:m,title:k.title,url:k.url})},_openVideoSourcePage:function(k){window.open(k,"pop_share_video")},_showVideoBySwf:function(l,q,o,s){var p=o.detailurl,r="dis_"+q,m=l.find("div.vdo")[0],n="isAutoPlay=true&autoPlay=true&autoplay=true&auto=1";if(s&&s.autoPlay==0){n="isAutoPlay=false&autoPlay=false&autoplay=false&auto=0"}if(!m||m.children.length>0){return}if(p.indexOf("www.56.com/cpm_")!=-1){p=p.replace("www","player").replace("cpm_","v_")}var k=new sohuFlash(p,r,"100%","100%","9");if(!/(tv.sohu.com|youku.com)/gi.test(o.url)){k.addParam("allowScriptAccess","always")}k.addParam("quality","high");k.addParam("wmode","transparent");k.addParam("allowFullscreen","true");k.addParam("flashvars",n);k.write(m)},_showVideoByHtml5:function(l,k,o,m){var r=l.find("div.vdo")[0],q="dis_"+k,p=o.html5VideoUrl,n="autoplay";if(typeof(m.autoPlay)!=undefined&&m.autoPlay==0){n=""}if(!r||r.children.length>0){return}if(p){r.innerHTML=['<video id="'+q+'" width="100%" height="100%" '+n+" controls>","对不起，无法在您的浏览器中播放此视频","</video>"].join("");window.setTimeout(function(){g.initVideo(q,p)},0)}else{r.innerHTML="对不起，无法在您的浏览器中播放此视频"}},initVideo:function(m,k){var l=$("#"+m)[0];if(!l){return}this.bindVideoEvents(l);l.src=k},bindVideoEvents:function(k){k.addEventListener("error",this.onVideoError)},onVideoError:function(o){var l=o||event;var n=l.target||l.srcElement;if(confirm("对不起，加载视频失败，要尝试重新加载吗？")){n.load()}else{var k=$(n).parents(".media")[0],m=(k?k.id.match(/\d+_\d+$/):"");if(m){g.hideDisPanel({msgid:m,ele:k})}}},getImgOperHtml:function(m){var r="",q="",p="",l="",o="",n="";if(!m.pid){m.pid=m.msgid}if(m.desc&&m.desc!=""){q=m.desc.replace(/<|>|&/g,function(s){if(s=="<"){return"&lt;"}if(s==">"){return"&gt;"}if(s=="&"){return"&amp;"}})}else{r="noDis"}if(m.w&&m.h){p=" style='width:"+m.w+"px;height:"+m.h+"px;' "}if(m.ratio){n=" data-rt='"+m.ratio+"' "}if(m.from&&m.from=="final"){l="";o=""}else{l="<a href=\"javascript:void(1)\" onclick=\"kola('newt.timeline.Media',function(){tw.media.hideDisPanel({msgid:'"+m.id+'\',ele:this});},{scope:this})"   onmousedown="kola(\'newt.ca.ca\',function(){CA.q(\'tblog_img_big_packup\');});"   title="收起"><i class="i i41"></i></a>';o="onclick=\"kola('newt.timeline.Media',function(){tw.media.hideDisPanel({msgid:'"+m.id+"',ele:this});},{scope:this})\"   onmousedown=\"kola('newt.ca.ca',function(){CA.q('tblog_img_big_click');});\" "}var k=['<p class="oper">',l,'<a data-mt="t-opt-open" target="_blank" href="',m.path.replace("/m_","/"),'" onmousedown="kola(\'newt.ca.ca\',function(){CA.q(\'tblog_img_big_original\');});" title="查看原图">','<i class="i i43"></i><b></b></a>','<a data-mt="t-opt-rtLeft"  title="左旋" onclick="kola(\'newt.timeline.Media\',function(){tw.media.rotate({msgid:\''+m.pid+"',rotate:'left',THIS:this});},{scope:this})\"  onmousedown=\"kola('newt.ca.ca',function(){CA.q('tblog_img_big_turnleft');});\" href=\"javascript:void(1)\"><b></b><i class=\"i iCw\"></i></a>",'<a data-mt="t-opt-rtRight" title="右旋" onclick="kola(\'newt.timeline.Media\',function(){tw.media.rotate({msgid:\''+m.pid+"',rotate:'right',THIS:this});},{scope:this})\"  onmousedown=\"kola('newt.ca.ca',function(){CA.q('tblog_img_big_turnright');});\"  href=\"javascript:void(1)\"><i class=\"i iCcw\"></i><b></b></a>","</p>",'<i class="picB"  ',o," >",'<i class="iFake "><i class="ii loading2"></i></i><div class="crjs_canvas">','<img alt="" src="',m.path,'"  '+p+n+" >",'</div><em class="desc ',r,' ">',q,"</em>","</i>"];return k.join("")},flag:false,showAllImg:function(k){var l=null;var m=$("#prev_"+k.msgid).attr("data-media").replace(/\s/g,"");try{l=$.parseJSON(m)}catch(n){if(console){console.log(e)}}if(l){l=$.extend(l,k||{});g.showMedia(l)}return false},showMedia:function(B){var l,z,s=0,p=0,v=0,q=0,n="",t="",r,m,A;var k,o,u;msgId=B.msgid;z=msgId.toString().replace(/_0$/,"");if(B.ele){A=$(B.ele).closest("div.twi");r=A.find(">div.twiM p.pics");m=A.find(">div.twiM div.media")}else{r=$("#prev_"+msgId);m=$("#disp_"+msgId);A=$("#"+z+"_con")}if(B.pics){s=B.pics.length}r.find("i.iFake").removeClass("noDis");m.empty();for(p=0;p<s;p++){t=msgId+"_"+p;n=$('<div id="disp_'+t+'" class="smedia"></div>');m.append(n);m.append("<br>");k=B.pics[p];o=k.extraData;u=1;if(o&&o.middle){v=o.middle.w;q=o.middle.h}if(v&&o.big){u=o.big.w/v}g.buildImg({disPanel:n,msgid:msgId,path:k.path,desc:k.desc,from:B.from,pid:t,w:v,h:q,ratio:u})}if(B.vid&&B.vid!=""){t=msgId+"_"+p;n=$('<div id="disp_'+t+'" class="smedia smediaV"></div>');if(B.priority&&B.priority==1){m.prepend(n)}else{m.append(n)}if(typeof(B.autoPlay)==undefined){B.autoPlay=1}g._doShowVideo({pid:t,pid:t,ele:n,vid:B.vid,from:B.from,disPanel:n,autoPlay:B.autoPlay,autoScroll:B.autoScroll})}g.initOperator(m.find("div.smedia"));m.show();r.find("i.iFake").addClass("noDis");r.addClass("noSize");this._modifyTwi(z,{ele:A});if(B.autoScroll!=false&&!$.cr.inViewport("#"+z+"_con",{ele:A})){CRTWCONFIG.SCROLL_DOM.scrollTo(A,200,{axis:"y",offset:-100})}},initOperator:function(k){k.mouseenter(function(m){var l=$(this),n=this.timeoutId;if(n){clearTimeout(n);this.timeoutId=null}l.addClass("smedia_hover")}).mouseleave(function(n){var m=$(this),l=this;l.timeoutId=setTimeout(function(){m.removeClass("smedia_hover");l.timeoutId=null},500)})},buildImg:function(m){if(!m.desc){m.desc=""}var p,o,l,n,k;p=m.msgid;o=m.path;l=new Image();n=g.getImgOperHtml({id:p,path:o,desc:m.desc,from:m.from,pid:m.pid,w:m.w,h:m.h,ratio:m.ratio,autoScroll:m.autoScroll});if(m.disPanel){k=m.disPanel}else{k=$("#disp_"+m.pid)}k.children().remove();k.append(n);$(l).load(function(){g.setImgData(k,{w:m.w||l.width,h:m.h||l.height,maxW:m.maxW})}).attr("src",o)},setImgData:function(r,u){var t,k,l,s,m,n,p,q=0,o=((u&&typeof u.maxW!="undefined")?u.maxW:500);q=r.closest("div.twiRoot").size();if(q>0){o=o-10}r.data("IMGWIDTH",o);t=r.find("i.picB img");n=r.find("i.picB");if(u&&u.w){k=u.w;l=u.h}else{k=t.width();l=t.height()}s=parseInt(k)>o?o:k;m=l*s/k;t.width(s);t.data("tw_w",s).data("tw_h",m);p=s;if(q>0&&p<150){p=150}else{if(p<160){p=160}}n.width(p);n.data("picB_w",p).data("tw_h",n.height());n.find("i.iFake").addClass("noDis")},rotate:function(m){g.flag=false;var F=10;var z=$(m.THIS).closest("div.twiRoot");var v=$(m.THIS).closest("div.smedia");if(v.size()==0){v=$(m.THIS).closest("div.media")}var r=v.data("IMGWIDTH");if(z.length==1){r=490}else{z=$(m.THIS).closest("div.twi")}if(v.length==0){v=z.find("div.media");if(v.data("init_rt")!=1){var I=v.find("i.picB img");I.data("tw_w",I.width()).data("tw_h",I.height());v.find("i.picB").data("tw_h",v.find("i.picB").height());I=null;v.data("init_rt",1)}}var B=v.find("img");if(!B.data("tw_w")||!B.data("tw_h")){g.setImgData(v)}var A=B.data("tw_w"),G=B.data("tw_h");if(A<F){A=F}if(G<F){G=F}if(!$.browser.msie){var n,p;if(v.find("canvas").length>0){n=v.find("canvas")[0]}else{n=$("<canvas></canvas>")[0];if(typeof G_vmlCanvasManager!="undefined"){n=G_vmlCanvasManager.initElement(n)}v.find("i.picB img").show().after(n)}var u=v.data("rot")||0;if(m.rotate=="right"){u+=90;if(u===270){u=-90}}else{u+=-90;if(u===-180){u=180}}var E=Math.PI*u/180,H=Math.round(Math.cos(E)*1000)/1000,C=Math.round(Math.sin(E)*1000)/1000;n.height=Math.abs(H*G)+Math.abs(C*A);n.width=Math.abs(H*A)+Math.abs(C*G);if(n.width>A){n.height=Math.round(A*n.height/n.width);n.width=A}p=n.getContext("2d");p.save();if(u==90){p.translate(n.width,0);B.css({width:n.height,height:n.width})}else{if(u==180){p.translate(n.width,n.height);B.css({width:n.width,height:n.height})}else{if(u==-90||E==270){p.translate(0,n.height);B.css({width:n.height,height:n.width})}else{p.translate(0,0);B.css({width:n.width,height:n.height})}}}p.rotate(E);p.drawImage(B[0],0,0,B.width(),B.height());p.restore();v.data("rot",u);B.hide();n.style.display=""}else{if(B.length){var t=B.data("tw_rotate_num")||0,k=v.find("i.picB"),J,q,l={},o={},D={};t=m.rotate=="right"?t+1:t-1;o.position="relative";D.position="relative";if(t%2!=0){if(G>A){q=A;J=Math.round(q*A/G);l.width=q;l.height=J;o.width=J;o.height=q}else{l.width=A;l.height=A;o.width=A;o.height=G}}else{l.width=A;l.height=G;o.width=A;o.height=G}if(t==4){t=0}else{if(t==-1){t=3}}o.left=0;o.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+t+")";B.css(o).data("tw_rotate_num",t);D.width=B.width();D.height=B.height();D.margin="0 auto";D["text-align"]="left";D.overflow="hidden";k.find(".crjs_canvas").css(D);if(k.find("em").hasClass("noDis")){l.height=B.height()}else{l.height=B.height()+k.find("em, .desc").height()+10}if(l.width<k.data("picB_w")){l.width=k.data("picB_w")}k.css(l)}}},getVideoInfo:function(m,l){var k={type:"get_video_info",globalIntercept:false,vidStr:m,success:function(n){g.v=$.extend(g.v,n.data);if(typeof l=="function"){l(n)}}};kola("newt.twitter.Twitter",function(){tw.build(k)})},BUBBLE_SHOW_TIME_AFTER_LEAVE:600})};tw=tw||{};if(!tw.media){tw.media=new b()}return b});kola("newt.tool.Url","jquery.Core",function(){$.url={};$.extend($.url,{_params:{},init:function(){var a="";try{a=(document.location.href.split("?",2)[1]||"").split("#")[0].split("&")||[];for(var b=0;b<a.length;b++){var d=a[b].split("=");if(d[0]){this._params[d[0]]=unescape(d[1])}}}catch(c){alert(c)}},param:function(a){return this._params[a]||""},paramAll:function(){return this._params}});$.url.init();return $.url});kola("newt.imgloader.ImgLoader","newt.cr.cr, newt.cr.crLazyImageLoader",function(){var a=function(){var b=this;$.extend(b,{init:function(){b.build("div.LAND")},preLoad:function(c){var d=function(){if(c&&c.src&&c.src!=""){var f=new Image();f.src=c.src.replace(/\/f_/i,"/m_")}};setTimeout(d,500)},build:function(c){var d=$(c).getCrControl("crLazyImageLoader");if(!d){d=$(c).crLazyImageLoader({loaderHandle:b.preLoad}).getCrControl("crLazyImageLoader")}return d},scan:function(c){var d=tw.imgloader.build(c);if(d){d.rescan()}}})};tw.imgloader=new a();return a});kola("newt.cache.PageCache",null,function(){var a=function(){var c=this;var b={};var d=60*60;var f=1;$.extend(c,{set:function(g,j,h){h=h||{};b[g]={data:j,maxage:h.maxage||d,rank:h.rank||f,time:new Date().getTime()}},get:function(g){if(b[g]&&b[g].data){if(new Date().getTime()-b[g].time<b[g].maxage*1000){return b[g].data}else{c.del(g);return""}}else{return""}},del:function(g){b[g]={};delete b[g]},setAge:function(h,g){if(b[h]&&b[h].data){b[h].maxage=g;b[h].time=new Date().getTime()}},clear:function(){b={}}})};tw.pcache=new a();return a});kola("newt.lib.dateFormat",["jquery.Core"],function(b){var a=function(o){var n=this;n.opts=b.extend({},o||{});var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var c=["January","February","March","April","May","June","July","August","September","October","November","December"];var j=[];j.Jan="01";j.Feb="02";j.Mar="03";j.Apr="04";j.May="05";j.Jun="06";j.Jul="07";j.Aug="08";j.Sep="09";j.Oct="10";j.Nov="11";j.Dec="12";function g(p){return l[parseInt(p,10)]||p}function k(q){var p=parseInt(q,10)-1;return f[p]||q}function m(q){var p=parseInt(q,10)-1;return c[p]||q}var h=function(p){return j[p]||p};var d=function(u){var w=u;var s="",p,v,r;if(w.indexOf(".")!==-1){var t=w.split(".");w=t[0];s=t[1]}var q=w.split(":");if(q.length===3){p=q[0];v=q[1];r=q[2];return{time:w,hour:p,minute:v,second:r,millis:s}}else{return{time:"",hour:"",minute:"",second:"",millis:""}}};b.extend(n,{init:function(){},timeToDay:function(r,w){var z=r,B=1;var C=0,u=0,t=0,p=0;var A=1000*60*60*24,v=1000*60*60,q=1000*60,D=1000;if(z>=A){C=Math.floor(z/A);z=z-C*A}if(z>=v){u=Math.floor(z/v);z=z-u*v}if(z>=q){t=Math.floor(z/q);z=z-t*q}if(z>=D){p=Math.floor(z/D);z=z-p*D}if(w&&w>1){B=w;if(B==2){if(u>=0&&u<10){u="0"+u+""}if(t>=0&&t<10){t="0"+t+""}if(p>=0&&p<10){p="0"+p+""}}}return{day:C,hour:u,minute:t,second:p}},toDate:function(t){var r=null;var s=null;var w=null;var v=null;var u=null;if(typeof t.getFullYear==="function"){r=t}else{if(t.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[-+]?\d{2}:\d{2}/)!=-1){var p=t.split(/[T\+-]/);s=p[0];w=p[1];v=p[2];u=d(p[3].split(".")[0]);r=new Date(s,w-1,v,u.hour,u.minute,u.second,u.millis)}else{var p=t.split(" ");switch(p.length){case 6:s=p[5];w=h(p[1]);v=p[2];u=d(p[3]);r=new Date(s,w-1,v,u.hour,u.minute,u.second,u.millis);break;case 2:var q=p[0].split("-");s=parseInt(q[0],10);w=parseInt(q[1],10);v=parseInt(q[2],10);u=d(p[1]);r=new Date(s,w-1,v,u.hour,u.minute,u.second,u.millis);break;case 7:case 9:case 10:s=p[3];w=h(p[1]);v=p[2];u=d(p[4]);r=new Date(s,w-1,v);if(u.hour!=""){r.setHours(u.hour)}if(u.minute!=""){r.setMinutes(u.minute)}if(u.second!=""){r.setHours(u.second)}if(u.millis!=""){r.setMinutes(u.millis)}break}}}return r},date:function(C,B){try{var q=null;var z=null;var v=null;var D=null;var r=null;var p=null;q=n.toDate(C);if(q!=null){z=q.getFullYear();v=q.getMonth()+1;D=q.getDate();r=q.getDay();p=d(q.toTimeString())}else{return C}var w="";var t="";for(var s=0;s<B.length;s++){var A=B.charAt(s);w+=A;switch(w){case"ddd":t+=g(r);w="";break;case"dd":if(B.charAt(s+1)=="d"){break}if(String(D).length===1){D="0"+D}t+=D;w="";break;case"MMMM":t+=m(v);w="";break;case"MMM":if(B.charAt(s+1)==="M"){break}t+=k(v);w="";break;case"MM":if(B.charAt(s+1)=="M"){break}if(String(v).length===1){v="0"+v}t+=v;w="";break;case"yyyy":t+=z;w="";break;case"HH":t+=p.hour;w="";break;case"hh":t+=(p.hour==0?12:p.hour<13?p.hour:p.hour-12);w="";break;case"mm":t+=p.minute;w="";break;case"ss":t+=p.second.substring(0,2);w="";break;case"SSS":t+=p.millis.substring(0,3);w="";break;case"a":t+=p.hour>=12?"PM":"AM";w="";break;case" ":t+=A;w="";break;case"/":t+=A;w="";break;case":":t+=A;w="";break;default:if(w.length===2&&w.indexOf("y")!==0&&w!="SS"){t+=w.substring(0,1);w=w.substring(1,2)}else{if((w.length===3&&w.indexOf("yyy")===-1)){w=""}}}}return t}catch(u){return C}}})};return a});kola("newt.widget.plus.Input",["jquery.Core","newt.util.Browser"],function(a,c){function b(){}b.CLEAN_PLACEHOLDER=function(){var f=a(this);var d=f.attr("placeholder");f.removeClass("blur");if(d==f.val()){f.val("")}};b.SET_PLACEHOLDER=function(){var g=a(this);var d=g.attr("placeholder");if(d){var f=g.val();if(!f||f.length<=0){g.val(d).addClass("blur")}}};b.INIT_PLACEHOLDER=function(d){d.input=a(d.input);var f=d.input[0];if(f==null||c.supportPlaceholder()||f.type=="password"){return}if(d.placeholder){d.input.attr("placeholder",d.placeholder)}d.input.unbind("beforeactivate",b.CLEAN_PLACEHOLDER).unbind("focus",b.CLEAN_PLACEHOLDER).unbind("blur",b.SET_PLACEHOLDER).bind("beforeactivate focus",b.CLEAN_PLACEHOLDER).bind("blur",b.SET_PLACEHOLDER).trigger("blur")};b.INIT_PLACEHOLDERS=function(f){for(var g=0,d=f.inputs.length;g<d;++g){b.INIT_PLACEHOLDER({input:f.inputs[g]})}};return b});kola("newt.component.SearchSuggest",["jquery.Core","newt.service.Common","newt.util.Browser","newt.util.StrUtil","newt.util.MemeryCache","kola.lang.String"],function(d,a,h,g,f,c){function b(){var j=[].slice.call(arguments);this.init.apply(this,j)}b.prototype={init:function(k){if(!k||!k.input){throw ('newt.component.SearchSuggest: except "input" paramater to show suggest!')}var l=parseInt(k.suggestCount);var j=parseInt(k.groupSize);this.currentKeyword="";this.isMouseIn=false;this.activeIdx=-1;this.activeSuggest=null;this.callbacks={};this.input=k.input;this.cache=new f({expires:300000});this.searchRange=k.searchRange||"*";this.handlerScope=k.handlerScope||null;this.showGroupTitle=!!k.showGroupTitle;this.suggestCount=(l>=this.MIN_SUGGEST_COUNT&&l<=this.MAX_SUGGEST_COUNT?l:this.DEFAULT_SUGGEST_COUNT);this.groupSize=(j>0?j:this.DEFAULT_GROUP_SIZE);this.build(k);this.bindEvents(k)},onInputFocus:function(){var k=d(this.input).val();var j=this.currentKeyword;this.isMouseIn=true;this.currentKeyword=k;if(k==""){d(this.suggestEl).addClass("nodis")}else{this.updateSuggest(k)}},onInputBlur:function(){var j=this;this.activeIdx=-1;this.isMouseIn=false;this.activeSuggest=null;window.setTimeout(function(){if(!j.isMouseIn){d(j.suggestEl).addClass("nodis")}},300)},onInputChange:function(l){var k=d(this.input);var j=this.currentKeyword;if(l==j){return}this.currentKeyword=l;if(l==""){d(this.suggestEl).addClass("nodis")}else{this.updateSuggest(l)}},onInputKeyDown:function(r){var s=this;var w=r.keyCode;var v=this.suggestContent[0].offsetHeight>0;if(!v){return}var m=this.suggestContent.find("a:visible");if(m.length==0){return}var t=this.activeIdx;var z=d(this.input);var n=d(this.activeSuggest);if(w==this.KEY_CODE_ENTER){var l=n.attr("data-val");var k=n.attr("data-mt");var p=n.attr("data-group");if(k=="group-title"){location=n.attr("data-url");z.attr("data-has-handle-keydown","true")}else{if(l){z.attr("data-has-handle-keydown","true");d(this.input).val(l);this.fireCallback("onSuggestSelected",{type:k,group:p,target:n})}}this.suggestEl.addClass("nodis");return}if(w==this.KEY_CODE_UP||w==this.KEY_CODE_DOWN){var o=(w==this.KEY_CODE_UP?-1:1);var j=m.length;var q=((t+o<0)?j-1:(t+o>=j)?0:t+o);var u=m[q];d(u).addClass("dhover");d(n).removeClass("dhover");this.activeSuggest=u;this.activeIdx=q}},onSuggestClick:function(k){var j=k.attr("data-mt");if(j=="suggest-item"){d(this.input).val(k.attr("data-val"))}this.fireCallback("onSuggestSelected",{type:j,group:k.attr("data-group"),target:k});this.suggestEl.addClass("nodis")},build:function(j){var k=d(g.simpleFormat(this.SUGGEST_TEMP,j));k.insertAfter(d(this.input).closest(".txt"));this.suggestEl=k;this.suggestContent=k.find('[data-mt="suggest-content"]')},bindEvents:function(j){var m=this;var k=d(this.input)[0];var n=this.suggestEl;d(k).bind({focus:function(o){m.onInputFocus(o)},blur:function(o){m.onInputBlur(o)},keydown:function(o){m.onInputKeyDown(o)}});if(h.isIE){k.attachEvent("onkeyup",function(){m.onInputChange(k.value)});k.attachEvent("onpaste",function(){var o=window.clipboardData.getData("Text");m.onInputChange(o)})}else{k.addEventListener("input",function(o){m.onInputChange(this.value)})}var l=('[data-mt="group-title" ],[data-mt="suggest-item"]');d(l,n[0]).live({click:function(){var o=d(this);m.onSuggestClick.apply(m,[o])},mouseenter:function(){var p=m.suggestContent.find("a:visible");var q,o,s,r=p;for(q=0,o=r.length;q<o;q++){s=r[q];if(s==this){d(this).addClass("dhover");d(m.activeSuggest).removeClass("dhover");m.activeIdx=q;m.activeSuggest=this;break}}},mouseleave:function(){d(m.activeSuggest).removeClass("dhover");m.activeIdx=-1;m.activeSuggest=null}});this.regCallbacks(j)},regCallbacks:function(l){var m,j,o,n,k=["onSuggestSelected"];for(m=0,j=k.length;m<j;m++){o=k[m];n=l[o];if(n instanceof Function){this.callbacks[o]=n}}},updateSuggest:function(l){var m=this;var k=this.cache.getData(l);var j=function(n){m.activeIdx=-1;m.activeSuggest=null;if(n>0){m.suggestEl.removeClass("nodis")}else{m.suggestEl.addClass("nodis")}};if(k){this.suggestContent.html(k.html);j(k.count)}else{a.search({uid:UID,key:encodeURIComponent(encodeURIComponent(l)),range:this.searchRange,groupSize:this.groupSize,success:function(n){var o=m.currentKeyword;var p;if(o&&l!=o){return}p=m.fillSuggest(n.data);j(p)}})}},fillSuggest:function(p){var o,q,s,m,k=0,j=d(this.suggestEl),r=this.searchRange,l=this.ACCEPT_SUGGEST_GROUPS;var n=(function(){var t=r.split("|");return function(u){return d.inArray(u,t)!=-1}})();this.suggestContent.html("");for(o=0,q=l.length;o<q;o++){s=l[o];if(!n(s)){continue}m=p[s];if(m instanceof Array){k+=m.length;this.addSuggestGroup(p.key,s,m)}}this.cache.setData(p.key,{count:k,html:this.suggestContent.html()});return k},addSuggestGroup:function(m,p,k){var o=(p.toLowerCase()=="weibo"?this.WEIBO_SUGGEST_ITEM_TEMP:this.USER_SUGGEST_ITEM_TEMP);var j=function(s,u,r){var v=r.match||"";var t=p.toLowerCase()=="weibo"?10:6;var q=(c.SimpinLen(u)>t?c.cutSimpStr(u,t-1)+"...":u);return q.replace(new RegExp("("+v+")","g"),'<em class="em3">$1</em>')};var l=(function(){var s,q,t,r=[];for(s=0,q=k.length;s<q;s++){t=d.extend({group:p},k[s]);r.push(g.simpleFormat(o,t,{highLight:j}))}return r.join("")})();var n=g.simpleFormat(this.SUGGEST_GROUP_TEMP,{titleClass:(this.showGroupTitle?"":"nodis"),groupContent:l,group:p,kw:m});d(n).appendTo(this.suggestContent)},fireCallback:function(k){var m=this.callbacks[k];var j=[].slice.call(arguments,1);var l=this.handlerScope;if(!(m instanceof Function)){return}try{m.apply(l,j)}catch(n){if(window.console&&console.error){console.error('SearchSuggest.fireCallback: execute callback "'+k+'" error, info:'+n)}}},constructor:b,KEY_CODE_ENTER:13,KEY_CODE_UP:38,KEY_CODE_DOWN:40,MIN_SUGGEST_COUNT:6,MAX_SUGGEST_COUNT:20,DEFAULT_SUGGEST_COUNT:10,DEFAULT_GROUP_SIZE:5,ACCEPT_SUGGEST_GROUPS:["weibo","usr","my-follow"],SUGGEST_TEMP:('<div class="dropDown nodis"><div class="dropD"><div class="dropC" data-mt="suggest-content">#{content}</div></div></div>'),SUGGEST_GROUP_TEMP:('<div class="dropl"><a class="tit #{titleClass}" data-mt="group-title" data-group="#{group}" data-url="/twsearch/#{group->map(weibo:twSearch, else:userSearch)}?key=#{kw}" href="javascript:void(0)" onclick="location=this.getAttribute(\'data-url\');"><b>搜<em class="em3">#{kw}</em>相关#{group->map(weibo:微博, else:用户)}&gt;&gt;</b></a>#{groupContent}</div>'),USER_SUGGEST_ITEM_TEMP:('<a data-mt="suggest-item" title="#{name}" data-val="#{name}" data-url="#{furl}" data-group="#{group}" href="javascript:void(0)" ><span class="usr3"><i class="avt avt32"><i style="background-image:url(#{img})" class="img"></i></i><b class="nm">#{name->exec(highLight)}<i title="" class="p pVer #{isVip->map(0:nodis)}"><i class="png"></i></i></b><q>粉丝:<i>#{followcount}</i></q></span></a>'),WEIBO_SUGGEST_ITEM_TEMP:('<a data-mt="suggest-item" data-group="#{group}" data-val="#{kw}" data-url="url" title="#{kw}" href="javascript:void(0)">#{kw->exec(highLight)}</a>')};return b});kola("newt.window.Window",["newt.Config","kola.lang.Function","newt.cr.crEvent","newt.cr.crModalDialog","newt.lib.drag","jquery.Core"],function(l,m){function w(){return['<div class="mw" style="display:none;">','<div class="mwDc"></div>','<div class="mwCt">','<a title="关闭" class="close overlayCanB" href="javascript:void(0);"><i class="sign signX signX2"><q>×</q><q class="k2">×</q></i></a>','<div class="mwHd">','<h4 class="crJs_window_title">标题</h4>',"</div>",'<div class="mwBd">']}function u(){return["</div>",'<div class="mwFt">','<a class="btn crjs_yes overlaySubmitB" href="javascript:void(0);"><b>确&nbsp;认</b></a>&nbsp;<a class="btn btn_min crjs_no overlayCanB" href="javascript:void(0);"><b>取&nbsp;消</b></a> </div>',"</div></div>"]}function n(){return['<div class="mwini">','<a title="关闭" class="mw_close overlayCanB" href="javascript:void(1)"></a>','<div class="mwt"><div class="ttl crJs_window_title"></div></div>']}function A(){return["</div>"]}function o(){return['<div class="mw">','<div class="mwDc"></div>','<div class="mwCt">','<a href="javascript:void(0);" class="close overlayCanB" title="关闭"><i class="sign signX signX2"><q>×</q><q class="k2">×</q></i></a>','<div class="mwHd">','<h4  class="crJs_window_title"></h4>',"</div>"]}function B(){return["</div>","</div>"]}function b(){return['<div class="mw mw_a mw17"><div class="mwc"><div class="form2 form_mtip">',"<form><fieldset>",'<p class="mw_t">快来改个昵称吧，这样大家才知道你是谁...</p>','<div class="frm frm_nm">','<p class="frmt">昵称</p>','<div class="frmc"><i class="txt"><input type="text"></i>','<p class="frm_tip"><b><i class="i"></i><em>该昵称已被别人抢占啦！<br>试试下面的？</em></b></p>','<ul class="otheroption" style="display:none;">','<li><label for="ss1" class="rado"><input id="ss1" name="snew" type="radio"><i></i></label></li>','<li><label for="ss2" class="rado"><input id="ss2" name="snew" type="radio"><i></i></label></li>','<li><label for="ss3" class="rado"><input id="ss3" name="snew" type="radio"><i></i></label></li>','<li><label for="ss4" class="rado"><input id="ss4" name="snew" type="radio"><i></i></label></li>',"</ul></div></div>",'<div class="frm frm_sub">','<div class="frmc">','<p class="btns"><a href="javascript:void(0);" class="btn btnm"><b>保存修改</b></a></p>',"</div></div></fieldset></form></div></div></div>"]}function r(){return['<div class="mw mw_a mw02">','<div class="mwc">','<div class="repost">','<div class="post">','<div class="ttl"><b class="tmax editstatus"><i>140</i></b></div>','<div class="tarea blur"><textarea></textarea></div>','<p class="btns2"><span class="opt"></span>','<a class="btn overlaySubmitB" href="javascript:void(0);"><b>发 表</b></a>','<a class="btn btn_min overlayCanB" href="javascript:void(0);"><b>取 消</b></a>',"</p>","</div>","</div>","</div>","</div>"]}function s(){return['<div class="mwBd">','<div class="post">','<div class="ttl">','<h6 class="crJs_hint_caption">把我的标签告诉大家：</h6>',"</div>",'<div class="tarea blur"><div class="atFake"></div><textarea>我给自己贴了：</textarea></div>','<p class="postSub">','<span class="opt noVis"><b class="postMax">还可输入<i class="editstatus">140</i>字</b></span>','<a class="btn overlaySubmitB" href="javascript:void(0);"><b>发 表</b></a>','<a class="btn btn_min overlayCanB noDis" href="javascript:void(0);"><b>跳 过</b></a>',"</p>",'<ul class="postAtt"><li><a class="fuc crJs_emote"><i class="i iS iAtt i37"></i><b>表情</b></a></li></ul>',"</div>","</div>"]}function v(){return['<div class="post noBlock">','<div class="ttl">',"<h6></h6>","</div>",'<div class="tarea">','<div class="atFake"></div>',"<textarea></textarea>","</div>",'<p class="postSub"><span class="opt"><b class="postMax">还可输<i class="editstatus">140</i>字</b></span> <a loadingtxt="发表中" href="javascript:void(0)" class="btn overlayOkBtn"><b>发 表</b></a></p>','<ul class="postAtt">','<li><a href="javascript:void(0);" class="fuc crJs_emote"><i class="i iS iAtt i37"></i><b>表情</b></a></li>',"</ul>","</div>"]}function q(D){D=D||{};if(window.isUserMobileVerified==false){D.accountStatus="novalid"}D=$.extend({accountStatus:"normal",phoneNumber:"手机号呢...",picButton:false},D||{});var C={normal:"发表",novalid:"验证手机并转发",nosure:"立即校验，转发"};return['<div class="mwBd">','<div class="repost">','<div class="repostC"><em>转发：</em><p class="ugc"  id="at_source_txt"><a class="twin_1" href="javascript:void(0);"></a></p>','<blockquote class="ugc"  id="at_sub_source_txt"></blockquote>',"</div>",'<div class="post">','<div class="tarea blur"><div class="atFake"></div><textarea name="twitter_at" id="at_txt"></textarea></div>','<p class="postSub">','<span class="postMb js-novalid-view" style="'+(D.accountStatus=="novalid"?"":"display: none;")+'">','<span class="txt">','<span class="bubble bub2 bubR js-bubble-wrapper">','<span class="bubC">','<a href="javascript:function(){return false}" onclick="$(this).parents(\'span.js-bubble-wrapper:first\').remove();" title="关闭" class="close js-tip-closer"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a>	<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<span class="bubBd">','<i class="i i134"></i>','<span class="checkMbTip">',"<em>验证手机号，提高安全性</em>",'<b><i class="dot" title="dot"></i>账号数据有备份，可以找回</b>','<b><i class="dot" title="dot"></i>身份有保障，不被盗用</b>','<b><i class="dot" title="dot"></i>只需验证一次，永久有效</b>',"</span>",'<span class="fucs2"><a class="fuc" href="#"><b>了解更多</b>&gt;&gt;</a></span>',"</span>","</span>","</span>",'<i class="i i135"></i><input type="text" placeholder="输入手机号" name="phoneNumber">',"</span>",'<em class="tip">请填写手机号</em>',"</span>",'<span class="postMb postMb_check js-nosure-view '+(D.accountStatus=="nosure"?"":"nodis")+'">','<span class="txt">','<i class="i i135"></i><b class="mobiNum js-wait-phonenumber">'+D.phoneNumber+'</b><a href="javascript: void(0);" class="js-change-phonenumber">更改</a><input type="text" name="validCode" placeholder="输入校验码">',"</span>",'<em class="tip">成功发送校验码，1分钟内未收到？<a href="javascript: void(0);" class="js-at-validcode-resend">重发</a></em>',"</span>",'<span class="opt"><b class="postMax"><i class="editstatus">还可输入300字</i></b></span>','<a class="btn crjs_yes js-'+D.accountStatus+'" href="javascript:void(0);"><b>'+C[D.accountStatus]+"</b></a>","</p>",'<ul class="postAtt">','<li><a href="javascript:void(0);" class="fuc crJs_emote"><i class="i iS iAtt i37"></i><b>表情</b></a><span id="at_who"></span></li>','<li class="crJs_ig '+(D.picButton?"":"nodis")+'" >','<a data-ca="tw_composer_img" class="fuc" href="javascript:void(0)">','<span class="swfuploadbutton"></span>','<i class="i iS iAtt i36"></i><b>图片</b>',"</a>","</li>","</ul>","</div>","</div>","</div>"]}function k(){return['<div class="mwBd">','<div class="repost">','<div class="repostC"><em>转发：</em><p class="ugc"  id="at_source_txt"><a class="twin_1" href="javascript:void(0);"></a></p>','<blockquote class="ugc"  id="at_sub_source_txt"></blockquote>',"</div>",'<div class="post">','<div class="tarea blur"><div class="atFake"></div><textarea  id="at_txt"></textarea></div>','<p class="postSub">','<span class="opt"><b class="postMax ">还可输入<i class="editstatus">300</i>字</b></span>','<a class="btn crjs_yes" href="javascript:void(0);"><b>发 表</b></a>',"</p>",'<ul class="postAtt">','<li><a href="javascript:void(0);" class="fuc crJs_emote"><i class="i iS iAtt i37"></i><b>表情</b></a><span id="at_who"></span></li>',"</ul>","</div>","</div>","</div>"]}function j(){return['<div class="mwBd">','<div class="post">','<div class="ttl noDis">',"<h6></h6>","</div>",'<div class="tarea"><div class="atFake"></div><textarea></textarea></div>','<p class="postSub">','<span class="opt"><b class="postMax">还可输入<i>140</i>字</b></span>','<a id="recommend_submit"  loadingtxt="发送中" href="javascript:void(0);"  class="btn"><b>发 送</b></a>',"</p>",'<ul class="postAtt"><li><a class="fuc crJs_emote"><i class="i iS iAtt i37"></i><b>表情</b></a></li></ul>',"</div>","</div>"]}function p(){return['<div class="mw">','	<div class="mwDc"></div>','	<div class="mwCt">','		<a title="关闭" class="close overlayCanB" href="javascript:void(0);"><i class="sign signX signX2"><q>×</q><q class="k2">×</q></i></a>','		<div class="mwHd">','			<h4 class="crJs_window_title">标题</h4>',"		</div>",'		<div class="mwBd">','   <div class="hint hintAsk">','			  <div class="hintT"><i class="i"></i><em class="confirm_text"></em></div>','				<div class="hintC"></div>',"			</div>","  </div>",'		<div class="mwFt"> <a class="btn crjs_yes" href="javascript:void(0);"><b>确 认</b></a> <a class="btn btn_min crjs_no overlayCanB" href="javascript:void(0);"><b>取 消</b></a> </div>',"	</div>","</div>"]}function c(){return['<div class="mw">','	<div class="mwDc"></div>','	<div class="mwCt">','		<a title="关闭" class="close overlayCanB" href="javascript:void(0);"><i class="sign signX signX2"><q>×</q><q class="k2">×</q></i></a>','		<div class="mwHd">','			<h4 class="crJs_window_title">标题</h4>',"		</div>",'		<div class="mwBd">','<div class="hint hintUsr">','<div class="hintT">','<p class="avt"><b><i style="background-image: url(&quot;http://s2.cr.itc.cn/img/t/avt_48.jpg&quot;);" class="img"></i></b></p>','<em><b class="nm"><i></i></b></em>',"</div>",'<div class="hintC"></div>',"</div>","  </div>",'		<div class="mwFt"> <a class="btn crjs_yes" href="javascript:void(0);"><b>确 认</b></a> <a class="btn btn_min crjs_no overlayCanB" href="javascript:void(0);"><b>取 消</b></a> </div>',"	</div>","</div>"]}function t(){return['<div class="mw mw_a mw02">','<div class="mwc">','<div class="repost">','<div class="repost_c"><em>发表：</em><q class="ugc"></q></div>','<div class="post">','<div class="ttl"></div>','<div class="frm t1"><p class="frmt">转让给:</p> <div class="frmc"></div></div> ','<p class="btns2"><span class="opt"></span>','<a class="btn overlaySubmitB" href="javascript:void(0);"><b>确定</b></a>','<a class="btn btn_min overlayCanB" href="javascript:void(0);"><b>取 消</b></a>',"</p>","</div>","</div>","</div>","</div>"]}function a(){return['<div class="form form3">','<div class="frm">','<p class="frmT">将<b class="nm"><i>张朝阳</i></b>加入分组 <q class="q">(加入分组，以便快速查找)</q></em></p>','<div class="frmC">','<div class="gpList">',"<ul>","</ul>",'<p class="gpAdd" style="display:none;"><i class="txt blur cr_input_box"><input type="text" value="新建分组..." title="按&quot;回车&quot;确定"></i><a class="btn btnM cr_input_sBtn" href="javascript:void(1)"><b>添加</b></a><a class="btn btnM btn_min cancleGrp" href="javascript:void(1)"><b>取消</b></a><span class="err cr_input_tip"></span></p>','<p class="btns"><a class="btn btnM3 btn_min createGrp" href="javascript:void(1)"><b><i class="add"><q class="k1"></q><q class="k2"></q></i>创建分组</b></a><a class="btn btnM btn_min grpManager" href="http://t.sohu.com/following" target="_self"><b>分组管理</b></a><span class="opt em2 grpTip" style="display:none;">你已有10个分组，不能再新建。</span></p>',"</div>","</div>",'<p class="frmT">设置备注 <q class="q">(加上备注说明，清晰识别好友)</q></p>','<div class="frmC">','<div class="post">','<div class="tarea blur"><div class="atFake">你好渡风绿卡都说了你菲拉斯大家l</div><textarea></textarea></div>','<p class="postSub"><span class="opt"><b class="postMax">还可输入<i class="editstatus">30</i>字</b></span></p>',"</div>","</div>","</div>","</div>"]}function h(){return'<a href="javascript:void(1)" class="fuc0 crJs_emote"><i class="i iS iAtt i37"></i><b>表情</b></a>'}function z(){return['<div class="form">','<div class="frm ">','<p class="frmT"><em>举报原因：</em></p>','<div class="frmC"><i class="select selectTxt"></i><p class="frmTip"><b>(必填)</b></p></div>',"</div>",'<div class="frm">','<p class="frmT"><em>举报说明：</em></p>','<div class="frmC"><div class="tarea crJs_edit"><textarea name=""></textarea></div><p class="frmTip2">请放心，我们将保护你的隐私</p></div>',"</div>","</div>"]}function d(){return['<div class="post noBlock">','<div class="ttl">',"<h6>加上备注说明，清晰识别好友</h6>","</div>",'<div class="tarea">','<div class="atfake"></div>',"<textarea></textarea>","</div>",'<p class="postSub">','<span class="opt"><b class="postMax">还可输入<b class="editstatus">140</b>字</b></span>','<a href="javascript:void(0)" class="btn overlayCana overlayOkBtn"><b>确 定</b></a>','<a class="btn btn_min overlayCanB" href="javascript:void(0);"><b>取 消</b></a>',"</p>","</div>"]}function f(){return['<div class="mw">','	<div class="mwDc"></div>','	<div class="mwCt">','		<a title="关闭" class="close" href="javascript:void(0);"><i class="sign signX signX2"><q>×</q><q class="k2">×</q></i></a>','		<div class="mwHd">','			<h4 class="crJs_window_title">发私信</h4>',"		</div>",'		<div class="mwBd"></div>',"	</div>","</div>"]}var g=function(){var C=this;$.extend(C,{getWindow:function(F,E){E=E||{};var G=null,I="";switch(F){case"tw_empty_window":G=C.build(E.customID||"tw_empty_window",function(){return""},E);I=$(G.getElement());break;case"tw_empty_window_noFoot":G=C.build(E.customID||"tw_empty_window_noFoot",function(){return'<div class="mwBd"></div>'},E,{prefixHtml:o(),suffixHtml:B()});I=$(G.getElement());break;case"tw_school_select":G=C.build("tw_school_select",function(){return'<div class="mwBd"></div>'},E,{prefixHtml:o(),suffixHtml:B()});$(G.getElement()).addClass("mwCollege mw3");break;case"tw_school_add":G=C.build("tw_school_add",function(){return'<div class="mwBd"></div>'},E,{prefixHtml:o(),suffixHtml:B()});$(G.getElement()).addClass("mwCollege mw2");break;case"tw_school_finish":G=C.build("tw_school_finish",function(){return'<div class="mwBd"></div>'},E,{prefixHtml:o(),suffixHtml:B()});$(G.getElement()).addClass("mwCollege mw2");break;case"tw_report_window":G=C.build("tw_report_window",z,E);I=$(G.getElement());break;case"tw_modName_window":G=C.build("tw_modName_window",b,E);I=$(G.getElement());break;case"tw_edit_window":G=C.build("tw_edit_window",r,E);I=$(G.getElement());I.find("div.post div.ttl").remove();break;case"add_tw_window":G=C.build("add_tw_window",s,E,{prefixHtml:o(),suffixHtml:B()});I=$(G.getElement()).addClass("mwPost");if(!I.find("a.crJs_emote").length){I.find("span.opt").append($(h()))}break;case"recommend":G=C.build("recommend",j,E,{prefixHtml:o(),suffixHtml:B()});I=$(G.getElement()).addClass("mwPost");break;case"twitter_at":G=C.build("twitter_at",q,E,{prefixHtml:o(),suffixHtml:B()});I=$(G.getElement());break;case"twitter_at_with_word_count":G=C.build("twitter_at_with_word_count",k,E,{prefixHtml:o(),suffixHtml:B()});I=$(G.getElement());break;case"g_assign":G=C.build("g_assign",t,E);var H='<h6>确定要转让 "@groupname@"</h6><br/><h6>(只能将群转让给本群副群主)</h6>';H=H.replace("@groupname@",E.gname);if(typeof(E.init)=="function"){E.init()}I=$(G.getElement());I.find("div.repost_c").remove();I.find("div.post div.ttl").append($(H));I.find("div.frmc").append($(E.radiohtml));G.setTitle("转让群");break;case"g_add":G=C.build("g_add",s,E);I=$(G.getElement());I.find("div.repost_c").remove();if(!I.find("a.crJs_emote").length){I.find("span.opt").append($(h()))}I.find("div.post div.ttl").append($("<h6>加入此群需要审批，请填写加入理由：</h6>"));I.find("a.overlaySubmitB b").html("确 定");G.setTitle("加入群");break;case"g_dismiss":G=C.build("g_dismiss",s,E);I=$(G.getElement());I.find("div.repost_c").remove();I.find("div.post div.ttl").append($("<h6>解散此群需要审批，请填写理由：</h6>"));I.find("a.overlaySubmitB b").html("确 定");G.setTitle("解散群");break;case"g_recommend":G=C.build("g_recommend",s,E);I=$(G.getElement());I.find("div.repost_c").remove();if(!I.find("a.crJs_emote").length){I.find("span.opt").append($(h()))}I.find("div.post div.ttl").append($("<h6>写条微博将此群推荐给粉丝们：</h6>"));I.find("a.overlaySubmitB b").html("确 定");G.setTitle("推荐群");break;case"topic_post":G=C.build("topic_post",s,E);I=$(G.getElement());I.find("div.post div.ttl").remove();break;case"notice_confirm":G=C.build("notice_confirm",p,E,{prefixHtml:[],suffixHtml:[]});break;case"notice_user_confirm":G=C.build("notice_user_confirm",c,E,{prefixHtml:[],suffixHtml:[]});break;case"wp_at_win":G=C.build("wp_at_win",s,E);I=$(G.getElement());I.find("a.overlaySubmitB b").html("转 发");I.find("div.repost_c").remove();G.setTitle("转发");break;case"rp_win":G=C.build("rp_win",s,E,{prefixHtml:w(),suffixHtml:[]});I=$(G.getElement());I.find(".crJs_hint_caption").text("");var J=E&&E.canUploadPic==true;var D=(!J?"":('<li class="crJs_ig" ><a data-ca="tw_composer_img" class="fuc" href="javascript:void(0)"><span class="swfuploadbutton"></span><i class="i iS iAtt i36"></i><b>图片</b></a></li>'));I.find("a.crJs_emote").parent("li").after(D+'<li><label class="cbox"><input type="checkbox">同时转发到我的微博</label></li>');G.setTitle("回复");break;case"tw_add_members_win":G=C.build("tw_add_members_win",a,E);I=$(G.getElement());G.setTitle("设置分组");break;case"tw_add_memo_win":G=C.build("tw_memo_editBox",d,E,{prefixHtml:w(),suffixHtml:A()});I=$(G.getElement());G.setTitle("设置备注");break;case"tw_send_mail_win":G=C.build("tw_send_mail_win",f,E,{prefixHtml:[],suffixHtml:[]});G.setTitle("发送私信");break;case"send_mail":G=C.build("send_mail",v,E,{prefixHtml:w(),suffixHtml:A()});break;default:break}return G},build:function(F,R,S,H,L){var G="",M=null;S=$.extend({absolute:true,position:"#t-sky",closeOnEsc:true,parentFixed:true,expose:{opacity:l.MODELWINDOW_OVERLAY_OPACITY,color:l.MODELWINDOW_OVERLAY_COLOR}},S||{});var E=$("#"+F);var Q=S.head?[S.head]:w();if(!E.length){var P=S&&S.canUploadPic==true;L=$.extend({picButton:P},L||{});var K=R(L);var G;if(H){G=H.prefixHtml.concat(K,H.suffixHtml).join("")}else{G=Q.concat(K,u()).join("")}if($(S.position).length==0){S.position="body"}$(G).attr("id",F).appendTo(S.position);if(CRTWCONFIG.IS_SKY_FIXED==false&&$("#t-sky").css("position")!="fixed"){S.absolute=false}M=$("#"+F).crModalDialog(S).getCrControl("crModalDialog");M.getControl().onBeforeClose(function(){$.cr.event.send("tw_window_close")});M=$.extend(M,{setId:function(T){$(this.elem).attr("id",T)},setTitle:function(T){$(this.elem).find(".crJs_window_title").html(T)},setHtml:function(T){this.bdy.html(T)},appendHtml:function(T){this.bdy.append(T)},getBodyWrapper:function(){return $(this.elem).find("div.mwBd")},setHandle:function(U,T){$(this.elem).find("a.crjs_yes").unbind("click").bind("click",U);$(this.elem).find("a.crjs_no").bind("click",T)}});var J=0;if($("#crjs_headbar").length>0){J=$("#crjs_headbar")[0].offsetHeight}var D=document.documentElement.clientHeight;var O=document.documentElement.clientWidth;var I=S.parentFixed==true||CRTWCONFIG.IS_SKY_FIXED==true||$("#t-sky").css("position")=="fixed";var N=function(Y,U){var aa=U.offsetY;var Z=U.offsetX;var X,T;if(I){aa=aa-$(document).scrollTop();X=J;T=0}else{T=$(document).scrollTop();X=T}var W=$(Y.currentTarget).width();var V=$(Y.currentTarget).height();if(parseInt(aa)<X){aa=X}else{if(parseInt(aa)>D-V+T){aa=D-V+T}}if(parseInt(Z)<=0){Z=0}else{if(parseInt(Z)>(O-W)){Z=O-W}}$(this).css({top:aa,left:Z})};$("#"+F).drag(function(U,T){N.call(this,U,T)},{handle:".crJs_window_title"})}else{M=E.getCrControl("crModalDialog");M.getControl()._conf.oneInstance=S.oneInstance}return M}})};tw.window=new g();g.prototype.modalDialogHtmlPrefix=w;g.prototype.modalDialogHtmlsuffix=u;g.prototype.winNoFootBtnPrefix=o;g.prototype.winNoFootBtnSuffix=B;return g});kola("newt.net.interface.Bubble",["jquery.Core","newt.net.NetCommon"],function(a,c){var b={URL:{CLOSE_COMMON_BUBBLE:"/bubble/closeBubblePermanently",ClOSE_MULTI_PIC:"/multipic/closeMultipicBubble"},closeCommonBubble:function(d){var f="";d=d?d:{};d._ajax=d._ajax?d._ajax:{};if(d.name){f="name="+d.name}a.extend(d._ajax,{url:b.URL.CLOSE_COMMON_BUBBLE,data:f,type:"post",dataType:"json"});c.request(d._ajax)},closeMultiPic:function(d){d=d?d:{};d._ajax=d._ajax?d._ajax:{};a.extend(d._ajax,{url:b.URL.ClOSE_MULTI_PIC,data:"",type:"post",dataType:"json"});c.request(d._ajax)}};return b});kola("sohu.view.Local",["kola.html.Element","sohu.data.Model","kola.lang.Function","kola.lang.Object","newt.window.Window"],function($,Model,Function,OBJECT){var ag=navigator.userAgent.toLowerCase(),webkit=ag.indexOf("webkit")!=-1;var Local={init:function(options){this._setOptions(options);this._listenClick()},_setOptions:function(options){this._options=OBJECT.extend({element:null},options||{});this._element=$(this._options.element||document)},_listenClick:function(){var self=this;this._element.bind("click",function(e){self._e_clickElement(e)})},_e_clickElement:function(e){if(e.ctrlKey){return}var srcEl;if(!(srcEl=$(e.target))){return}var tagName=(srcEl.attr("tagName")||"").toLowerCase(),el;if(tagName=="a"||tagName=="button"){el=srcEl}else{el=srcEl.parents("a");if(el.length==0){return}tagName=el.attr("tagName").toLowerCase()}if(tagName=="a"){if(el.attr("target")=="_blank"){return}var href;if(typeof(href=el.attr("href"))!="string"||href.indexOf("javascript:void(0)")!=0){return}}var viewAttr,form=el.parents("form");if(!(viewAttr=this._getViewAttr(el))){return}viewAttr.srcEl=srcEl;if(form.length>0){var data=form.Value()}var stopE=true;this._req(viewAttr.url,{config:{method:viewAttr.method,cache:viewAttr.noTimestamp},view:viewAttr,data:data});if(stopE){return false}},_getViewAttr:function(el,options){var url,pretask;if(!(url=el.attr("data-view-url"))&&!(pretask=el.attr("pretask"))){return null}var temp;var view={element:el,url:url,pretask:el.attr("pretask")||"",anim:el.attr("data-view-anim"),container:el.attr("data-view-container"),ctrOptions:el.attr("data-view-container-options")||"{}",confirm:el.attr("data-view-confirm"),method:el.attr("data-view-method")||"get",noTimestamp:typeof(temp=el.attr("data-view-timestamp"))=="string"&&temp=="false",location:el.attr("data-view-location")?(el.attr("data-view-location")=="true"):false,vmode:el.attr("data-view-vmode")||false,disableText:el.attr("data-view-disableText")||"",valid:el.attr("data-view-valid"),loadingClass:el.attr("data-view-loading"),options:options};var ctrOptions=el.attr("data-view-container-options");if(typeof(ctrOptions=el.attr("data-view-container-options"))=="string"&&ctrOptions.length>0){view.ctrOptions=eval("("+ctrOptions+")")}return view},_req:function(url,options){var view=options.view;this._reqInContainer(url,options)},_reqInContainer:function(url,options){var view=options.view,opt={};if(view.container=="_dialog"){this._isClosed=false;if(view.ctrOptions){opt=OBJECT.extend(opt,view.ctrOptions)}this._localViewDialog=view.containerObj=tw.window.getWindow("tw_empty_window",function(){},opt);view.containerObj.getElement().addClass(opt.theme);view.containerObj.setTitle("加载中");view.containerObj.show();this._localViewElement=view.element;this._reqNow(url,options)}else{if(view.container=="_default"){view.containerObj=this._localViewDialog;this._reqNow(url,options)}else{if(!view.container&&view.toView){location.href=url}else{this._reqNow(url,options)}}}},_setCss:function(){},_setPos:function(pos){var top,left,pannelBox=this._localViewDialog.getElement();if(pos&&pos.top){top=pos.top}else{var dHeight=pannelBox.height()==0?180:pannelBox.height();var bHeight=document.documentElement.offsetHeight;var bTop=webkit?document.body.scrollTop:document.documentElement.scrollTop;if(dHeight<(bHeight-30)){top=(bHeight-dHeight)/2-30+bTop}else{top=bTop+30}}if(pos&&pos.left){left=pos.left}else{var dWidth=pannelBox.width()==0?180:pannelBox.width();var bWidth=document.documentElement.offsetWidth;left=(bWidth-dWidth)/2}pannelBox.css("top",top+"px");pannelBox.css("left",left+"px");return this},_closeDialog:function(){if(this._isClosed){return}this._fireViewEvent("view.close")},closeLocalDialog:function(){this._localViewDialog.close();this._isClosed=true},_reqNow:function(url,options){var self=this,data=options.data,view=options.view,opt=OBJECT.extend({url:url,type:"get",encode:"uri",valid:false,format:"json",data:options.data,cache:false},options.config);this._startLoading(view);Model.action(opt,data,{succ:Function.bind(this._reqSucc,this,view),fail:Function.bind(this._reqFail,this,view)})},_fireViewEvent:function(event,element,isPop,data){},_reqSucc:function(view,data){var func;this._endLoading(view);if((func=view.options)&&typeof(func=func.beforeSuccess)=="function"){var value=func(data,view);if(typeof(value)=="boolean"&&value==false){return}}this.doSuccView(data,view)},canDoAsView:function(el){var viewAttr;if(!el||!(el=$(el))||!(viewAttr=this._getViewAttr(el))){return false}return true},asView:function(el,options){if(!this.canDoAsView(el)){return}var viewAttr=this._getViewAttr(el=$(el),options);if(viewAttr.container!="_dialog"){el.prop("data-view-disabled","true")}if(viewAttr.pretask){this._dealPretask(viewAttr)}else{this._doView(viewAttr)}},_doView:function(viewAttr){if(!viewAttr.url){return}var el=viewAttr.element,tag=el.prop("tagName").toLowerCase(),data=null;if(tag=="form"||tag=="div"||tag=="span"||tag=="p"){data=kola.dom.Form.val(el)}if(viewAttr.vmode&&window.KTV){if(KTV.Validate(el.elements()[0],parseInt(viewAttr.vmode))){if(viewAttr.disableText){this._disableButton(el,viewAttr)}this._startLoading(viewAttr.container);this._req(viewAttr.url,{config:{method:viewAttr.method,cache:viewAttr.noTimestamp},data:data,view:viewAttr})}else{return}}else{if(viewAttr.disableText){this._disableButton(el,viewAttr)}this._startLoading(viewAttr.container);this._req(viewAttr.url,{config:{method:viewAttr.method,cache:viewAttr.noTimestamp},data:data,view:viewAttr})}},doSuccView:function(data,view){if(!data){return}view.data=data;view.config=data.view_data;if(data.context){_view_context=data.context}if(view.data.location){if(view.config){this.doViewData(view.config,view)}var toView=view.data.location;view.data=null;view.confirm=null;view.toView=true;this._req(toView,{config:{method:"get",cache:view.noTimestamp},view:view})}else{this._prepareLocalView(view)}},_reqFail:function(view,error){this._endLoading(view);var status=0;if(error&&error.status){status=error.status}if(status==404){window.location.href="/404.html"}else{if(status==500){window.location.href="/500.html"}else{if(status=="401"){var d=error.data;if(d.toView){location.href=d.toView}}}}},doViewData:function(viewData,viewAttr){var view=viewAttr||{},needReturn=false,srcElement=this._localViewElement,isPop=false,temp;if((temp=viewData)&&(temp=temp.workflow)&&(temp=temp.status)&&temp=="complete"){isPop=true;needReturn=true;if(view.containerObj){if(view.containerObj==this._localViewDialog){this._localViewDialog=null}this._isClosed=true;view.containerObj.close()}else{if(this._localViewDialog){this._isClosed=true;this._localViewDialog.close();this._localViewDialog=null}else{needReturn=false}}srcElement=srcElement||view.element;this._localViewElement=null}if((temp=viewData)&&(temp=temp.event)){if(temp=="album.photo.upload.succ"||temp=="sub.del.succ"){srcElement=$(viewAttr.container)}this._fireViewEvent(temp,srcElement,isPop,viewData.data)}return needReturn},_prepareLocalView:function(view){if(!view.container){if(view.config){this.doViewData(view.config,view)}return}switch(view.container){case"_default":var element=view.element.parents("[data-view-container-default=true]");if(view.containerObj){view.containerObj.setTitle(view.data.title)}break;case"_dialog":var element=view.containerObj.getElement().find("div.mwBd");view.containerObj.setTitle(view.data.title);element.attr("data-view-container-default","true");break;default:var element=$(view.container);break}if(!element){return}var callback;this._showLocalView(view,element)},_showLocalView:function(view,element){var html;if(typeof(html=view.data.body)=="string"){element.html(html);view.container=="_dialog"&&this._setPos()}this._doOnLoad(view,element)},_doOnLoad:function(view,element){var onload,data=view.data;if((onload=data.onload)&&onload.length){for(var i=0,l=onload.length;i<l;i++){var it=onload[i],itv;if(it.type=="javascript"){itv=it.text;if(typeof(itv)=="string"&&itv.length>0){eval(Local._unescapeHTML(itv))}}else{if(it.type=="css"){}}}}if(view.config){this.doViewData(view.config,view)}},_unescapeHTML:function(str){var div=document.createElement("div");div.innerHTML=str;if(div.childNodes.length>0){var str=[];for(var i=0,il=div.childNodes.length,il;i<il;i++){str.push(div.childNodes[i].nodeValue)}return str.join("")}return""},_addLoadingClass:function(view){if(view.srcEl){var lc=view.loadingClass.split("#");view.srcEl.removeClass(lc[0]).addClass(lc[1])}},_removeLoadingClass:function(view){if(view.srcEl){var lc=view.loadingClass.split("#");view.srcEl.removeClass(lc[1]).addClass(lc[0])}},_startLoading:function(view){if(view.loadingClass){this._addLoadingClass(view)}},_endLoading:function(view){if(view.loadingClass){this._removeLoadingClass(view)}},_destroy:function(){},href:function(url,element){var el;if(!(el=$(element))){return}el.attr("data-view-url",url);var viewAttr={};viewAttr.container=element;el.removeAttr("data-view-url");this._req(url,{config:{method:viewAttr.method||"get",cache:viewAttr.noTimestamp||false},view:viewAttr})}};window.Local=Local;return Local});var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="FUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="1.0.0 2011-11-16";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290,LOAD_THUMB_FAILED:-300,INVALID_PICFILETYPE:-310};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof(a)!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//)){return a}var c=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var b=window.location.pathname.lastIndexOf("/");if(b<=0){path="/"}else{path=window.location.pathname.substr(0,b)+"/"}return path+a};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("privew_img_width",110);this.ensureDefault("privew_img_height",110);this.ensureDefault("load_thumb",false);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("button_disabled_handler",null);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("thumb_loaded_handler",null);this.ensureDefault("thumb_load_error_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor),"&amp;privew_img_width=",encodeURIComponent(this.settings.privew_img_width),"&amp;privew_img_height=",encodeURIComponent(this.settings.privew_img_height),"&amp;load_thumb=",encodeURIComponent(this.settings.load_thumb)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(f){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---FUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","load_thumb:               ",this.settings.load_thumb.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","thumb_loaded_handler assigned:      ",(typeof this.settings.thumb_loaded_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.reset=function(){this.callFlash("reset")};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var f=/[$]([0-9a-f]{4})/i;var g={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=f.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}g[d]=c.post[a]}}c.post=g}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(f,g){try{if(f){f[g]=null}}catch(h){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileThumbComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("thumb_loaded_handler",a)};SWFUpload.prototype.fileThumbError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("thumb_load_error_handler",[a,c,b])};SWFUpload.prototype.buttonDisabled=function(){this.queueEvent("button_disabled_handler",[])};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a,c])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};kola("newt.swf.SwfUpload",null,function(){return SWFUpload});kola("newt.swf.jquerySwfUpload",["newt.swf.SwfUpload","jquery.Core"],function(){var a=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"];var b=[];$.fn.swfupload=function(){var c=$.makeArray(arguments);return this.each(function(){var g;if(c.length==1&&typeof(c[0])=="object"){g=$(this).data("__swfu");if(!g){var j=c[0];var h=$(this);var f=[];$.merge(f,a);$.merge(f,b);$.each(f,function(n,m){var l=m.replace(/_handler$/,"").replace(/_([a-z])/g,function(){return arguments[1].toUpperCase()});j[m]=function(){var o=$.Event(l);h.trigger(o,$.makeArray(arguments));return !o.isDefaultPrevented()}});var k=new SWFUpload(j);$(this).data("__swfu",k);$(this).parent().data("__swfu")}}else{if(c.length>0&&typeof(c[0])=="string"){var d=c.shift();g=$(this).data("__swfu");if(g&&g[d]){g[d].apply(g,c)}}}})};$.swfupload={additionalHandlers:function(){if(arguments.length===0){return b.slice()}else{$(arguments).each(function(d,c){$.merge(b,$.makeArray(c))})}},defaultHandlers:function(){return a.slice()},getInstance:function(c){return $(c).data("__swfu")||$(c).parent().data("__swfu")}};return""});kola("newt.composer.TwComposer",["newt.window.Window","newt.cr.cr","newt.cr.crButton","newt.twitter.Twitter","newt.composer.emote.Emote","newt.cr.crSimpleEdit"],function(){return(function(b){var a=function(){var c=this;c.win="";c.pic="";c.success=function(){};c.cancel=function(){};b.extend(c,{showWinDefault:function(){c.win=tw.window.getWindow("add_tw_window");c.win.setTitle("发表微博");var d=c.win.getElement();d.find("div.repost_c").remove();c._bindEvt();c.w1E.setVal("");c._show()},showWinStyle1:function(d){var f=b.extend({pic:"",title:"发微博",tips:"发微博",msg:"",extra:"",submitHandle:"",parentFixed:true,success:function(){},cancel:function(){}},d||{});c.pic=f.pic;c.success=f.success;c.cancel=f.cancel;c.win=tw.window.getWindow("add_tw_window",{parentFixed:f.parentFixed});c.win.setTitle(f.title);var g=c.win.getElement();g.addClass(f.extra);g.find(".crJs_hint_caption").html(f.tips);g.find(".postSub").find("a.btn_min").removeClass("noDis");c.win.show(f.type);c._bindEvt(f.submitHandle);c.w1E.setFocus();c.w1E.setVal(f.msg)},showWinStyle2:function(){c.pic=pic;c.win=tw.window.getWindow("add_tw_window");c.win.setTitle(title);var d=c.win.getElement();d.find("div.repost_c em").html(tips);d.find("a.overlayCanB b").html("跳 过");c._bindEvt();c.w1E.setVal(msg);c._show()},_show:function(){c.win.show();c.w1E.setFocus()},_bindEvt:function(d){var g=c.win.getElement();if(!c.w1B){if(d!=null&&(d instanceof Function)){c.w1B=b(g).find("a.overlaySubmitB").crButton({submitHandle:d}).getCrControl("crButton")}else{c.w1B=b(g).find("a.overlaySubmitB").crButton({submitHandle:c.addTw}).getCrControl("crButton")}}else{c.w1B.setEnable()}if(!c.w1E){c.w1E=b(g).find("div.post").crSimpleEdit({status:".postMax i",syncHandle:function(){if(c.w1E){if(c.w1E.getVal()){c.w1B.setEnable()}else{c.w1B.setDisable()}}},ctrlEnterHandle:c.addTw}).getCrControl("crSimpleEdit");var f=c.win.getControl();f.onBeforeLoad(function(){if(b.browser.msie&&b.browser.version<7){var j=b("#overlay-cover-iframe"),h=b(window);if(0==j.length){j=b('<iframe id="overlay-cover-iframe" style="filter:alpha(opacity=0);position:absolute;border:none;display:none;width:395;height:191"></iframe>').appendTo("body")}j.css({top:Math.max((h.height()-190)/2+h.scrollTop(),0),left:Math.max((h.width()-420)/2+h.scrollLeft(),0),width:420,height:190}).show()}});f.onBeforeClose(function(){if(b.browser.msie&&b.browser.version<7){b("#overlay-cover-iframe").hide()}})}b(g).find("a.overlayCanB").unbind("click",c.cancel).bind("click",c.cancel);tw.emote.initEmoteBtn(g,c.w1E)},addTw:function(){var d={type:"add_tw",content:c.w1E.getVal(),pic:c.pic?c.pic:"",success:function(f){if(f&&f.status==0){common.showTip("发表成功");c.success(f)}else{if(f&&417==f.status){kola("newt.realnameblock.Dialog",function(g){g.show()});c.w1B.setEnable()}else{common.showErrTip("发表失败")}}},error:function(){common.showErrTip("系统忙，稍后再发！")}};tw.build(d)}})};b(function(){tw.composer=new a()});return new a()})(jQuery)});kola("newt.plug.RadioClass",["jquery.Core"],function(a){a.fn.RadioClass=function(c){var b=a.extend({tag:"a",clicktag:"",focusClass:"on",afterclick:function(){}},c||{}),d=this;this.click(function(j){var h=j.target,f=a(h).closest(b.tag,d),g=null;if(!b.clicktag){g=f}else{g=a(h).closest(b.clicktag,d)}if(g.size()>0){d.find(b.tag).removeClass(b.focusClass);f.addClass(b.focusClass);b.afterclick(f)}return false});return this}});kola("newt.dialog.Notice",["jquery.Core","newt.window.Window","newt.cr.crButton"],function(d,b,a){var c=function(){var f=this;d.extend(f,{init:function(){},showGlobalBlockWin:function(k){if(!k){return}k=d.extend({wid:"tw_win_globalBlock",wCls:"",title:"系统消息",showClose:true,showTitle:true},k||{});var g=k.wid;var h=d("#"+g);if(h.size()==0){var j=tw.window.getWindow("tw_empty_window_noFoot",{customID:g,parentFixed:false,expose:{opacity:0.5,color:"#000000"},onClose:function(){if(typeof(k.onClose)=="function"){k.onClose()}}});j.setTitle(k.title);j.setHtml(k.content);var l=d(j.getElement());if(k.wCls){l.addClass(k.wCls)}if(!k.showClose){l.find("a.close").remove()}if(!k.showTitle){l.find(".mwHd").remove()}j.show()}},confirm:function(r){var r=d.extend({autoClose:"true",msg:"",subMsg:"",type:"confirm",title:"系统消息",okBtnTxt:"确认",noBtnTxt:"取消",wCls:"",subHandle:function(){},cancelHandle:function(){}},r||{});var l={oneInstance:r.oneInstance===false?false:true};if(typeof(r.parentFixed)!="undefined"){l.parentFixed=r.parentFixed}if(typeof(r.expose)!="undefined"){l.expose=r.expose}var q=tw.window.getWindow("notice_confirm",l);var p=q.getElement();p.stop();if(r.title){q.setTitle(r.title)}if(r.wCls){p.addClass(r.wCls)}var m="",n=p.find("a.crjs_no"),k=p.find("a.crjs_yes"),o=p.find("a.close");if(r.type=="alert"){n.addClass("noDis nodis");m='<div class="hint '+(r.icoClass?r.icoClass:"hint_alert")+'"><div class="hintT"><i class="i"></i><em>'+r.msg+"</em></div>";if(r.subMsg){m+='<div class="hintC">'+r.subMsg+"</div>"}m+="</div>"}else{if(r.type=="confirm"){n.removeClass("noDis nodis");m='<div class="hint '+(r.icoClass?r.icoClass:"hint_ask")+'"><div class="hintT"><i class="i"></i><em>'+r.msg+'</em></div><div class="hintC">'+r.subMsg+"</div></div>"}}q.setHtml(m);k.find("b").text(r.okBtnTxt);n.find("b").text(r.noBtnTxt);q.show();if(p.attr("style").indexOf("important")==-1){p.attr("style",p.attr("style").replace("10001","10001!important"));p.attr("style",p.attr("style").replace("9999","10001!important"));var j=p.next();if(j){j.attr("style",j.attr("style").replace("9998","10000!important"))}}o.unbind("click.x").bind("click.x",function(){q.close();if(typeof(r.cancelHandle)=="function"){r.cancelHandle()}if(typeof(r.onClose)=="function"){r.onClose()}});n.filter(":visible").unbind().click(function(){q.close();if(typeof(r.cancelHandle)=="function"){r.cancelHandle()}});var g=k.crButton({submitHandle:function(){r.subHandle();if(r.autoClose){q.close()}}}).getCrControl("crButton");if(r.enableSubmitBtn!==false){g.setEnable()}return false},alert:function(j,h,g){if(typeof h!="function"){h=function(){}}if(j=="请先登录"){h=function(){location.href="http://t.sohu.com/new_index.jsp"}}g=g||{};d.extend(g,{msg:j,type:"alert",autoClose:true,oneInstance:false,subHandle:h});this.confirm(g)},showTipRegular:function(h){var j={text:"",subText:"",hintClass:"hintOk",delay:3000,title:"系统提示",customID:"tw_tip_regular"};d.extend(j,h||{});h.customID=h.customID||"tw_tip_regular";var k=tw.window.getWindow("tw_empty_window_noFoot",h);k.show();k.setTitle(j.title);var g=k.getElement();g.find("div.mwBd").html('<div class="mwBd"><div class="hint '+j.hintClass+'"><div class="hintT"><i class="i"></i><em>'+j.text+'</em></div><div class="hintC">'+j.subText+"</div></div></div>");setTimeout(function(){k.close()},j.delay)},showTip:function(k,g){g=g||{};if(d("#facebox").length==0){var j='<div id="facebox" class="mw mwMini mwMiniOk"><div class="mwDc"></div><div class="mwCt"><div class="mwBd">'+k+"</div></div>";if(d("#t-sky").length>0){d(j).appendTo("#t-sky")}else{d(j).prependTo(document.body)}}else{d("#facebox div.mwBd").html(k)}var h=d("#facebox").overlay({top:"center",closeOnClick:false,close:".overlayCanB",oneInstance:g.oneInstance===false?false:true,api:true}).load();setTimeout(function(){h.close();if(g.onFadeOut){g.onFadeOut()}},1000)},showTip2:function(l,g,h){if(d("#facebox").length==0){var k=['<div  id="facebox"  class="mw mwLgMini mwLgMiniOk">','<div class="mwCt">','<div class="mwBd">',"<h3>"+l+"</h3>","<p>"+g+"</p>","</div>","</div>","</div>"].join("");if(d("#t-sky").length>0){d(k).appendTo("#t-sky")}else{d(k).prependTo(document.body)}}else{d("#facebox div.mwBd").find("h3").html(l);d("#facebox div.mwBd").find("p").html(g)}var j=d("#facebox").overlay({top:"center",closeOnClick:false,close:".overlayCanB",api:true}).load();setTimeout(function(){j.close();if(h&&h.onFadeOut){h.onFadeOut()}},3000)},showErrTip:function(k,g){g=g||{};if(d("#faceboxErr").length==0){var j='<div id="faceboxErr" class="mw mwMini mwMiniFail"><div class="mwDc"></div><div class="mwCt"><div class="mwBd">'+k+"</div></div>";d(j).prependTo("div.SKY")}else{d("#faceboxErr div.mwBd").html(k)}var h=d("#faceboxErr").overlay({top:"center",closeOnClick:false,close:".overlayCanB",oneInstance:g.oneInstance===false?false:true,api:true}).load();setTimeout(function(){h.close();if(g.onFadeOut){g.onFadeOut()}},1000)},showErrTip2:function(l,g,h){if(d("#faceboxErr").length==0){var k=['<div  id="faceboxErr" class="mw mwLgMini mwLgMiniFail ">','<div class="mwCt">','<div class="mwBd">',"<h3>"+l+"</h3>","<p>"+g+"</p>","</div>","</div>","</div>"].join("");d(k).prependTo("div.SKY")}else{d("#faceboxErr div.mwBd").find("h3").html(l);d("#faceboxErr div.mwBd").find("p").html(g)}var j=d("#faceboxErr").overlay({top:"center",closeOnClick:false,close:".overlayCanB",api:true}).load();setTimeout(function(){j.close();if(h&&h.onFadeOut){h.onFadeOut()}},1000)},showErrTip3:function(k,g){if(d("#faceboxErr2").length==0){var j='<div id="faceboxErr2" class="mw mwMini mwMiniFail" style="z-index:999999!important;width:200px;"><div class="mwDc"></div><div class="mwCt"><div class="mwBd">'+k+"</div></div>";d(j).prependTo("div.SKY")}else{d("#faceboxErr2 div.mwBd").html(k)}var h=d("#faceboxErr2").overlay({top:"center",oneInstance:false,closeOnClick:false,close:".overlayCanB",api:true}).load();setTimeout(function(){h.close();if(g&&g.onFadeOut){g.onFadeOut()}},2000)},userConfirm:function(g){var g=d.extend({autoClose:"true",premsg:"",suffmsg:"",subMsg:"",img:"",uname:"",subHandle:function(){},cancelHandle:function(){}},g||{});var j=tw.window.getWindow("notice_user_confirm",{onClose:g.cancelHandle});var k=j.getElement();var h=[g.premsg,'<b class="nm"><i>',g.uname,"</i></b>",g.suffmsg].join("");k.find("div.hintT").find("em").html(h);k.find("div.hintC").html(g.subMsg);if(g.img!=""){k.find("div.hintT").find("p.avt").html('<p class="avt"><b><i style="background-image: url(&quot;http://'+g.img+'&quot;);" class="img"></i></b></p>')}k.find("a.crjs_yes").crButton({submitHandle:function(){g.subHandle();if(g.autoClose){j.close()}}}).getCrControl("crButton").setEnable();j.show();return false}})};tw.notice=new c();return c});kola("sohu.ctrl.SimplePager",["jquery.Core"],function(){var a=function(c,b){this.ele=c;this.opt=$.extend({one:10,distance:1220,disClass:"dis",onClass:"on",hideClass:"noDis"},b||{});this.list=this.ele.find("[data-pager = list]");this.next=this.ele.find("[data-pager = next]");this.prev=this.ele.find("[data-pager = prev]");this.goNum=this.ele.find("[data-pager = goNum]");this.curNum=this.ele.find("[data-pager = curNum]");this.totalNum=this.ele.find("[data-pager = totalNum]");this.curpager=1;this.isplaying=0;this.totalsize=Math.ceil(this.list.children().size()/this.opt.one);this.curNum.html(this.curpager);this.totalNum.html(this.totalsize);this._bindEvent();if(!this.opt.distance){this.curpager=0;this.goPage(1)}};a.prototype={_bindEvent:function(){var d=this;this.next.click(function(){d._next();return false});this.prev.click(function(){d._prev();return false});if(d.totalsize==1){this.prev.addClass(this.opt.disClass);this.next.addClass(this.opt.disClass)}if(d.goNum.length>0){var g="",f="",c=0,b=d.totalsize;for(c=0;c<b;c++){if(c==0){f=this.opt.onClass}else{f=""}g+='<a href="javascript:void(0)" data-pageId="'+(c+1)+'" class="'+f+'"></a>'}d.goNum.html(g);d.goNum.find("a").click(function(j){var h=$(this);if(h.length>0){var k=h.attr("data-pageId");d.goPage(k)}})}},_next:function(){if(!this.next.hasClass(this.opt.disClass)){var b=parseInt(this.curpager)+1;this.goPage(b)}},_prev:function(){if(!this.prev.hasClass(this.opt.disClass)){var b=parseInt(this.curpager)-1;this.goPage(b)}},goPage:function(f){var d=this;if(f==this.curpager){return}else{if(d.isplaying==0){if(this.opt.distance){var j=parseInt(this.list.css("text-indent"));d.isplaying=1;this.list.animate({textIndent:(j+(this.curpager-f)*this.opt.distance)+"px"},"normal",null,function(){d.isplaying=0})}else{var c,g,h,b;c=this.list.children();b=c.size();c.addClass(this.opt.hideClass);if(f>this.curpager){g=this.curpager*this.opt.one;h=f*this.opt.one}else{h=f*this.opt.one;g=h-this.opt.one}if(h>b){h=b}c.slice(g,h).removeClass(this.opt.hideClass)}this.curpager=f;this.curNum.html(this.curpager);this.setGoPageOn(f);if(this.curpager==1){this.prev.addClass(this.opt.disClass)}if(this.curpager>1){this.prev.removeClass(this.opt.disClass)}if(this.curpager<this.totalsize){this.next.removeClass(this.opt.disClass)}if(this.curpager==this.totalsize){this.next.addClass(this.opt.disClass)}}}},setGoPageOn:function(b){if(this.goNum.length>0){this.goNum.find("a").removeClass(this.opt.onClass);this.goNum.find("[data-pageId="+b+"]").addClass(this.opt.onClass)}}};$.fn.simplepager=function(b){this.each(function(c,d){new a($(d),b)})}});kola("util.data.DataBuffer",["jquery.Core"],function(a){function b(c){c=a.extend({bufferSize:15},c);a.extend(this,c);a.extend(this,{buffer:[],page:0})}b.prototype.getData=function(g){var f=this;g=a.extend({num:0,complete:function(){}},g);if(!f.isLastPage){if(this.buffer.length<=0){f.fillBuffer({complete:function(){if(f.buffer.length<=0){g.complete([])}else{f.getData(g)}}});return}if(this.buffer.length<g.num){f.fillBuffer({complete:function(){if(f.buffer.length<=g.num){g.complete(f.buffer);f.clearBuffer()}else{f.getData(g)}}});return}}var c=[];var j=[];for(var h=0,d=this.buffer.length;h<d;++h){if((g.num--)<=0){break}c.push(this.buffer[h]);j.push(h)}this.delData({indexes:j});g.complete(c)};b.prototype.delData=function(f){var d=f.indexes;for(var h=this.buffer.length-1;h>=0;--h){for(var c=0,g=d.length;c<g;++c){if(this.buffer[h]&&d[c]==h){this.buffer.splice(h,1)}}}};b.prototype.clearBuffer=function(){this.buffer=[]};b.prototype.pushBuffer=function(c){this.buffer=this.buffer.concat(c.data)};b.prototype.fillBuffer=function(d){var c=this;c.filler(++c.page,c.bufferSize,function(f){c.pushBuffer({data:f});if(f&&!a.isArray(f)){f=[f]}if(f.length<c.bufferSize){c.isLastPage=true}d.complete&&d.complete()})};return b});kola("newt.data.Synchronizer",["newt.cache.MemData"],function(f){var d=f.getClass().CREATE_MEMDATA();var a=f.getClass().CREATE_MEMDATA();function b(h,g){return h.index-g.index}var c={watch:function(h,g){c.bind(h,g)},bind:function(g,h){var j=c.getListenerList(g);j.push(h);a.save(g,j);c.syncListener(g,h)},getListenerList:function(g){return a.get(g)||[]},sync:function(k,h){var m=c.getListenerList(k);for(var j=0,g=m.length;j<g;++j){c.syncListener(k,m[j],h)}},syncListener:function(h,j,g){j(c.get(h),c.getArrayFromSet(h),g)},save:function(h,j,g){d.save(h,j);c.sync(h,g)},saveSet:function(h,l,j,g){var k=c.get(h)||{length:0,dataSet:{}};k.dataSet[l]={value:j,index:k.length++};c.save(h,k,g)},delSetItem:function(j,l,g){var k=c.get(j);if(k){var h=k.dataSet;delete h[l]}c.sync(j,g)},getSetItem:function(g,j){var h=c.get(g);if(h){return h.dataSet[j]}},getArrayFromSet:function(g){var j=c.get(g);if(j&&j.dataSet){var h=[];for(var g in j.dataSet){h.push(j.dataSet[g])}return h.sort(b)}return null},get:function(g){return d.get(g)},getData:function(g){return c.get(g)},setData:function(g,h){c.save(g,h,undefined)},setMapItem:function(g,j,h){c.saveSet(g,j,h,undefined)},getMapItem:function(g,h){return c.getSetItem(g,h)},delMapItem:function(g,h){c.delSetItem(g,h)}};return c});kola("newt.cr.cr","jquery.Core, newt.Config",function(){$.cr={getVersion:function(){return"0.1"}};$.cr.log=function(){if(typeof console!="undefined"){console.log.apply(this,arguments)}};$.cr.warn=function(){if(typeof console!="undefined"){console.warn.apply(this,arguments)}};$.cr.cookie={set:function(f,h,d,j,g){document.cookie=f+"="+escape(h)+((d)?"; expires="+d.toGMTString():"")+("; path="+((j)?j:"/"))+((g)?"; domain="+g:";")},get:function(g){var f=document.cookie.split("; ");for(var h=0;h<f.length;h++){var d=f[h].split("=");if(g==d[0]){return unescape(d[1]?d[1]:"")}}return""},del:function(d,g,f){if($.cr.cookie.get(d).length>0){document.cookie=d+"="+((g)?"; path="+g:"")+((f)?"; domain="+f:"")+"; expires=Thu, 01-Jan-1970 00:00:01 GMT"}}};$.cr.str={count:function(f){if(typeof f=="undefined"){return 0}var d=f.match(/[^\x00-\x80]/g);return(f.length+(!d?0:d.length))},trim:function(f,d){d=$.extend({reg:/\u0000/gi,replace:""},d||{});return f.replace(d.reg,d.replace)},countSimpin:function(f){if(typeof f=="undefined"){return 0}var d=f.replace(/[^\x00-\x80]/g,"").length;var g=f.length-d;return Math.ceil(d/2)+g}};$.cr.decode=function(d){d=$.trim(d);d=d.replace(/&/gi,"&amp;");d=d.replace(/\+/gi,"&#43;");d=d.replace(/\%/gi,"&#37;");d=d.replace(/</gi,"&lt;");d=d.replace(/>/gi,"&gt;");d=d.replace(/\"/gi,"&quot;");d=d.replace(/\'/gi,"&#39;");return d};$.cr.encodeUTF=function(h){var f="";if(typeof h!="string"){h=h.toString()}for(var g=0;g<h.length;g++){var d=h.charCodeAt(g);if((d>=12592&&d<=12687)||(d>=44032&&d<=55203)||(d>=9000&&d<=10000)||(d>127&&d<=256)){f+="%26%23"+h.charCodeAt(g)+";"}else{if(h.charAt(g)=="+"){f+=encodeURIComponent(h.charAt(g))}else{f+=escape(h.charAt(g))}}}return f};$.cr.inViewport=function(g){var l=$(g).offset();if(!l){return false}var h=l.top,j=l.left,k=CRTWCONFIG.SCROLL_DOM,f=window.innerHeight?window.innerHeight:k.height(),d=window.innerWidth?window.innerWidth:k.width();if(k[0]==window){if(h>k.scrollTop()&&h<(k.scrollTop()+f)&&j>k.scrollLeft()&&j<(k.scrollLeft()+d)){return true}else{return false}}else{if(h>50&&j>0){return true}else{return false}}};$.cr.setUnselectable=function(f){if($.browser.msie&&window.document.getElementsByTagName){if(f&&typeof(f.tagName)!="undefined"){if(f.tagName!="INPUT"&&f.tagName!="TEXTAREA"&&f.tagName!="IFRAME"){if(f.hasChildNodes()){for(var d=0;d<f.childNodes.length;d++){$.cr.setUnselectable(f.childNodes[d])}}f.unselectable=true}}}};$.fn.getCrControl=function(d){var f=null;this.each(function(){var g=$(this).data(d);if(g){f=g}});return f};$.cr.lso={getObj:(function(){if(window.localStorage&&!$.browser.msie){return window.localStorage}else{return document.cookie}})(),set:(function(){var d="";if(window.localStorage&&!$.browser.msie){d=function(g,h){this.getObj.setItem(g,h)}}else{var f=new Date();f=new Date(f.getTime()+1000*3600*24*365);d=function(g,h){$.cr.cookie.set(g,h,f)}}return d})(),get:(function(){var d="";if(window.localStorage&&!$.browser.msie){d=function(f){return this.getObj.getItem(f)}}else{d=function(f){return $.cr.cookie.get(f)}}return d})()};$.cr.addBookmark=function(f,d){try{window.external.addFavorite(f,d)}catch(g){try{window.sidebar.addPanel(d,f,"")}catch(g){tw.showSysMsg("bi...bi... 收藏过程被外星人拦截，请直接按Ctrl+D")}}};var b=navigator.userAgent.toLowerCase(),c=/msie\s+(\d+\.\d+)/i,a=b.match(c);isIE=a!=null,ieV=((a&&a[1])||""),isIPad=b.indexOf("ipad")!=-1;$.cr.browser={ipad:/ipad/.test(b),isIPad:isIPad,isIPhone:!isIPad&&b.indexOf("iphone")!=-1,isIE:isIE,isIE6:isIE&&ieV=="6.0",isIE7:isIE&&ieV=="7.0",isIE8:isIE&&ieV=="8.0",isIE9:isIE&&ieV=="9.0"};$.cr.hasSmoothing=function(){if(typeof screen.fontSmoothingEnabled!="undefined"){return screen.fontSmoothingEnabled}else{try{var j=document.createElement("canvas");j.width="35";j.height="35";j.style.display="none";document.body.appendChild(j);var k=j.getContext("2d");k.textBaseline="top";k.font="32px Arial";k.fillStyle="black";k.strokeStyle="black";k.fillText("E",0,0);for(var g=8;g<=32;g++){for(var d=1;d<=32;d++){var h=k.getImageData(d,g,1,1).data[3];if(h!=255&&h!=0){document.body.removeChild(j);return true}}}document.body.removeChild(j);return false}catch(l){return null}}};return""});kola("newt.tool.Count",["newt.Config"],function(){var a=function(c,b){this._count=c||1;this._step=b||1};a.prototype={get:function(){return this._count+=this._step},setStep:function(b){this.step=b}};tw.count_id=new a();return a});kola("newt.data.JData",null,function(){var a=function(b){this.d=b;this.dd=b.data};a.prototype={getStatus:function(){var b=this.d.status;if(b===0){return true}else{return false}},getStat:function(){return this.d.status},getStatusText:function(){return this.d.statusText},getBody:function(){return this.dd.body},getTitle:function(){return this.dd.title},_getOnload:function(){return this.dd.onload},getContext:function(){return this.dd.context},_getBeforeload:function(){return this.dd.beforeload},setBeforeload:function(){this._setScriptAndCss(this._getBeforeload())},_getAfterload:function(){return this.dd.onload},setAfterload:function(){this._setScriptAndCss(this._getAfterload())},_setScriptAndCss:function(f){if(f.length==0){return}for(var c=0,b=f.length;c<b;c++){var g=f[c];if(g.type=="javascript"){var d=document.createElement("script");d.type="text/javascript";if(g.src){d.src=g.src}else{if(g.text){d.text=g.text}}document.getElementsByTagName("head")[0].appendChild(d)}else{if(g.type=="css"){}}}},setBody:function(b){this.setBeforeload();b.html(this.getBody());this.setAfterload()}};return a});kola("newt.service.MailService",["jquery.Core","newt.cr.crEvent","newt.cr.cr"],function(c,b){return{sendMail:function(f){var h,g=f.friendId;if(f){f.sendType=0;f.content=c.cr.encodeUTF(f.content)}if(g){h=["friendId","content"];delete f.friendName}else{h=["friendName","content"];f.friendName=c.cr.encodeUTF(f.friendName)}if(f.captchaCode){f.captchaCode=encodeURIComponent(f.captchaCode)}a("sendMail","Mail:send_mail_ok","/mailBox/sendMail","post",h,f)},deleteMail:function(g){var l="Mail:del_mail_ok";var k="post";var j="deleteMail";var f="/mailBox/deleteMail";var h=["compactId","mailId"];a(j,l,f,k,h,g)},deleteAllMail:function(g){var l="Mail:clear_mail_ok";var k="post";var j="deleteAllMail";var f="/mailBox/deleteAllMail";var h=[];a(j,l,f,k,h,g)},deleteConversation:function(f){a("deleteConversation","Mail:del_conv_ok","/mailBox/deleteWholeConversation","post",["compactId"],f)},getConversationDetail:function(g){if(g){if(!g.pageNo){g.pageNo=1}if(!g.pageSize){g.pageSize=5}}var l="";var k="post";var j="getConversationDetail";var f="/mailBox/getConversationDetail";var h=["compactId","pageNo","pageSize"];a(j,l,f,k,h,g)}};function d(g,f){if(console&&console.log){console.log(g+": execute error callback error info: "+f)}}function a(g,q,o,f,n,l){var k,m,h,p,j=[];for(k=0,m=n.length;k<m;k++){h=n[k];if(!l.hasOwnProperty(h)){throw"MailService: except param:"+h}}for(h in l){if(l.hasOwnProperty(h)){p=l[h];if(typeof p!="object"&&typeof p!="function"){j.push(h+"="+p)}}}c.ajax({url:o,type:f,dataType:l.dataType||"json",data:j.join("&"),success:function(r){if(!r||(r.status&&r.status!=0)){if(l.error instanceof Function){try{l.error.call(l.scope,r)}catch(s){d("MailService."+g+"#error",s)}}return}if(typeof(l.success)=="function"){try{l.success.call(l.scope,r)}catch(s){d("MailService."+g+"#success",s)}}if(q&&r.data){b.send(q,r.data)}},error:function(r){if(typeof l.error=="function"){try{l.error.call(l.scope,r)}catch(s){d("MailService."+g+"#error",s)}}}})}});kola("newt.component.Login",["newt.data.Base64","kola.bom.Cookie","newt.component.PassportSC","newt.lib.overlay","newt.ca.ca"],function(d,a){if(typeof PassportSC!="undefined"){PassportSC.appid=1073;PassportSC.firstDomain="uniqname";PassportSC._drawLoginForm=function(){var f=['<form name="loginform" id="loginform" onsubmit="return false">','<div class="pptitle"><b></b><div class="ppthree"></div>',"</div>",'<div class="ppcontent" id="ppcontid">','<ul class="card card_ssl">','<div id="pperrmsg" class="error"></div>','<li>登录名<input type="text" value="通行证帐号/手机号" disableautocomplete="" autocomplete="off" class="ppinput ppinput_ssl blur" name="email" id="email"/></li>','<li>密　码<input type="password" autocomplete="off" class="ppinput ppinput_ssl" name="password" id="password"/></li>','<dt><span><input type="checkbox" value="1" name="persistentcookie" id="persistentcookie" checked="checked"/>记住密码</span><input type="submit" alt="登 录" src="http://js.sohu.com/passport/images/spacer.gif" onfocus="this.blur()" onclick="PassportSC.doLogin()" value="" class="sign"/><a onmousedown="CA.q(\'tw_',CRTWCONFIG.CA_SRC,'_passportCard_forget\')" href="http://passport.sohu.com/web/recover.jsp" class="fuc">忘记密码？</a></dt>',"</ul>","</div>",'<p class="toreg">还没有帐号？<a onmousedown="CA.q(\'tw_',CRTWCONFIG.CA_SRC,'_passportCard_reg\')" href="http://t.sohu.com/reg/reg.jsp?backurl=',$.cr.encodeUTF(CRTWCONFIG.BACK_URL),'">立即注册</a></p>',"</form>"];$(PassportSC.cElement).html(f.join(""))};PassportSC.drawPassportWait=function(f){PassportSC.cElement.innerHTML='<div class="pptitle"><b></b><div class="ppthree"></div></div><div class="ppcontent" id="ppcontid"><div class="ppWaitMsg">正在登录，请稍侯</div></div>'};PassportSC.drawPassportCard=function(){var f=a.get("ppinf");var g="";if(f){g=d.decodeBase64ToUtf8(f.split("|")[3]).split("|")[0].split(":")[2]}$(PassportSC.rootElement).html("<div class='login' id='ppcontid'><div class='form_login'><p class='cnt'>搜狐通行证上搜狐，知天下<br><i>"+g+"</i><br>欢迎您，您已成功登陆搜狐通行证！<br>现在即可畅游搜狐所有服务。</p></div></div>")};PassportSC.reportMsg=function(h){var g="";switch(h){case"1":g+="<b>请输入通行证用户名</b>";break;case"2":g+="<b>通行证用户名为邮件地址格式</b>";break;case"3":g+="<b>用户名后缀必须为"+arguments[1]+"</b>";break;case"4":g+="<b>请输入通行证密码</b>";break;case"5":var f=PassportSC.strip(PassportSC.emailInput.value);if(f.lastIndexOf("@focus.cn")>0){g+="<b>用户名或密码错误!咨询电话:010-58511234</b>"}else{g+="<b>用户名或密码错误</b>"}break;case"6":g+="<b>登录超时，请稍后重试</b>";break;case"7":g+="<b>登录失败，请重试</b>";break;case"8":g+="<b>网络故障，退出失败，请重新退出</b>";break;case"9":g+="<b>登录失败，请稍后重试</b>";break;case"10":g+="<b>暂时不可登录，请稍后重试</b>";break;case"11":g+="<b>浏览器设置有误，请查看帮助修正</b>";break;default:g+="<b>登录错误，请稍后重试</b>"}PassportSC.showMsg(g)};PassportSC.loginSuccessCall=function(){PassportSC.parsePassportCookie();if(PassportSC.cookie&&PassportSC.cookie.userid!=""){CA.q("tw_"+CRTWCONFIG.CA_SRC+"_passportCard_login");if(typeof window.isLogin!="undefined"){window.isLogin=true}if($("#tw_login_box").length>0){$("#tw_login_box").overlay().close()}if(typeof b=="function"){b()}else{window.location.href=window.location.href.replace(/#/gi,"")}}else{PassportSC.drawLoginForm();PassportSC.reportMsg("7")}}}var b=null;var c=function(){var f=this;$.extend(f,{init:function(){},check:function(h){h=$.extend({showLoginCard:true,success:null,pretaste:{txt:""}},h||{});var g=h.loginType;if(g>0){f.doPreTasteLogin1(h);return false}else{if(typeof window.isLogin!="undefined"&&!window.isLogin){b=h.success;if(h.showLoginCard){kola("newt.util.Tool",function(j){j.iNoLogin()})}return false}else{b=null;return true}}},dologin:function(){var g=['<div  id="tw_login_box" class="mw mw2 nodis">','<div class="mwDc"></div>','<div class="mwCt">','<a  id="at_close" title="关闭" class="close mwClose overlayCanB" href="javascript:void(0);"><i class="sign signX signX2"><q>×</q><q class="k2">×</q></i></a>','<div class="mwHd">',"<h4>登录微博</h4>","</div>",'<div class="mwBd"><div class="login"><div class="form_login"></div></div></div>',"</div>","</div>"];var h=$("#tw_login_box");if(0==h.length){$(g.join("")).prependTo("body");h=$("#tw_login_box")}h.removeClass("nodis");h.overlay({top:"center",expose:{color:"transparent",loadSpeed:200,opacity:"transparent"},closeOnClick:false,close:".overlayCanB",api:true,onClose:function(){h.find("div.form_login").children().remove();if($("#passportcard").length>0){PassportSC.drawPassport($("#passportcard").get(0))}}}).load();PassportSC.drawPassport(h.find("div.form_login").get(0));CA.q("tw_"+CRTWCONFIG.CA_SRC+"_passportCard_show")},doLogin2:function(){$("#LoginParent").addClass("on");if($("#tw_login_box2").length==0){var g='<table id="tw_login_box2" class="mwin mwin4 nodis"><thead><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></thead><tfoot><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></tfoot><tbody><tr><td class="bx"></td><td class="by">';g+='<div class="mw mw_a mw11">';g+='<div class="mwc">';g+='  <div class="login">';g+='		<div id="passportcard" class="form_login">';g+="		</div>";g+="  </div>";g+='</div></td><td class="bz"></td></tr></tbody></table>';$(g).prependTo("body")}$("#tw_login_box2").removeClass("nodis");$("#tw_login_box2").overlay({top:$("#LoginParent").offset().top+30,left:$("#LoginParent").offset().left-205,absolute:true,expose:{color:"transparent",loadSpeed:200,opacity:"transparent"},closeOnClick:function(){$("#LoginParent").removeClass("on")},close:".overlayCanB",api:true}).load();PassportSC.drawPassport(document.getElementById("passportcard"));CA.q("tw_"+CRTWCONFIG.CA_SRC+"_passportCard_show")},doLogin3:function(g){PassportSC.drawPassport(g.find("div.dropC")[0]);g.removeClass("noDis")},doPreTasteLogin1:function(g){$.cr.event.send("tw_pretaste_loginBox_show",g)},doPreTasteLogin:function(k){var j=['<table id="tw_login_box1" class="mwin nodis"><thead><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></thead><tfoot><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></tfoot><tbody><tr><td class="bx"></td><td class="by">','<a id="at_close" href="javascript:void(0);" class="mw_close close overlayCanB" title="关闭"><b>关闭</b></a>','<div class="mwt"><div class="ttl"></div></div>','<div class="mw mw_c">','<div class="mwc">','</div></td><td class="bz"></td></tr></tbody></table>'];var h=$('<div class="hint ht_tip"><p class="ht_t"><i class="i"></i><em></em></p><div class="ht_c"><p class="btns"><a href="javascript:void(0);" class="btn btnb3"><b></b></a></p></div></div>');var g=$('<p class="tosignin">我有微博帐号 <a href="javascript:void(0);">直接登录</a></p>');var l=$("#tw_login_box1");if(l.length==0){l=$(j.join("")).appendTo($("body"))}if(k.loginType==3){h.find("em").html(k.pretaste.txt.split("|")[0]);h.find("div.ht_c").prepend(k.pretaste.txt.split("|")[1]);l.find("div.ttl").text(k.pretaste.title);h.find("a.btnb3").attr("href","/reg/active_user.jsp").mousedown(function(){CA.q("tw_"+CRTWCONFIG.CA_SRC+"_login_active")}).find("b").text("立即激活");l.find("div.mwc").empty().append(h);l.removeClass("nodis").overlay({top:"center",expose:{color:"transparent",loadSpeed:200,opacity:"transparent"},closeOnClick:false,close:".overlayCanB",api:true}).load();CA.q("tw_"+CRTWCONFIG.CA_SRC+"_login_activeShow")}else{if(k.loginType==2){h.find("em").html(k.pretaste.txt.split("|")[0]);h.find("div.ht_c").prepend(k.pretaste.txt.split("|")[1]);l.find("div.ttl").text(k.pretaste.title);h.find("a.btnb3").attr("href","/reg/reg.jsp").mousedown(function(){CA.q("tw_"+CRTWCONFIG.CA_SRC+"_login_reg")}).find("b").text("立即注册");g.find("a").click(function(){l.find("div.mwc").empty().html('<div class="login"><div class="form_login"></div></div>');PassportSC.drawPassport(l.find("div.form_login").get(0));l.find("div.ttl").text("登录微博");CA.q("tw_"+CRTWCONFIG.CA_SRC+"_login_login")});l.find("div.mwc").empty().append(h.add(g));l.removeClass("nodis").overlay({top:"center",expose:{color:"transparent",loadSpeed:200,opacity:"transparent"},closeOnClick:false,close:".overlayCanB",api:true}).load();l.find(".overlayCanB").mousedown(function(){CA.q("tw_"+CRTWCONFIG.CA_SRC+"_login_close")});CA.q("tw_"+CRTWCONFIG.CA_SRC+"_login_loginShow")}}},dosubmit:function(g){PassportSC.doLogin()},twreg:function(h){var g="http://profile.chinaren.com/tw/reg.jsp?backurl="+window.location.href;setTimeout(function(){window.location.href=g},0);return false},pass_onkeypress:function(g){var h=g||window.event;var j=h.charCode||h.keyCode;if(j==13){f.dosubmit()}},setCookie:function(h,k,g,m,j){var l=new Date();l.setDate(l.getDate()+g);document.cookie=h+"="+escape(k)+((g)?"; expires="+l.toGMTString():"")+((m)?"; path="+m:"")+((j)?"; domain="+j:"")},getCookie:function(g){if(document.cookie.length>0){c_start=document.cookie.indexOf(g+"=");if(c_start!=-1){c_start=c_start+g.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""},deleteCookie:function(g,j,h){if(f.getCookie(g)){document.cookie=g+"="+((j)?"; path="+j:"")+((h)?"; domain="+h:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}},logout:function(){var h=top.window.location.host;var g="http://t.sohu.com/";if(h.indexOf(".chinaren.com")>-1){g="http://t.chinaren.com/index.jsp?logout=1"}top.document.location="http://passport.sohu.com/sso/logout_js.jsp?ru="+g}})};tw.login=new c();return c});kola("newt.cr.crSimpleEdit","jquery.Core",function(){var a=function(d,c){var b=this;b.ops=$.extend({handle:function(){},editDom:"textarea",firstActiveHandle:function(){},ctrlEnterHandle:function(){},clickHandle:function(){},focusHandle:function(){},blurHandle:function(){},syncHandle:function(){},intxt:"",defaultBlur:true,max:"-1",countSimple:false,cut:true,statusText:{yes:["还可输入","字"],no:["已超过","字"]},state:false,status:".editstatus"},c||{});b.elem=$(d);b.editName="s"+new Date().getTime();b.edit=b.elem.find(b.ops.editDom).attr("cr_edit",b.editName);b.eDom=b.edit.get()[0];b.editBox=b.edit.parent();b.limitStatus=false;if(parseInt(b.ops.max)>0){b.limit=true}else{b.limit=false}b.statusElem=b.elem.find(b.ops.status);b.act=0;$.extend(b,{init:function(){b.edit.unbind(".crSimpleEdit").bind("click.crSimpleEdit",b.click).bind("keyup.crSimpleEdit",b.keyup).bind("focus.crSimpleEdit",b.focus).bind("blur.crSimpleEdit",b.blur).bind("paste.crSimpleEdit",b.paste).bind("change.crSimpleEdit",b.change);if(b.ops.intxt){b.edit.val(b.ops.intxt)}},getElement:function(){return b.edit},selectionStart:function(){var g=b.eDom;if(!document.selection){return g.selectionStart}var l=document.selection.createRange(),k,f,j=0;var h=document.body.createTextRange();h.moveToElementText(g);for(j;h.compareEndPoints("StartToStart",l)<0;j++){h.moveStart("character",1)}return j},setFocus:function(){try{var g=b.eDom;if($.browser.msie){var f=g.createTextRange();f.moveStart("character",g.value.length);f.collapse(true);f.select()}else{g.focus()}}catch(h){}},setCursorEnd:function(){try{var f=b.eDom.value.length;b.setSelection(f,f);b.eDom.scrollTop=b.eDom.scrollHeight}catch(g){}},setCursorStart:function(){try{b.setSelection(0,0)}catch(f){}},selectionTxt:function(f,k,h){try{var g=b.eDom;var l=g.value.indexOf(f);if(l>=0){k=k?k:0;h=h?h:f.length;b.setSelection(l+k,l+k+h)}}catch(j){}},setSelection:function(j,g){var h=b.eDom;h.focus();if($.browser.msie){var f=h.createTextRange();f.collapse(true);f.moveStart("character",j);f.moveEnd("character",g-j);f.select()}else{h.setSelectionRange(j,g)}},click:function(){b.actHandle();if(typeof b.ops.clickHandle=="function"){b.ops.clickHandle()}return true},focus:function(){a.activeInstance=b;$.cr.event.send("edit_focus",b.editBox);if(b.ops.intxt==b.edit.val()){b.setVal("")}if(b.ops.defaultBlur){b.editBox.removeClass("blur")}if(typeof b.ops.focusHandle=="function"){b.ops.focusHandle()}return true},blur:function(){if(a.activeInstance==this){a.activeInstance=null}if(!b._getv()){if(b.ops.intxt){b.setVal(b.ops.intxt)}b.editBox.addClass("blur")}if(typeof b.ops.blurHandle=="function"){b.ops.blurHandle()}return true},paste:function(f){b.actHandle();setTimeout(b.sync,10)},change:function(f){b.sync()},keyup:function(f){b.actHandle();b.sync();var g=f.which;if(f.ctrlKey&&13==f.which){if(typeof b.ops.handle=="function"){b.ops.handle()}if(typeof b.ops.ctrlEnterHandle=="function"){setTimeout(function(){b.ops.ctrlEnterHandle()},100)}return false}},count:function(f){if(b.ops.countSimple){return f.length*2}return $.cr.str.count(f)},cutStr:function(l){var h=l,f=l.length,g=2*b.ops.max,k=0;for(var j=0;j<f;j++){k+=b.count(l.charAt(j));if(k>g){h=l.substring(0,j);break}}return h},sync:function(){var g=b.ops.max,h=2*g;if(b.limit&&(b.count(b._getv())>h)){if(b.ops.cut){b.edit.val(b.cutStr(b._getv()))}b.limitStatus=true}else{b.limitStatus=false}if(b.statusElem.length>0){var l=b.count(b._getv());l=Math.ceil(l/2);l=g-l;var k=(0>l)?' class="em3" ':"";var f=b.statusElem.parents("b.postMax");b.statusElem.html(l);if(!b.ops.state){if(0>l){f.addClass("em2")}else{f.removeClass("em2")}}else{var j=b.ops.statusText;if(0>l){b.statusElem.html(j.no[0]+Math.abs(l)+j.no[1]);f.html(b.statusElem).addClass("em2")}else{b.statusElem.html(j.yes[0]+l+j.yes[1]);f.html(b.statusElem).removeClass("em2")}}}if(typeof b.ops.syncHandle=="function"){b.ops.syncHandle(b)}},setCursorPosition:function(f){b.edit.setCursorPosition(f)},insert:function(j){b.editBox.removeClass("blur");if(b.edit.val()==b.ops.intxt){b.edit.val("")}var f=b.edit.get(0);if($.browser.msie){var h=document.selection.createRange();if(h.parentElement().getAttribute("cr_edit")===b.editName){h.text=j}else{f.value+=j}}else{var g=f.selectionStart;f.value=f.value.substr(0,f.selectionStart)+j+f.value.substring(f.selectionStart,f.value.length);f.selectionStart=g+j.length;f.selectionEnd=g+j.length}b.sync()},decode:function(f){return $.cr.decode(f)},actHandle:function(){if(!b.act){b.act=1;b.ops.firstActiveHandle()}},setUnselectable:function(f){$.cr.setUnselectable(f)},getLimitStatus:function(){return b.limitStatus},_getv:function(){return(b.edit.val()==b.ops.intxt)?"":b.edit.val()},getval:function(){return b._getv()},getVal:function(){return b.decode(b._getv())},setVal:function(f){b.edit.val(f);b.sync();b.editBox.removeClass("blur")},hiddenPreText:function(f){return b._hiddenText("hiddenPreText",f||"")},hiddenBackText:function(f){return b._hiddenText("hiddenBackText",f||"")},_hiddenText:function(g,h){var f="";if(h){b.edit.data(g,h)}else{f=b.edit.data(g)||"";b.edit.removeData(g);return f}},getAllVal:function(){return b.decode(b.hiddenPreText()+b._getv()+b.hiddenBackText())},clearHiddenText:function(){b.edit.removeData("hiddenPreText").removeData("hiddenBackText")}});b.init()};a.activeInstance=null;$.fn.crSimpleEdit=function(b){return $(this).each(function(){$(this).removeData("crSimpleEdit").data("crSimpleEdit",new a(this,b))})};return a});kola("newt.composer.Attip",["kola.lang.Array","newt.service.UserService","newt.util.StrUtil","newt.cr.crEvent","newt.util.Browser","newt.cr.crSimpleEdit","newt.cr.crTextAreaAssistPosition","newt.cr.crTipMenu"],function(c,g,f,b,d){var a=function(j){var h=this;h.elem=j;h.eCtr=j.getCrControl("crSimpleEdit");h.area=j.find("textarea");h.assD=j.find("div.atFake");h.preT="";h.lastT="";h.storage=null;h.userMap=null;h.followUsers=null;h.recentAts=null;h.hasLoadCacheData=false;h.cacheDataValid=false;h.MAX_MENU_ITEM_COUNT=10;h.MAX_MENU_CONTENT_LEN=19;h.MAX_STORE_RECORD_COUNT=400;h.NO_RECENT_AT_TIPS="@别人的名字，他会在“@提到我的”收到";h.tp="";h.tiphtml=['<div style="z-index:999999" class="assoc" id="twAtTipMenu">','<p class="ttl"></p>',"<ul>","</ul>","</div>"];$.extend(h,{init:function(){if(!h.assD){return false}h.ass=h.assD.crTextAreaAssistPosition({aimTextArea:h.area}).getCrControl("crTextAreaAssistPosition");h.area.bind("keydown keyup mouseup",function(l){h.checkInput(l)});var k=$("#twAtTipMenu");if(0==k.length){k=$(h.tiphtml.join("")).appendTo("body").css({position:"absolute"}).hide()}h.tp=k.crTipMenu({selectHandle:h.autoCompletion}).getCrControl("crTipMenu");h.area.crOut({outHandle:function(){h.tp.hide()}});if(d.isIE6){$("#t-sys").bind({scroll:function(l){if(h.tp.getDisplayStatus()=="show"){h.caculTipPos()}}})}h._bindLoadDataEvents();b.bind("tw_follow_user",function(){h.setCatchDataInvalid()});b.bind("tw_update_follow_del",function(){h.setCatchDataInvalid()})},checkInput:function(k){var w=k.type;var l=w=="keyup";var m=this._handleHotKey(k);if(!m){return}var n,q,o,v,s=/^@([a-zA-Z0-9\u4e00-\u9fa5_]{1,20})$/,u=h.area.val(),p=h.eCtr.selectionStart(),r=u.substring(0,p).lastIndexOf("@");if(r==-1){h.tp.hide();return}o=u.substring(0,r);v=u.substring(p);n=u.substring(r,p);h.preT=o;h.lastT=v;h.ass.setAssContent(o,v);if(n=="@"){if(w=="mouseup"||l){try{h.onInputAt()}catch(t){}}}else{if(s.test(n)){if(w=="mouseup"||l){q=RegExp.$1;h.k=q;try{this.onAtUser(q,k)}catch(t){}}}else{h.tp.hide()}}},onInputAt:function(){var n,k,m,o=[],l=this._getRecentAts();if(l.length>0){for(n=0,k=l.length;n<k;n++){m=this._getFollowUserByNick(l[n]);if(m){o.push({data:m})}}}else{o.push({data:{id:"first-input-tips",nk:this.NO_RECENT_AT_TIPS}})}this.buildTip(o)},onAtUser:function(k,l){var m=this._searchUserFromFollows(k);if(m.length>0){this.buildTip(m)}else{this.tp.hide()}},setCatchDataInvalid:function(){this.cacheDataValid=false;this._bindLoadDataEvents()},_bindLoadDataEvents:function(){var l=this;var k=function(){l.area.unbind("mousedown",k).unbind("keydown",k);l.getFriends(function(m){l._updateFollowUser(m)})};this.area.bind("mousedown keydown",k)},_getStorage:function(){if(this.storage==null){var k=g.getUserLocalStorage(UID);this.storage=k}return this.storage},_getRecentAts:function(){if(!this.recentAts){var l=this._getStorage();if(l){var k=l.get("recent_at");this.recentAts=k&&k.length>0?k:[]}}return this.recentAts||[]},_getFollowUsers:function(){if(!this.followUsers){var l=this._getStorage();if(l){var k=l.get("follow_users");this.followUsers=k&&k.length>0?k:[]}}return this.followUsers||[]},_getUserMap:function(){if(!this.userMap){var m,k,l,n={},o=this._getFollowUsers();for(m=0,k=o.length;m<k;m++){l=o[m];n[l.nk]=l}this.userMap=n}return this.userMap},_searchUserFromFollows:function(v){var p,n,s,r,o,l,A,u=[],v=v.toLowerCase(),m=this._searchCheckers,k=this._getFollowUsers(),q=this.MAX_MENU_ITEM_COUNT,z={},w=0;CheckLoop:for(var p=0,s=m.length;p<s;p++){l=m[p];for(var n=0,r=k.length;n<r;n++){o=k[n];if(o.nk in z){continue}try{A=l(o,v)}catch(t){continue}if(A.result!=true){continue}z[o.nk]=null;u.push({data:o,highlight:A.match});if(++w==q){break CheckLoop}}}return u},_searchCheckers:(function(u){var n=function(D,F){var E=F,C=D.nk,B=C&&C.toLowerCase().indexOf(F)==0;return{match:E,result:B,matchPos:"nk"}},A=function(D,F){var E,C=D.nk,G=D.nf,B=G&&G.toLowerCase().indexOf(F)==0;if(B){E=C.substring(0,F.length);return{result:B,match:E,matchPos:"nk"}}else{return{result:false}}},o=function(D,F){var C=D.nk,G=D.nps,B=G&&G.indexOf(F)==0,E=B?(C?C.substring(0,F.length):""):"";return{result:B,match:E,matchPos:"nk"}},k=function(C,E){var F=C.np,B=F&&F.replace(/\s+/g,"").indexOf(E)==0,D=B?f.getPyMatchStr(C.nk,C.np,E," "):"";if(D){return{result:true,match:D,matchPos:"nk"}}else{return{result:false}}},z=function(B,D){var E=B.mo,C=E&&E.toLowerCase().indexOf(D)==0;return{result:C,match:D,matchPos:"mo"}},p=function(C,F){var E=C.mf,G=C.mo,B=E&&E.toLowerCase().indexOf(F)==0,D=B?(G?G.substring(0,F.length):""):"";return{result:B,match:D,matchPos:"mo"}},r=function(D,F){var G=D.mo,C=D.mps,B=C&&C.indexOf(F)==0,E=B?(G?G.substring(0,F.length):""):"";return{result:B,match:E,matchPos:"mo"}},q=function(C,F){var E=C.mp,B=E&&E.replace(/\s+/g,"").indexOf(F)==0,D=B?f.getPyMatchStr(C.mo,C.mp,F," "):"";if(D){return{result:true,match:D,matchPos:"mo"}}else{return{result:false}}},t=function(D,F){var C=D.nk,B=C&&C.toLowerCase().indexOf(F)!=-1,E=B?F:"";return{result:B,match:E,matchPos:"nk"}},l=function(D,G){var F,C=D.nk,H=D.nf,B=H&&(F=H.toLowerCase().indexOf(G))!=-1,E=B?(C?C.substring(F,F+G.length):""):"";return{result:B,match:E,matchPos:"nk"}},m=function(C,E){var F=C.np,D=f.getPyMatchStr(C.nk,C.np,E," "),B=D!="";if(B){return{result:true,match:D,matchPos:"nk"}}else{return{result:false}}},s=function(C,E){var F=C.mo,B=F&&F.toLowerCase().indexOf(E)!=-1,D=E;return{result:B,match:D,matchPos:"mo"}},v=function(D,G){var C,E,H=D.mo,F=D.mf,B=F&&(C=F.toLowerCase().indexOf(G))!=-1;if(B){E=H.substring(C,C+G.length);return{result:true,match:E,matchPos:"mo"}}else{return{result:false}}},w=function(C,F){var E=C.mp,D=f.getPyMatchStr(C.mo,C.mp,F," "),B=D!="";if(B){return{result:true,match:D,matchPos:"mo"}}else{return{result:false}}};return[n,A,o,k,z,p,r,q,t,l,m,s,v,w]})(),_addRecentAt:function(m){var k=this._getRecentAts();var l=c.indexOf(k,m);if(l!=-1){k.splice(l,1);k.unshift(m);this._saveRecentVisit();return}if(k.length==this.MAX_MENU_ITEM_COUNT){k.pop()}k.unshift(m);this._saveRecentVisit()},_saveRecentVisit:function(){var k=this._getStorage();if(k){k.set("recent_at",this._getRecentAts())}},_getFollowUserByNick:function(k){return this._getUserMap()[k]},_updateFollowUser:function(o){var n,k,l,m,q,p=[];if(this.userMap==null){this.userMap={}}for(n=0,k=o.length;n<k;n++){l=o[n];if(l instanceof Array){m={id:l[0],nk:l[1],np:l[2],nps:l[3]};if(l.length==5){m.nf=l[4]}else{if(l.length==9){if(l[4]){m.nf=l[4]}if(l[5]){m.mo=l[5]}if(l[6]){m.mp=l[6]}if(l[7]){m.mps=l[7]}if(l[8]){m.mf=l[8]}}}}else{m=l}this.userMap[m.nk]=m;p.push(m)}this.followUsers=p;if(p.length<=this.MAX_STORE_RECORD_COUNT){q=this._getStorage();if(q){q.set("follow_users",p)}}},showTip:function(){if(this.tp.getDisplayStatus()=="hide"){CA.q("tw_"+CRTWCONFIG.CA_SRC+"_attip_show")}this.caculTipPos();this.tp.show()},caculTipPos:function(){var m=h.ass.getAssistPos();var k=m.left+5;var l=m.top-(this.area.attr("scrollTop")||0)+26;this.tp.setPos(k,l)},buildTip:function(u){var r,t,z,q,s,n,l,k,o,A=[],v=h.tp,m,w,p=this.MAX_MENU_CONTENT_LEN;for(r=0,t=u.length;r<t;r++){z=u[r],q=z.data,k=z.highlight;l=q.id;n=q.nk;o=q.mo;s=n;w=n;if(o){w+=" ( "+o+" )";m=p-n.length;if(o.length>m){o=o.substring(0,m-2)+".."}s+=" ( "+o+" )"}if(k){s=s.replace(new RegExp(k,"i"),'<span class="em">$&</span>')}A.push({txt:s,val:n,tip:w})}if(A.length>0){v.setItems(A);h.showTip()}else{v.removeAll();v.hide()}},getFriends:function(k){if(this.hasLoadCacheData&&this.cacheDataValid){return}g.getUserFollows({uid:UID,scope:this,success:function(l){if(0==l.status){this.hasLoadCacheData=true;this.cacheDataValid=true;k(l.data)}}})},_handleHotKey:function(m){var n=m.keyCode;var k="keyup"==m.type;var l="keydown"==m.type;var o="show"==h.tp.getDisplayStatus();if(!o){return true}if(n==9||n==13){m.preventDefault();if(k){h.autoCompletion();h.tp.hide()}return false}if(n==40||n==38){if(l){m.preventDefault();if(n==40){h.tp.hoverNext()}else{h.tp.hoverPre()}}return false}if(n==27){if(k){h.tp.hide()}return false}return true},autoCompletion:function(){var l=h.tp.getSelectVal();if(l==h.NO_RECENT_AT_TIPS){return}var k=h.preT+"@"+l+" ";h._addRecentAt(l);h.eCtr.setVal(k+h.lastT);h.eCtr.setSelection(k.length,k.length);h.preT=h.lastT="";CA.q("tw_"+CRTWCONFIG.CA_SRC+"_attip_insert")}});h.init()};tw.AtTip=a;return a});kola("newt.composer.emote.Emote",["newt.net.interface.Emote","newt.resource.Resource","newt.util.LocalStorage","mvc.view.TemplateEngine","newt.composer.emote.crEmote","newt.cr.crOut","sohu.ctrl.SimplePager","newt.ca.ca"],function(c,g,f,b){var a;var h={set:function(m){var k,j,n,l=-1;k=f.get("emoteUsedHistory");if(m!=""){if(k&&k.length>0){j=k.length;for(n=0;n<j;n++){if(k[n]==m){l=n;break}}if(l>-1){k.splice(l,1)}k.unshift(m)}else{k=[m]}}if(k){f.set("emoteUsedHistory",k)}},get:function(k){var j,l=[];j=f.get("emoteUsedHistory");if(j){l=j;if(k&&k>0){l=l.slice(0,k)}}return l}};var d=function(){var j=this;j.em="";$.extend(j,{init:function(m){var l="",n=$("#twEmote");l=a;if(!n.length){var k=$(l);if(m){n=k}else{n=k.appendTo("body")}n.crOut({outHandle:function(){n.addClass("noDis")}});n.find("a.close").click(function(){n.addClass("noDis")});n.simplepager({one:6,distance:0})}j.em=n.crEmote().getCrControl("crEmote");return j.em},getEmoteData:function(k){c.getResource({_ajax:{success:function(l){var m=null;if(l.status==0){m=l.data;m=j.concatStorage(m,12)}else{m=g}k(m)},error:function(l,m){k(g)}}})},renderHTML:function(n){var k,m;var l=function(){if(k&&m){n(k.render({data:m.EMOTE}))}};j.getEmoteData(function(o){m=o;l()});b.getTemplate({name:"template.main.emote.panel",complete:function(o){k=o;l()}})},concatStorage:function(m,l){var k=this;if(!m.EMOTE||m.EMOTE.length<2){return m}m.EMOTE[0].historyData=k.getHistoryData(l);return m},getHistoryData:function(p){var u,r,q,o,s,l,m,n=[],k="",t=true;u=["x122_拥抱","x40_给力","x38_神马","x44_围观","x18_玫瑰","x43_飘过","x99_急救箱","x103_发芽","x64_啤酒","x91_福","x213_心","x214_伤心"];r=u.length;q=h.get();s=q.length;if(!p){p=12}for(o=0;o<s&&n.length<p;o++){k=q[o];n.push(k)}s=n.length;if(s<12){m=u.length;for(l=0;l<m;l++){t=true;for(o=0;o<s;o++){if(u[l]==n[o]){t=false;break}}if(t){n.push(u[l])}if(n.length==12){break}}}return n},getControl:function(k){if(!j.em){j.em=j.init(k);$.cr.event.bind("tw_window_close",function(l,m){if(j.em){j.em.hide()}})}return j.em},clearEm:function(){},initEmoteBtn:function(n,l,k){k=k||1;var m=$(n).find("a.crJs_emote");if(m.length==0){m=$(n).children("a.fuc")}m.data("tw_emote_edit_ctr",l);$.cr.setUnselectable(m[0]);m.click(function(){var s=$(this),r=$("#twEmote");if(r.length<1){j.renderHTML(function(u){a=u;j.init();j.initEmoteCtrl(s)})}else{var p,o,t="",q=j.getHistoryData(12);o=q.length;for(p=0;p<o;p++){t+='<a href="javascript:void(0);" title="'+q[p].split("_")[1]+'"><i class="x '+q[p].split("_")[0]+'" p="'+(p%12>5?"r":"l")+'" title="'+q[p].split("_")[1]+'"></i></a>'}r.find("div.c.stick").html(t);j.initEmoteCtrl(s)}})},initEmoteCtrl:function(l){var m=j.em;l.after($("#twEmote"));if(m.getDisplay()=="hide"){var k=l.data("tw_emote_edit_ctr");m.setHandle(function(n,o){if(o){CA.q("newt_emote_resource_"+n);n=n<10?"0"+n:n;n="x"+n+"_"+o;h.set(n);k.insert("["+o+"]");$(k.getElement()).trigger("focus");k.setCursorEnd()}m.hide()});m.show(l,1)}else{m.hide()}},pPage:function(m){var l=$("#twEmote").find("div.crJs_page"),k=$("#twEmote").find("div.simiT");k.find("a.on").removeClass("on");k.find("a").eq(m).addClass("on");l.hide();l.eq(m).show()},isVisible:function(){return $("#twEmote").is(":visible")}})};tw.emote=new d();return d});kola("newt.dialog.Common","newt.dialog.Notice",function(b){var c=new b();var a={pong:null,lastLength:0,streams:[],listeners:{},showTip:function(d){c.showTip(d)},showErrTip:function(d){c.showErrTip(d)},confirm:function(h,g,f){if($("#confirm_dialog").length==0){var d='<table id="confirm_dialog" class="mwin nodis">';d+='<thead><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></thead>';d+='<tfoot><tr><td class="bx"></td><td class="by"></td><td class="bz"></td></tr></tfoot>';d+='<tbody><tr><td class="bx"></td>';d+='<td class="by"><a title="" class="mw_close overlayCanB" href="javascript:void(0)"><b></b></a>';d+='<div class="mwt"><div class="ttl"></div></div>';d+='<div class="mw mw_c">';d+='<div class="mwc">';d+='<div class="hint ht_ask">';d+='<p class="ht_t"><i class="i"></i><em></em></p>';d+='<div class="ht_c"></div>';d+="</div></div>";d+='<div class="mwb">';d+='<p class="btns2"><a href="javascript:void(0)" class="btn btnok overlayCanB"><b>确定</b></a><a href="javascript:void(0)" class="btn btn_min overlayCanB"><b>取消</b></a></p>';d+="</div>";d+='</div></td><td class="bz"></td></tr></tbody></table>';$(d).prependTo("div.SKY")}$("#confirm_dialog div.ttl").html(h);$("#confirm_dialog p.ht_t").html('<i class="i"></i><em>'+g+"</em>");$("#confirm_dialog a.btnok").unbind("click").click(f);$("#confirm_dialog").removeClass("nodis");$("#confirm_dialog").overlay({top:"center",expose:{color:"#fff",loadSpeed:200,opacity:0},closeOnClick:false,close:".overlayCanB",api:true}).load()}};window.common=a;return a});kola("newt.report.Report",["newt.window.Window","newt.cr.crCustomSelect"],function(){var a=function(c){var b=this;b.rpWin=null;$.extend(b,{report:function(d){if(d.rtype==0){b.reportTw(d)}else{if(d.rtype==1){b.reportUser(d)}else{if(d.rtype==2){b.reportRp(d)}else{if(d.rtype==3){b.reportMail(d)}}}}},reportRp:function(d){var g=$("#rp_"+d.rpid);win=b.build(),elem=win.getElement();elem.find("p.crJs_ta").html("你举报的是<strong>“"+d.replyName+"”</strong>发的评论");elem.find("div.crJs_co").html('<div class="twi"></div>');var f=elem.find("div.twi");g.find("p.avt").add(g.find("p.twit")).clone().find("a").attr("href","javascript:void(1)").end().appendTo(f);b.rp_opt={act:2,rpId:d.rpid};b.resetSelect(elem);b.resetTip();win.show();CA.q("tw_"+CRTWCONFIG.CA_SRC+"_report_reply_show")},reportTw:function(f){var d=$("#"+f.uid+"_con"),j=d.find("h3 b.avt img").attr("src");msgBox=$("#"+f.msgid+"_con"),pic=msgBox.find("div.twic i.pic2 img");win=b.build(),elem=win.getElement();elem.find("p.crJs_ta").html("你举报的是<strong>“"+f.uname+"”</strong>发的微博");elem.find("div.crJs_co").html('<div class="twi"></div>');var h=elem.find("div.twi"),g=['<p class="avt"><b><img alt="" src="',j,'"></b></p>','<p class="twit"><b class="nm"><a href="javascript:void(1)">',f.uname,'</a></b><q class="ugc">'+tw.twcontainer.getTwContent(f.msgid).substring(0,100)+"</q></p>"];if(pic.length>0){g=g.concat(['<div class="twic"><p class="pics"><i class="pic"><b><img width="120" alt="" src="',,pic.attr("src").replace(/m_(.*)\.gif/gi,"f_$1.gif"),'"></b></i></p></div>'])}$(g.join("")).appendTo(h);b.rp_opt={act:0,rpId:f.msgid};b.resetSelect(elem);b.resetTip();win.show();CA.q("tw_"+CRTWCONFIG.CA_SRC+"_report_tw_show")},reportUser:function(d){var g=b.build(),f=g.getElement();f.find("p.crJs_ta").html("");f.find("div.crJs_co").html("");b.rp_opt={act:1,rpUid:d.uid};b.resetSelect(f);b.resetTip();g.show();CA.q("tw_"+CRTWCONFIG.CA_SRC+"_report_user_show")},reportMail:function(d){var g=b.build(),f=g.getElement();f.find("p.crJs_ta").html("");f.find("div.crJs_co").html("");b.rp_opt={act:3,rpId:d.msgid,rpUid:d.uid};b.resetSelect(f);b.resetTip();g.show();CA.q("tw_"+CRTWCONFIG.CA_SRC+"_report_mail_show")},_report:function(){var d=b.rpWin.getElement();c=$.extend(b.rp_opt,{type:"report",rpType:b.customSel.getSelected().value,rpNote:d.find("textarea").val(),success:function(f){if(f&&f.status==0){common.showTip("举报成功");d.find("textarea").val("")}}});tw.build(c);CA.q("tw_"+CRTWCONFIG.CA_SRC+"_"+b.rp_opt.act)},resetSelect:function(d){b.select=0;b.customSel=d.find("i.select").crCustomSelect({options:[{text:"-请选择不良信息的类型-",value:"0"},{text:"诈骗信息",value:"4"},{text:"恶意灌水及广告",value:"3"},{text:"色情、低俗、暴力",value:"2"},{text:"侵犯他人信息、辱骂他人",value:"5"},{text:"违法有害信息",value:"1"},{text:"其他",value:"6"}],change:function(g,f){b.select=f;if(f==0){b.btn.setDisable();b.resetTip()}else{if(f==6){if(b.edit.getVal()){b.btn.setEnable()}else{b.setErrTip("请填写举报理由");b.btn.setDisable()}}else{b.btn.setEnable();b.resetTip()}}}}).getCrControl("crCustomSelect");b.edit.setVal("");b.btn.setDisable();b.customSel.setSelected(0)},resetTip:function(){b.tip.html("");b.tip.closest(".frm").removeClass("frm_err")},setErrTip:function(d){b.tip.html(d);b.tip.closest(".frm").addClass("frm_err")},build:function(f){var g=b.rpWin;if(!g){g=tw.window.getWindow("tw_report_window");g.setTitle("举报");var d=g.getElement();b.tip=d.find("p.frmTip b");b.btn=d.find("a.crjs_yes").crButton({submitHandle:b._report}).getCrControl("crButton");b.edit=d.find("div.crJs_edit").crSimpleEdit({ctrlEnterHandle:b._report,syncHandle:function(){if(b.select==6){if(b.edit.getVal()){b.btn.setEnable();b.resetTip()}else{b.btn.setDisable();b.setErrTip("请填写举报理由")}}},focusHandle:function(){if(b.select==0){b.edit.edit.blur();b.setErrTip("请选择举报类型")}}}).getCrControl("crSimpleEdit")}b.rpWin=g;return g}})};tw.report=new a()});kola("newt.cr.crOut","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({on:true,one:false,bind:"click",outItems:"",inHandle:function(){},outHandle:function(){}},c||{});$.extend(b,{init:function(){b.ns="";b.ts="";b.opts.bind+=b.ns;b.elem.add(b.opts.outItems).each(function(){var f=(new Date()).getTime();$(this).data("cr_out_timestamp",f);b.ts+=f+","});$(document).bind(b.opts.bind,b.check)},check:function(h){if(!b.opts.on){return true}var g=$(h.target)[0];var f=true;while(g){g=$(g);if(b.ts.indexOf(g.data("cr_out_timestamp"))>=0){f=false;break}g=g.parent()[0]}if(f){b.opts.outHandle(h);if(b.opts.one){$(document).unbind(b.opts.bind,b.check)}}else{b.opts.inHandle()}},on:function(){b.opts.on=true},off:function(){b.opts.on=false},unbind:function(f){$(document).unbind(b.opts.bind,b.check)},rebind:function(f){b.unbind();b.opts=$.extend({on:true,one:false,bind:"click",outItems:"",inHandle:function(){},outHandle:function(){}},f||{});b.ns="";b.ts="";b.init()}});b.init()};$.fn.crOut=function(b){return $(this).each(function(){$(this).removeData("crOut").data("crOut",new a(this,b))})};return a});kola("newt.cr.crButton","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({status:"disable",disableClass:"btn_dis",loadingClass:"",loadingHTML:"",submitHandle:function(){}},c||{});b.stat=0;$.extend(b,{init:function(){b.elem.unbind().bind("mouseup",b.mouseup);b.elem.attr("href","javascript:void(0)");if("disable"==b.opts.status){b.setDisable()}else{b.setEnable()}},getElement:function(){return b.elem},mouseup:function(){if(!b.hasEnable()){return false}else{b.setLoading();b.opts.submitHandle();return false}},setHTML:function(f){b.elem.html(f)},setText:function(f){b.setHTML("<b>"+f+"</b>")},getText:function(){return b.elem.text()},setLoadingHTML:function(f){b.opts.loadingHTML=f},setLoading:function(){b.setDisable();if(b.opts.loadingHTML){b.setHTML(b.opts.loadingHTML)}if(b.opts.loadingClass){b.elem.addClass(b.opts.loadingClass)}},removeLoading:function(){if(b.opts.loadingClass){b.elem.removeClass(b.opts.loadingClass)}},setDisable:function(){if(b.stat){b.stat=0}b.elem.addClass(b.opts.disableClass)},setEnable:function(){if(!b.stat){b.stat=1}b.elem.removeClass(b.opts.disableClass)},hasEnable:function(){return b.stat?true:false}});b.init()};$.fn.crButton=function(b){return $(this).each(function(){$(this).removeData("crButton").data("crButton",new a(this,b))})};return a});kola("newt.cr.crInput","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({editBox:".cr_input_box",editDom:"input",submitBtn:".cr_input_sBtn",cancelBtn:".cr_input_cBTn",tipBox:".cr_input_tip",initText:"",syncHandle:function(){},cancelHandle:function(){},submitHandle:function(){},submitBtnState:"enabled"},c||{});b.isSubmitEnable=true;b.editBox="";b.edit="";b.sub="";b.can="";b.tip="";$.extend(b,{init:function(){var l=b.elem,k=b.opts;b.editBox=l.find(k.editBox);b.tip=l.find(k.tipBox).hide();b.can=l.find(k.cancelBtn).mouseup(b.opts.cancelHandle);b.sub=l.find(k.submitBtn).mouseup(function(){if(b.isSubmitEnable){try{k.submitHandle(b)}catch(n){}}});if(k.submitBtnState=="disabled"){b.disableSubmitBtn()}var h=b.editBox.length>0?b.editBox.find(k.editDom):l.find(k.editDom);if(h.length>0){var m=(k.inputHandle instanceof Function),g=function(){b.handleInput(this.value)},f=function(){if($(this).val()==k.initText){$(this).val("");b.editBox.removeClass("blur");if(m){b.handleInput("")}}},j=function(){if(!$(this).val()){$(this).val(k.initText);b.editBox.addClass("blur")}};b.edit=h;h.val(k.initText);h.bind({keyup:b.handle,focus:f,blur:j});if(m){h.bind("keyup",g)}}},getElement:function(){return b.elem},getVal:function(){var f=b.edit.val();return(f!=b.opts.initText)?f:""},setVal:function(f){b.edit.val(f)},showTip:function(f){b.tip.html(f).show()},clearTip:function(){b.tip.html("").hide()},handle:function(f){if(f.which==13&&b.isSubmitEnable){b.opts.submitHandle(b);return false}b.opts.syncHandle(b)},handleInput:function(f){try{b.opts.inputHandle(b,f)}catch(g){}},focus:function(){b.edit.focus()},blur:function(){b.edit.blur()},showWaiting:function(f){var f=f?f:"btn_loading btn_dis";$(b.sub).addClass(f)},stopWaiting:function(f){var f=f?f:"btn_loading btn_dis";$(b.sub).removeClass(f)},enableSubmitBtn:function(f){var f=f?f:"btn_dis";$(b.sub).removeClass(f);b.isSubmitEnable=true},disableSubmitBtn:function(f){var f=f?f:"btn_dis";$(b.sub).addClass(f);b.isSubmitEnable=false}});b.init()};$.fn.crInput=function(b){return $(this).each(function(){$(this).removeData("crInput").data("crInput",new a(this,b))})};return a});kola("newt.lib.autoResize","jquery.Core",function(){$.fn.autoResize=function(a){var b=$.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},a);var c=$(this).height();this.filter("textarea").each(function(){if($.browser.msie){var f=$(this).css("overflow-y","auto")[0];var d=function(){if(!$(f).val()){return}var o=f.scrollHeight+b.extraSpace;if(o>b.limit){o=b.limit}f.style.height=o+"px";o=null};$(f).unbind(".dynSiz").bind("keyup.dynSiz",d).bind("paste.dynSiz",d).bind("keydown.dynSiz",d).bind("change.dynSiz",d).bind("propertychange.dynSiz",d).bind("input.dynSiz",d).bind("blur.dynSiz",d);return this}var k=$(this).css({resize:"none"}),n=k.height(),j=(function(){var o=["height","width","lineHeight","textDecoration","letterSpacing"],p={};$.each(o,function(q,r){p[r]=k.css(r)});return k.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999,border:0}).css(p).attr("tabIndex","-1").insertBefore(k)})(),h=null,l=parseInt(j.css("line-height"),10),g=function(){j.height(0).val($(this).val()).scrollTop(10000);var p=j.scrollTop()+l;var q=Math.max(p,n)+b.extraSpace,o=$(this).add(j);if(h==q){return}h=q;if(q>=b.limit){$(this).css("overflow-y","auto").height(b.limit);return}$(this).css("overflow-y","hidden");b.onResize.call(this);b.animate&&k.css("display")==="block"?o.stop().animate({height:q},b.animateDuration,b.animateCallback):o.height(q)},m=function(){if(k.val().length==0){k.css("height",c)}};k.unbind(".dynSiz").bind("keyup.dynSiz",g).bind("paste.dynSiz",g).bind("keydown.dynSiz",g).bind("change.dynSiz",g).bind("blur.dynSiz",m);if(k.val().length>0){k.trigger("keyup.dynSiz")}});return this};return""});kola("newt.composer.MultiPicEditor",["jquery.Core","newt.util.StrUtil","newt.composer.PicView","newt.composer.ComboUploader","sohu.anim.Sortable","newt.ca.ca","newt.util.Browser","newt.tipbox.Bubble","newt.cr.crEvent"],function(f,d,a,k,b,g,j,h){function c(){var l=[].slice.call(arguments);this.init.apply(this,l)}c.prototype={constructor:c,init:function(m){this.MAX_SELECT_COUNT=m.MAX_SELECT_COUNT;this.views=[];this.viewMap={};this.config=m;this.isDraging=false;this.isShowing=false;this.isEditing=false;this.isEnableSelect=true;this.editView=null;this.canEditMap={};this.canEditCount=0;this.build(m);this.regEvent();var l=this.getUploaderCfg(m);this.uploader=new k(l);f.cr.event.send("picEditor_created",this);window.dds=this},build:function(l){if(l.MAX_SELECT_COUNT==1){l.title="请选择";l.width=157}else{l.title="最多"+l.MAX_SELECT_COUNT+"张，按ctrl多选";l.width=274}var n=l.anchor;var o=d.format(this.TEMPLETE,l);var m=f(o);this.container=m;f(m).insertAfter(n)},regEvent:function(){var m=this;var n=this.container;var l=n.find('[data-meta="pic-container"]')[0];n.find('[data-meta="close-icon"]').click(function(){CA.q("composer_img_close");m.close(m.config.confirm)});f("[data-meta]",l).live({click:function(q){var p=f(this);var o=m.getPicViewByEl(p);m.onClickView(o,p);q.stopPropagation()},mousedown:function(t){var q=t.target;var s=q.getAttribute("data-meta");if(s&&s=="bg-image"){var r=f(q).parents('[data-meta="pic-view-c"]');var o=r.attr("data-eventdata");var p=m.getPicView(o);if(p){document.links[0].focus();m.onClickView(p,f(q))}}}});f('[data-meta="pic-view-c"]',l).live({mouseenter:function(p){if(m.isDraging){return}var o=m.getPicViewByEl(f(this));m.onMouseEnterView(o,p)},mouseleave:function(p){if(m.isDraging){return}var o=m.getPicViewByEl(f(this));m.onMouseLeaveView(o,p)}});this.dragMgr=new b(f(".cells"),{placeholder:"blank",pickable:'[data-meta="pic-view-c"]',darggableOpt:{handle:'[data-meta="bg-image-c"], [data-meta="loading-cover"]',draggingClass:"dragging"}})},doCancelUpload:function(m){var l=m.id;this.removePicView(l);this.uploader.abort(l)},doRetryUpload:function(l){l.showUpload();try{this.uploader.upload(l.id)}catch(m){}},doDeletePicView:function(m){var l=m.id;this.removePicView(l);this.uploader.deleteFileRecord(l)},doRotate:function(n,r){var m=n.id;var o=this.uploader.getFile(m);var q=this.config.rotateUrl||"/pic/proxy";if(!o){return}var p=("serviceid=32&act=mrotate&name="+encodeURIComponent(o.serverUrl)+"&uid="+UID+"&rdep="+(r=="left"?-90:90)+"&t="+new Date().getTime());var l=function(){n.showFloatIcon(n.ICON_ROTATE_ERROR,function(){n.stopWaiting()})};n.showWaiting();f.ajax({url:q,type:"post",global:false,data:p,dataType:"json",success:function(s){if(s.status==0){var t=s.data;n.setBgImage(t.preview);o.serverUrl=t.smallest;o.sizeInfo=t.extraData;n.stopWaiting()}else{l()}},error:l})},onFileSelect:function(l,t){var p,r,m,v,n=this.uploader;var o,u;var v=this.getPicViews().length;var s=this.MAX_SELECT_COUNT;if(v+t>s){CA.q("composer_img_error_excessamount");var q=this.MAX_SELECT_COUNT==1?"只能上传1张图片！":"对不起，最多只能上传"+this.MAX_SELECT_COUNT+"张图片！";this.showError(q)}for(p=0,r=l.length;p<r;p++){m=l[p];this.addPicView(m);delete m.priviewData;this.uploader.upload(m.id)}if(!this.isShowing){this.open()}},onUploadProgress:function(m,n){var l=this.getPicView(m);if(l){l.setPercent(n)}},onUploadError:function(m,n,o){CA.q("composer_img_error_uploading");var l=this.getPicView(m);if(l){l.showError()}},onUploadSuccess:function(m,o){var l=this.getPicView(m);if(l){if(l.isMouseIn&&!this.isEditing&&!this.isDraging){l.showEdit()}else{l.showComplete()}if(m&&!this.canEditMap.hasOwnProperty(m)){this.canEditMap[m]=null;this.canEditCount+=1}var p=l.hasSetBgImage;if(!p){l.setBgImage(o.data.preview)}}var n=this.config;if(n.onImageUpload){try{n.onImageUpload.call(this,m,o)}catch(q){if(console&&console.log){console.log("onUploadSuccess: error :"+q)}}}},onThumbOk:function(n){if(!n){return}var l=n.id;var m=this.getPicView(l);if(!m.hasSetBgImage){m.setBgImage(n.priviewData)}delete n.priviewData},onDragEnter:function(){if(!this.isShowing){this.open()}var l=this.getPicViews().length;if(l==0){h.close("newMultiPicBubble");this.hideCloseIcon();this.hideAddPicBtn();this.changeEditorWidth(510);this.container.addClass("dropImgH5_defa")}this.container.addClass("dropImgH5")},onDragLeave:function(){var l=this.getPicViews().length;if(l==0){this.close(false)}this.showCloseIcon();this.container.removeClass("dropImgH5 dropImgH5_defa")},onDragDrop:function(q){var m=this.container;this.showCloseIcon();if(!q.enableSelect){var l=this.MAX_SELECT_COUNT==1?"只能上传1张图片！":"对不起，最多只能上传"+this.MAX_SELECT_COUNT+"张图片！";this.showError(l);return}var p=this.getPicViews().length;var o=q.recogFiles;if(p==0&&o.length==0){this.close(false);return}var n=(function(){var r=m.find('[data-meta="add-pic"]');return r.length>0&&r.hasClass("picPlusHid")})();if(n&&this.isEnableSelect){this.showAddPicBtn()}m.removeClass("dropImgH5 dropImgH5_defa")},onUploaderClick:function(m){if(!m){var l=this.MAX_SELECT_COUNT==1?"只能上传1张图片！":"对不起，最多只能上传"+this.MAX_SELECT_COUNT+"张图片！";this.showError(l)}var n=this.config;if(n.onAnchorClick){try{n.onAnchorClick.call(this)}catch(o){if(console&&console.log){console.log("onUploaderClick: error :"+o)}}}},onPicMemoInput:function(l){var m=this.uploader.getFile(l);if(m!=null){this.isEditing=true}},onPicMemoUpdate:function(l,m){var n=this.uploader.getFile(l);if(n!=null){n.memo=m}},onMouseEnterView:function(l,n){if(!l){return}l.isMouseIn=true;var m=(!this.isEditing&&!this.isDraging&&(l.status==l.STATUS_COMPLETE||l.status==l.STATUS_EDIT));if(m){l.showEdit({animate:false})}},onMouseLeaveView:function(l,n){if(!l){return}l.isMouseIn=false;var m=(!this.isEditing&&!this.isDraging&&(l.status==l.STATUS_COMPLETE||l.status==l.STATUS_EDIT));if(m){l.showComplete({animate:false})}},onClickView:function(l,n){var m=this;var o=n.attr("data-meta");if(!l||!o){return}switch(o){case"retry-upload":this.doRetryUpload(l);break;case"cancel-upload":CA.q("composer_img_thumbnail_cancelupload");this.doCancelUpload(l);break;case"delete-pic":CA.q("composer_img_thumbnail_del");this.doDeletePicView(l);break;case"left-Rotate":CA.q("composer_img_thumbnail_turnleft");this.doRotate(l,"left");break;case"right-Rotate":CA.q("composer_img_thumbnail_turnright");this.doRotate(l,"right");break;case"bg-image":if(l.status==l.STATUS_COMPLETE){l.showEdit()}break}},open:function(){this.isShowing=true;if(this.container){f(this.container).removeClass("nodis");f.cr.event.send("tw_editor_dropImg_show",this.container)}var l=this.config;if(l.onOpen instanceof Function){try{l.onOpen()}catch(m){}}},close:function(n){n=n!=undefined?n:true;var m=this;var l=false;var o=function(){var r=m.config;if(r.onClose instanceof Function){try{r.onClose(m,l)}catch(s){}}if(m.uploader){m.uploader.reset()}if(m.container){m.container.addClass("nodis")}var q,p=m.getPicViews();while(p.length>0){m.removePicView(p[0].id,false)}m.isShowing=false;m.isEditing=false;m.isDraging=false;m.isEnableSelect=true;m.editView=null;m.canEditMap={};m.canEditCount=0};if(n&&this.getStatus()!=this.STATUS_NOT_SELECT){tw.notice.confirm({msg:"你确定要关闭吗？关闭后已上传的图片将被清除",subHandle:function(){l=true;o()}})}else{if(!n){l=true}o()}},showError:function(n){var m=this.container;if(!m){return}var l=m.find('[data-meta="error-output"]');if(l.length>0){l.removeClass("nodis").html(n);window.setTimeout(function(){l.addClass("nodis")},5000)}},showAddPicBtn:function(){this.container.find('[data-meta="add-pic"]').removeClass("picPlusHid").fadeIn("slow")},showCloseIcon:function(){this.container.find('[data-meta="close-icon"]').removeClass("nodis")},hideCloseIcon:function(){this.container.find('[data-meta="close-icon"]').addClass("nodis")},hideAddPicBtn:function(){this.container.find('[data-meta="add-pic"]').addClass("picPlusHid")},clearError:function(){var m=this.container;if(!m){return}var l=m.find('[data-meta="error-output"]');if(l.length>0){l.addClass("nodis")}},addPicView:function(s){var q,n,m,l=this.container.find('[data-meta="add-pic"]');var p=this;var o=this.getPicViewCfg(s);q=s.id;n=new a(this,o);m=n.getDom();this.viewMap[q]=n;this.views.push(n);if(this.MAX_SELECT_COUNT!=1){this.changeEditorWidth()}if(this.views.length==this.MAX_SELECT_COUNT){this.disableSelect()}f(m).insertBefore(l);if(this.dragMgr){this.dragMgr.addNewItem(f(m));m.bind({beforeDrag:function(t){CA.q("composer_img_thumbnail_sort");f(m).css("cursor","move");p.isDraging=true},beforeDrop:function(t){f(m).css("cursor","default");p.isDraging=false}})}var o=this.config;if(o.onAddPic instanceof Function){try{o.onAddPic(this)}catch(r){}}return n},removePicView:function(r,s){var n,o,l,q,t=this.views;this.enableSelect();delete this.viewMap[r];for(n=0,o=t.length;n<o;n++){q=t[n];l=q.id;if(l==r){this.views.splice(n,1);q.remove();break}}if(this.MAX_SELECT_COUNT!=1){this.changeEditorWidth()}this.enableSelect();this.clearError();if(r&&this.canEditMap.hasOwnProperty(r)){delete this.canEditMap[r];this.canEditCount-=1}s=s!=undefined?s:true;if(s){var m=this.config;if(m.onDelPic instanceof Function){try{m.onDelPic(this)}catch(p){}}}},changeEditorWidth:function(l){var m=this.getPicViews().length;var n=l||(m>2?510:m>1?392:274);f(this.container).children().width(n+"px")},enableSelect:function(){this.isEnableSelect=true;this.uploader.setEnableSelect(true);this.showAddPicBtn()},disableSelect:function(){this.isEnableSelect=false;this.uploader.setEnableSelect(false);this.hideAddPicBtn()},isShow:function(){return this.isShowing},getEditorDom:function(){return this.container},getEditorClientRect:function(){return this.container.find(".dropD")[0].getBoundingClientRect()},getCanEditItemCount:function(){return this.canEditCount},getPicView:function(l){return this.viewMap[l]},getEditView:function(){return this.editView},getPicViews:function(){return this.views},getPicViewIds:function(){var m=this.container;var l=[];if(m){m.find('[data-meta="pic-view-c"]').each(function(){l.push(f(this).attr("data-eventdata"))})}return l},getUploaderCfg:function(l){var n=CRTWCONFIG.MULTI_PIC_UPLOAD_URL;var m=[{width:43,height:21,el:l.anchor},{width:110,height:110,el:this.container.find('[data-meta="add-pic"]')}];return{handlerScope:this,uploadAnchors:m,dragAnchor:l.dragAnchor,postParams:l.postParams,createThumb:j.supportDataURL(),uploadUrl:(l.uploadUrl||n),MAX_SELECT_COUNT:this.MAX_SELECT_COUNT,maxFileSize:l.maxFileSize||10*1024*1024,fileFilter:l.fileFilter||"jpg, jpeg, png, gif, bmp, JPG, JPEG, GIF, BMP",onClick:this.onUploaderClick,onError:this.onUploadError,onSelect:this.onFileSelect,onProgress:this.onUploadProgress,onSuccess:this.onUploadSuccess,onThumbOk:this.onThumbOk,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragDrop:this.onDragDrop}},getPicViewCfg:function(l){var m=this;return{id:l.id,name:l.name,priviewData:l.priviewData,handlerScope:this,onMemoUpdate:this.onPicMemoUpdate,onMemoInput:this.onPicMemoInput,onMemoInputEnd:function(){m.isEditing=false},onBeforeEdit:function(n){var o=m.editView;if(o&&o!=n){o.showComplete()}m.editView=n}}},getPicViewByEl:function(n){var o=n.attr("data-meta");var l=(o=="pic-view-c")?n.attr("data-eventdata"):n.parents('[data-meta="pic-view-c"]').attr("data-eventdata");var m=this.getPicView(l);return m},getValue:function(){var p,t,B,n,A,v,w,z,l,C,o,u=[],q=this.uploader,r=this.getPicViewIds();for(p=0,t=r.length;p<t;p++){n=q.getFile(r[p]);if(n.status!=q.FILE_UPLOAD_SUCCESS){continue}B=[];if(n.serverUrl){B.push('"url":"'+n.serverUrl+'"')}if(n.memo){A=n.memo.replace(/"/g,"“").replace(/'/g,"’");B.push('"ps":"'+A+'"')}if(n.sizeInfo){w=[];v=n.sizeInfo;o=v.smallest;C=v.small;l=v.middle;z=v.big;w.push('"smallest":{"w":'+o.w+', "h":'+o.h+', "size":'+o.size+"}");w.push('"small":{"w":'+C.w+', "h":'+C.h+', "size":'+C.size+"}");w.push('"middle":{"w":'+l.w+', "h":'+l.h+', "size":'+l.size+"}");w.push('"big":{"w":'+z.w+', "h":'+z.h+', "size":'+z.size+"}");B.push('"extraData":{'+w.join(",")+"}")}if(B.length>0){u.push("{"+B.join(",")+"}")}}return u.length>0?"["+u.join(",")+"]":""},getStatus:function(){return this.uploader.getStatus()},STATUS_NOT_SELECT:0,STATUS_UPLOADING:1,STATUS_HAS_ERROR:2,STATUS_COMPLETE_ALL:3,TEMPLETE:('<div id="{id}" class="dropDown dropImg dropImg1 nodis"><div class="dropD" style="width:{width}px"><a data-meta="close-icon" class="close" href="javascript:void(0)" title="关闭"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a><i class="sign signArr"><q>◆</q><q class="k2">◇</q><q class="k3">◆</q></i><div data-meta="error-output" class="dropT nodis"></div><div class="dropC"><div class="cells" data-meta="pic-container"><a data-meta="add-pic" class="picPlus" title="{title}" href="javascript:void(0);"><div class="swfuploadbutton" style="display:block; height:100%"></div></a></div></div></div></div>')};return c});kola("newt.util.Tool",["newt.Config"],function(a){return{iNoLogin:function(b){switch(a.GLOBAL_UNLOGIN_BEHAVIOR){case"modal_login":this.globalQuickLogin();break;case"modal_register":this.globalQuickRegister();break;case"modal_emailactive":this.globalQuickEmailActive();break;case"modal_explogin":kola("app.exp.dialog.Register",function(d){d.show()});break;case"modal_sohudomainactive":this.globalQuickActiveSohut();break;case"sohut_home":location.href="http://t.sohu.com/";break;case"model_toggle":var c=this;kola("newt.net.interface.user",function(d){var f=d.getLastDomain();if(f&&f.domainList.length>0){c.globalQuickLogin()}else{c.globalQuickRegister()}});case"model_toggle_rich":var c=this;kola("newt.net.interface.user",function(d){var f=d.getLastDomain();if(f&&f.domainList.length>0){c.globalQuickLogin()}else{c.globalQuickRegister("app.exp.dialog.SRegister")}});case"slient":break;default:a.GLOBAL_UNLOGIN_BEHAVIOR();break}},globalQuickRegister:function(b){b=b||"newt.ui.window.dialog.Register";kola(b,function(c){c.show({globalCalled:true,loginBtnClickEvent:a.GUB_MODAL_REGISTER_TOLOGIN,otherParams:a.GUB_MODAL_REGISTER_OTHERPARAMS,onClose:a.GUB_MODAL_ON_CLOSE,onShow:a.GUB_MODAL_ON_SHOW})})},globalQuickEmailActive:function(){kola("newt.ui.window.dialog.ActiveEmail",function(b){b.show({email:a.GUB_MODAL_EMAILACTIVE_ADDRESS,passportId:a.GUB_MODAL_EMAILACTIVE_PASSPORTID,globalCalled:true,onClose:a.GUB_MODAL_ON_CLOSE,onShow:a.GUB_MODAL_ON_SHOW})})},globalQuickActiveSohut:function(){kola("newt.ui.window.dialog.ActiveSohut",function(b){b.show({passportId:a.GUB_MODAL_EMAILACTIVE_PASSPORTID,globalCalled:true,onClose:a.GUB_MODAL_ON_CLOSE,onShow:a.GUB_MODAL_ON_SHOW})})},globalQuickLogin:function(){kola("newt.ui.window.dialog.Login",function(b){b.show({globalCalled:true,onClose:a.GUB_MODAL_ON_CLOSE,onShow:a.GUB_MODAL_ON_SHOW})})}}});kola("sohu.ctrl.Tips",["jquery.Core","newt.util.Browser"],function(b,d){var c={showFucusAddTips:function(j,g,h,f){this.showBubbleTip(j,g,h,b.extend({bubleClass:"combo",content:"<b>关注</b><q>+1</q>"},f))},showBubbleAt:function(f,j,m){f=f.tagName?f:f[0];if(!f||!j){return}var h=d.isIE6;var n=f.getBoundingClientRect();var o=(h?b("#t-sys").scrollTop():b(document).scrollTop());var l=parseInt(m.xMargin,10)||0;var k=n.left+l;var g=h?n.top:n.top+o;this.showBubbleTip(k,g,j,b.extend({content:"+1",bubbleClass:"combo"},m))},showBubbleTip:function(k,f,h,n){n=n||{};var l=a({content:(n.content||"<b>关注</b><q>+1</q>"),bubleClass:(n.bubbleClass||"combo")});var k=parseInt(k,10),f=parseInt(f,10),m=n.moveTime||500,q=n.fadeTime||500,s=n.onMoveEnd||null,p=n.direction||"v",j=(p.toLowerCase()==="v"?"top":"left"),r=n.onmoveend,g=n.onfadeend;var o=function(){if(r instanceof Function){try{r()}catch(t){}}l.animate({opacity:"-=1"},{duration:q,complete:function(){l.attr("data-in-use","false");if(g instanceof Function){try{g()}catch(u){}}}})};l.css({left:k+"px",top:f+"px",zIndex:100,opacity:"1"}).animate({top:"+="+(j==="top"?h:0)+"px",left:"+="+(j==="left"?h:0)+"px"},{duration:m,queue:false,complete:o})}};function a(g){var f=b('body>[data-mt="bubble-tip"][data-in-use="false"]');var h=g.content;var j=g.bubleClass;if(f.length==0){f=b('<div data-mt="bubble-tip" data-in-use=true" class="'+j+'">'+h+"</div>").appendTo("body");return f}else{f=b(f[0])}f.attr("data-in-use","true").attr("class",j).html(h);return f}return c});kola("newt.util.StrUtil",["kola.lang.String","newt.cr.cr"],function(b){var d={};var a={exec:function(m,l,f,j){var h=null,k,g;m=m.replace(/^\s+/g,"").replace(/\s+$/g,"");k=j.handlers&&j.handlers[m];g=j.args||{};if(k instanceof Function){h=k(l,f,g)}return h},map:function(r,p,g,j){var h=d[r];var f=function(m){if(!m){return""}var k=m.charAt(0);if(k=="'"||k=='"'){return m.substring(1,m.length-1)}return m};if(h==null){var l=/([^,'":\s]+|'.*?'|".*?")\s*:\s*([^,'":\s]+|'.*?'|".*?")/g;var n,o,q;h={};while(n=l.exec(r)){o=f(n[1]);q=f(n[2]);if(o&&q){h[o]=q}}d[r]=h}return h[g]||h["else"]||""},sub:function(h,l,f,g){var n=h.replace(/\s+/g,"").split(",");var o=parseInt(n[0]);var p=n[2]||"...";var j=n.length>1&&n[1]=="w";var m,k;if(j){m=b.SimpinLen(p);k=b.SimpinLen(f)}else{m=p.length;k=f.length}if(k<=o){return f}if(m>=o){return p}return(j?b.cutSimpStr(f,o-m)+p:f.substring(0,o-m)+p)}};var c={trim:(function(){return(String.prototype.trim?function(f){return f.trim()}:function(f){return f.replace(/^\s+/g,"").replace(/\s+$/g,"")})})(),str2map:function(q,g,f){if(!q||typeof q!="string"||q.length==0){return{}}q=this.trim(q);g=g||"&";f=f||"=";if(q.length==0){return{}}var j,l,n,p,h,o,m={};n=q.split(g);for(j=0,l=n.length;j<l;j++){p=n[j].split(f);h=this.trim(p[0]);o=p[1]?this.trim(p[1]):"";m[h]=o}return m},simpleFormat:function(h,j,g){var n=arguments.length;if(arguments.length==1){return h}if(arguments.length>3||typeof arguments[1]!="object"){j=[].slice.call(arguments,1,n-1);g=arguments[n-1]}var m=new RegExp(("\\\\#\\{|#\\{(\\w+)(?:->\\s*(\\w+)\\s*\\(((?:[^)}\"'\\n]*?|\".*?\"|'.*?')*)\\))?\\}"),"gi");var f={};var k={args:j,handlers:g,valCache:f};var l=function(p,v,r,u){var o,s,q;if(p=="\\#{"){return"#{"}if(f.hasOwnProperty(p)){return f[p]}if(v){o=j[v]!=undefined?String(j[v]):"";if(r&&a.hasOwnProperty(r)){try{s=a[r](u,v,o,k)}catch(t){}}q=(s==undefined||s==null)?o:s}else{q=p}f[p]=q;return q};return h.replace(m,l)},format:function(f,h){if(arguments.length==1){return f}if(arguments.length>2||typeof arguments[1]!="object"){h=[].slice.call(arguments,1)}var j=/('\{')|('\}')|(\{\s*(\w+)\s*\})/gi;var g=f.replace(j,function(o,k,p,n,m){if(k){return"{"}if(p){return"}"}if(m){var l=h[m];return l!=undefined?String(l):""}});return g},getPyMatchStr:function(t,n,u,o){var f=(!t||typeof t!="string"||!n||typeof n!="string"||!u||typeof u!="string");if(f){return""}o=o||"-";var m=this.getPyPosiList(t,n,o);var h=new RegExp(("(?:^|\\"+o+")"+u.split("").join("\\"+o+"?")),"i");var q=n.match(h);if(!q){return""}else{q=q[0]}var j=n.indexOf(q);var k=j+q.length;var l,r,g,s=[];for(l=0,r=m.length;l<r;l++){g=m[l];if(g.start>=j&&g.start<k){s.push(g.chr)}}return s.join("")},getPyPosiList:function(r,l,m){var f=(!r||typeof r!="string"||!l||typeof l!="string");if(f){return[]}var k,o,j,g,h,q,n=0,s=0,p=[];m=m||"-";g=l.split(m);for(k=0,o=r.length;k<o;k++){j=r.charAt(k);if(r.charCodeAt(k)>256){h=g[n++].length;q=1}else{h=1;q=0}p.push({chr:j,start:s,end:s+h});s+=h+q}return p},toUTF8Params:function(k,h){var l=[];h=h||[];for(var m in k){var g=false;for(var j=0,f=h.length;j<f;j++){if(h[j]==m){g=true;break}}if(k[m]){l.push(m+"="+((typeof k[m]==="string"&&!g)?$.cr.encodeUTF(k[m]):k[m]))}}return l.join("&")}};return c});kola("newt.lib.excanvas",null,function(){var a=false;if(document.all&&!!document.documentMode){a=true}if(!document.createElement("canvas").getContext&&!a){(function(){var z=Math;var A=z.round;var u=z.sin;var I=z.cos;var p=z.abs;var H=z.sqrt;var b=10;var q=b/2;function l(){return this.context_||(this.context_=new s(this))}var w=Array.prototype.slice;function J(m,K,L){var j=w.call(arguments,2);return function(){return m.apply(K,j.concat(w.call(arguments)))}}var n={init:function(j){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var m=j||document;m.createElement("canvas");m.attachEvent("onreadystatechange",J(this.init_,this,m))}},init_:function(L){if(!L.namespaces.g_vml_){L.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!L.namespaces.g_o_){L.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!L.styleSheets.ex_canvas_){var K=L.createStyleSheet();K.owningElement.id="ex_canvas_";K.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var m=L.getElementsByTagName("canvas");for(var j=0;j<m.length;j++){this.initElement(m[j])}},initElement:function(m){if(!m.getContext){m.getContext=l;m.innerHTML="";m.attachEvent("onpropertychange",G);m.attachEvent("onresize",c);var j=m.attributes;if(j.width&&j.width.specified){m.style.width=j.width.nodeValue+"px"}else{m.width=m.clientWidth}if(j.height&&j.height.specified){m.style.height=j.height.nodeValue+"px"}else{m.height=m.clientHeight}}return m}};function G(m){var j=m.srcElement;switch(m.propertyName){case"width":j.style.width=j.attributes.width.nodeValue+"px";j.getContext().clearRect();break;case"height":j.style.height=j.attributes.height.nodeValue+"px";j.getContext().clearRect();break}}function c(m){var j=m.srcElement;if(j.firstChild){j.firstChild.style.width=j.clientWidth+"px";j.firstChild.style.height=j.clientHeight+"px"}}n.init();var g=[];for(var D=0;D<16;D++){for(var C=0;C<16;C++){g[D*16+C]=D.toString(16)+C.toString(16)}}function t(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(L,K){var m=t();for(var j=0;j<3;j++){for(var O=0;O<3;O++){var M=0;for(var N=0;N<3;N++){M+=L[j][N]*K[N][O]}m[j][O]=M}}return m}function B(m,j){j.fillStyle=m.fillStyle;j.lineCap=m.lineCap;j.lineJoin=m.lineJoin;j.lineWidth=m.lineWidth;j.miterLimit=m.miterLimit;j.shadowBlur=m.shadowBlur;j.shadowColor=m.shadowColor;j.shadowOffsetX=m.shadowOffsetX;j.shadowOffsetY=m.shadowOffsetY;j.strokeStyle=m.strokeStyle;j.globalAlpha=m.globalAlpha;j.arcScaleX_=m.arcScaleX_;j.arcScaleY_=m.arcScaleY_;j.lineScale_=m.lineScale_}function d(m){var M,L=1;m=String(m);if(m.substring(0,3)=="rgb"){var O=m.indexOf("(",3);var j=m.indexOf(")",O+1);var N=m.substring(O+1,j).split(",");M="#";for(var K=0;K<3;K++){M+=g[Number(N[K])]}if(N.length==4&&m.substr(3,1)=="a"){L=N[3]}}else{M=m}return{color:M,alpha:L}}function v(j){switch(j){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function s(m){this.m_=t();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=b*1;this.globalAlpha=1;this.canvas=m;var j=m.ownerDocument.createElement("div");j.style.width=m.clientWidth+"px";j.style.height=m.clientHeight+"px";j.style.overflow="hidden";j.style.position="absolute";m.appendChild(j);this.element_=j;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var o=s.prototype;o.clearRect=function(){this.element_.innerHTML=""};o.beginPath=function(){this.currentPath_=[]};o.moveTo=function(m,j){var K=this.getCoords_(m,j);this.currentPath_.push({type:"moveTo",x:K.x,y:K.y});this.currentX_=K.x;this.currentY_=K.y};o.lineTo=function(m,j){var K=this.getCoords_(m,j);this.currentPath_.push({type:"lineTo",x:K.x,y:K.y});this.currentX_=K.x;this.currentY_=K.y};o.bezierCurveTo=function(K,m,Q,P,O,M){var j=this.getCoords_(O,M);var N=this.getCoords_(K,m);var L=this.getCoords_(Q,P);r(this,N,L,j)};function r(j,L,K,m){j.currentPath_.push({type:"bezierCurveTo",cp1x:L.x,cp1y:L.y,cp2x:K.x,cp2y:K.y,x:m.x,y:m.y});j.currentX_=m.x;j.currentY_=m.y}o.quadraticCurveTo=function(O,K,m,j){var N=this.getCoords_(O,K);var M=this.getCoords_(m,j);var P={x:this.currentX_+2/3*(N.x-this.currentX_),y:this.currentY_+2/3*(N.y-this.currentY_)};var L={x:P.x+(M.x-this.currentX_)/3,y:P.y+(M.y-this.currentY_)/3};r(this,P,L,M)};o.arc=function(R,P,Q,M,m,K){Q*=b;var V=K?"at":"wa";var S=R+I(M)*Q-q;var U=P+u(M)*Q-q;var j=R+I(m)*Q-q;var T=P+u(m)*Q-q;if(S==j&&!K){S+=0.125}var L=this.getCoords_(R,P);var O=this.getCoords_(S,U);var N=this.getCoords_(j,T);this.currentPath_.push({type:V,x:L.x,y:L.y,radius:Q,xStart:O.x,yStart:O.y,xEnd:N.x,yEnd:N.y})};o.rect=function(K,m,j,L){this.moveTo(K,m);this.lineTo(K+j,m);this.lineTo(K+j,m+L);this.lineTo(K,m+L);this.closePath()};o.strokeRect=function(K,m,j,L){var M=this.currentPath_;this.beginPath();this.moveTo(K,m);this.lineTo(K+j,m);this.lineTo(K+j,m+L);this.lineTo(K,m+L);this.closePath();this.stroke();this.currentPath_=M};o.fillRect=function(K,m,j,L){var M=this.currentPath_;this.beginPath();this.moveTo(K,m);this.lineTo(K+j,m);this.lineTo(K+j,m+L);this.lineTo(K,m+L);this.closePath();this.fill();this.currentPath_=M};o.createLinearGradient=function(m,L,j,K){var M=new E("gradient");M.x0_=m;M.y0_=L;M.x1_=j;M.y1_=K;return M};o.createRadialGradient=function(L,N,K,m,M,j){var O=new E("gradientradial");O.x0_=L;O.y0_=N;O.r0_=K;O.x1_=m;O.y1_=M;O.r1_=j;return O};o.drawImage=function(Y,K){var Q,O,S,af,V,T,aa,ah;var R=Y.runtimeStyle.width;var X=Y.runtimeStyle.height;Y.runtimeStyle.width="auto";Y.runtimeStyle.height="auto";var P=Y.width;var ad=Y.height;Y.runtimeStyle.width=R;Y.runtimeStyle.height=X;if(arguments.length==3){Q=arguments[1];O=arguments[2];V=T=0;aa=S=P;ah=af=ad}else{if(arguments.length==5){Q=arguments[1];O=arguments[2];S=arguments[3];af=arguments[4];V=T=0;aa=P;ah=ad}else{if(arguments.length==9){V=arguments[1];T=arguments[2];aa=arguments[3];ah=arguments[4];Q=arguments[5];O=arguments[6];S=arguments[7];af=arguments[8]}else{throw Error("Invalid number of arguments")}}}var ag=this.getCoords_(Q,O);var L=aa/2;var m=ah/2;var ae=[];var j=10;var N=10;ae.push(" <g_vml_:group",' coordsize="',b*j,",",b*N,'"',' coordorigin="0,0"',' style="width:',j,"px;height:",N,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var M=[];M.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",A(ag.x/b),",","Dy=",A(ag.y/b),"");var ac=ag;var ab=this.getCoords_(Q+S,O);var Z=this.getCoords_(Q,O+af);var U=this.getCoords_(Q+S,O+af);ac.x=z.max(ac.x,ab.x,Z.x,U.x);ac.y=z.max(ac.y,ab.y,Z.y,U.y);ae.push("padding:0 ",A(ac.x/b),"px ",A(ac.y/b),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",M.join(""),", sizingmethod='clip');")}else{ae.push("top:",A(ag.y/b),"px;left:",A(ag.x/b),"px;")}ae.push(' ">','<g_vml_:image src="',Y.src,'"',' style="width:',b*S,"px;"," height:",b*af,'px;"',' cropleft="',V/P,'"',' croptop="',T/ad,'"',' cropright="',(P-V-aa)/P,'"',' cropbottom="',(ad-T-ah)/ad,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",ae.join(""))};o.stroke=function(aj){var O=[];var P=false;var av=d(aj?this.fillStyle:this.strokeStyle);var af=av.color;var ap=av.alpha*this.globalAlpha;var L=10;var R=10;O.push("<g_vml_:shape",' filled="',!!aj,'"',' style="position:absolute;width:',L,"px;height:",R,'px;"',' coordorigin="0 0" coordsize="',b*L," ",b*R,'"',' stroked="',!aj,'"',' path="');var Q=false;var au={x:null,y:null};var ab={x:null,y:null};for(var ao=0;ao<this.currentPath_.length;ao++){var an=this.currentPath_[ao];var at;switch(an.type){case"moveTo":at=an;O.push(" m ",A(an.x),",",A(an.y));break;case"lineTo":O.push(" l ",A(an.x),",",A(an.y));break;case"close":O.push(" x ");an=null;break;case"bezierCurveTo":O.push(" c ",A(an.cp1x),",",A(an.cp1y),",",A(an.cp2x),",",A(an.cp2y),",",A(an.x),",",A(an.y));break;case"at":case"wa":O.push(" ",an.type," ",A(an.x-this.arcScaleX_*an.radius),",",A(an.y-this.arcScaleY_*an.radius)," ",A(an.x+this.arcScaleX_*an.radius),",",A(an.y+this.arcScaleY_*an.radius)," ",A(an.xStart),",",A(an.yStart)," ",A(an.xEnd),",",A(an.yEnd));break}if(an){if(au.x==null||an.x<au.x){au.x=an.x}if(ab.x==null||an.x>ab.x){ab.x=an.x}if(au.y==null||an.y<au.y){au.y=an.y}if(ab.y==null||an.y>ab.y){ab.y=an.y}}}O.push(' ">');if(!aj){var aa=this.lineScale_*this.lineWidth;if(aa<1){ap*=aa}O.push("<g_vml_:stroke",' opacity="',ap,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',v(this.lineCap),'"',' weight="',aa,'px"',' color="',af,'" />')}else{if(typeof this.fillStyle=="object"){var S=this.fillStyle;var Y=0;var am={x:0,y:0};var ag=0;var V=1;if(S.type_=="gradient"){var U=S.x0_/this.arcScaleX_;var m=S.y0_/this.arcScaleY_;var T=S.x1_/this.arcScaleX_;var aw=S.y1_/this.arcScaleY_;var ar=this.getCoords_(U,m);var aq=this.getCoords_(T,aw);var N=aq.x-ar.x;var M=aq.y-ar.y;Y=Math.atan2(N,M)*180/Math.PI;if(Y<0){Y+=360}if(Y<0.000001){Y=0}}else{var ar=this.getCoords_(S.x0_,S.y0_);var j=ab.x-au.x;var K=ab.y-au.y;am={x:(ar.x-au.x)/j,y:(ar.y-au.y)/K};j/=this.arcScaleX_*b;K/=this.arcScaleY_*b;var al=z.max(j,K);ag=2*S.r0_/al;V=2*S.r1_/al-ag}var ae=S.colors_;ae.sort(function(ax,W){return ax.offset-W.offset});var Z=ae.length;var ad=ae[0].color;var ac=ae[Z-1].color;var ai=ae[0].alpha*this.globalAlpha;var ah=ae[Z-1].alpha*this.globalAlpha;var ak=[];for(var ao=0;ao<Z;ao++){var X=ae[ao];ak.push(X.offset*V+ag+" "+X.color)}O.push('<g_vml_:fill type="',S.type_,'"',' method="none" focus="100%"',' color="',ad,'"',' color2="',ac,'"',' colors="',ak.join(","),'"',' opacity="',ah,'"',' g_o_:opacity2="',ai,'"',' angle="',Y,'"',' focusposition="',am.x,",",am.y,'" />')}else{O.push('<g_vml_:fill color="',af,'" opacity="',ap,'" />')}}O.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",O.join(""))};o.fill=function(){this.stroke(true)};o.closePath=function(){this.currentPath_.push({type:"close"})};o.getCoords_=function(L,K){var j=this.m_;return{x:b*(L*j[0][0]+K*j[1][0]+j[2][0])-q,y:b*(L*j[0][1]+K*j[1][1]+j[2][1])-q}};o.save=function(){var j={};B(this,j);this.aStack_.push(j);this.mStack_.push(this.m_);this.m_=f(t(),this.m_)};o.restore=function(){B(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function k(K){for(var M=0;M<3;M++){for(var L=0;L<2;L++){if(!isFinite(K[M][L])||isNaN(K[M][L])){return false}}}return true}function F(K,j,L){if(!k(j)){return}K.m_=j;if(L){var M=j[0][0]*j[1][1]-j[0][1]*j[1][0];K.lineScale_=H(p(M))}}o.translate=function(K,m){var j=[[1,0,0],[0,1,0],[K,m,1]];F(this,f(j,this.m_),false)};o.rotate=function(m){var L=I(m);var K=u(m);var j=[[L,K,0],[-K,L,0],[0,0,1]];F(this,f(j,this.m_),false)};o.scale=function(K,m){this.arcScaleX_*=K;this.arcScaleY_*=m;var j=[[K,0,0],[0,m,0],[0,0,1]];F(this,f(j,this.m_),true)};o.transform=function(M,L,O,N,m,j){var K=[[M,L,0],[O,N,0],[m,j,1]];F(this,f(K,this.m_),true)};o.setTransform=function(N,M,P,O,L,K){var j=[[N,M,0],[P,O,0],[L,K,1]];F(this,j,true)};o.clip=function(){};o.arcTo=function(){};o.createPattern=function(){return new h};function E(j){this.type_=j;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}E.prototype.addColorStop=function(m,j){j=d(j);this.colors_.push({offset:m,color:j.color,alpha:j.alpha})};function h(){}window.G_vmlCanvasManager=n;window.CanvasRenderingContext2D=s;window.CanvasGradient=E;window.CanvasPattern=h})()}return""});kola("newt.swf.sohuFlash",null,function(){if(typeof c=="undefined"){var c=new Object()}if(typeof c.ued=="undefined"){c.ued=new Object()}if(typeof c.ued.util=="undefined"){c.ued.util=new Object()}if(typeof c.ued.FlashObjectUtil=="undefined"){c.ued.FlashObjectUtil=new Object()}c.ued.FlashObject=function(l,j,t,m,o,s,r,u,n,f,k){if(!document.createElement||!document.getElementById){return}this.DETECT_KEY=k?k:"detectflash";this.skipDetect=c.ued.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();this.useExpressInstall=r;if(l){this.setAttribute("swf",l)}if(j){this.setAttribute("id",j)}if(t){this.setAttribute("width",t)}if(m){this.setAttribute("height",m)}if(o){this.setAttribute("version",new c.ued.PlayerVersion(o.toString().split(".")))}this.installedVer=c.ued.FlashObjectUtil.getPlayerVersion(this.getAttribute("version"),r);if(s){this.addParam("bgcolor",s)}var g=u?u:"high";this.addParam("quality",g);var p=(n)?n:window.location;this.setAttribute("xiRedirectUrl",p);this.setAttribute("redirectUrl","");if(f){this.setAttribute("redirectUrl",f)}};c.ued.FlashObject.prototype={setAttribute:function(f,g){this.attributes[f]=g},getAttribute:function(f){return this.attributes[f]},addParam:function(f,g){this.params[f]=g},getParams:function(){return this.params},addVariable:function(f,g){this.variables[f]=g},getVariable:function(f){return this.variables[f]},getVariables:function(){return this.variables},createParamTag:function(h,f){var g=document.createElement("param");g.setAttribute("name",h);g.setAttribute("value",f);return g},getVariablePairs:function(){var f=new Array();var g;var h=this.getVariables();for(g in h){f.push(g+"="+h[g])}return f},getFlashHTML:function(){var h="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn")}h='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'"';h+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var j=this.getParams();for(var f in j){h+=[f]+'="'+j[f]+'" '}var g=this.getVariablePairs().join("&");if(g.length>0){h+='flashvars="'+g+'"'}h+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX")}h='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'">';h+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var j=this.getParams();for(var f in j){h+='<param name="'+f+'" value="'+j[f]+'" />'}var g=this.getVariablePairs().join("&");if(g.length>0){h+='<param name="flashvars" value="'+g+'" />'}h+="</object>"}return h},write:function(f){if(this.useExpressInstall){var g=new c.ued.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(g)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}else{this.setAttribute("doExpressInstall",false)}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var h=(typeof f=="string")?document.getElementById(f):f;h.innerHTML=this.getFlashHTML()}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}}};c.ued.FlashObjectUtil.getPlayerVersion=function(m,k){var g=new c.ued.PlayerVersion(0,0,0);if(navigator.plugins&&navigator.mimeTypes.length){var f=navigator.plugins["Shockwave Flash"];if(f&&f.description){g=new c.ued.PlayerVersion(f.description.replace(/([a-z]|[A-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");for(var h=3;j!=null;h++){j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+h);g=new c.ued.PlayerVersion([h,0,0])}}catch(l){}if(m&&g.major>m.major){return g}if(!m||((m.minor!=0||m.rev!=0)&&g.major==m.major)||g.major!=6||k){try{g=new c.ued.PlayerVersion(j.GetVariable("$version").split(" ")[1].split(","))}catch(l){}}}return g};c.ued.PlayerVersion=function(f){this.major=parseInt(f[0])||0;this.minor=parseInt(f[1])||0;this.rev=parseInt(f[2])||0};c.ued.PlayerVersion.prototype.versionIsValid=function(f){if(this.major<f.major){return false}if(this.major>f.major){return true}if(this.minor<f.minor){return false}if(this.minor>f.minor){return true}if(this.rev<f.rev){return false}return true};c.ued.util={getRequestParameter:function(j){var g=document.location.search||document.location.href.hash;if(g){var h=g.indexOf(j+"=");var f=(g.indexOf("&",h)>-1)?g.indexOf("&",h):g.length;if(g.length>1&&h>-1){return g.substring(g.indexOf("=",h)+1,f)}}return""}};if(Array.prototype.push==null){Array.prototype.push=function(f){this[this.length]=f;return this.length}}var d=c.ued.util.getRequestParameter;var b=c.ued.FlashObject;function a(f,h,g,l,j,k){this.$document=f;this.$name=h;this.$expiration=g?new Date((new Date()).getTime()+g*3600000):null;this.$path=l?l:null;this.$domain=j?j:null;this.$secure=k}a.prototype.store=function(){var g="";for(var h in this){if((h.charAt(0)=="$")||((typeof this[h])=="function")){continue}if(g!=""){g+="&"}g+=h+":"+escape(this[h])}var f=this.$name+"="+g;if(this.$expiration){f+="; expires="+this.$expiration.toGMTString()}if(this.$path){f+="; path="+this.$path}if(this.$domain){f+="; domain="+this.$domain}if(this.$secure){f+="; secure"}this.$document.cookie=f};a.prototype.load=function(){var j=this.$document.cookie;if(j==""){return false}var l=j.indexOf(this.$name+"=");if(l==-1){return false}l+=this.$name.length+1;var g=j.indexOf(";",l);if(g==-1){g=j.length}var k=j.substring(l,g);var f=k.split("&");for(var h=0;h<f.length;h++){f[h]=f[h].split(":")}for(var h=0;h<f.length;h++){this[f[h][0]]=unescape(f[h][1])}return true};a.prototype.remove=function(){var f;f=this.$name+"=";if(this.$path){f+="; path="+this.$path}if(this.$domain){f+="; domain="+this.$domain}f+="; expires=Fri, 02-Jan-1970 00:00:00 GMT";this.$document.cookie=f};window.sohuFlash=b;return b});kola("newt.service.Common",["jquery.Core","newt.cr.crEvent"],function(c,b){return{search:function(g){var l="";var k="post";var j="search";var f="/friend/common/search";var h=["uid","key"];a(j,l,f,k,h,g)}};function a(g,q,o,f,n,l){var k,m,h,p,j=[];for(k=0,m=n.length;k<m;k++){h=n[k];if(!l.hasOwnProperty(h)){throw"Common: except param:"+h}}for(h in l){if(l.hasOwnProperty(h)){p=l[h];if(typeof p!="object"&&typeof p!="function"){j.push(h+"="+p)}}}c.ajax({url:o,type:f,dataType:l.dataType||"json",data:j.join("&"),success:function(r){if(!r||(r.status&&r.status!=0)){if(l.error instanceof Function){try{l.error.call(l.scope,r)}catch(s){d("Common."+g+"#error",s)}}return}if(typeof(l.success)=="function"){try{l.success.call(l.scope,r)}catch(s){d("Common."+g+"#success",s)}}if(q&&r.data){b.send(q,r.data)}},error:function(r){if(typeof l.error=="function"){try{l.error.call(l.scope,r)}catch(s){d("Common."+g+"#error",s)}}}})}function d(g,f){if(console&&console.log){console.log(g+": execute error callback error info: "+f)}}});kola("newt.util.MemeryCache",null,function(){function a(){var b=[].slice.call(arguments);this.init.apply(this,b)}a.prototype={init:function(b){b=b||{};var c=parseInt(b.expires,10)||0;var d=parseInt(b.size,10)||0;this._expires=c>this.MIN_EXPIRES?c:0;this._size=(d>=this.MIN_SIZE&&d<=this.DEFAULT_SIZE?d:this.DEFAULT_SIZE);this._count=0;this._datas={};this._keys=[]},setData:function(f,j){var g=this._keys;var c=this._datas;var b,d,h;if(c.hasOwnProperty(f)){this.refreshData(f,j);return}if(this._count==this._size){this.checkExpires();if(this._count==this._size){h=g.shift();this.removeKey(h,0)}}this._count++;g.push(f);c[f]={_t:(this._expires?new Date().getTime():0),_d:j}},getData:function(c){var b=this._datas;if(b.hasOwnProperty(c)){this.checkExpires();if(b[c]){this.refreshData(c);return b[c]._d}else{return null}}else{return null}},removeData:function(c){var b=this.getKeyIdx(c);if(b>-1){this.removeKey(c,b)}},clear:function(){this._keys=[];this._datas={};this._count=0},checkExpires:function(){if(!this._expires){return}var h,l,g,b,m,o,n=this._keys,j=this._datas,c=new Date().getTime(),f=this._expires;for(h=n.length-1;h>=0;h--){g=n[h];b=j[g];o=b._t;if(c-o>f){this.removeKey(g,h)}}},removeKey:function(d,c){var f=this._keys;var b=this._datas;if(b[d]&&f[c]==d){f.splice(c,1);delete b[d];this._count--}},getKeyIdx:function(f){if(typeof Array.indexOf=="function"){return this._keys.indexOf(f)}var d,b,c,g=this._keys;for(d=0,b=g.length;d<b;d++){c=g[d];if(c==f){return d}}return -1},refreshData:function(f,h){var g=this._keys;var c=this._datas;var b,d;if(c.hasOwnProperty(f)){d=c[f];b=this.getKeyIdx(f);if(b>-1){d._t=new Date().getTime();if(h){d._d=h}g.splice(b,1);g.push(f)}}},constructor:a,MIN_SIZE:10,MAX_SIZE:300,DEFAULT_SIZE:20,MIN_EXPIRES:1000};return a});kola("kola.lang.String",null,function(){var a={trim:function(b){var c=/^\s|\s$/g;return b.replace(c,"")},format:function(){if(arguments.length==0){return null}var d=arguments[0];for(var b=1;b<arguments.length;b++){var c=new RegExp("\\{"+(b-1)+"\\}","gm");d=d.replace(c,arguments[b])}return d},SimpinLen:function(h){var g=0,f=0;for(var d=0,b=h.length;d<b;d++){var j=h.charCodeAt(d);if(j>255){f++}else{g++}}return Math.ceil(g/2)+f},findIndex:function(h,g){var f=0;for(var d=0,b=h.length;d<b;d++){var j=h.charCodeAt(d);if(j>255){f++}else{if((d+1)<b){j=h.charCodeAt(d+1);if(j&&j<256){f++;d++}else{f++}}else{f++}}if(f==g){break}}return d+1},cutSimpStr:function(c,b){return c.substring(0,this.findIndex(c,b))}};return a});kola("newt.cr.crLazyImageLoader",["jquery.Core","newt.Config"],function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({loaderHandle:function(f){},lazyWidth:"lazywidth",lazyHeight:"lazyheight",lazyAttr:"lazysrc"},c||{});b.win=CRTWCONFIG.SCROLL_DOM;b.imgs=[];b.timer=0;b.loadHg=$(window).height()*3;$.extend(b,{init:function(){$.merge(b.imgs,b.scan());if(b.imgs.length>0){b.win.bind("scroll",b.check);$(window).bind("resize",b.resizeCheck);b._check()}},_check:function(){var g=b.win.scrollTop(),f=g+b.loadHg;b.imgs=$.grep(b.imgs,function(l,j){var h=$(l);if(!h.data("tw_hasload")){var k=h.data("tw_top");k=k?k:h.offset().top;if(k<f){b.loadImg(h,l);return false}else{h.data("tw_top",k);return true}}else{return false}});if(0==b.imgs.length){b.win.unbind("scroll",b.check).unbind("resize",b.resizeCheck)}},check:function(){if(b.timer>0){clearTimeout(b.timer);b.timer=0}b.timer=setTimeout(b._check,400)},resizeCheck:function(){b.loadHg=b.win.height()*3;b.check()},rescan:function(){b.win.unbind("scroll",b.check);$(window).unbind("resize",b.resizeCheck);b.init()},scan:function(){return $.grep(b.elem.find("img"),function(f,g){f=$(f);if(!f.data("tw_lzy_scan")){f.data("tw_lzy_scan",1);var h=f.attr(b.opts.lazyAttr);if(h){f.data("tw_lzy",h);return true}}return false})},loadImg:function(f,h){var g=f.attr(b.opts.lazyWidth),j=f.attr(b.opts.lazyHeight),k;if(g||j){var l=new Image();$(l).load(function(){$(l).unbind("load");k=f.data("tw_lzy");if(k){h.style.width=isNaN(parseInt(g))?"auto":(parseInt(g)<l.width?parseInt(g):l.width)+"px";h.style.height=isNaN(parseInt(j))?"auto":parseInt(j)+"px";h.src=k;f.data("tw_hasload",1);b.opts.loaderHandle({img:f,src:k})}}).attr("src",f.data("tw_lzy"))}else{k=f.data("tw_lzy");if(k){h.src=k;f.data("tw_hasload",1);b.opts.loaderHandle({img:f,src:k})}}}});b.init()};$.fn.crLazyImageLoader=function(b){return $(this).each(function(){$(this).removeData("crLazyImageLoader").data("crLazyImageLoader",new a(this,b))})};return a});kola("newt.cr.crModalDialog","newt.lib.overlay",function(){var a=function(d,c){var b=this;b.elem=$(d);b.bdy=b.elem.find("div.mwBd");b.options=$.extend({top:"center",left:"center",absolute:false,speed:"normal",closeSpeed:"fast",effect:"default",expose:{color:"transparent",loadSpeed:200,opacity:"transparent"},oneInstance:true,closeOnClick:false,closeOnEsc:false,close:".overlayCanB",api:true},c||{});$.extend(b,{init:function(){b.elem.overlay(b.options)},getElement:function(){return b.elem},getControl:function(){return b.elem.overlay()},show:function(){b.elem.overlay().load()},close:function(){b.elem.overlay().close()},destory:function(){if(b.elem){if(b.elem.data("expose")){b.elem.data("expose").getMask().remove()}b.elem.remove()}},destroy:function(){b.destory()}});b.init()};$.fn.crModalDialog=function(b){return $(this).each(function(){$(this).removeData("crModalDialog").data("crModalDialog",new a(this,b))})};return a});
/*! 
 * jquery.event.drag - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
kola("newt.lib.drag","jquery.Core",function(){$.fn.drag=function(j,d,h){var g=typeof j=="string"?j:"",f=$.isFunction(j)?j:$.isFunction(d)?d:null;if(g.indexOf("drag")!==0){g="drag"+g}h=(j==f?d:h)||{};return f?this.bind(g,h,f):this.trigger(g)};var b=$.event,a=b.special,c=a.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(g){var f=$.data(this,c.datakey),d=g.data||{};f.related+=1;if(!f.live&&g.selector){f.live=true;b.add(this,"draginit."+c.livekey,c.delegate)}$.each(c.defaults,function(h,j){if(d[h]!==undefined){f[h]=d[h]}})},remove:function(){var d=$.data(this,c.datakey);if(d&&d.related){d.related-=1}},setup:function(){if($.data(this,c.datakey)){return}var d=$.extend({related:0},c.defaults);$.data(this,c.datakey,d);b.add(this,"mousedown",c.init,d);if(this.attachEvent){this.attachEvent("ondragstart",c.dontstart)}},teardown:function(){if($.data(this,c.datakey)&&$.data(this,c.datakey).related){return}$.removeData(this,c.datakey);b.remove(this,"mousedown",c.init);b.remove(this,"draginit",c.delegate);c.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",c.dontstart)}},init:function(g){var d=g.data,f;if(d.which>0&&g.which!=d.which){return}if($(g.target).is(d.not)){return}if(d.handle&&!$(g.target).closest(d.handle,g.currentTarget).length){return}d.propagates=1;d.interactions=[c.interaction(this,d)];d.target=g.target;d.pageX=g.pageX;d.pageY=g.pageY;d.dragging=null;f=c.hijack(g,"draginit",d);if(!d.propagates){return}f=c.flatten(f);if(f&&f.length){d.interactions=[];$.each(f,function(){d.interactions.push(c.interaction(this,d))})}d.propagates=d.interactions.length;if(d.drop!==false&&a.drop){a.drop.handler(g,d)}c.textselect(false);b.add(document,"mousemove mouseup",c.handler,d);return false},interaction:function(f,d){return{drag:f,callback:new c.callback(),droppable:[],offset:$(f)[d.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(f){var d=f.data;switch(f.type){case !d.dragging&&"mousemove":if(Math.pow(f.pageX-d.pageX,2)+Math.pow(f.pageY-d.pageY,2)<Math.pow(d.distance,2)){break}f.target=d.target;c.hijack(f,"dragstart",d);if(d.propagates){d.dragging=true}case"mousemove":if(d.dragging){c.hijack(f,"drag",d);if(d.propagates){if(d.drop!==false&&a.drop){a.drop.handler(f,d)}break}f.type="mouseup"}case"mouseup":b.remove(document,"mousemove mouseup",c.handler);if(d.dragging){if(d.drop!==false&&a.drop){a.drop.handler(f,d)}c.hijack(f,"dragend",d)}c.textselect(true);if(d.click===false&&d.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);d.dragging=false}break}},delegate:function(g){var d=[],h,f=$.data(this,"events")||{};$.each(f.live||[],function(j,k){if(k.preType.indexOf("drag")!==0){return}h=$(g.target).closest(k.selector,g.currentTarget)[0];if(!h){return}b.add(h,k.origType+"."+c.livekey,k.origHandler,k.data);if($.inArray(h,d)<0){d.push(h)}});if(!d.length){return false}return $(d).bind("dragend."+c.livekey,function(){b.remove(this,"."+c.livekey)})},hijack:function(f,m,p,n,h){if(!p){return}var o={event:f.originalEvent,type:f.type},k=m.indexOf("drop")?"drag":"drop",r,j=n||0,g,d,q,l=!isNaN(n)?n:p.interactions.length;f.type=m;f.originalEvent=null;p.results=[];do{if(g=p.interactions[j]){if(m!=="dragend"&&g.cancelled){continue}q=c.properties(f,p,g);g.results=[];$(h||g[k]||p.droppable).each(function(t,s){q.target=s;r=s?b.handle.call(s,f,q):null;if(r===false){if(k=="drag"){g.cancelled=true;p.propagates-=1}if(m=="drop"){g[k][t]=null}}else{if(m=="dropinit"){g.droppable.push(c.element(r)||s)}}if(m=="dragstart"){g.proxy=$(c.element(r)||g.drag)[0]}g.results.push(r);delete f.result;if(m!=="dropinit"){return r}});p.results[j]=c.flatten(g.results);if(m=="dropinit"){g.droppable=c.flatten(g.droppable)}if(m=="dragstart"&&!g.cancelled){q.update()}}}while(++j<l);f.type=o.type;f.originalEvent=o.event;return c.flatten(p.results)},properties:function(g,d,f){var h=f.callback;h.drag=f.drag;h.proxy=f.proxy||f.drag;h.startX=d.pageX;h.startY=d.pageY;h.deltaX=g.pageX-d.pageX;h.deltaY=g.pageY-d.pageY;h.originalX=f.offset.left;h.originalY=f.offset.top;h.offsetX=g.pageX-(d.pageX-h.originalX);h.offsetY=g.pageY-(d.pageY-h.originalY);h.drop=c.flatten((f.drop||[]).slice());h.available=c.flatten((f.droppable||[]).slice());return h},element:function(d){if(d&&(d.jquery||d.nodeType==1)){return d}},flatten:function(d){return $.map(d,function(f){return f&&f.jquery?$.makeArray(f):f&&f.length?c.flatten(f):f})},textselect:function(d){$(document)[d?"unbind":"bind"]("selectstart",c.dontstart).attr("unselectable",d?"off":"on").css("MozUserSelect",d?"":"none")},dontstart:function(){return false},callback:function(){}};c.callback.prototype={update:function(){if(a.drop&&this.available.length){$.each(this.available,function(d){a.drop.locate(this,d)})}}};a.draginit=a.dragstart=a.dragend=c});kola("newt.net.NetCommon",["mvc.io.XHR"],function(a){return a});kola("kola.html.Element",["kola.lang.Array","kola.lang.Class","kola.lang.Function","kola.css.Selector","kola.bom.Event","kola.bom.Browser"],function(h,p,g,o,t,a){var b=p.create({__ME:function(u,B){var z=typeof(u);if(z=="object"){if(p.isInstance(u,"kola.html.Element")){return new this(u.elements())}if(u.nodeType===1||u.nodeType===9){return new this([u])}if(u.length&&u.length>0){return new this(u)}}else{if(z=="string"){var w;switch(typeof(B)){case"undefined":B=null;break;case"object":if(p.isInstance(B,"kola.html.Element")){B=B.elements();break}if(B.nodeType===1){B=[B];break}if(!B.length){B=null}break}if(B===null){w=o(u)}else{w=[];for(var A=0,v=B.length;A<v;A++){w=w.concat(o(u,B[A]))}}return w.length>0?new this(w):null}}return null},_init:function(u){this._elements=u},attr:function(u,w){if(typeof(w)=="undefined"){var v=this._elements[0];switch(u){case"class":return v.className;case"style":return v.style.cssText;default:return n(v,u)}}else{h.forEach(this._elements,function(z){switch(u){case"class":z.className=w;break;case"style":z.style.cssText=w;break;default:if(document.all&&u.indexOf("on")==0){if(typeof(w)=="string"){w=new g(w)}z[u]=w}else{z.setAttribute(u,w)}}});return this}},hasAttr:function(u){var v=this._elements[0];return v.hasAttribute?v.hasAttribute(u):false},removeAttr:function(u){h.forEach(this._elements,function(v){v.removeAttribute(u)});return this},prop:function(u,v){if(typeof(v)=="undefined"){return this._elements[0][u]}else{h.forEach(this._elements,function(w){w[u]=v});return this}},hasClass:function(u){if(typeof(u)!="string"||u.length==0){throw new Error("input signal out of range")}var v=this._elements[0].className;return v.length>0&&(" "+v+" ").indexOf(u)!=-1},addClass:function(u){if(typeof(u)!="string"||u.length==0){return this}var v=this;h.forEach(this._elements,function(w){if(!v.constructor(w).hasClass(u)){w.className+=" "+u}});return this},removeClass:function(u){if(typeof(u)!="string"||u.length==0){return this}h.forEach(this._elements,function(w){var z=w.className,v;if(z.length>0&&(v=(z=(" "+z+" ")).indexOf(u))!=-1){w.className=z.split(u).join(" ")}});return this},show:function(u){if(typeof(u)=="string"){this.style("display",u)}else{this.style("display","")}return this},hide:function(){return this.style("display","none")},toggle:function(u){h.forEach(this._elements,function(v){var w=v.style;if(w.display=="none"){w.display=typeof(u)=="string"?u:""}else{w.display="none"}});return this},style:function(v,A){if(typeof(A)=="undefined"){var w=this._elements[0],u=w.style;if(v=="opacity"){var z;if(typeof(z=u.filter)=="string"&&z.length>0){return z.indexOf("opacity=")>=0?parseFloat(z.match(/opacity=([^)]*)/)[1])/100:1}else{return(z=u.opacity)?parseFloat(z):1}}else{return q(w,v)}}else{h.forEach(this._elements,function(C){var B=C.style;if(v=="opacity"){if(typeof(B.filter)=="string"&&B.filter.length>0){B.filter="Alpha(Opacity="+A*100+")"}else{B.opacity=(A==1?"":""+A)}}else{B[v]=A}});return this}},removeStyle:function(u){h.forEach(this._elements,function(v){var w=v.style;if(w.removeProperty){w.removeProperty(u)}else{if(w.removeAttribute){if(u=="opacity"&&typeof(v.style.filter)=="string"){u="filter"}w.removeAttribute(u)}else{w[u]=null}}});return this},pos:function(u){if(typeof(u)=="undefined"){var v=this._elements[0];return{left:v.offsetLeft,top:v.offsetTop}}else{h.forEach(this._elements,function(w){if(!isNaN(u.left)){w.style.left=u.left+"px"}if(!isNaN(u.top)){w.style.top=u.top+"px"}});return this}},clientPos:function(u){if(typeof(u)=="undefined"){var z=r(this._elements[0]),v=document.body,w=document.documentElement;return{left:z.left-Math.max(v.scrollLeft,w.scrollLeft),top:z.top-Math.max(v.scrollTop,w.scrollTop)}}else{h.forEach(this._elements,function(A){A.style.left=u.left+"px";A.style.top=u.top+"px"});return this}},pagePos:function(u){if(typeof(u)=="undefined"){return r(this._elements[0])}else{h.forEach(this._elements,function(v){var A=r(v);if(typeof u.left=="number"){var z=q(v,"left");if(!z){z=0}else{if(typeof(z=parseFloat(z))!="number"){z=0}}v.style.left=(u.left+z-A.left)+"px"}if(typeof u.top=="number"){var w=q(v,"top");if(!w){w=0}else{if(typeof(w=parseFloat(w))!="number"){w=0}}v.style.top=(u.top+w-A.top)+"px"}});return this}},width:function(u){if(typeof(u)=="undefined"){return this._elements[0].offsetWidth}else{h.forEach(this._elements,function(v){v.style.width=u+"px"});return this}},height:function(u){if(typeof(u)=="undefined"){return this._elements[0].offsetHeight}else{h.forEach(this._elements,function(v){v.style.height=u+"px"});return this}},clientWidth:function(u){return this._elements[0].clientWidth},clientHeight:function(){return this._elements[0].clientHeight},scrollWidth:function(u){return this._elements[0].scrollWidth},scrollHeight:function(){return this._elements[0].scrollHeight},html:function(w){var v=this._elements[0],u;if(typeof w=="undefined"){return v.innerHTML}if(navigator.userAgent.indexOf("MSIE")!=-1){u=f(v,w)}else{try{u=this.prop("innerHTML",w)}catch(z){u=f(v,w)}}if(w!=""){s(v)}return u},outer:function(E){var v=this._element;if(typeof(E)=="undefined"){return typeof(E=v.outerHTML)=="string"?E:document.createElement("div").appendChild(v.cloneNode(true)).parentNode.innerHTML}else{j(v,true);var F=v.parentNode,G=[];var I;if(v.outerHTML){var w=v.previousSibling,B=v.nextSibling,C=v.parentNode;v.outerHTML=E;if(w){I=w.nextSibling}else{I=F.childNodes[0]}while(I){if(I==B){break}if(I.nodeType&&I.nodeType==1){G.push(I)}I=I.nextSibling}}else{var u=v.ownerDocument.createRange(),D=u.createContextualFragment(E),H=D.childNodes;for(var z=0,A=H.length;z<A;z++){I=H[z];if(I.nodeType&&I.nodeType==1){G.push(I)}}G.push(F.replaceChild(D,v))}if(G.length>0){s(G[0]);return new this.constructor(G)}else{return null}}},text:function(u){return this.prop(typeof(this._elements[0].innerText)!="undefined"?"innerText":"textContent",u)},append:function(){var u=[];h.forEach(arguments,g.bind((function(C,v,E){var z;if(typeof(E)=="string"){var w=document.createElement("div");w.innerHTML=E;while(w.firstChild){z=k(C,w.firstChild);if(z.nodeType==1){v.push(z)}}}else{if(E.nodeType){E=[E]}for(var D=0,F=E.length;D<F;D++){z=k(C,E[D]);if(z.nodeType==1){v.push(z)}else{if(z instanceof Array){for(var A=0,B=z.length;A<B;A++){v.push(z[A])}}}}}}),this,this._elements[0],u));if(u.length>0){s(u[0]);return new this.constructor(u)}else{return null}},prepend:function(){var u=[],v=this._elements[0],w=v.firstChild||null;h.forEach(arguments,g.bind((function(D,G,B,z){var E;if(typeof(z)=="string"){var F=document.createElement("div");F.innerHTML=z;while(F.firstChild){E=d(D,F.firstChild,G);if(!G){G=E}if(E.nodeType==1){B.push(E)}}}else{if(z.nodeType){z=[z]}for(var C=0,A=z.length;C<A;C++){E=d(D,z[C],G);if(!G){G=E}if(E.nodeType==1){B.push(E)}}}}),this,v,w,u));if(u.length>0){s(u[0]);return new this.constructor(u)}else{return null}},before:function(){var u=[],w=this._elements[0],v=w.parentNode;h.forEach(arguments,g.bind((function(D,G,B,z){var E;if(typeof(z)=="string"){var F=document.createElement("div");F.innerHTML=z;while(F.firstChild){E=d(D,F.firstChild,G);if(!G){G=E}if(E.nodeType==1){B.push(E)}}}else{if(z.nodeType){z=[z]}for(var C=0,A=z.length;C<A;C++){E=d(D,z[C],G);if(!G){G=E}if(E.nodeType==1){B.push(E)}}}}),this,v,w,u));if(u.length>0){s(u[0]);return new this.constructor(u)}else{return null}},after:function(){var u=[],v=this._elements[0],w=v.parentNode,A=v.nextSibling,z=!!A?d:k;h.forEach(arguments,g.bind((function(J,F,D,B,H){var E;if(typeof(H)=="string"){var C=document.createElement("div");C.innerHTML=H;while(C.firstChild){E=D(J,C.firstChild,F);if(E.nodeType==1){B.push(E)}}}else{if(H.nodeType){H=[H]}for(var G=0,I=H.length;G<I;G++){E=D(J,H[G],F);if(E.nodeType==1){B.push(E)}}}}),this,w,A,z,u));if(u.length>0){s(u[0]);return new this.constructor(u)}else{return null}},prev:function(){var v=[],A=this._elements;for(var z=0,u=A.length;z<u;z++){var w=A[z];while(w=w.previousSibling){if(w.nodeType==1){v.push(w);break}}}return v.length>0?new this.constructor(v):null},next:function(){var v=[],A=this._elements;for(var z=0,u=A.length;z<u;z++){var w=A[z];while(w=w.nextSibling){if(w.nodeType==1){v.push(w);break}}}return v.length>0?new this.constructor(v):null},first:function(){var v=[],D=this._elements;for(var A=0,u=D.length;A<u;A++){var C=D[A].childNodes,B=C.length;for(var w=0;w<B;w++){var z=C[w];if(!!z&&z.nodeType==1){v.push(z);break}}}return v.length>0?new this.constructor(v):null},last:function(D){var v=[],u=this._elements;for(var B=0,E=u.length;B<E;B++){var C=u[B].childNodes,w=C.length;for(var z=w-1;z>=0;z--){var A=C[z];if(!!A&&A.nodeType==1){v.push(A);break}}}return v.length>0?new this.constructor(v):null},parent:function(){var w=[],C=this._elements;for(var B=0,v=C.length;B<v;B++){var A=C[B].parentNode;if(!!A){var u=true;for(var z=w.length-1;z>=0;z--){if(w[z]==A){u=false;break}}if(u){w.push(A)}}}return w.length>0?new this.constructor(w):null},children:function(){var v=[],D=this._elements;for(var A=0,u=D.length;A<u;A++){var C=D[A].childNodes,B=C.length;for(var w=0;w<B;w++){var z=C[w];if(!!z&&z.nodeType==1){v.push(z)}}}return v.length>0?new this.constructor(v):null},up:function(u){var w=[],B=this._elements;for(var A=0,v=B.length;A<v;A++){var z=B[A];while((z=z.parentNode)&&(z.nodeType==1)){w.push(z)}}w=o.matches(u,w);return w.length>0?new this.constructor(w):null},upWithMe:function(u){var w=[],B=this._elements;for(var A=0,v=B.length;A<v;A++){var z=B[A];if(z&&z.nodeType==1){w.push(z)}else{break}while(z&&(z=z.parentNode)&&(z.nodeType==1)){w.push(z)}}w=o.matches(u,w);return w.length>0?new this.constructor(w):null},down:function(u){var w=[],B=this._elements;for(var A=0,v=B.length;A<v;A++){var z=B[A];w=w.concat(o(u,z))}return w.length>0?new this.constructor(w):null},downWithMe:function(u){var w=[],B=this._elements;for(var A=0,v=B.length;A<v;A++){var z=B[A];if(z.nodeType==1){w=w.concat(o.matches(u,[z]))}w=w.concat(o(u,z))}return w.length>0?new this.constructor(w):null},elements:function(u){var v=this._elements;if(typeof(u)=="number"){if(u<0){return v[v.length+u]}else{return v[u]}}else{return v}},remove:function(){h.forEach(this._elements,function(u){if(u.parentNode){u.parentNode.removeChild(u)}})},size:function(){return this._elements.length},each:function(w){var z=this._elements;for(var v=0,u=z.length;v<u;v++){w(this.constructor(z[v]),v)}return this},on:function(u,v){h.forEach(this._elements,function(w){t.on(w,u,v)});return this},un:function(u,v){h.forEach(this._elements,function(w){t.un(w,u,v)});return this},onout:function(u,v){h.forEach(this._elements,function(w){t.onout(w,u,v)});return this},unout:function(u,v){h.forEach(this._elements,function(w){t.unout(w,u,v)});return this},contains:function(u){if(!u||!(u=this.constructor(u))){return false}u=u._elements[0];var v=this._elements[0];if(v.contains){return v.contains(u)}else{while(u=u.parentNode){if(u==v){return true}}return false}},click:function(u){h.forEach(this._elements,function(v){t.on(v,"click",u)});return this},unclick:function(u){h.forEach(this._elements,function(v){t.un(v,"click",u)});return this},mouseover:function(u){h.forEach(this._elements,function(v){t.on(v,"mouseover",u)});return this},unmouseover:function(u){h.forEach(this._elements,function(v){t.un(v,"mouseover",u)});return this},mouseout:function(u){h.forEach(this._elements,function(v){t.on(v,"mouseout",u)});return this},unmouseout:function(u){h.forEach(this._elements,function(v){t.un(v,"mouseout",u)});return this},keyup:function(u){h.forEach(this._elements,function(v){t.on(v,"keyup",u)});return this},unkeyup:function(u){h.forEach(this._elements,function(v){t.un(v,"keyup",u)});return this},keydown:function(u){h.forEach(this._elements,function(v){t.on(v,"keydown",u)});return this},unkeydown:function(u){h.forEach(this._elements,function(v){t.un(v,"keydown",u)});return this},keypress:function(u){h.forEach(this._elements,function(v){t.on(v,"keypress",u)});return this},unkeypress:function(u){h.forEach(this._elements,function(v){t.un(v,"keypress",u)});return this}});var n=function(v,u){var w=v.getAttribute(u);if(w==null){w=v[u]}if(document.all&&typeof(w)=="object"&&w!=null){w=v.attributes.getNamedItem(u);return !!w?w.value:null}return w};var k=function(A,C){if(A.tagName.toLowerCase()=="table"&&C.tagName.toLowerCase()=="tr"){if(A.tBodies.length==0){A.appendChild(document.createElement("tbody"))}A=A.tBodies[0]}if(C.nodeType===11){var B=C.childNodes.length;A.appendChild(C);var u=A.childNodes,z=[];for(var v=u.length,w=v-B;w<v;w++){z.push(u[w])}return z}return A.appendChild(C)};var d=function(u,w,v){if(u.tagName.toLowerCase()=="table"&&w.tagName.toLowerCase()=="tr"){if(u.tBodies.length==0){u.appendChild(document.createElement("tbody"))}u=u.tBodies[0]}return u.insertBefore(w,v||u.firstChild)};var m=function(u){return u.replace(/[A-Z]/g,function(v){return"-"+v.toLowerCase()})};var l=function(u){var v=/^body|html$/i;l=function(w){return !v.test(w)};l(u)};var r=function(v){var u=0,A=0,D=document,C=D.documentElement,F=D.body,E=function(G,H){u+=G||0;A+=H||0};if(v.getBoundingClientRect){var w=v.getBoundingClientRect();E(w.left+Math.max(C.scrollLeft,F.scrollLeft)-C.clientLeft,w.top+Math.max(C.scrollTop,F.scrollTop)-C.clientTop)}else{var z=v.offsetParent,B=v.parentNode;E(v.offsetLeft,v.offsetTop);while(z){E(z.offsetLeft,z.offsetTop);z=z.offsetParent}while(B&&B.tagName&&!l.test(B.tagName)){E(-B.scrollLeft,-B.scrollTop);B=B.parentNode}}return{left:u,top:A,x:u,y:A}};var q=function(w,v){if(window.getComputedStyle){return window.getComputedStyle(w,null).getPropertyValue(m(v))}if(document.defaultView&&document.defaultView.getComputedStyle){var u=document.defaultView.getComputedStyle(w,null);if(u){return u.getPropertyValue(m(v))}if(v=="display"){return"none"}}if(w.currentStyle){return w.currentStyle[v]}return w.style[v]};var f=function(A,C){j(A);var u={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]},w=A.tagName.toLowerCase(),z=u[w];if(z){var B,D=document.createElement("div");while(A.firstChild){A.removeChild(A.firstChild)}D.innerHTML=z[1]+C+z[2];for(var v=z[0];v--;){D=D.firstChild}while(B=D.firstChild){k(A,B)}if(w=="select"&&a.render()=="ie"&&a.renderVersion()<10){A.selectedIndex=0}}else{A.innerHTML=C}return A.childNodes};var s=function(u){setTimeout(function(){t.fire(document,"DOMNodeInsertedIntoDocument",{target:u,currentTarget:document})},0)};var c=function(A,w){if(!w){t.un(A)}var u=A.children,z;if(u&&(z=u.length)>0){for(var v=z-1;v>=0;v--){c(u[v])}}};var j=function(z,v){if(!window.ActiveXObject||window.XDomainRequest){j=g.empty;return}if(v){t.un(z)}var u=z.all,A;if(u&&(A=u.length)>0){for(var w=A-1;w>=0;w--){t.un(u[w])}}else{c(z,true)}};b.__PLUGIN_CONFIG={type:"Class"};return b});kola("sohu.data.Model",["kola.net.Ajax","kola.lang.Function","kola.lang.Array","kola.lang.Object"],function(c,a,f,b){var d={_id:0,id:function(){return"_SOHUID_"+(d._id++)}};var g=function(h){this._options=h;var j=this;b.each(this._options.actions,function(l,k){j[l]=a.bind(j._action,j,l)});this._data={};this._dataInfo={}};g.prototype={_action:function(w,D,l){var s=this._options,u=s.defaultActionOption?b.extend(true,b.clone(s.defaultActionOption),s.actions[w]):s.actions[w],C=u.data,B={};var p=s.url+u.url;var q;switch(u.encode=u.encode||"uri"){case"uri":q=function(H){return encodeURIComponent(H)};break;case"escape":q=function(H){return escape(H)};break;default:q=function(H){return H};break}var j=[];if(D){if(u.params){b.each(u.params,function(I,K){var H=D[K],M=typeof(H);if(M=="string"||M=="number"){j.push(K+"="+q(H))}else{if(H&&H.length&&H.each){H.each(function(N){j.push(K+"="+q(N))})}else{if(C){var L=C[K],J=typeof(L);if(J=="string"||J=="number"){j.push(K+"="+q(L))}else{if(J=="function"){L=L();J=typeof(L);if(J=="string"||J=="number"){j.push(K+"="+q(L))}}}}}}})}else{for(var r in D){var o=D[r],A=typeof(o);if(A=="string"||A=="number"){j.push(r+"="+q(o))}else{if(o&&o.length){b.each(o,function(H){j.push(r+"="+q(H))})}else{if(C){var v=C[r],n=typeof(v);if(n=="string"||n=="number"){j.push(r+"="+q(v))}else{if(n=="function"){v=v();n=typeof(v);if(n=="string"||n=="number"){j.push(r+"="+q(v))}}}}}}}}}if(typeof(u.cache)=="boolean"&&u.cache==false){var h=(new Date()).getTime();j.push("ts="+h);p+=(p.indexOf("?")==-1?"?ts=":"&ts=")+h}var G=j.join("&");l=l||{};var z=u.format;B={data:G,method:u.method,format:z||"json",succ:l.succ,fail:l.fail};if(z=="json"){var m={succ:l.succ,fail:l.fail,start:Number(new Date())};B.succ=a.bind(this._jsonSuccess,this,w,m);B.fail=a.bind(this._jsonFailure,this,w,m)}var k=false;if(p.charAt(0)!="/"){var F=document.createElement("a");F.href=p;if(F.hostname!=location.host){k=true}F=null}if(k){var t=d.id();m.cb=t;window[t]=a.bind(this._jsonSuccess,this,w,m);G+=(G.length==0?"":"&")+"cb="+t;var E=document.createElement("script");E.type="text/javascript";E.src=p+(p.indexOf("?")==-1?"?":"&")+G;document.getElementsByTagName("head")[0].appendChild(E)}else{return c.request(p,B)}},_jsonSuccess:function(l,h,j){if(h.cb){window[h.cb]=null}if(j.status==0){var k;k=this["_"+l+"RepData"];if(k){k.call(this,j.data)}k=this._beforeSuccess;if(k){k.call(this,l,j.data)}if(h.succ){h.succ(j.data,j)}}else{if(h.fail){h.fail(j)}}},_jsonFailure:function(k,h,j){if(h.fail){h.fail(j)}},_startCarrierVar:function(o,n,l,k){var h=o.split("."),m=0;var j=window.setInterval(a.bind(function(){if(m++>100){window.clearInterval(j);k.parentNode.removeChild(k);var s={status:504,statusText:"Gateway Timeout"};l.failure(s);return}var q=window;for(var r=0,p=h.length;r<p;r++){if(typeof(q=q[h[r]])=="undefined"){return}}window.clearInterval(j);this._jsonSuccess(n,l,q)},this),100)}};g.action=function(j,m,h){var k={actions:{now:j},url:""};var l=new g(k);l.now(m,h);return l};return g});kola("kola.lang.Function",null,function(){var a={bind:function(b,c){var f=[];for(var g=2,d=arguments.length;g<d;g++){f.push(arguments[g])}return function(){var h=f.concat();for(var k=0,j=arguments.length;k<j;k++){h.push(arguments[k])}return b.apply(c,h)}},bindAfter:function(b,c){var f=[];for(var g=2,d=arguments.length;g<d;g++){f.push(arguments[g])}return function(){var h=f.concat();for(var j=arguments.length-1;j>=0;j--){h.unshift(arguments[j])}return b.apply(c,h)}},empty:function(){},x:function(b){return function(){return b}}};return a});kola("kola.lang.Object",null,function(){var b={extend:function(){var n,f,c,d,k,l,j=arguments[0]||{},h=1,g=arguments.length,m=false;if(typeof j==="boolean"){m=j;j=arguments[1]||{};h=2}if(typeof j!=="object"&&!this.isFunction(j)){j={}}if(g===h){j={};--h}for(;h<g;h++){if((n=arguments[h])!=null){for(f in n){c=j[f];d=n[f];if(j===d){continue}if(m&&d&&(this.isPlainObject(d)||(k=this.isArray(d)))){if(k){k=false;l=c&&this.isArray(c)?c:[]}else{l=c&&this.isPlainObject(c)?c:{}}j[f]=this.extend(m,l,d)}else{if(d!==undefined){j[f]=d}}}}}return j},clone:function(d){var f={};for(var c in d){f[c]=d[c]}return f},each:function(g,l,f){var d,h=0,j=g.length,c=j===undefined||this.isFunction(g);if(f){if(c){for(d in g){if(l.apply(g[d],f)===false){break}}}else{for(;h<j;){if(l.apply(g[h++],f)===false){break}}}}else{if(c){for(d in g){if(l.call(g[d],d,g[d])===false){break}}}else{for(var k=g[0];h<j&&l.call(k,h,k)!==false;k=g[++h]){}}}return g},isFunction:function(c){return this.type(c)==="function"},type:function(c){return c==null?String(c):a[this.toString.call(c)]||"object"},isArray:Array.isArray||function(c){return this.type(c)==="array"},isArray:Array.isArray||function(c){return this.type(c)==="array"},isPlainObject:function(d){if(!d||this.type(d)!=="object"||d.nodeType||this.isWindow(d)){return false}if(d.constructor&&!this.hasOwn.call(d,"constructor")&&!this.hasOwn.call(d.constructor.prototype,"isPrototypeOf")){return false}var c;for(c in d){}return c===undefined||this.hasOwn.call(d,c)},isWindow:function(c){return c&&typeof c==="object"&&"setInterval" in c},toString:Object.prototype.toString,hasOwn:Object.prototype.hasOwnProperty};var a={};b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(d,c){a["[object "+c+"]"]=c.toLowerCase()});return b});kola("newt.cache.MemData",[],function(){function a(){this.memData={};this.dataId=0;this.id=++a.COUNT}a.CREATE_MEMDATA=function(){return new a()};a.COUNT=0;a.prototype.save=function(b,c){switch(arguments.length){case 0:return;case 1:c=b;b="MD"+(++this.dataId)+"@"+new Date().getTime();break}this.memData[b]=c;return b};a.prototype.get=function(b){return this.memData[b]};a.prototype.del=function(b){delete this.memData[b]};a.prototype.getClass=function(){return a};return a.CREATE_MEMDATA()});kola("newt.data.Base64",[],function(){function b(h){var j=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_");var g=new String();for(var k=0;k<h.length;k++){for(var f=0;f<64;f++){if(h.charAt(k)==j[f]){var l=f.toString(2);g+=("000000"+l).substr(l.length);break}}if(f==64){if(k==2){return g.substr(0,8)}else{return g.substr(0,16)}}}return g}function d(g){var f=0;var j=128;for(var h=0;h<8;h++,j=j/2){if(g.charAt(h)=="1"){f+=j}}return String.fromCharCode(f)}function c(g){var j=new Array();var h;var f="";for(h=0;h<g.length;h+=4){f+=b(g.substr(h,4))}for(h=0;h<f.length;h+=8){j+=d(f.substr(h,8))}return j}function a(l){var f,o,p,n,m,g,h,j,k;f=[];n=l.length;o=p=0;while(o<n){m=l.charCodeAt(o++);switch(m>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:f[p++]=l.charAt(o-1);break;case 12:case 13:g=l.charCodeAt(o++);f[p++]=String.fromCharCode(((m&31)<<6)|(g&63));break;case 14:g=l.charCodeAt(o++);h=l.charCodeAt(o++);f[p++]=String.fromCharCode(((m&15)<<12)|((g&63)<<6)|(h&63));break;case 15:switch(m&15){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:g=l.charCodeAt(o++);h=l.charCodeAt(o++);j=l.charCodeAt(o++);k=((m&7)<<18)|((g&63)<<12)|((h&63)<<6)|(j&63)-65536;if(0<=k&&k<=1048575){f[p]=String.fromCharCode(((k>>>10)&1023)|55296,(k&1023)|56320)}else{f[p]="?"}break;case 8:case 9:case 10:case 11:o+=4;f[p]="?";break;case 12:case 13:o+=5;f[p]="?";break}}p++}return f.join("")}return{decodeBase64ToUtf8:function(f){return a(c(f))}}});kola("kola.bom.Cookie",null,function(){var a={get:function(b){var c,d=new RegExp("(^| )"+b+"=([^;]*)(;|$)","gi");if(c=d.exec(unescape(document.cookie))){return(c[2])}return null},set:function(c,f,b,g,d){var j=c+"="+escape(f);if(b){if(b=="never"){b=100*365*24*60}var h=new Date();h.setTime(h.getTime()+b*60*1000);j+="; expires="+h.toGMTString()}if(g){j+="; path="+g}if(d){j+="; domain="+d}document.cookie=j},remove:function(b,d,c){document.cookie=b+"="+((d)?"; path="+d:"")+((c)?"; domain="+c:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}};return a});var hexcase=0;var chrsz=8;var MIN_HTTS_TIMESTAMP=1293156753137;function hex_md5(a){return binl2hex(core_md5(str2binl(a),a.length*chrsz))}function core_md5(q,l){q[l>>5]|=128<<((l)%32);q[(((l+64)>>>9)<<4)+14]=l;var p=1732584193;var o=-271733879;var n=-1732584194;var m=271733878;for(var h=0;h<q.length;h+=16){var k=p;var j=o;var g=n;var f=m;p=md5_ff(p,o,n,m,q[h+0],7,-680876936);m=md5_ff(m,p,o,n,q[h+1],12,-389564586);n=md5_ff(n,m,p,o,q[h+2],17,606105819);o=md5_ff(o,n,m,p,q[h+3],22,-1044525330);p=md5_ff(p,o,n,m,q[h+4],7,-176418897);m=md5_ff(m,p,o,n,q[h+5],12,1200080426);n=md5_ff(n,m,p,o,q[h+6],17,-1473231341);o=md5_ff(o,n,m,p,q[h+7],22,-45705983);p=md5_ff(p,o,n,m,q[h+8],7,1770035416);m=md5_ff(m,p,o,n,q[h+9],12,-1958414417);n=md5_ff(n,m,p,o,q[h+10],17,-42063);o=md5_ff(o,n,m,p,q[h+11],22,-1990404162);p=md5_ff(p,o,n,m,q[h+12],7,1804603682);m=md5_ff(m,p,o,n,q[h+13],12,-40341101);n=md5_ff(n,m,p,o,q[h+14],17,-1502002290);o=md5_ff(o,n,m,p,q[h+15],22,1236535329);p=md5_gg(p,o,n,m,q[h+1],5,-165796510);m=md5_gg(m,p,o,n,q[h+6],9,-1069501632);n=md5_gg(n,m,p,o,q[h+11],14,643717713);o=md5_gg(o,n,m,p,q[h+0],20,-373897302);p=md5_gg(p,o,n,m,q[h+5],5,-701558691);m=md5_gg(m,p,o,n,q[h+10],9,38016083);n=md5_gg(n,m,p,o,q[h+15],14,-660478335);o=md5_gg(o,n,m,p,q[h+4],20,-405537848);p=md5_gg(p,o,n,m,q[h+9],5,568446438);m=md5_gg(m,p,o,n,q[h+14],9,-1019803690);n=md5_gg(n,m,p,o,q[h+3],14,-187363961);o=md5_gg(o,n,m,p,q[h+8],20,1163531501);p=md5_gg(p,o,n,m,q[h+13],5,-1444681467);m=md5_gg(m,p,o,n,q[h+2],9,-51403784);n=md5_gg(n,m,p,o,q[h+7],14,1735328473);o=md5_gg(o,n,m,p,q[h+12],20,-1926607734);p=md5_hh(p,o,n,m,q[h+5],4,-378558);m=md5_hh(m,p,o,n,q[h+8],11,-2022574463);n=md5_hh(n,m,p,o,q[h+11],16,1839030562);o=md5_hh(o,n,m,p,q[h+14],23,-35309556);p=md5_hh(p,o,n,m,q[h+1],4,-1530992060);m=md5_hh(m,p,o,n,q[h+4],11,1272893353);n=md5_hh(n,m,p,o,q[h+7],16,-155497632);o=md5_hh(o,n,m,p,q[h+10],23,-1094730640);p=md5_hh(p,o,n,m,q[h+13],4,681279174);m=md5_hh(m,p,o,n,q[h+0],11,-358537222);n=md5_hh(n,m,p,o,q[h+3],16,-722521979);o=md5_hh(o,n,m,p,q[h+6],23,76029189);p=md5_hh(p,o,n,m,q[h+9],4,-640364487);m=md5_hh(m,p,o,n,q[h+12],11,-421815835);n=md5_hh(n,m,p,o,q[h+15],16,530742520);o=md5_hh(o,n,m,p,q[h+2],23,-995338651);p=md5_ii(p,o,n,m,q[h+0],6,-198630844);m=md5_ii(m,p,o,n,q[h+7],10,1126891415);n=md5_ii(n,m,p,o,q[h+14],15,-1416354905);o=md5_ii(o,n,m,p,q[h+5],21,-57434055);p=md5_ii(p,o,n,m,q[h+12],6,1700485571);m=md5_ii(m,p,o,n,q[h+3],10,-1894986606);n=md5_ii(n,m,p,o,q[h+10],15,-1051523);o=md5_ii(o,n,m,p,q[h+1],21,-2054922799);p=md5_ii(p,o,n,m,q[h+8],6,1873313359);m=md5_ii(m,p,o,n,q[h+15],10,-30611744);n=md5_ii(n,m,p,o,q[h+6],15,-1560198380);o=md5_ii(o,n,m,p,q[h+13],21,1309151649);p=md5_ii(p,o,n,m,q[h+4],6,-145523070);m=md5_ii(m,p,o,n,q[h+11],10,-1120210379);n=md5_ii(n,m,p,o,q[h+2],15,718787259);o=md5_ii(o,n,m,p,q[h+9],21,-343485551);p=safe_add(p,k);o=safe_add(o,j);n=safe_add(n,g);m=safe_add(m,f)}return Array(p,o,n,m)}function md5_cmn(j,f,d,c,h,g){return safe_add(bit_rol(safe_add(safe_add(f,j),safe_add(c,g)),h),d)}function md5_ff(h,g,m,l,f,k,j){return md5_cmn((g&m)|((~g)&l),h,g,f,k,j)}function md5_gg(h,g,m,l,f,k,j){return md5_cmn((g&l)|(m&(~l)),h,g,f,k,j)}function md5_hh(h,g,m,l,f,k,j){return md5_cmn(g^m^l,h,g,f,k,j)}function md5_ii(h,g,m,l,f,k,j){return md5_cmn(m^(g|(~l)),h,g,f,k,j)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))}function binl2hex(c){var b=hexcase?"0123456789ABCDEF":"0123456789abcdef";var d="";for(var a=0;a<c.length*4;a++){d+=b.charAt((c[a>>2]>>((a%4)*8+4))&15)+b.charAt((c[a>>2]>>((a%4)*8))&15)}return d}function str2binl(d){var c=Array();var a=(1<<chrsz)-1;for(var b=0;b<d.length*chrsz;b+=chrsz){c[b>>5]|=(d.charCodeAt(b/chrsz)&a)<<(b%32)}return c}function b64_423(f){var d=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_");var g=new String();for(var c=0;c<f.length;c++){for(var a=0;a<64;a++){if(f.charAt(c)==d[a]){var b=a.toString(2);g+=("000000"+b).substr(b.length);break}}if(a==64){if(c==2){return g.substr(0,8)}else{return g.substr(0,16)}}}return g}function b2i(d){var a=0;var b=128;for(var c=0;c<8;c++,b=b/2){if(d.charAt(c)=="1"){a+=b}}return String.fromCharCode(a)}function b64_decodex(d){var b=new Array();var c;var a="";for(c=0;c<d.length;c+=4){a+=b64_423(d.substr(c,4))}for(c=0;c<a.length;c+=8){b+=b2i(a.substr(c,8))}return b}function utf8to16(m){var f,h,g,k,l,d,b,a,n;f=[];k=m.length;h=g=0;while(h<k){l=m.charCodeAt(h++);switch(l>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:f[g++]=m.charAt(h-1);break;case 12:case 13:d=m.charCodeAt(h++);f[g++]=String.fromCharCode(((l&31)<<6)|(d&63));break;case 14:d=m.charCodeAt(h++);b=m.charCodeAt(h++);f[g++]=String.fromCharCode(((l&15)<<12)|((d&63)<<6)|(b&63));break;case 15:switch(l&15){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d=m.charCodeAt(h++);b=m.charCodeAt(h++);a=m.charCodeAt(h++);n=((l&7)<<18)|((d&63)<<12)|((b&63)<<6)|(a&63)-65536;if(0<=n&&n<=1048575){f[g]=String.fromCharCode(((n>>>10)&1023)|55296,(n&1023)|56320)}else{f[g]="?"}break;case 8:case 9:case 10:case 11:h+=4;f[g]="?";break;case 12:case 13:h+=5;f[g]="?";break}}g++}return f.join("")}function getStringLen(b){var a=b.match(/[^\x00-\xff]/ig);return b.length+(a==null?0:a.length)}function getBrowserType(){var a=0;if(window.ActiveXObject){if(window.XMLHttpRequest&&!window.XDomainRequest){return 5}else{if(window.XDomainRequest){return 6}else{return 1}}}else{if(navigator.userAgent.indexOf("Firefox")>-1){a=2}else{if(typeof(window.opera)=="object"){a=3}else{if(window.MessageEvent&&!document.getBoxObjectFor){a=7}else{if(navigator.appVersion.indexOf("Safari")>=0){a=4}}}}}return a}function checkCookieEnabled(){try{if(navigator.cookieEnabled==false){return false}}catch(a){}return true}Function.prototype.bindFunc=function(b){if(typeof(b)!="object"){return false}var a=this;return function(){return a.apply(b,arguments)}};var login_status="";var logout_status="";var renew_status="";var PassportCardList=[];var PassportSC={version:26,cvsid:"$Id: pp18030.js,v 1.78 2009/10/26 08:22:26 jiangyan Exp $",appid:9999,max_line_length:30,domain:"",cookie:false,email:"",bindDomainSelector:true,autopad:"",autoRedirectUrl:"",loginRedirectUrl:"",logoutRedirectUrl:"",selectorTitle:"请选择您的用户帐号类型",registerUrl:this.loginProtocal+"://passport.sohu.com/web/signup.jsp",recoverUrl:this.loginProtocal+"://passport.sohu.com/web/recover.jsp",postru:"",emailPostfix:false,curDSindex:-1,usePost:0,successCalledFunc:false,curCardIndex:0,oElement:false,rootElement:false,dsElement:false,sElement:false,cElement:false,dsAnchor:false,emailInput:false,passwdInput:false,pcInput:false,loginMsg:false,iElement:false,isSetFocus:true,loginProtocal:"https",http_url:false,eInterval:false,maxIntervalCount:100,intervalCount:0,state:"0000",defualtRemPwd:"",isShowRemPwdMsg:0,campImg:"http://js.sohu.com/passport/images/pic007.gif",campImgAlt:"大本营",campUrl:"http://blog.sohu.com/camp?from=",cardTitle:"上搜狐，知天下",firstDomain:"",defaultApp:"",domainPool:["chinaren.com","sogou.com"],domainList:["uniqname","sohu.com","chinaren.com","sogou.com","vip.sohu.com","17173.com","focus.cn","game.sohu.com","37wanwan.com"],appList:{"1051":"news_say","1017":"pp","1019":"blog","1073":"t","1074":"tv","1000":"mail","1001":"club","1062":"bai","1005":"alumni","10050":"chinaren","1038":"crclub","1039":"group","1021":"music","1010":"say","1042":"cbbs","1028":"focus","1029":"17173","1013":"vip","1035":"rpggame","1044":"pinyin","1022":"relaxgame"},appName:{news_say:"我来说两句",pp:"相册",blog:"博客",t:"微博",tv:"视频",mail:"邮件",club:"社区",bai:"白社会",alumni:"校友录",chinaren:"ChinaRen",crclub:"CR社区",group:"群组",music:"音乐盒",say:"说吧",cbbs:"校友论坛",focus:"焦点房产","17173":"游戏论坛",vip:"vip邮箱",rpggame:"RPG游戏",pinyin:"输入法",relaxgame:"休闲游戏"},appUrl:{news_say:"http://i.sohu.com/scomment/home/all/",pp:"http://pp.sohu.com/",blog:"http://blog.sohu.com/",t:"http://t.sohu.com",tv:"http://tv.sohu.com",mail:"http://mail.sohu.com/",club:"http://club.sohu.com",bai:"http://bai.sohu.com",alumni:"http://class.chinaren.com",chinaren:"",crclub:"http://club.chinaren.com",group:"http://i.chinaren.com/group",say:"http://s.sogou.com",music:"http://mbox.sogou.com/",cbbs:"http://cbbs.chinaren.com",focus:"http://www.focus.cn","17173":"http://bbs.17173.com",vip:"http://vip.sohu.com",rpggame:"http://game.sohu.com",pinyin:"http://pinyin.sogou.com",relaxgame:"http://game.sohu.com/index2.htm"},appPool:false,bottomRow:[],recomServ:[],reverseFirstDomain:false,showEmailInputTip:true,usePostFix:true,gotohref:function(c){var b=document.createElement("a");if(getBrowserType()==1){b.setAttribute("href",c);document.body.appendChild(b);b.click()}else{window.location=c;return}},getDomain:function(){var b=document.domain.split(".");var a=b.length;if(a<=2){return document.domain}return b[a-2]+"."+b[a-1]},getPassportDomain:function(){var a="passport."+this.domain;if(this.domain==""){this.domain=this.getDomain()}if(this.domain in {"focus.cn":"","17173.com":"","37wanwan.com":"","51f.com":""}){a="pass."+this.domain}return a},addCookie:function(b,d,f){if(this.domain==""){this.domain=this.getDomain()}var c=b+"="+escape(d)+"; path=/; domain=."+this.domain+";";if(f>0){var a=new Date();a.setTime(a.getTime()+f*3600*1000);c=c+"expires="+a.toGMTString()+";"}document.cookie=c},addCookie2:function(b,f,g,d){var c=b+"="+f+"; path=/; domain=."+d+";";if(g>0){var a=new Date();a.setTime(a.getTime()+g*3600*1000);c=c+"expires="+a.toGMTString()+";"}document.cookie=c},getCookie:function(a){var f=document.cookie;var c=document.cookie.split("; ");var d=a+"=";for(var b=0;b<c.length;b++){if(c[b].indexOf(d)==0){return c[b].substr(d.length)}}return""},deleteCookie:function(a){if(this.domain==""){this.domain=this.getDomain()}var c=new Date();c.setTime(c.getTime()-100000);var b=this.getCookie(a);document.cookie=a+"="+b+"; expires="+c.toGMTString()+"; path=/; domain=."+this.domain+";"},preventEvent:function(a){a.cancelBubble=true;a.returnValue=false;if(a.preventDefault){a.preventDefault()}if(a.stopPropagation){a.stopPropagation()}},getPosition:function(b,a){var c=0;while(b){c+=b[a];b=b.offsetParent}return c},getTime:function(){var a=new Date();return a.getTime()},strip:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},reportMsg:function(b){var c="";switch(b){case"1":c+="请输入通行证用户名";break;case"2":c+="通行证用户名为邮件地址格式";break;case"3":c+="用户名后缀必须为"+arguments[1];break;case"4":c+="请输入通行证密码";break;case"5":var a=this.strip(this.emailInput.value);if(a.lastIndexOf("@focus.cn")>0){c+="用户名或密码错误!咨询电话:010-58511234"}else{c+="用户名或密码错误"}break;case"6":c+="登录超时，请稍后重试";break;case"7":c+="登录失败，请重试";break;case"8":c+="网络故障，退出失败，请重新退出";break;case"9":c+="登录失败，请稍后重试";break;case"10":c+="暂时不可登录，请稍后重试";break;case"11":c+="浏览器设置有误，请查看帮助修正";break;case"12":c+="服务器故障，请稍候再试";break;default:c+="登录错误，请稍后重试"}this.showMsg(c)},showMsg:function(a){if(!this.loginMsg){return}this.loginMsg.innerHTML=a},cookieHandle:function(){if(!this.cookie){this.parsePassportCookie()}if(this.cookie&&this.cookie.userid!=""){return this.cookie.userid}else{return""}},relationHandle:function(){if(!this.cookie){this.parsePassportCookie()}return this._parserRelation()},_parserRelation:function(){var b=this.cookie.relation;if(b!=null&&b.length>0){var a=b.split(";");for(var g=0;g<a.length;g++){var d=a[g].split(",");var f=d[2].split("#");for(var c=0;c<f.length;c++){if(PassportSC.appid==f[c]){return d[0]}}}}return""},getDisplayName:function(){var b=this.cookieHandle();var a=b.split("@");var d=a[0];var c=/^1\d{10}$/;if(c.test(d)){return d.substring(0,3)+"****"+d.substring(7)}else{return b}},parsePassportCookie:function(){var f=document.cookie.split("; ");for(var d=0;d<f.length;d++){if(f[d].indexOf("ppinf=")==0){var c=f[d].substr(6);break}if(f[d].indexOf("ppinfo=")==0){var c=f[d].substr(7);break}if(f[d].indexOf("passport=")==0){var c=f[d].substr(9);break}}if(d==f.length){this.cookie=false;return}try{var a=unescape(c).split("|");if(a[0]=="1"||a[0]=="2"){var b=utf8to16(b64_decodex(a[3]));this._parsePassportCookie(b);return}}catch(g){}},_parsePassportCookie:function(g){var n;var c;var d;this.cookie=new Object;n=0;c=g.indexOf(":",n);while(c!=-1){var b;var a;var m;b=g.substring(n,c);lenEnd_offset=g.indexOf(":",c+1);if(lenEnd_offset==-1){break}a=parseInt(g.substring(c+1,lenEnd_offset));m=g.substr(lenEnd_offset+1,a);if(g.charAt(lenEnd_offset+1+a)!="|"){break}this.cookie[b]=m;n=lenEnd_offset+2+a;c=g.indexOf(":",n)}relation_userid=this._parserRelation();if(relation_userid!=null&&relation_userid.length>0){this.cookie[b]=relation_userid}try{this.cookie.service=new Object;var j=this.cookie.service;j.mail=0;j.alumni=0;j.chinaren=0;j.blog=0;j.pp=0;j.club=0;j.crclub=0;j.group=0;j.say=0;j.music=0;j.focus=0;j["17173"]=0;j.vip=0;j.rpggame=0;j.pinyin=0;j.relaxgame=0;var h=this.cookie.serviceuse;if(h.charAt(0)==1){j.mail="sohu"}else{if(h.charAt(2)==1){j.mail="sogou"}else{if(this.cookie.userid.indexOf("@chinaren.com")>0){j.mail="chinaren"}}}if(h.charAt(1)==1){j.alumni=1}if(h.charAt(3)==1){j.blog=1}if(h.charAt(4)==1){j.pp=1}if(h.charAt(5)==1){j.club=1}if(h.charAt(7)==1){j.crclub=1}if(h.charAt(8)==1){j.group=1}if(h.charAt(10)==1){j.music=1}if(h.charAt(11)==1||this.cookie.userid.lastIndexOf("@focus.cn")>0){j.focus=1}if(h.charAt(12)==1||this.cookie.userid.indexOf("@17173.com")>0){j["17173"]=1}if(h.charAt(13)==1){j.vip=1}if(h.charAt(14)==1){j.rpggame=1}if(h.charAt(15)==1){j.pinyin=1}if(h.charAt(16)==1){j.relaxgame=1}}catch(f){}},parseAppid:function(){var d=this.appid.toString();var c=0;this.appPool=new Array();for(var b in this.appList){var a=this.appList[b];if(typeof(a)!="string"){continue}if(b==d){this.defaultApp=this.appName[a]}else{if(b=="1028"){this.appPool[c]={app:"focus",name:"北京业主论坛",url:"http://house.focus.cn/group/yezhu.php"};c++;this.appPool[c]={app:"focus",name:"装修论坛",url:"http://home.focus.cn/group/group_forum.php"}}else{this.appPool[c]={app:a,name:this.appName[a],url:this.appUrl[a]}}c++}}},getBottomRow:function(){var a=0;var b=this.max_line_length-getStringLen(this.defaultApp);this.bottomRow[0]=new Array();this.bottomRow[1]=new Array();if(!this.cookie){return}a=this._getBottomRow(this.bottomRow[0],b,0);b=this.max_line_length;a=this._getBottomRow(this.bottomRow[1],b,a)},_getBottomRow:function(m,g,c){var a,d;var k=this.cookie.service;var h=this.appPool;var f=c;var l;for(d=0;f<h.length;f++){a=h[f]["app"];if(typeof(a)!="string"){continue}l=getStringLen(h[f]["name"]);if(g-l<0){break}if("news_say"==a||"pp"==a||"blog"==a||"t"==a||"tv"==a||"mail"==a||"club"==a){g-=(l+2);m[d]=h[f];if(a=="mail"){if(k.mail=="sohu"){m[d]["url"]=this.loginProtocal+"://mail.sohu.com?appid=0001"}else{if(k.mail=="sogou"){m[d]["url"]="http://mail.sogou.com"}else{m[d]["url"]="http://mail.chinaren.com"}}}d++;continue}else{continue}if(typeof(k[a])=="undefined"){continue}if(k[a]!=0){l=getStringLen(h[f]["name"]);if(g-l<0){break}g-=(l+2);m[d]=h[f];if(a=="mail"){if(k.mail=="sohu"){m[d]["url"]=this.loginProtocal+"://mail.sohu.com?appid=0001"}else{if(k.mail=="sogou"){m[d]["url"]=this.loginProtocal+"://mail.sogou.com"}else{m[d]["url"]=this.loginProtocal+"://mail.chinaren.com"}}}d++}else{if(h[f]["name"]=="ChinaRen"){continue}var b=this.recomServ.length;this.recomServ[b]=h[f];if(a=="mail"){this.recomServ[b]["url"]=this.loginProtocal+"://mail.chinaren.com"}}}return f},parseLastDomain:function(l){this.emailPostfix=new Array();var b="",o="";var a="",p="",h=[];var n=document.cookie.split("; ");for(var f=0;f<n.length;f++){if(n[f].indexOf("lastdomain=")==0){try{h=unescape(n[f].substr(11)).split("|");if(h.length==4){var d=h[3];if(d!=null&&d=="1"){this.loginProtocal="http"}}}catch(k){}break}}var c=0;if(h.length>=3){var m=utf8to16(b64_decodex(h[1]));var g=m.split("|");for(var f=0;f<g.length;f++){if(g[f]!=""){this.emailPostfix[c]=g[f];c++}}}if(this.firstDomain!=""){for(var f in l){if(this.firstDomain==l[f]){o=l[f];break}}if(o!=""){this.emailPostfix[c]=o;c++}}if(document.domain.indexOf("game.sohu.com")>=0){b="game.sohu.com";this.emailPostfix[c]=b;c++}this.emailPostfix[c]=this.domain;c++;for(var f in l){if(typeof(l[f])!="string"){continue}if(l[f]!=this.domain&&l[f]!=b&&l[f]!=o){this.emailPostfix[c]=l[f];c++}}},doPost:function(){for(var d=0;d<document.forms.length;d++){if(document.forms[d].name=="loginform"){break}}if(d==document.forms.length){document.location.href=this.loginProtocal+"://passport.sohu.com";return false}var a=getBrowserType();var c=screen.width;document.forms[d].action=this.loginProtocal+"://passport.sohu.com/sso/login_js.jsp?appid="+this.appid+"&ru="+this.postru+"&b="+a+"&w="+c+"&v="+this.version;document.forms[d].submit();return false},doLogin:function(){if(this.eInterval){return}if(arguments[0]){PassportCardList[index].doLogin()}login_status="";this.intervalCount=0;this.sElement.innerHTML="";this.email=this.strip(this.emailInput.value);var c=this.email;var b=this.strip(this.passwdInput.value);var a=0;if(this.pcInput.checked==true){a=1}if(c==""){this.reportMsg("1");this.emailInput.focus();return false}if(this.autopad!=""){var d=c.substr(c.lastIndexOf("@")+1);if(this.autopad.lastIndexOf(d)<0){this.reportMsg("3",this.autopad);this.emailInput.focus();this.passwdInput.value="";return false}}if(b==""){this.reportMsg("4");this.passwdInput.value="";this.passwdInput.focus();return false}if(this.usePost==1){return this.doPost()}this.drawPassportWait("正在登录搜狐通行证，请稍候...");return this.loginHandle(c,b,a,this.sElement,this.loginFailCall.bindFunc(this),this.loginSuccessCall.bindFunc(this))},loginHandle:function(o,h,k,q,j,d){if(typeof(q)!="object"){return false}if(checkCookieEnabled()==false){j();return false}login_status="";var l=getBrowserType();var m=screen.width;if(this.domain==""){this.domain=this.getDomain()}var c=this.getTime();var f=hex_md5(h);try{this.http_url="http://passport.sohu.com/sso/login.jsp?userid="+encodeURIComponent(o)+"&password="+f+"&appid="+this.appid+"&persistentcookie="+k+"&isSLogin=1&s="+c+"&b="+l+"&w="+m+"&pwdtype=1&v="+this.version;if((this.loginProtocal=="https")&&(c>MIN_HTTS_TIMESTAMP)){var a="https://passport.sohu.com/sso/login.jsp?userid="+encodeURIComponent(o)+"&password="+f+"&appid="+this.appid+"&persistentcookie="+k+"&s="+c+"&b="+l+"&w="+m+"&pwdtype=1&v="+this.version}else{var a=this.http_url}}catch(g){this.http_url="http://passport.sohu.com/sso/login.jsp?userid="+o+"&password="+f+"&appid="+this.appid+"&persistentcookie="+k+"&isSLogin=1&s="+c+"&b="+l+"&w="+m+"&pwdtype=1&v="+this.version;if((this.loginProtocal=="https")&&(c>MIN_HTTS_TIMESTAMP)){var a="https://passport.sohu.com/sso/login.jsp?userid="+o+"&password="+f+"&appid="+this.appid+"&persistentcookie="+k+"&s="+c+"&b="+l+"&w="+m+"&pwdtype=1&v="+this.version}else{var a=this.http_url}}if(this.domain!="sohu.com"){a+="&domain="+this.domain}if(this.loginProtocal=="https"){this.state="1100"}else{this.state="2200"}this.sendLog(q,"beginLogin","0");var n=document.createElement("script");n.src=a;n.id="loginele";q.appendChild(n);var p=this;this.eInterval=setInterval(function(){p.loginIntervalProc(j,d,q)},100);return false},sendLog:function(d,f,a){var c=document.createElement("script");var b=getBrowserType();c.src="https://passport.sohu.com/web/cardlog.jsp?desc="+f+"&loginProtocal="+this.loginProtocal+"&userid="+this.email+"&appid="+this.appid+"&browserType="+b+"&status="+login_status+"&count="+this.intervalCount+"&max="+this.maxIntervalCount+"&flag="+a;d.appendChild(c)},loginIntervalProc:function(c,f,g){if(login_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(login_status==""&&this.intervalCount>=this.maxIntervalCount){var a="";if(this.state=="2200"){a="1";this.state="2210"}else{if(this.state=="1200"){this.state="1210";a="3"}}this.sendLog(g,"login timeout"+this.state,a)}if(login_status=="success"){this.addCookie2("pp_login_time",this.loginProtocal+"|"+this.email+"|"+this.appid+"|"+getBrowserType()+"|"+this.intervalCount+"|"+this.state,-1,"sohu.com");if(this.state=="1200"){this.sendLog(g,"login success","2")}}if(login_status!="success"||this.intervalCount>=this.maxIntervalCount){if(this.loginProtocal=="https"&&login_status==""){this.intervalCount=0;this.loginProtocal="http";this.state="1200";if(this.http_url.charAt(4)=="s"){this.http_url="http"+this.http_url.substr(5)}if(this.domain!="sohu.com"){this.http_url+="&domain="+this.domain}var d=document.createElement("script");d.src=this.http_url;g.appendChild(d);var b=this;this.eInterval=setInterval(function(){b.loginIntervalProc(c,f,g)},100)}else{c()}return}if(this.loginRedirectUrl==""){this.autoProcAllDomain("login",g)}else{this.addCookie("crossdomain",this.getTime(),336)}f()},loginFailCall:function(){this.sElement.innerHTML="";this.drawLoginForm();if(this.intervalCount>=this.maxIntervalCount){this.reportMsg("6");this.emailInput.focus()}else{if(login_status=="error3"||login_status=="error2"){this.reportMsg("5");this.passwdInput.focus()}else{if(login_status=="error5"){this.reportMsg("10");this.passwdInput.focus()}else{if(login_status=="error13"){window.location=this.loginProtocal+"://passport.sohu.com/web/remind_activate.jsp";return}else{if(login_status=="error11"){this.reportMsg("12");this.passwdInput.focus()}else{if(checkCookieEnabled()==false){this.reportMsg("11");this.emailInput.focus()}else{this.reportMsg("9");this.passwdInput.focus()}}}}}}},loginSuccessCall:function(){this.parsePassportCookie();if(this.cookie&&this.cookie.userid!=""){this.email="";if(this.loginRedirectUrl!=""){if(this.cookie.service["mail"]!="0"&&(this.appid=="1000"||this.appid=="1014"||this.appid=="1037")){if(this.domain.indexOf(this.cookie.service["mail"])==-1){this.drawLoginForm()}else{PassportSC.gotohref(this.loginRedirectUrl)}}else{if(document.location.href==this.loginRedirectUrl){document.location.reload()}else{PassportSC.gotohref(this.loginRedirectUrl)}}}else{this.getBottomRow();this.drawPassportCard();for(var a=0;a<PassportCardList.length;a++){if(a==this.curCardIndex){continue}PassportCardList[a].parsePassportCookie();PassportCardList[a].getBottomRow();PassportCardList[a].drawPassportCard()}}}else{this.drawLoginForm();this.reportMsg("7")}},doLogout:function(){if(this.eInterval){return}this.intervalCount=0;this.sElement.innerHTML="";if(this.usePost==1){window.location=this.loginProtocal+"://passport.sohu.com/sso/logout_js.jsp?s="+this.getTime()+"&ru="+this.postru}else{this.logoutHandle(this.sElement,this.logoutFailCall.bindFunc(this),this.logoutSuccessCall.bindFunc(this,"dd"))}},logoutHandle:function(g,b,f){if(typeof(g)!="object"){return false}logout_status="";if(this.domain==""){this.domain=this.getDomain()}var h=this.getTime();var d=this.loginProtocal+"://passport.sohu.com/sso/logout.jsp?s="+h+"&appid="+this.appid;if(this.domain!="sohu.com"){d+="&domain="+this.domain}var c=document.createElement("script");c.src=d;g.appendChild(c);var a=this;this.eInterval=setInterval(function(){a.logoutIntervalProc(b,f,g)},100)},logoutIntervalProc:function(a,d,f){if(logout_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(logout_status==""&&this.intervalCount>=this.maxIntervalCount){a();var c=document.createElement("script");var b=getBrowserType();c.src=this.loginProtocal+"://passport.sohu.com/web/cardlog.jsp?desc=logout timeout&loginProtocal="+this.loginProtocal+"&userid="+this.email+"&appid="+this.appid+"&browserType="+b;f.appendChild(c);return}if(logout_status!="success"){a();return}if(this.logoutRedirectUrl==""){this.autoProcAllDomain("logout",f)}else{this.addCookie("crossdomain_logout",this.getTime(),336)}d()},logoutFailCall:function(){this.sElement.innerHTML="";this.reportMsg("8")},logoutSuccessCall:function(c){this.parseLastDomain(this.domainList);this.cookie=false;this.drawLoginForm();for(var a=0;a<PassportCardList.length;a++){if(a==this.curCardIndex){continue}PassportCardList[a].drawLoginForm()}try{logoutApp()}catch(b){}},renewCookie:function(g,b,f){if(typeof(g)!="object"){return false}if(this.domain==""){this.domain=this.getDomain()}var h=this.getTime();var d=this.loginProtocal+"://passport.sohu.com/sso/renew.jsp?s="+h;if(this.domain!="sohu.com"){d+="&domain="+this.domain}var c=document.createElement("script");c.src=d;g.appendChild(c);var a=this;this.eInterval=setInterval(function(){a.renewIntervalProc(b,f,g)},100);return false},renewIntervalProc:function(a,b,c){if(renew_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(renew_status!="success"||this.intervalCount>=this.maxIntervalCount){try{a()}catch(d){}return}this.autoProcAllDomain("renew",c);try{b()}catch(d){}},autoProcAllDomain:function(d,c){var a=this.crossDomainIframeUrl(d);if(a){var b=document.createElement("iframe");b.src=a;b.style.width="0";b.style.height="0";c.appendChild(b)}},doCrossDomainCookie:function(g,f){if(typeof(g)!="object"){return}var b="crossdomain";if(f=="logout"){b="crossdomain_logout"}var c=this.getCookie(b);if(c==""||c=="0"){return}if(this.domain==""){this.domain=this.getDomain()}var a=this.crossDomainIframeUrl(f);if(a){var d=document.createElement("iframe");d.src=a;d.style.width="0";d.style.height="0";g.appendChild(d);this.deleteCookie(b)}},crossDomainUrl:function(c,b){var d=this.getTime();var a=this.loginProtocal+"://passport.sohu.com/sso/crossdomain.jsp?s="+d+"&action="+c+"&domain="+b;return a},crossDomainIframeUrl:function(b){var a=this.loginProtocal+"://"+this.getPassportDomain()+"/sso/crossdomain_all.jsp?action="+b;return a},setDomainCookie:function(g,f,d,b){login_status="";crossdomain_status="";var c=this.crossDomainUrl("login",f);if(c){newScript=document.createElement("script");newScript.src=c;g.appendChild(newScript)}var a=this;this.eInterval=setInterval(function(){a.setCookieIntervalProc(g,d,b)},100)},setCookieIntervalProc:function(c,b,a){if(crossdomain_status!=""){clearInterval(this.eInterval);this.eInterval=false;a();return}if(login_status==""&&this.intervalCount<this.maxIntervalCount){this.intervalCount++;return}clearInterval(this.eInterval);this.eInterval=false;if(login_status!="success"||this.intervalCount>=this.maxIntervalCount){a();return}b()},downDSindex:function(){if(this.dsAnchor.firstChild==null){return}var a=this.dsAnchor.firstChild.rows;var b=0;for(;b<a.length;b++){if(a[b].firstChild.idx==this.curDSindex){break}}if(b>=a.length-1){this.curDSindex=a[0].firstChild.idx}else{this.curDSindex=a[b+1].firstChild.idx}},upDSindex:function(){if(this.dsAnchor.firstChild==null){return}var a=this.dsAnchor.firstChild.rows;var c=-1;var b=0;for(;b<a.length;b++){if(a[b].firstChild.idx==this.curDSindex){break}c=a[b].firstChild.idx}if(b==a.length){this.curDSindex=a[0].firstChild.idx}else{if(c==-1){this.curDSindex=a[a.length-1].firstChild.idx}else{this.curDSindex=c}}},findDSindex:function(b){try{var a=this.dsAnchor.firstChild.rows;for(var c=0;c<a.length;c++){if(a[c].firstChild.idx==b){return a[c].firstChild}}}catch(d){}return false},clearFocus:function(b){if(typeof(b)!="number"){b=this.curDSindex}try{var a=this.findDSindex(b);a.className="";a.style.fontWeight="normal"}catch(c){}},setFocus:function(b){if(typeof(b)!="number"){b=this.curDSindex}try{var a=this.findDSindex(b);a.className="active"}catch(c){}},fillEmailSelect:function(){var w=this.emailInput.value;var r=/^[\u4e00-\u9fa5,a-zA-Z0-9-_.@]{1,100}$/;if(w==""||!r.test(w)){this.dsElement.style.display="none";return}var z="";var a="";var s=w.lastIndexOf("@");if(s<0){a=w}else{if(s==w.length-1){a=w.substr(0,s)}else{a=w.substr(0,s);z=w.substr(s+1)}}var m=this.getPosition(this.emailInput,"offsetLeft")-this.getPosition(this.cElement,"offsetLeft");if(document.all&&!document.addEventListener){m+=1}this.dsElement.style.marginLeft=m+"px";this.dsElement.style.marginTop=(this.getPosition(this.emailInput,"offsetTop")-this.getPosition(this.cElement,"offsetTop")+this.emailInput.offsetHeight)+"px";this.dsElement.style.zIndex="2000";this.dsElement.style.paddingRight="0";this.dsElement.style.paddingLeft="0";this.dsElement.style.paddingTop="0";this.dsElement.style.paddingBottom="0";this.dsElement.style.backgroundColor="white";this.dsElement.style.display="block";var l=document.createElement("TABLE");l.width="100%";l.cellSpacing=0;l.cellPadding=3;var b=document.createElement("TBODY");l.appendChild(b);var t=0;var d=false;var n=false;var A=-1;var o="",f="";var h=this.emailPostfix;var v=/^1.*$/;if(v.test(w)){if(this.autopad!=""){h=["mobile","qq.com","focus.cn",this.autopad]}else{h=["mobile","qq.com","focus.cn"]}}for(var u=0;u<h.length;u++){var g=h[u];if(typeof(g)!="string"){continue}if(z!=""){if(g.lastIndexOf(z)!=0){continue}}if(g.lastIndexOf("@")>0){tmp_pos=g.lastIndexOf("@");if(this.autopad!=""&&this.autopad.lastIndexOf(g.substring(tmp_pos+1))<0){continue}f=g.substring(0,tmp_pos);if(f.lastIndexOf(a)!=0){continue}if(f==a){o=g.substring(g.lastIndexOf("@")+1)}n=true}else{if(this.autopad!=""&&this.autopad.lastIndexOf(g)<0){continue}}if(g==o){continue}t++;if(A==-1){A=u}if(this.curDSindex==u){d=true}var c=document.createElement("TR");var k=document.createElement("TD");k.nowrap="true";k.align="left";if(g=="mobile"||g=="uniqname"){k.innerHTML=a}else{if(n==false){if(this.usePostFix){k.innerHTML=a+"@"+g}else{k.innerHTML=a}}else{if(this.usePostFix){k.innerHTML=g}else{k.innerHTML=g.substring(0,g.lastIndexOf("@"))}}}k.id="email_postfix_"+u;k.idx=u;var q=this;k.onmouseover=function(){q.clearFocus();q.curDSindex=this.idx;q.setFocus();this.style.cursor="hand"};k.onclick=function(){q.doSelect()};c.appendChild(k);b.appendChild(c);n=false}if(t>0){this.dsAnchor.innerHTML="";this.dsAnchor.appendChild(l);if(d==false){this.curDSindex=A}this.setFocus()}else{this.dsElement.style.display="none";this.curDSindex=-1}},doSelect:function(){this.dsElement.style.display="none";var a=this.findDSindex(this.curDSindex);if(a){var b=a.innerHTML;if(b){this.emailInput.value=b.replace(/&amp;/g,"&")}}if(this.emailInput.value!=""){this.passwdInput.focus()}},checkKeyDown:function(a){a=a||window.event;var b=a.keyCode||a.which||a.charCode;if(b==38||b==40){if(a.shiftKey==1){return}this.clearFocus();if(b==38){this.upDSindex()}else{if(b==40){this.downDSindex()}}this.setFocus()}},checkKeyPress:function(b){b=b||window.event;var c=b.keyCode||b.which||b.charCode;if(c==13){this.preventEvent(b)}else{if(c==38||c==40){if(b.shiftKey==1){return}this.preventEvent(b);this.clearFocus();if(c==38){this.upDSindex()}else{if(c==40){this.downDSindex()}}this.setFocus()}else{if(c==108||c==110||c==111||c==115){var a=this;setTimeout(function(){a.fillEmailSelect()},10)}}}},checkKeyUp:function(a){a=a||window.event;var b=a.keyCode||a.which||a.charCode;this.fillEmailSelect();if(b==13){this.doSelect()}if(getBrowserType()==7||getBrowserType()==4){if(b==38||b==40){if(a.shiftKey==1){return}this.clearFocus();if(b==38){this.upDSindex()}else{if(b==40){this.downDSindex()}}this.setFocus()}}},init:function(a){this.rootElement=a;this.rootElement.innerHTML='<div class="ppselecter" style="position: absolute; display: none;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td style="" class="ppseltit" id="ppseltitId">'+this.selectorTitle+'</td></tr><tr><td height="2" /></tr><tr><td /></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>';if(this.selectorTitle==null||this.selectorTitle.length==0){this.rootElement.innerHTML='<div class="ppselecter" style="position: absolute; display: none;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr></tr><tr><td height="0" /></tr><tr><td /></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>'}this.dsElement=this.rootElement.childNodes[0];this.sElement=this.rootElement.childNodes[1];this.cElement=this.rootElement.childNodes[2];this.dsAnchor=this.dsElement.firstChild.rows[2].firstChild;this.domain=this.getDomain();this.parseLastDomain(this.domainList);this.parseAppid();this.parsePassportCookie();this.getBottomRow();if(this.postru==""){this.postru=document.location.href}},_drawPassportCard:function(){},drawPassportCard:function(){this._drawPassportCard();var b=document.getElementById("ppcontid");b.onclick=this.doClickLink.bindFunc(this);this.$iElement();try{if(this.iElement!=null){this.successCalledFunc(this.iElement)}else{try{this.drawPassportInfo()}catch(a){}}}catch(a){this.drawPassportInfo()}},doClickLink:function(a){var j=window.event?window.event:a;var h=j.srcElement||j.target;var d=h.tagName.toLowerCase();var b=this.cookie.userid;var g=document.location.href;var f="";if(d=="img"){d=h.parentNode.tagName.toLowerCase();h=h.parentNode}if(d=="a"){var c=document.createElement("script");c.src=this.loginProtocal+"://passport.sohu.com/web/golog.jsp?userid="+b+"&fappid="+this.appid+"&furl="+g+"&turl="+h;this.iElement.appendChild(c)}},$iElement:function(){this.iElement=this.$getElementByClassName("listContA")},$getElementByClassName:function(b){var a=this.cElement.getElementsByTagName("div");for(var c=0;c<a.length;c++){if(a[c].className.lastIndexOf(b)==0){return a[c]}}},drawPassportWait:function(a){},drawPassportInfo:function(){},getRanServ:function(){var d=this.recomServ.length;if(d==0){return""}var b=Math.floor(d*(Math.random()));var c='<a href="'+this.recomServ[b]["url"]+'" target="_blank">'+this.recomServ[b]["name"]+"</a>";if(d==1){return c}var a=Math.floor(d*(Math.random()));while(b==a){a=Math.floor(d*(Math.random()))}c+=' | <a href="'+this.recomServ[a]["url"]+'" target="_blank">'+this.recomServ[a]["name"]+"</a>";return c},_drawLoginForm:function(){},drawLoginForm:function(){this._drawLoginForm();var a=this.cElement.getElementsByTagName("input");for(var c=0;c<a.length;c++){if(a[c].name=="email"){this.emailInput=a[c]}if(a[c].name=="password"){this.passwdInput=a[c]}if(a[c].name=="persistentcookie"){this.pcInput=a[c]}}this.loginMsg=this.$getElementByClassName("error");if(this.isShowRemPwdMsg==1){var b=this;this.pcInput.onclick=function(){if(b.pcInput.checked==false){return}var d=window.confirm("浏览器将在两周内保持通行证的登录状态，网吧或公共机房上网者请慎用。您能确认本次操作吗？");if(d==false){b.pcInput.checked=false}}}this.bindSelector();this.autoFillUserId();var b=this;if(this.emailInput.value==""){if(this.isSetFocus){setTimeout(function(){b.emailInput.focus()},50)}}else{if(this.isSetFocus&&this.emailInput.value!="通行证帐号/手机号"){setTimeout(function(){b.passwdInput.focus()},50)}}},autoFillUserId:function(){if(this.showEmailInputTip){this.showEmailInputTip=false;return}var b=this.getCookie("pptmpuserid");if(this.email.length>0){this.emailInput.value=this.email}else{this.emailInput.value=b}if(b.length>0){var a=this;setTimeout(function(){a.deleteCookie("pptmpuserid")},1000)}},bindSelector:function(){if(this.bindDomainSelector){this.curDSindex=-1;try{this.emailInput.addEventListener("mousedown",this.checkMousedown.bindFunc(this),false);this.emailInput.addEventListener("keypress",this.checkKeyPress.bindFunc(this),false);this.emailInput.addEventListener("keyup",this.checkKeyUp.bindFunc(this),false);this.emailInput.addEventListener("blur",this.doSelect.bindFunc(this),false)}catch(a){try{this.emailInput.attachEvent("onmousedown",this.checkMousedown.bindFunc(this));this.emailInput.attachEvent("onkeydown",this.checkKeyDown.bindFunc(this));this.emailInput.attachEvent("onkeypress",this.checkKeyPress.bindFunc(this));this.emailInput.attachEvent("onkeyup",this.checkKeyUp.bindFunc(this));this.emailInput.attachEvent("onblur",this.doSelect.bindFunc(this))}catch(a){}}}},checkMousedown:function(){if(this.emailInput.value=="通行证帐号/手机号"){this.emailInput.value="";this.emailInput.style.color="black";this.emailInput.focus();return}},drawPassport:function(element){if(typeof(element)!="object"){return}if(PassportCardList.length==0){PassportCardList[0]=this}if(!this.successCalledFunc){try{this.successCalledFunc=eval("drawAppInfo")}catch(e){this.successCalledFunc=this.drawPassportInfo}}this.init(element);if(this.cookie&&(this.cookie.userid!=""||this.relationHandle()!="")){if(this.autopad!=""){var userid=this.relationHandle()!=""?this.relationHandle():this.cookie.userid;var at=userid.lastIndexOf("@");if(at>0){if(this.autopad.lastIndexOf(userid.substr(at+1))<0){this.drawLoginForm();return}}}if(this.autoRedirectUrl!=""){PassportSC.gotohref(this.autoRedirectUrl)}else{this.drawPassportCard()}}else{this.drawLoginForm()}},drawPassportNew:function(a,c,f){if(typeof(a)!="object"){return}var b=new Function();b.prototype=this;var g=PassportCardList.length;var d=new b();d.successCalledFunc=f;d.appid=c;d.curCardIndex=g;d.isSetFocus=false;PassportCardList[g]=d;drawPassportNewInit(g,a);return},drawPassportJS:function(){if(!this.oElement||typeof(this.oElement)!="object"){return}var a=this.getCookie("ppinf");var c="http://sso.passport.sohu.com/mirror/"+this.getPassportDomain()+"/"+a;var b=document.createElement("script");b.src=c;ele.appendChild(b)},doCrossDomainIframe:function(b){var a=document.createElement("iframe");a.src=b;a.style.width="0";a.style.height="0";a.id="ifr_crossdomain";PassportSC.oElement.appendChild(a)}};if(typeof(PP_SETCROSSDOMAIN)=="undefined"){var ele=document.getElementsByTagName("head")[0];PassportSC.doCrossDomainCookie(ele,"login");PassportSC.doCrossDomainCookie(ele,"logout")}if(typeof encodeURIComponent=="undefined"){PassportSC.usePost=1}if(getBrowserType()==3&&(screen.height==5000||window.navigator.userAgent.lastIndexOf("Mini")>=0)){PassportSC.usePost=1}kola("newt.component.PassportSC",null,function(){return PassportSC});kola("newt.lib.overlay","newt.lib.jqueryTool",function(){(function(c){c.tools=c.tools||{};c.tools.overlay={version:"1.1.2",addEffect:function(f,g,h){b[f]=[g,h]},conf:{top:"10%",left:"center",absolute:false,speed:"normal",closeSpeed:"fast",effect:"default",close:null,oneInstance:true,closeOnClick:true,closeOnEsc:true,api:false,expose:null,target:null}};var b={};c.tools.overlay.addEffect("default",function(f){this.getOverlay().fadeIn(this.getConf().speed,f)},function(f){this.getOverlay().fadeOut(this.getConf().closeSpeed,f)});var d=[];function a(h,m){var q=this,o=c(this),p=c(window),l,k,j,f=m.expose&&c.tools.expose.version;var g=m.target||h.attr("rel");k=g?c(g):null||h;if(!k.length){throw"Could not find Overlay: "+g}if(h&&h.index(k)==-1){h.click(function(r){q.load(r);return r.preventDefault()})}c.each(m,function(r,s){if(c.isFunction(s)){o.bind(r,s)}});c.extend(q,{_conf:m||{},load:function(w){if(q.isOpened()){return q}var t=b[m.effect];if(!t){throw'Overlay: cannot find effect : "'+m.effect+'"'}if(q._conf.oneInstance){c.each(d,function(){this.close(w)})}w=w||c.Event();w.type="onBeforeLoad";o.trigger(w);if(w.isDefaultPrevented()){return q}j=true;if(f){k.expose().load(w)}var v=m.top;var u=m.left;var r=k.outerWidth({margin:true});var s=k.outerHeight({margin:true});if(typeof v=="string"){v=v=="center"?Math.max((p.height()-s)/2,0):parseInt(v,10)/100*p.height()}if(u=="center"){u=Math.max((p.width()-r)/2,0)}if(!m.absolute){v+=p.scrollTop();u+=p.scrollLeft()}k.css({top:v,left:u,position:"absolute"});w.type="onStart";o.trigger(w);t[0].call(q,function(){if(j){w.type="onLoad";o.trigger(w)}});if(m.closeOnClick){c(document).bind("click.overlay",function(A){if(!q.isOpened()){return}var z=c(A.target);if(z.parents(k).length>1){return}c.each(d,function(){this.close(A)})})}if(m.closeOnEsc){c(document).unbind("keydown.overlay").bind("keydown.overlay",function(z){if(z.keyCode==27){c.each(d,function(){this.close(z)})}})}return q},close:function(s){if(!q.isOpened()){return q}s=s||c.Event();s.type="onBeforeClose";o.trigger(s);if(s.isDefaultPrevented()){return}j=false;b[m.effect][1].call(q,function(){s.type="onClose";o.trigger(s)});var r=true;c.each(d,function(){if(this.isOpened()){r=false}});if(r){c(document).unbind("click.overlay").unbind("keydown.overlay")}return q},getContent:function(){return k},getOverlay:function(){return k},getTrigger:function(){return h},getClosers:function(){return l},isOpened:function(){return j},getConf:function(){return m},bind:function(r,s){o.bind(r,s);return q},unbind:function(r){o.unbind(r);return q}});c.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(r,s){q[s]=function(t){return q.bind(s,t)}});if(f){if(typeof m.expose=="string"){m.expose={color:m.expose}}c.extend(m.expose,{api:true,closeOnClick:m.closeOnClick,closeOnEsc:false});var n=k.expose(m.expose);n.onBeforeClose(function(r){q.close(r)});q.onClose(function(r){n.close(r)})}l=k.find(m.close||".close");if(!l.length&&!m.close){l=c('<div class="close"></div>');k.prepend(l)}l.click(function(r){q.close(r)})}c.fn.overlay=function(f){var g=this.eq(typeof f=="number"?f:0).data("overlay");if(g){c.extend(g._conf,f||{});return g}if(c.isFunction(f)){f={onBeforeLoad:f}}var h=c.extend({},c.tools.overlay.conf);f=c.extend(true,h,f);this.each(function(){g=new a(c(this),f);d.push(g);c(this).data("overlay",g)});return f.api?g:this}})(jQuery)});kola("newt.cr.crCustomSelect",["jquery.Core","kola.lang.Class","kola.lang.Function","newt.cr.crOut","newt.cr.cr"],function(c,b,d){var a=b.create({_init:function(j,g){this.elem=c(j);this.opts=c.extend({options:[],selectedIndex:0,selectedValue:null,change:function(l,k){}},g);if(this.opts.selectedValue!=null){for(var h=0,f=this.opts.options.length;h<f;++h){if(this.opts.options[h].value==this.opts.selectedValue){this.opts.selectedIndex=h;break}}}this._initHtml();this._bindEvents();this.setOptions(this.opts.options)},_initHtml:function(){var f=this;this.inputEl=this.elem.find("input");if(this.inputEl.length==0){this.inputEl=c('<input type="text" value="请选择不良信息的类型" readonly="" />');this.elem.append(this.inputEl)}this.optionsCon=this.elem.find("b.options");if(this.optionsCon.length==0){this.optionsCon=c(['<b class="options noDis">','<b class="option">',"</b>","</b>"].join(""));this.inputEl.after(this.optionsCon)}this.optionEl=this.optionsCon.find("b.option");this.outCtrl=this.optionsCon.crOut({outItems:this.elem,outHandle:function(g){d.bind(f._hide,f)()}}).getCrControl("crOut")},setOptions:function(f){this.selectedIndex=this.opts.selectedIndex;if(c.browser.msie&&c.browser.version=="6.0"){if(this.opts.options.length>10){this.optionEl.addClass("optionMax")}else{this.optionEl.removeClass("optionMax")}}this.optionEl.html("");for(var g=0;g<f.length;g++){if(g==this.opts.selectedIndex){this.inputEl.val(f[g].text)}var h=c('<q title="'+f[g].text+'">'+f[g].text+"</q>");h.data("index",g);this.optionEl.append(h)}},bind:function(f){this.opts.options=f;this.opts.selectedIndex=0;this.setOptions(f)},_bindEvents:function(){var f=this;this.elem.hover(function(){c(this).addClass("select_hover")},function(){c(this).removeClass("select_hover")});this.optionEl.delegate("q","mouseover",function(){f._clearHover();c(this).addClass("hover")});this.optionEl.delegate("q","click",function(h){var g=parseInt(c(this).data("index"));var j=f.selectedIndex;if(g!=j){f.doChange(g)}f.setSelected(g);f._hide();h.stopPropagation()});this.elem.click(function(){if(!f.elem.hasClass("select_act")){f._show()}else{f._hide()}})},_clearHover:function(){this.optionEl.find("q").removeClass("hover")},_hide:function(){this.optionsCon.addClass("noDis");this.elem.removeClass("select_act");this.elem.trigger("crCustomSelectPullUp")},_show:function(){this.elem.addClass("select_act");this._clearHover();this.optionsCon.removeClass("noDis");this.elem.trigger("crCustomSelectPullDown")},setSelected:function(f){var g=this.optionEl.find("q").eq(f);this.inputEl.val(g.html());this.selectedIndex=f},getSelected:function(){return this.opts.options[this.selectedIndex]},setValue:function(j){var h=this.opts.options;for(var g=0,f=h.length;g<f;g++){if(h[g].value==j){this.selectedIndex=g;this.inputEl.val(h[g].text);break}}},getValue:function(){if(this.opts.options.length>0&&this.selectedIndex>-1){return this.opts.options[this.selectedIndex].value}else{return""}},setText:function(j){var h=this.opts.options;for(var g=0,f=h.length;g<f;g++){if(h[g].text==j){this.selectedIndex=g;this.inputEl.val(j);break}}},getText:function(){if(this.opts.options.length>0&&this.selectedIndex>-1){return this.opts.options[this.selectedIndex].text}else{return""}},destructor:function(){this.outCtrl.unbind()},doChange:function(f){var g=this.opts.options[f];this.opts.change(g.text,g.value)}});c.fn.crCustomSelect=function(f){return c(this).each(function(){var g=c(this).data("crCustomSelect");if(!g){c(this).removeData("crCustomSelect").data("crCustomSelect",new a(this,f))}})};return a});kola("kola.lang.Array",null,function(){var c={indexOf:function(n,h,k){if(n.indexOf){return n.indexOf(h,k)}var l=n.length;if(l==0){return -1}var m=typeof(k)=="number"?k:0,f=m>=0?m:Math.max(l+m,0);if(f>=l){return -1}for(var j=f,g=n.length;j<g;j++){if(n[j]===h){return j}}return -1},lastIndexOf:function(m,g,j){if(m.lastIndexOf){return m.lastIndexOf(g,j)}var k=m.length;if(k==0){return -1}var l=typeof(j)=="number"?j:k-1,f=l>=0?l:Math.max(k+l,0);if(f>=k){return -1}for(var h=f;h>=0;h--){if(m[h]===g){return h}}return -1},every:function(h,f,g){return d(h,"every",function(k,j,l){if(f.call(g,k,j,l)==false){return a}})},some:function(h,f,g){return !d(h,"some",function(k,j,l){if(f.call(g,k,j,l)==true){return a}})},forEach:function(h,f,g){d(h,"forEach",function(k,j,l){f.call(g,k,j,l)})},map:function(j,f,g){var h=b(j.length);d(j,"some",function(l,k,m){h[k]=f.call(g,l,k,m)});return h},filter:function(j,f,g){var h=[];d(j,"filter",function(l,k,m){if(f.call(g,l,k,m)==true){h.push(l)}});return h}};var b=[].constructor,a={};var d=function(k,j,f){if(k[j]){return k[j](f)}for(var h=0,g=k.length;h<g;h++){if(k.hasOwnProperty(h.toString())){if(f(k[h],h,k)==a){return false}}}return true};return c});kola("newt.service.UserService",["jquery.Core","newt.cr.crEvent","newt.util.LocalStorage","newt.data.Synchronizer"],function(d,a,c,b){function f(h,g){if(console&&console.log){console.log(h+": execute error callback error info: "+g)}}return{followUser:function(g){kola("newt.service.Follows",function(h){h.follow({params:{uids:(g.uid+"").split(","),type:g.type},success:function(j){if(window.tw&&!tw.sysout(j)){return false}var k=j.data;d.extend(k,g);if(typeof g.success=="function"){try{g.success(k)}catch(l){f("UserService.followUser#success",l)}}},fail:function(j){if(typeof g.error=="function"){g.error(j)}}})})},cancelFollow:function(g){kola("newt.service.Follows",function(h){h.cancelFollow({params:{uid:g.uid},success:function(j){if(window.tw&&!tw.sysout(j)){return false}if(typeof g.success=="function"){g.success(j)}if(j.status==0&&j.data){var k=j.data;d.extend(k,g)}},fail:function(j){if(typeof g.error=="function"){g.error(j)}}})})},setUserMemo:function(h){var g=HOST+"/follow/markfriend";var j=("act=addMemo&friendid="+h.uid+"&name="+d.cr.encodeUTF(h.memo));d.ajax({url:g,type:"post",dataType:"json",data:j,success:function(k){if(typeof h.success=="function"){try{h.success(k)}catch(l){f("UserService.setUserMemo#success",l)}}a.send("UserService:on_update_user_memo",{userId:h.uid,cnt:k.data.cnt,data:k.data})},error:function(k){if(typeof h.error!="function"){return}try{h.error(k)}catch(l){f("UserService.setUserMemo#error handler",l)}}})},getUserFollows:function(g){var h,l,j,k=["time="+new Date().getTime()];for(h in g){l=g[h];j=(l!=undefined&&typeof l!="object"&&typeof l!="function");if(j){k.push(h+"="+l)}}d.ajax({url:HOST+"/friend/common/atFollowings",global:false,type:"get",dataType:"json",timeout:g.timeout||5000,data:k.join("&"),success:function(m){if(!m){g.error.call(g.scope,"no data received!")}if(window.tw&&!tw.sysout(m)){return false}if(typeof(g.success)=="function"){try{g.success.call(g.scope,m)}catch(n){f("UserService.getUserFollows#success",n)}}},error:function(m){if(typeof g.error=="function"){try{g.error.call(g.scope,m)}catch(n){f("UserService.getUserFollows#error",n)}}}})},search:function(g){},getUserRecentAts:function(g){},getUserLocalStorage:function(j,h){if(!j){return null}var g=c.get("__UID__");if(!g||g!=j){c.clear();c.set("__UID__",j)}return c}}});kola("newt.cr.crTextAreaAssistPosition","jquery.Core",function(){var a=function(f,c){var b=this;b.elem=$(f);b.elem.html("");b.ops=$.extend({aimTextArea:"",assistChar:"@",font:'12px/1.67 Tahoma,Helvetica,Arial,"宋体",sans-serif',fontSize:"14px",assistClass:"txtshadow"},c||{});b.eDiv=b.elem.get()[0];b.eTxt=b.ops.aimTextArea.get()[0];b.pd=$("<span></span>").appendTo(b.elem);b.md=$("<span>"+b.ops.assistChar+"</span>").appendTo(b.elem);b.ld=$("<span></span>").appendTo(b.elem);b.k="";b.c1="";b.c2="";var h=false,d=navigator.userAgent,g=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(d);if(g&&(g=parseFloat(RegExp.$1))&&g<8){h=true}var j={"<":"&lt;",">":"&gt;",'"':"&quot;","\\":"&#92;","&":"&amp;","'":"&#039;","\r":"","\n":"<br>"," ":!h?'<span style="white-space:pre-wrap;font-size:'+b.ops.fontSize+";font-family:"+b.ops.font+';"> </span>':'<pre style="overflow:hidden;display:inline;font-size:'+b.ops.fontSize+";font-family:"+b.ops.font+';word-wrap:break-word;"> </pre>'};$.extend(b,{setAssContent:function(n,m){var l=b.elem,o=b.ops.aimTextArea,k="",p=$(o).height();l.height(p).css("marginBottom",-p);if(b.c1!=n){b.c1=n;$(b.pd).html(b.format(n,j))}if(b.c2!=m){b.c2=m;$(b.ld).html(b.format(m,j))}if($.browser.safari){k=("hidden"==o.css("overflowY"))?"hidden":"scroll"}else{k=o.attr("scrollHeight")>o.height()?"auto":"hidden"}l.css("overflowY",k)},format:function(l,m){var k=/<|>|\'|\"|&|\\|\r\n|\n| /gi;return l.replace(k,function(n){return m[n]})},getAssistPos:function(){return $(b.md).offset()}})};$.fn.crTextAreaAssistPosition=function(b){return $(this).each(function(){$(this).removeData("crTextAreaAssistPosition").data("crTextAreaAssistPosition",new a(this,b))})};return a});kola("newt.cr.crTipMenu","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({selectHandle:function(f){}},c||{});b.box=b.elem.find("ul");b.sta=0;$.extend(b,{init:function(){b.box.bind("click",b.click).bind("mouseover",b.mouseover)},setItems:function(j){b.removeAll();j=j||[];var l=b.box;var g=j.length;var k,n,f,m;for(var h=0;h<g;h++){k=j[h];n=k.val;f=k.txt;m=k.tip;$('<li index="'+h+'" val="'+n+'" title="'+m+'">'+k.txt+"</li>").appendTo(l)}b.setHover(0)},removeAll:function(){b.box.html("")},removeItem:function(f){b.box.find("li").eq(f).remove()},setPos:function(g,f){b.elem.css({left:g,top:f})},hoverPre:function(){var g=b.getHoverIndex(),f=b.box.find("li").length;g--;if(g<0){g=f-1}b.setHover(g)},hoverNext:function(){var g=b.getHoverIndex(),f=b.box.find("li").length;g++;if(g>=f){g=0}b.setHover(g)},mouseover:function(h){var g=h.target.tagName.toLowerCase(),j=$(h.target),f=-1;if("li"==g){f=j.attr("index")}else{if("span"==g){f=j.parent().attr("index")}}if(f>=0){b.setHover(f)}},click:function(f){b.mouseover(f);b.select();f.stopPropagation();return false},select:function(){if(b.sta){var f=b.getSelectVal();if(f){b.opts.selectHandle(f)}}setTimeout(b.hide,200)},getSelectVal:function(){var f="";b.box.find("li").each(function(){if($(this).hasClass("hover")){f=$(this).attr("val")}});return f},setHover:function(f){b.box.find("li").removeClass("hover").eq(f).addClass("hover")},getHoverIndex:function(){var f=0;b.box.find("li").each(function(){if($(this).hasClass("hover")){f=parseInt($(this).attr("index"))}});return f},getDisplayStatus:function(){return b.sta?"show":"hide"},show:function(){if(!b.sta&&b.box.find("li").length>0){b.sta=1;b.elem.show()}},hide:function(){if(b.sta){b.sta=0;b.elem.hide()}}});b.init()};$.fn.crTipMenu=function(b){return $(this).each(function(){$(this).removeData("crTipMenu").data("crTipMenu",new a(this,b))})};return a});kola("newt.net.interface.Emote",["jquery.Core","newt.net.NetCommon"],function(b,c){var a={URL:{FIRST_TIP_DONE:"/emote/closeEmoteBubble",GET_EMOTE_RESOURCE:"/emote/getEmoteJSArrayList"},firstTipDone:function(d){d=d?d:{};d._ajax=d._ajax?d._ajax:{};b.extend(d._ajax,{url:a.URL.FIRST_TIP_DONE,data:"",type:"post",dataType:"json"});c.request(d._ajax)},getResource:function(d){d=d?d:{};d._ajax=d._ajax?d._ajax:{};b.extend(d._ajax,{url:a.URL.GET_EMOTE_RESOURCE,data:"",type:"post",dataType:"json"});c.request(d._ajax)}};return a});kola("newt.resource.Resource",null,function(){var a={EMOTE:[{name:"推荐",data:["x122_拥抱","x121_绿领巾","x120_幽灵飘过","x42_南瓜","x46_尖叫","x45_魔法师","x89_蜡烛","x106_萝莉","x107_正太","x103_发芽","x98_心相映","x99_急救箱"]},{name:"默认",data:["x01_微笑","x02_色","x03_呲牙","x60_偷笑","x04_害羞","x08_大哭","x63_哭","x06_酷","x09_发火","x10_怒","x11_疑问","x12_感叹","x05_调皮","x70_眨眼","x13_寒","x15_睡觉","x73_困","x74_不满","x75_噘嘴","x76_听歌","x07_汗","x78_脸红","x79_耳语","x80_嘘","x81_吐","x82_馋","x83_鄙视","x84_讽刺","x85_发呆","x86_晕","x87_被踹","x88_衰","x56_受伤","x57_海盗","x14_闭嘴","x58_佐罗"]},{name:"流行",data:["x101_地球一小时","x100_盐","x89_蜡烛","x50_唤醒","x51_植物人","x46_尖叫","x38_神马","x39_淡定","x37_浮云","x40_给力","x43_飘过","x44_围观","x32_砖","x33_？","x49_金牌","x27_进球","x28_黑哨","x29_黄牌","x30_红牌","x109_一","x110_二","x111_三","x112_四","x113_五","x114_六","x115_七","x116_八","x117_九","x118_十","x97_地震","x119_潘一千","x120_幽灵飘过","x121_绿领巾"]},{name:"经典",data:["x103_发芽","x93_雪","x16_爱","x17_心碎","x18_玫瑰","x19_凋谢","x20_顶","x21_亲","x22_想法","x23_咖啡","x24_西瓜","x25_药","x26_猪","x53_握手","x54_饭","x55_鞭炮","x59_胜利","x61_烟","x62_信","x64_啤酒","x65_钱","x66_礼物","x67_闹钟","x68_电视","x69_便便","x71_月亮","x72_手机","x77_电话","x98_心相映","x99_急救箱","x122_拥抱"]},{name:"节日",data:["x108_吃粽子","x106_萝莉","x107_正太","x105_劳动节","x102_愚人节","x94_蛋糕","x95_内裤","x96_内衣","x91_福","x92_爆竹","x90_圣诞树","x52_火鸡","x47_樱桃","x45_魔法师","x42_南瓜","x41_重阳","x31_粽子","x35_月饼","x48_脱光","x101_地球一小时"]}]};return a});kola("newt.util.LocalStorage",["lib.JSON"],function(f){function c(){var h=[].slice.call(arguments);this.init.apply(this,h)}c.prototype={constructor:c,init:function(h){this.storage=h},get:function(j){var h=this.storage.getItem(j);var k=h!=null?this._decodeVal(h):null;return k},set:function(h,k){try{this.storage.setItem(h,this._encodeVal(k))}catch(j){if(window.console&&window.console.log){console.log("StorageWrapper.set:: setItem(key="+h+", val="+k+") error, "+j)}}},remove:function(h){this.storage.removeItem(h)},clear:function(){this.storage.clear()},length:function(){return this.storage.length},getKeys:function(){var l=this.storage;if(l.key instanceof Array){return l.key.concat()}else{var k,h,j=[];for(k=0,h=l.length;k<h;k++){j.push(l.key(k))}return j}},_encodeVal:function(h){switch(typeof h){case"string":return"s:"+h;case"number":return"n:"+h;case"boolean":return"b:"+h;case"object":return f.stringify(h)}},_decodeVal:function(k){if(typeof k!="string"){throw"bed decode paramter, except string value!"}if(k.length<2){throw"invalid value!"}var h=k.charAt(0);var j=k.substring(0,2);if(h=="["||h=="{"){return f.parse(k)}else{switch(j){case"s:":return String(k.substring(2));case"n:":return Number(k.substring(2));case"b:":return Boolean(k.substring(2))}}}};function a(){var l=document.createElement("div");var j="__UD__";var k="__k";l.style.display="none";l.addBehavior("#default#userData");document.getElementsByTagName("head")[0].appendChild(l);var h={key:[],length:0,_keyMap:{},clear:function(){var p,n,o,q=this.key;for(p=0,n=q.length;p<n;p++){o=q[p];l.removeAttribute(o)}l.setAttribute(k,"");this._save()},getItem:function(o){var n=l.getAttribute(o);if(n!=null){return n.replace(/(\\§|§)/g,function(p){if(p=="\\§"){return"§"}else{return'"'}})}else{return null}},setItem:function(n,o){o=o.replace(/(§|")/g,function(p){if(p=="§"){return"\\§"}else{return"§"}});l.setAttribute(n,o);this._addKey(n);this._save()},removeItem:function(n){l.removeAttribute(n);this._removeKey(n);this._save()},_init:function(){l.load(j);var p=l.getAttribute(k);if(p&&typeof p=="string"){p=p.split(",");this.key=p;this.length=p.length;var o,n,q=this._keyMap;for(o=0,n=p.length;o<n;o++){this._keyMap[p[o]]=null}}},_addKey:function(n){if(!this._containsKey(n)){var o=this.key;o.push(n);this._keyMap[n]=null;this.length=o.length;l.setAttribute(k,o.join(","))}},_removeKey:function(p){var o,n,q;if(!this._containsKey(p)){return}delete this._keyMap[p];q=this.key;for(o=0,n=q.length;o<n;o++){if(q[o]==p){q.splice(o,1);break}}this.length=q.length;l.setAttribute(k,q.join(","))},_containsKey:function(n){return this._keyMap.hasOwnProperty(n)},_save:function(){l.save(j)}};try{h._init();return h}catch(m){if(window.console&&window.console.log){console.log("init UserData error:"+m)}return null}}var b=navigator.userAgent;var g=b.indexOf("MSIE 6.0")!=-1;var d=b.indexOf("MSIE 7.0")!=-1;if(window.localStorage){return new c(window.localStorage)}else{if(g||d){return new c(a())}else{}}});kola("mvc.view.TemplateEngine",["mvc.view.template.engine.Elapse"],function(a){a.setLoader({loader:function(b,c){kola(b,function(d){c(d+"${name "+b+"}")})}});return a});kola("newt.composer.emote.crEmote",["newt.cr.crEvent"],function(){var a=function(d,c){var b=this;b.elem=$(d);b.ops=$.extend({emWidth:29,turnPageHandle:function(f){},handle:function(f){}},c||{});b.w=0;b.pg=0;b.pgB=b.elem.find("p.pg3");b.pgN=0;b.s=0;$.extend(b,{init:function(){$.cr.setUnselectable(b.elem.get(0));b.elem.unbind("mouseup").mouseup(b.mouseup).click(function(){return false})},show:function(j,f){var g={preventDefault:false};$.cr.event.send("emote_show",g);if(g.preventDefault){return}if(f==3){b.elem.appendTo("body");var l=j.offset();b.elem.css({position:"absolute",top:l.top+15,left:l.left-10})}else{if(f==2){j.after(b.elem);b.elem.css("position","absolute");var k=j.offsetParent().offset(),l=j.offset();b.elem.css({top:l.top-k.top+15,left:l.left-k.left-10})}else{if(f==1){if(CRTWCONFIG.SCROLL_DOM[0]!=window){var h=j.offset().top}else{var h=j.offset().top-$(CRTWCONFIG.SCROLL_DOM).scrollTop()}if($(window).height()-h>250){j.after(b.elem);b.elem.css({position:"relative"}).removeClass("droD")}else{j.before(b.elem);b.elem.css({position:"relative"}).addClass("droD")}}}}b.elem.fadeIn(100,function(){b.elem.removeClass("noDis");b.s=1;$.cr.event.send("tw_editor_dropEmot_show",b.elem)})},hide:function(){b.s=0;b.elem.addClass("noDis")},getDisplay:function(){return b.elem.hasClass("noDis")?"hide":"show"},layout:function(){var g=b.elem.outerWidth();if(g!=b.w){b.w=g;b.elem.find("div.c").css("textIndent",0);var f=b.elem.find("div.c >a").length;b.pgN=Math.floor(g/b.ops.emWidth);var h=Math.ceil(Math.ceil(f/2)/b.pgN);if(h>1){b.pgB.find("a").remove();for(;h>0;h--){$("<a "+((h-1==0)?'class="on"':"")+'href="javascript:void(0)"><i class="ii crEmotePage'+(h-1)+'"></i></a>').prependTo(b.pgB)}b.pgB.show()}else{b.pgB.hide()}}},mouseup:function(j){var k=j.target;if($(k).closest(".crJs_page").length!=1){return}var f=$(k).attr("class");if(f&&f.match(/crEmotePage/gi)){var g=parseInt(f.replace(/\D/gi,""),10);b.elem.find("div.c").css({textIndent:-(g*29*2*b.pgN)});b.pgB.find("a").removeClass("on").eq(g).addClass("on");b.ops.turnPageHandle(g);return false}var l=$(k).find(">i");l=l.length?l:k;var h=parseInt($(l).attr("class").replace(/\D/gi,""),10);if(!isNaN(h)){b.ops.handle(h,$(l).attr("title"))}return false},setHandle:function(f){b.ops.handle=f}});b.init()};$.fn.crEmote=function(b){return this.each(function(){$(this).removeData("crEmote").data("crEmote",new a(this,b))})};return a});kola("newt.composer.PicView",["jquery.Core","newt.util.StrUtil"],function(b,c){function a(){var d=[].slice.call(arguments);this.init.apply(this,d)}a.prototype={constructor:a,init:function(f,d){this.id=d.id;this.memo="";this.oldMemo="";this.bgImage="";this.editor=f;this.status=this.STATUS_UPLOADING;this.handlerScope=d.handlerScope;this.hasSetBgImage=false;this.hasEditMemo=false;this.isMouseIn=false;this.isWaiting=false;this.showAnimate=null;this.hideAnimate=null;this.onMemoInput=(d.onMemoInput instanceof Function?d.onMemoInput:null);this.onMemoInputEnd=(d.onMemoInputEnd instanceof Function?d.onMemoInputEnd:null);this.onMemoUpdate=(d.onMemoUpdate instanceof Function?d.onMemoUpdate:null);this.onBeforeEdit=(d.onBeforeEdit instanceof Function?d.onBeforeEdit:null);this.onEditEnd=(d.onEditEnd instanceof Function?d.onEditEnd:null);var g=d.name;d.bgImage=d.priviewData||"";d.fullName=g;d.name=g.length>10?g.slice(0,7)+"...":g;this.build(d);this.regEvent();this.showUpload();this.setPercent(0);if(d.bgImage){this.setBgImage(d.bgImage)}},build:function(f){var d=b(c.format(this.TEMPLETE,f));this.container=d},regEvent:function(){var g=this,j=this.container;if(!j){return}b('[data-meta="add-memo-btn"]',j).bind({click:function(){CA.q("composer_img_thumbnail_adddesc");g.showEditPanelItems("memo-input-part");g.focusMemoInputBox()}});b('[data-meta="has-input-memo"]',j).bind({click:function(){if(!g.isEnableInputMemo()){return}CA.q("composer_img_thumbnail_editdesc");if(g.status!=g.STATUS_EDIT){g.showEdit({showMemoInput:true})}else{g.showEditPanelItems("memo-input-part");g.focusMemoInputBox()}},mouseenter:function(){if(g.isEnableInputMemo()){this.title="点击这里编辑描述";b(this).addClass("k1")}else{this.title=""}},mouseout:function(){b(this).removeClass("k1")}});var f=function(k){g.memo=k;g.setMemo(k)};var d=function(l){var k=l?"has-input-memo":"add-memo-btn";g.showEditPanelItems(k);if(g.isMouseIn){if(g.status!=g.STATUS_EDIT){g.showEdit()}}else{g.showComplete()}if(g.onMemoInputEnd){try{g.onMemoInputEnd.call(g.handlerScope,g.id)}catch(m){}}};var h=false;b('[data-meta="memo-input-box"]',j).bind({blur:function(){if(h){return}var k=this.value;f(k);d(k)},focus:function(){this.value=g.memo},keypress:function(o){var k=o.target;var m=this.value;var n=o.keyCode||o.which;var l=n==13||n==27;if(!l){return}if(n==27&&g.memo!=""){window.setTimeout(function(){k.value=g.memo},0);return}if(n==13){f(m)}h=true;document.links[0].focus();window.setTimeout(function(){h=false},80);d(m)}})},remove:function(){this.container.remove();this.container=null},showComplete:function(d){this.status=this.STATUS_COMPLETE;if(this.onEditEnd){try{this.onEditEnd.call(this.handlerScope,this)}catch(k){}}if(this.showAnimate){this.showAnimate.stop()}var g=this,j=this.container;if(!j){return}var f=this.memo;this.setMemo(f);var h=function(){g.hideAnimate=null;var l=["bg-image-c","input-panel"];if(g.isWaiting){l.push("loading-cover")}g.showMetaItems(j,l);g.showEditPanelItems("has-input-memo");j.removeClass("cell_hover");g.setImageCoverShowStatus(false)};if(this.hideAnimate!=null){this.hideAnimate.stop()}else{if(d&&d.animate==false){h()}else{this.hideAnimate=this.getAnimate(1,500,null,h)}}},showEdit:function(d){if(this.onBeforeEdit){try{this.onBeforeEdit.call(this.handlerScope,this)}catch(j){}}if(this.hideAnimate){this.hideAnimate.stop()}var f=this,h=this.container;if(!h){return}this.status=this.STATUS_EDIT;var g=function(){f.showAnimate=null;var k=["bg-image-c","optr-panel","input-panel"];if(f.isWaiting){k.push("loading-cover")}f.showMetaItems(h,k);h.addClass("cell_hover");f.setImageCoverShowStatus(false);if(d&&d.showMemoInput){f.showEditPanelItems("memo-input-part");f.focusMemoInputBox()}else{if(f.memo==""&&f.isEnableInputMemo()){f.showEditPanelItems("add-memo-btn")}else{f.showEditPanelItems("has-input-memo")}}};if(this.showAnimate){this.showAnimate.stop()}else{if(d&&d.animate==false){g()}else{this.showAnimate=this.getAnimate(1,0,null,g)}}},showDrag:function(){var d=this.container;if(!d){return}this.status=this.STATUS_DRAGE;this.showMetaItems(d,["bg-image-c","optr-panel","input-panel"]);this.showEditPanelItems("has-input-memo");d.removeClass("cell_hover")},showUpload:function(){var d=this.container;if(!d){return}this.status=this.STATUS_UPLOADING;this.showMetaItems(d,["pic-name","bg-image-c","upload-percent","uploading-panel"]);this.setImageCoverShowStatus(true)},showError:function(f){var d=this.container;if(!d){return}this.status=this.STATUS_ERROR;this.showMetaItems(d,["pic-name","error-icon","error-content","upload-error-panel"]);this.setImageCoverShowStatus(false)},showFloatIcon:function(d,h){var f=this.container;if(!f||!d){return}var g=f.find('[data-meta="float-icon"]');if(g.length>0){g.attr("class","state "+d).fadeIn(500);window.setTimeout(function(){g.fadeOut("slow",function(){g.addClass("nodis");if(h instanceof Function){h()}})},1000)}},showWaiting:function(){var d=this.container;if(!d){return}this.isWaiting=true;d.find('[data-meta="loading-cover"]').removeClass("nodis")},stopWaiting:function(){var d=this.container;if(!d){return}this.isWaiting=false;d.find('[data-meta="loading-cover"]').addClass("nodis")},showEditPanelItems:function(d){d=d instanceof Array?d:[].slice.call(arguments);var f=this.container.find('[data-meta="input-panel"]');this.showMetaItems(f,d)},showMetaItems:function(k,g){if(!k){return}g=g instanceof Array?g:[].slice.call(arguments,1);var j,f,l,m,h=b(k).children(),d=g&&g.length>0?g.join("|"):"";for(j=0,f=h.length;j<f;j++){m=b(h[j]);l=m.attr("data-meta");if(!l){continue}if(d.indexOf(l)!=-1){m.removeClass("nodis")}else{m.addClass("nodis")}}},setBgImage:function(f){var g=this.container;if(!g||!f){return}var d=f.indexOf("base64")!=-1;f=d?(f.indexOf("data:")==-1?("data:"+f):f):f;g.find('[data-meta="bg-image"]').css("backgroundImage","url("+f+")");this.hasSetBgImage=true},setImageCoverShowStatus:function(d){var f=this.container;if(!f){return}var g=f.find('[data-meta="image-cover"]');if(d){g.removeClass("nodis")}else{g.addClass("nodis")}},setMemo:function(h){if(h==this.oldMemo){return}this.oldMemo=h;this.hasEditMemo=true;var f=this.container;var d=h.length>8?h.slice(0,8)+"...":h;if(f){d=d.replace(/<|>|&/g,function(j){switch(j){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}});f.find('[data-meta="has-input-memo"]').html(d)}if(this.onMemoUpdate){try{this.onMemoUpdate.call(this.handlerScope,this.id,h)}catch(g){}}},setPercent:function(d){var f=this.container;if(!f){return}f.find('[data-meta="image-cover"]').css("height",(100-d)+"%");f.find('[data-meta="upload-percent"]').css("display","block").html(d+"%")},focusMemoInputBox:function(){var h=this.container;if(!h){return}var f=h.find('[data-meta="memo-input-box"]')[0];if(!f){return}var d=f.value.length;if(f.setSelectionRange){f.focus();f.setSelectionRange(d,d)}else{if(f.createTextRange){var g=f.createTextRange();g.collapse(true);g.moveEnd("character",d);g.moveStart("character",d);g.select()}}if(this.onMemoInput){try{this.onMemoInput.call(this.handlerScope,this.id)}catch(j){}}},getDom:function(){return this.container},getAnimate:function(l,f,j,d){if(f==0){if(d){try{d()}catch(k){}}return null}var g=0,f,h=function(){if(g==l){window.clearInterval(f);if(d){try{d()}catch(m){}}return}g++;if(j){try{j()}catch(m){}}};f=window.setInterval(h,f);return{onComplete:d,stop:function(){if(d){try{d()}catch(m){}}window.clearInterval(f)}}},isEnableInputMemo:function(){return this.hasEditMemo||this.editor.getCanEditItemCount()>1},STATUS_UPLOADING:0,STATUS_ERROR:1,STATUS_COMPLETE:2,STATUS_EDIT:3,STATUS_DRAGE:4,ICON_ROTATE_ERROR:"state_err5",TEMPLETE:('<div id="pic_view{id}" data-meta="pic-view-c" data-eventdata="{id}" class="cell"><em data-meta="loading-cover" class="state state_lding nodis"></em><em data-meta="float-icon" class="nodis"></em><span data-meta="optr-panel"  class="oper nodis"><a data-meta="left-Rotate"  title="左旋" href="javascript:void(0)"><i class="i iCw" ></i></a><a data-meta="right-Rotate" title="右旋" href="javascript:void(0)"><i class="i iCcw"></i></a><a data-meta="delete-pic"   title="删除" href="javascript:void(0)"><i class="i i41" ></i></a></span><i data-meta="pic-name" class="nm nodis" title="{fullName}">{name}</i><i data-meta="upload-percent" class="perc nodis"></i><em data-meta="error-icon" class="state state_err2 nodis"></em><i data-meta="error-content" class="imger nodis"></i><i data-meta="bg-image-c" class="imger" style="cursor:move"><i data-meta="image-cover" class="iFake"></i><i data-meta="bg-image" class="img" style="background-image:{bgImage};"></i></i><span data-meta="uploading-panel" class="fucs nodis"><a data-meta="cancel-upload" class="fuc" href="javascript:void(0);">取消</a></span><span data-meta="upload-error-panel" class="fucs nodis"><a data-meta="retry-upload"  class="fuc" href="javascript:void(0);">重试</a>|<a data-meta="cancel-upload" class="fuc" href="javascript:void(0);">取消</a></span><div data-meta="input-panel" class="descer nodis"><em data-meta="add-memo-btn"><a class="fuc" title="描述最多30个汉字" href="javascript:void(0)">添加描述</a></em><em data-meta="has-input-memo" class="nodis"></em><i data-meta="memo-input-part" class="txt"><input data-meta="memo-input-box" class="" type="text" title="描述最多30个汉字, 按Enter键保存" maxlength="30"/><b data-meta="memo-input-tips" class="j2"><i class="k2" title="描述最多30个汉字">按Enter保存</i></b></i></div></div>')};return a});kola("newt.composer.ComboUploader",["jquery.Core","newt.widget.CommonDialog","newt.ca.ca","newt.util.Browser","newt.composer.SwfUploader","newt.composer.AjaxUploader"],function(g,f,b,h,c,a){function d(){var j=[].slice.call(arguments);this.init.apply(this,j)}d.prototype={constructor:d,init:function(n){if(!n||!n.uploadUrl){throw"错误的配置参数，请指定上传服务器地址！"}this.config=n;this.uploaders=[];this.enableSelect=true;this.MAX_SELECT_COUNT=n.MAX_SELECT_COUNT||12;var l=h.supportFlash();var p=h.supportAjaxUpload();if(!l&&!p){var o=n.uploadAnchors[0].el;var m=h.getPlatform()=="Mac";var q=("对不起, 因为您的浏览器不支持Flash和HTML5技术,因此图片上传功能将无法正常工作。请为您的浏览器安装Flash插件，或者换用新版本的Firefox、Chrome、搜狗(高速模式)"+(m?"、Safari":"")+"浏览器来体验此功能");this._preventDefaultDragEvent();g(o).click(function(){f.alert(q)})}else{if(!l&&p){this.uploaders.push(new a(n))}else{if(l&&!p){this.uploaders.push(new c(n));this._preventDefaultDragEvent()}else{if(l&&p){var r=n.onSelect;var j=n.handlerScope;var k=this;n.onSelect=function(){var s=[].slice.call(arguments);if(k._handleSelect.apply(k,s)){r.apply(j,s)}};this.uploaders.push(new c(n));if(n.dragAnchor){n.uploadAnchors=[];this.uploaders.push(new a(n))}}}}}},upload:function(j){this._callUploderMethod("upload",j)},abort:function(j){this._callUploderMethod("abort",j)},reset:function(){this._callUploderMethod("reset")},destroy:function(){this._callUploderMethod("destroy")},isEnableSelect:function(){return this.enableSelect},setEnableSelect:function(j){this.enableSelect=j;this._callUploderMethod("setEnableSelect",j)},getFile:function(l){var n,k,o,m,j=this.uploaders;for(n=0,k=j.length;n<k;n++){o=j[n];m=o.getFile(l);if(m){return m}}return null},getFiles:function(){var l,k,m=[],j=this.uploaders;for(l=0,k=j.length;l<k;l++){m=m.concat(j[l].getFiles())}return m},getStatus:function(){var m,k,l,n=0;var o,j=this.uploaders;for(m=0,k=j.length;m<k;m++){o=j[m];l=o.getStatus();switch(l){case this.STATUS_NOT_SELECT:n++;break;case this.STATUS_HAS_ERROR:return this.STATUS_HAS_ERROR;case this.STATUS_UPLOADING:return this.STATUS_UPLOADING}}return(n==j.length?this.STATUS_NOT_SELECT:this.STATUS_COMPLETE_ALL)},deleteFileRecord:function(j){this._callUploderMethod("deleteFileRecord",j)},_callUploderMethod:function(l){var m=[].slice.call(arguments,1);var n,k,q,p,j=this.uploaders;for(n=0,k=j.length;n<k;n++){p=j[n];q=p[l];if(q instanceof Function){try{q.apply(p,m)}catch(o){}}}},_doCallBack:function(l){var j=[].slice.call(arguments,1);var m=this.config[l];if(m instanceof Function){try{m.apply(null,j)}catch(k){}}},_handleSelect:function(o,m){var n=this.getFiles().length;var l=this.MAX_SELECT_COUNT;var k,j;if(n>l){k=n-l;j=o.splice(o.length-k);for(i=0,len=j.length;i<len;i++){this.deleteFileRecord(j[i].id)}}return o.length>0},_preventDefaultDragEvent:function(){var l=this.config.dragAnchor||document.body;var n=false;var o=function(q){var p=q||event;p.returnValue=false;if(p.preventDefault){p.preventDefault()}};var m=function(p){n=true};var k=function(q){var p=q||event;if(h.isDragFile(p)){o(p)}};var j=function(r){var p=r||event;var q=h.getPlatform()=="Mac";if(h.isDragFile(p)&&!n){p.dataTransfer.dropEffect="none";o(p);f.alert("对不起, 当前浏览器不支持拖拽图片上传。请换用最新版本的搜狗(高速模式)、Firefox、Chrome"+(q?"、Safari":"")+"浏览器来体验此功能。")}n=false};if(document.all){l.attachEvent("ondragstart",m);l.attachEvent("ondragover",k);l.attachEvent("ondrop",j)}else{l.addEventListener("dragover",k,true);l.addEventListener("drop",j,true)}},FILE_NOT_UPLOAD:0,FILE_UPLOADING:1,FILE_UPLOAD_ERROR:2,FILE_UPLOAD_SUCCESS:3,STATUS_NOT_SELECT:0,STATUS_UPLOADING:1,STATUS_HAS_ERROR:2,STATUS_COMPLETE_ALL:3};return d});kola("sohu.anim.Sortable",["jquery.Core","sohu.anim.Draggable"],function(c,b){var a=function(j,g){var d=this;var f=null;g=c.extend({pickable:"",escape:0,darggableOpt:{},placeholder:"blank"},g||{});g.darggableOpt=c.extend({draggingClass:"dragging"},g.darggableOpt);j.bind("selectstart mousedown",function(k){if(c.browser.msie&&parseInt(c.browser.version,10)<=8){if(!c(k.target).is(":input")){k.preventDefault()}}else{var l=g.darggableOpt.handle||"";var m=c(k.target).closest(l).length!=0;if(m){k.preventDefault()}}});j.children(g.pickable).each(function(){new b(this,g.darggableOpt)});function h(){var n=j.children().first();if(!n){return}var o=parseInt(c.curCSS(n[0],"margin-left"));var l=parseInt(c.curCSS(n[0],"margin-right"));var k=parseInt(c.curCSS(n[0],"margin-top"));var m=parseInt(c.curCSS(n[0],"margin-bottom"));d.girdWidth=n.outerWidth();d.girdHeight=n.outerHeight();if(o<=0&&l<=0){d.girdWidth+=(o<l)?o:l}else{if(o>=0&&l>=0){d.girdWidth+=(o>l)?o:l}else{d.girdWidth+=o+l}}if(k<=0&&m<=0){d.girdHeight+=(k<m)?k:m}else{if(k>=0&&m>=0){d.girdHeight+=(k>m)?k:m}else{d.girdHeight+=k+m}}if(c.curCSS(n[0],"display")!="block"){d.columCount=Math.floor(j.width()/d.girdWidth)}else{d.columCount=1}d.placeholder=c(document.createElement(n[0].tagName)).addClass(g.placeholder)}j.bind("beforeDrag",function(k){h();j.unbind("beforeDrag")});j.bind("afterDrag",function(k){j[0].insertBefore(d.placeholder[0],k.target)});j.bind("dragging",function(l){var n=j.children(":not(."+g.darggableOpt.draggingClass+")");var p=c(l.target).position();var k=c(n[0]).position();n=n.filter(":not(."+g.placeholder+")");x=p.left-k.left;y=p.top-k.top;x=Math.round(x/d.girdWidth);y=Math.round(y/d.girdHeight);if(x<0){x=0}if(x>=d.columCount){x=d.columCount-1}if(y<0){y=0}if(y>Math.ceil(n.length/d.columCount)-1){y=Math.ceil(n.length/d.columCount)-1}count=y*d.columCount+x;var o=false;if(count>=n.length-g.escape){var m=n[n.length-1-g.escape]}else{var m=n[count]}if(m!=f){f=m;j.trigger("change");j[0].insertBefore(d.placeholder[0],m)}});j.bind("afterDrop",function(k){j[0].replaceChild(k.target,d.placeholder[0]);k.target.style.position="";k.target.style.left="";k.target.style.top=""});this.addNewItem=function(k){new b(k,g.darggableOpt)}};return a});kola("newt.tipbox.Bubble",["newt.net.interface.Bubble","newt.ca.ca","newt.cr.cr"],function(a){var b=function(d){var c=this,f=0;if(d&&d.time){f=parseInt(d.time,10)}c.opts=$.extend({name:"Bubble1",pEle:"",brotherEle:"",typeCls:"bub2",ckName:"",expires:new Date(new Date().getTime()+f),content:"",closeHandle:null,onClose:null},d||{});c.ele=null;$.extend(c,{init:function(){if(c.opts.ckName!=""&&$.cr.cookie.get(c.opts.ckName)==1){return}if(c._build()){c._initEvent();c.ele.data("bubble",c)}},_build:function(){c.ele=$(c._getHtml());if(c.opts.name){c.ele.attr("id","tw_bubble_"+c.opts.name)}c.ele.find("div.bubBd").html(c.opts.content);if($(c.opts.pEle).size()>0){$(c.opts.pEle).append(c.ele)}else{if($(c.opts.brotherEle).size()>0){var g=c.ele.attr("class");if(g.indexOf("D")>-1){$(c.opts.brotherEle).after(c.ele)}else{$(c.opts.brotherEle).before(c.ele)}}else{return false}}return true},_initEvent:function(){c.ele.find("a.close").click(function(){c.close("remove")});c.ele.find("a.jsClose").mousedown(function(){var g,j,h;g=$(this);h=g.attr("href");if(h&&h.indexOf("javascript")==-1){j=g.attr("target");if(j=="_blank"){setTimeout(function(){c.close("remove")},1000)}else{c._closeAction()}}else{c.close("remove")}})},onClose:function(g){if(typeof(g)=="function"){c.opts.onClose=g}},close:function(g){c._closeAction();if(g&&g=="hide"){c.ele.hide()}else{c.ele.remove()}},_closeAction:function(){if(typeof(c.opts.closeHandle)=="function"){c.opts.closeHandle()}else{c._closeByCookie();c._closeByServer()}if(typeof(c.opts.onClose)=="function"){c.opts.onClose()}},_closeByCookie:function(){if(c.opts.ckName!=""){c.setCookie(c.opts.ckName,1,c.opts.expires)}},_closeByServer:function(){if(c.opts.name){CA.q("newt_bubble_close_"+c.opts.name);a.closeCommonBubble({name:c.opts.name})}},_getHtml:function(){var g=['<div class="bubble  '+c.opts.typeCls+' ">','<div class="bubC">','<a href="javascript:void(0)"  title="关闭" class="close jsClose"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a>	<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<div class="bubBd"></div>',"</div>","</div>"];return g.join("")},setCookie:function(g,j,h){$.cr.cookie.set(g,j,h,"/",".t.sohu.com");$.cr.cookie.set(g,j,h,"/","t.sohu.com");$.cr.cookie.set(g,j,h)},delCookie:function(g){$.cr.cookie.del(g,"/",".t.sohu.com");$.cr.cookie.del(g,"/","t.sohu.com");$.cr.cookie.del(g)}})};return{create:function(d){var c=new b(d);c.init()},close:function(c,d){if(c){var f=$("#tw_bubble_"+c).data("bubble");if(f){if(d&&typeof(d.onClose)=="function"){d.onClose()}f.close()}}}}});kola("mvc.io.XHR",["jquery.Core"],function(c){var a=c({});var d=[];var b=false;var g=0;var f={pushRequestToQueue:function(h){d.push(h)},fetchRequestFromQueue:function(){return d.shift()},queueEmpty:function(){return f.queueSize()==0},queueSize:function(){return d.length},pushCache:function(h,j){a.data(h,j)},cleanCache:function(h){if(h){a.removeData(h)}else{a=c({})}},RESPONSE_STATUS:{NO_LOGIN:401},queueRequest:function(k){delete k.queueRequest;var h=k.beforeSend;var j=k.complete;k.complete=function(){if(j){j.apply(this,arguments)}var l=f.fetchRequestFromQueue();if(l){f.request(l)}--g};k.beforeSend=function(){if(h){h.apply(this,arguments)}++g};f.pushRequestToQueue(k);f.continueQueue()},continueQueue:function(){if(g<=0){f.request(f.fetchRequestFromQueue())}},request:function(j){if(j.queueRequest==true){delete j.queueRequest;f.queueRequest(j);return}j.type=(j.type?j.type:"get").toLowerCase();var l=null;if(j.dataCache==true){l=j.url+(j.data?j.data:"")+(j.dataType=="script"?"_$script":"");var h=a.data(l);if(h){if(j.beforeSend){j.beforeSend()}if(j.success){j.success.apply(j,h)}if(j.complete){j.complete()}return}}var k=j.success;j.success=function(){var m=arguments[0];if(j.dataCache==true){a.data(l,j.dataType=="script"?true:arguments)}if(j.noIntercept!=true){if(m&&m.status!=undefined){m.status=parseInt(m.status);switch(m.status){case f.RESPONSE_STATUS.NO_LOGIN:kola("newt.util.Tool",function(n){n.iNoLogin()});break;default:if(k){k.apply(this,arguments)}}}else{if(k){k.apply(this,arguments)}}}else{if(k){k.apply(this,arguments)}}};c.ajax(j)}};return f});kola("kola.lang.Class",null,function(){return{create:function(b,a){if(typeof(a)=="undefined"){a=b;b=null}var g;var f=a.__ME;if(f){g=function(){var j=this.__I;if(typeof(j)!="number"||j!==0){return f.apply(g,arguments)}else{this.constructor=g;this.__I=1;this._init.apply(this,arguments);this.__I=4}}}else{g=function(){this.constructor=g;this._init.apply(this,arguments)}}g._super=b||null;g.__CLASS=true;var h;if(b==null){h=a}else{var c=function(){};c.prototype=b.prototype;h=new c();for(var d in a){h[d]=a[d]}}h.__I=0;g.prototype=h;return g},isInstance:function(a,d){if(!a){throw new Error("要检测的实例不存在");return}var c=a.constructor,b;while(c){if(typeof(b=c.__CLASS)=="string"&&b===d){return true}c=c._super}return false}}});kola("kola.css.Selector",null,function(){var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,k=0,d=Object.prototype.toString,q=false,j=true;[0,0].sort(function(){j=false;return 0});var b=function(A,t,D,E){D=D||[];t=t||document;var G=t;if(t.nodeType!==1&&t.nodeType!==9){return[]}if(!A||typeof A!=="string"){return D}var v,I,L,u,H,K,J,C,z=true,w=b.isXML(t),B=[],F=A;do{r.exec("");v=r.exec(F);if(v){F=v[3];B.push(v[1]);if(v[2]){u=v[3];break}}}while(v);if(B.length>1&&l.exec(A)){if(B.length===2&&f.relative[B[0]]){I=h(B[0]+B[1],t)}else{I=f.relative[B[0]]?[t]:b(B.shift(),t);while(B.length){A=B.shift();if(f.relative[A]){A+=B.shift()}I=h(A,I)}}}else{if(!E&&B.length>1&&t.nodeType===9&&!w&&f.match.ID.test(B[0])&&!f.match.ID.test(B[B.length-1])){H=b.find(B.shift(),t,w);t=H.expr?b.filter(H.expr,H.set)[0]:H.set[0]}if(t){H=E?{expr:B.pop(),set:a(E)}:b.find(B.pop(),B.length===1&&(B[0]==="~"||B[0]==="+")&&t.parentNode?t.parentNode:t,w);I=H.expr?b.filter(H.expr,H.set):H.set;if(B.length>0){L=a(I)}else{z=false}while(B.length){K=B.pop();J=K;if(!f.relative[K]){K=""}else{J=B.pop()}if(J==null){J=t}f.relative[K](L,J,w)}}else{L=B=[]}}if(!L){L=I}if(!L){b.error(K||A)}if(d.call(L)==="[object Array]"){if(!z){D.push.apply(D,L)}else{if(t&&t.nodeType===1){for(C=0;L[C]!=null;C++){if(L[C]&&(L[C]===true||L[C].nodeType===1&&b.contains(t,L[C]))){D.push(I[C])}}}else{for(C=0;L[C]!=null;C++){if(L[C]&&L[C].nodeType===1){D.push(I[C])}}}}}else{a(L,D)}if(u){b(u,G,D,E);b.uniqueSort(D)}return D};b.uniqueSort=function(u){if(c){q=j;u.sort(c);if(q){for(var t=1;t<u.length;t++){if(u[t]===u[t-1]){u.splice(t--,1)}}}}return u};b.matches=function(t,u){return b(t,null,null,u)};b.matchesSelector=function(t,u){return b(u,null,null,[t]).length>0};b.find=function(C,t,D){var B;if(!C){return[]}for(var w=0,v=f.order.length;w<v;w++){var z,A=f.order[w];if((z=f.leftMatch[A].exec(C))){var u=z[1];z.splice(1,1);if(u.substr(u.length-1)!=="\\"){z[1]=(z[1]||"").replace(/\\/g,"");B=f.find[A](z,t,D);if(B!=null){C=C.replace(f.match[A],"");break}}}}if(!B){B=typeof t.getElementsByTagName!=="undefined"?t.getElementsByTagName("*"):[]}return{set:B,expr:C}};b.filter=function(G,F,J,z){var B,t,v=G,L=[],D=F,C=F&&F[0]&&b.isXML(F[0]);while(G&&F.length){for(var E in f.filter){if((B=f.leftMatch[E].exec(G))!=null&&B[2]){var K,I,u=f.filter[E],w=B[1];t=false;B.splice(1,1);if(w.substr(w.length-1)==="\\"){continue}if(D===L){L=[]}if(f.preFilter[E]){B=f.preFilter[E](B,D,J,L,z,C);if(!B){t=K=true}else{if(B===true){continue}}}if(B){for(var A=0;(I=D[A])!=null;A++){if(I){K=u(I,B,A,D);var H=z^!!K;if(J&&K!=null){if(H){t=true}else{D[A]=false}}else{if(H){L.push(I);t=true}}}}}if(K!==undefined){if(!J){D=L}G=G.replace(f.match[E],"");if(!t){return[]}break}}}if(G===v){if(t==null){b.error(G)}else{break}}v=G}return D};b.error=function(t){throw"Syntax error, unrecognized expression: "+t};var f=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")}},relative:{"+":function(B,u){var w=typeof u==="string",A=w&&!/\W/.test(u),C=w&&!A;if(A){u=u.toLowerCase()}for(var v=0,t=B.length,z;v<t;v++){if((z=B[v])){while((z=z.previousSibling)&&z.nodeType!==1){}B[v]=C||z&&z.nodeName.toLowerCase()===u?z||false:z===u}}if(C){b.filter(u,B,true)}},">":function(B,u){var A,z=typeof u==="string",v=0,t=B.length;if(z&&!/\W/.test(u)){u=u.toLowerCase();for(;v<t;v++){A=B[v];if(A){var w=A.parentNode;B[v]=w.nodeName.toLowerCase()===u?w:false}}}else{for(;v<t;v++){A=B[v];if(A){B[v]=z?A.parentNode:A.parentNode===u}}if(z){b.filter(u,B,true)}}},"":function(w,u,A){var z,v=k++,t=s;if(typeof u==="string"&&!/\W/.test(u)){u=u.toLowerCase();z=u;t=p}t("parentNode",u,v,w,z,A)},"~":function(w,u,A){var z,v=k++,t=s;if(typeof u==="string"&&!/\W/.test(u)){u=u.toLowerCase();z=u;t=p}t("previousSibling",u,v,w,z,A)}},find:{ID:function(u,v,w){if(typeof v.getElementById!=="undefined"&&!w){var t=v.getElementById(u[1]);return t&&t.parentNode?[t]:[]}},NAME:function(v,A){if(typeof A.getElementsByName!=="undefined"){var u=[],z=A.getElementsByName(v[1]);for(var w=0,t=z.length;w<t;w++){if(z[w].getAttribute("name")===v[1]){u.push(z[w])}}return u.length===0?null:u}},TAG:function(t,u){if(typeof u.getElementsByTagName!=="undefined"){return u.getElementsByTagName(t[1])}}},preFilter:{CLASS:function(w,u,v,t,B,C){w=" "+w[1].replace(/\\/g,"")+" ";if(C){return w}for(var z=0,A;(A=u[z])!=null;z++){if(A){if(B^(A.className&&(" "+A.className+" ").replace(/[\t\n\r]/g," ").indexOf(w)>=0)){if(!v){t.push(A)}}else{if(v){u[z]=false}}}}return false},ID:function(t){return t[1].replace(/\\/g,"")},TAG:function(u,t){return u[1].toLowerCase()},CHILD:function(t){if(t[1]==="nth"){if(!t[2]){b.error(t[0])}t[2]=t[2].replace(/^\+|\s*/g,"");var u=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(t[2]==="even"&&"2n"||t[2]==="odd"&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=(u[1]+(u[2]||1))-0;t[3]=u[3]-0}else{if(t[2]){b.error(t[0])}}t[0]=k++;return t},ATTR:function(z,u,v,t,A,B){var w=z[1]=z[1].replace(/\\/g,"");if(!B&&f.attrMap[w]){z[1]=f.attrMap[w]}z[4]=(z[4]||z[5]||"").replace(/\\/g,"");if(z[2]==="~="){z[4]=" "+z[4]+" "}return z},PSEUDO:function(z,u,v,t,A){if(z[1]==="not"){if((r.exec(z[3])||"").length>1||/^\w/.test(z[3])){z[3]=b(z[3],null,null,u)}else{var w=b.filter(z[3],u,v,true^A);if(!v){t.push.apply(t,w)}return false}}else{if(f.match.POS.test(z[0])||f.match.CHILD.test(z[0])){return true}}return z},POS:function(t){t.unshift(true);return t}},filters:{enabled:function(t){return t.disabled===false&&t.type!=="hidden"},disabled:function(t){return t.disabled===true},checked:function(t){return t.checked===true},selected:function(t){t.parentNode.selectedIndex;return t.selected===true},parent:function(t){return !!t.firstChild},empty:function(t){return !t.firstChild},has:function(v,u,t){return !!b(t[3],v).length},header:function(t){return(/h\d/i).test(t.nodeName)},text:function(t){return"text"===t.type},radio:function(t){return"radio"===t.type},checkbox:function(t){return"checkbox"===t.type},file:function(t){return"file"===t.type},password:function(t){return"password"===t.type},submit:function(t){return"submit"===t.type},image:function(t){return"image"===t.type},reset:function(t){return"reset"===t.type},button:function(t){return"button"===t.type||t.nodeName.toLowerCase()==="button"},input:function(t){return(/input|select|textarea|button/i).test(t.nodeName)}},setFilters:{first:function(u,t){return t===0},last:function(v,u,t,w){return u===w.length-1},even:function(u,t){return t%2===0},odd:function(u,t){return t%2===1},lt:function(v,u,t){return u<t[3]-0},gt:function(v,u,t){return u>t[3]-0},nth:function(v,u,t){return t[3]-0===u},eq:function(v,u,t){return t[3]-0===u}},filter:{PSEUDO:function(v,C,B,D){var t=C[1],u=f.filters[t];if(u){return u(v,B,C,D)}else{if(t==="contains"){return(v.textContent||v.innerText||b.getText([v])||"").indexOf(C[3])>=0}else{if(t==="not"){var w=C[3];for(var A=0,z=w.length;A<z;A++){if(w[A]===v){return false}}return true}else{b.error(t)}}}},CHILD:function(t,w){var B=w[1],u=t;switch(B){case"only":case"first":while((u=u.previousSibling)){if(u.nodeType===1){return false}}if(B==="first"){return true}u=t;case"last":while((u=u.nextSibling)){if(u.nodeType===1){return false}}return true;case"nth":var v=w[2],E=w[3];if(v===1&&E===0){return true}var A=w[0],D=t.parentNode;if(D&&(D.sizcache!==A||!t.nodeIndex)){var z=0;for(u=D.firstChild;u;u=u.nextSibling){if(u.nodeType===1){u.nodeIndex=++z}}D.sizcache=A}var C=t.nodeIndex-E;if(v===0){return C===0}else{return(C%v===0&&C/v>=0)}}},ID:function(u,t){return u.nodeType===1&&u.getAttribute("id")===t},TAG:function(u,t){return(t==="*"&&u.nodeType===1)||u.nodeName.toLowerCase()===t},CLASS:function(u,t){return(" "+(u.className||u.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(A,w){var v=w[1],t=f.attrHandle[v]?f.attrHandle[v](A):A[v]!=null?A[v]:A.getAttribute(v),B=t+"",z=w[2],u=w[4];return t==null?z==="!=":z==="="?B===u:z==="*="?B.indexOf(u)>=0:z==="~="?(" "+B+" ").indexOf(u)>=0:!u?B&&t!==false:z==="!="?B!==u:z==="^="?B.indexOf(u)===0:z==="$="?B.substr(B.length-u.length)===u:z==="|="?B===u||B.substr(0,u.length+1)===u+"-":false},POS:function(z,u,v,A){var t=u[2],w=f.setFilters[t];if(w){return w(z,v,u,A)}}}};var l=f.match.POS,g=function(u,t){return"\\"+(t-0+1)};for(var o in f.match){f.match[o]=new RegExp(f.match[o].source+(/(?![^\[]*\])(?![^\(]*\))/.source));f.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[o].source.replace(/\\(\d+)/g,g))}var a=function(u,t){u=Array.prototype.slice.call(u,0);if(t){t.push.apply(t,u);return t}return u};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(m){a=function(z,w){var v=0,u=w||[];if(d.call(z)==="[object Array]"){Array.prototype.push.apply(u,z)}else{if(typeof z.length==="number"){for(var t=z.length;v<t;v++){u.push(z[v])}}else{for(;z[v];v++){u.push(z[v])}}}return u}}var c,n;if(document.documentElement.compareDocumentPosition){c=function(u,t){if(u===t){q=true;return 0}if(!u.compareDocumentPosition||!t.compareDocumentPosition){return u.compareDocumentPosition?-1:1}return u.compareDocumentPosition(t)&4?-1:1}}else{c=function(D,C){var A,u,v=[],t=[],z=D.parentNode,B=C.parentNode,E=z;if(D===C){q=true;return 0}else{if(z===B){return n(D,C)}else{if(!z){return -1}else{if(!B){return 1}}}}while(E){v.unshift(E);E=E.parentNode}E=B;while(E){t.unshift(E);E=E.parentNode}A=v.length;u=t.length;for(var w=0;w<A&&w<u;w++){if(v[w]!==t[w]){return n(v[w],t[w])}}return w===A?n(D,t[w],-1):n(v[w],C,1)};n=function(u,t,v){if(u===t){return v}var w=u.nextSibling;while(w){if(w===t){return -1}w=w.nextSibling}return 1}}b.getText=function(t){var u="",w;for(var v=0;t[v];v++){w=t[v];if(w.nodeType===3||w.nodeType===4){u+=w.nodeValue}else{if(w.nodeType!==8){u+=b.getText(w.childNodes)}}}return u};(function(){var u=document.createElement("div"),v="script"+(new Date()).getTime(),t=document.documentElement;u.innerHTML="<a name='"+v+"'/>";t.insertBefore(u,t.firstChild);if(document.getElementById(v)){f.find.ID=function(z,A,B){if(typeof A.getElementById!=="undefined"&&!B){var w=A.getElementById(z[1]);return w?w.id===z[1]||typeof w.getAttributeNode!=="undefined"&&w.getAttributeNode("id").nodeValue===z[1]?[w]:undefined:[]}};f.filter.ID=function(A,w){var z=typeof A.getAttributeNode!=="undefined"&&A.getAttributeNode("id");return A.nodeType===1&&z&&z.nodeValue===w}}t.removeChild(u);t=u=null})();(function(){var t=document.createElement("div");t.appendChild(document.createComment(""));if(t.getElementsByTagName("*").length>0){f.find.TAG=function(u,A){var z=A.getElementsByTagName(u[1]);if(u[1]==="*"){var w=[];for(var v=0;z[v];v++){if(z[v].nodeType===1){w.push(z[v])}}z=w}return z}}t.innerHTML="<a href='#'></a>";if(t.firstChild&&typeof t.firstChild.getAttribute!=="undefined"&&t.firstChild.getAttribute("href")!=="#"){f.attrHandle.href=function(u){return u.getAttribute("href",2)}}t=null})();if(document.querySelectorAll){(function(){var t=b,w=document.createElement("div"),v="__sizzle__";w.innerHTML="<p class='TEST'></p>";if(w.querySelectorAll&&w.querySelectorAll(".TEST").length===0){return}b=function(I,A,D,H){A=A||document;if(!H&&!b.isXML(A)){var G=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(I);if(G&&(A.nodeType===1||A.nodeType===9)){if(G[1]){return a(A.getElementsByTagName(I),D)}else{if(G[2]&&f.find.CLASS&&A.getElementsByClassName){return a(A.getElementsByClassName(G[2]),D)}}}if(A.nodeType===9){if(I==="body"&&A.body){return a([A.body],D)}else{if(G&&G[3]){var C=A.getElementById(G[3]);if(C&&C.parentNode){if(C.id===G[3]){return a([C],D)}}else{return a([],D)}}}try{return a(A.querySelectorAll(I),D)}catch(E){}}else{if(A.nodeType===1&&A.nodeName.toLowerCase()!=="object"){var B=A.getAttribute("id"),z=B||v,K=A.parentNode,J=/^\s*[+~]/.test(I);if(!B){A.setAttribute("id",z)}else{z=z.replace(/'/g,"\\$&")}if(J&&K){A=A.parentNode}try{if(!J||K){return a(A.querySelectorAll("[id='"+z+"'] "+I),D)}}catch(F){}finally{if(!B){A.removeAttribute("id")}}}}}return t(I,A,D,H)};for(var u in t){b[u]=t[u]}w=null})()}(function(){var t=document.documentElement,v=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector,u=false;try{v.call(document.documentElement,"[test!='']:sizzle")}catch(w){u=true}if(v){b.matchesSelector=function(z,B){B=B.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!b.isXML(z)){try{if(u||!f.match.PSEUDO.test(B)&&!/!=/.test(B)){return v.call(z,B)}}catch(A){}}return b(B,null,null,[z]).length>0}}})();(function(){var t=document.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>";if(!t.getElementsByClassName||t.getElementsByClassName("e").length===0){return}t.lastChild.className="e";if(t.getElementsByClassName("e").length===1){return}f.order.splice(1,0,"CLASS");f.find.CLASS=function(u,v,w){if(typeof v.getElementsByClassName!=="undefined"&&!w){return v.getElementsByClassName(u[1])}};t=null})();function p(u,B,A,E,C,D){for(var w=0,v=E.length;w<v;w++){var t=E[w];if(t){var z=false;t=t[u];while(t){if(t.sizcache===A){z=E[t.sizset];break}if(t.nodeType===1&&!D){t.sizcache=A;t.sizset=w}if(t.nodeName.toLowerCase()===B){z=t;break}t=t[u]}E[w]=z}}}function s(u,B,A,E,C,D){for(var w=0,v=E.length;w<v;w++){var t=E[w];if(t){var z=false;t=t[u];while(t){if(t.sizcache===A){z=E[t.sizset];break}if(t.nodeType===1){if(!D){t.sizcache=A;t.sizset=w}if(typeof B!=="string"){if(t===B){z=true;break}}else{if(b.filter(B,[t]).length>0){z=t;break}}}t=t[u]}E[w]=z}}}if(document.documentElement.contains){b.contains=function(u,t){return u!==t&&(u.contains?u.contains(t):true)}}else{if(document.documentElement.compareDocumentPosition){b.contains=function(u,t){return !!(u.compareDocumentPosition(t)&16)}}else{b.contains=function(){return false}}}b.isXML=function(t){var u=(t?t.ownerDocument||t:0).documentElement;return u?u.nodeName!=="HTML":false};var h=function(t,C){var A,w=[],z="",v=C.nodeType?[C]:C;while((A=f.match.PSEUDO.exec(t))){z+=A[0];t=t.replace(f.match.PSEUDO,"")}t=f.relative[t]?t+"*":t;for(var B=0,u=v.length;B<u;B++){b(t,v[B],w)}return b.filter(z,w)};return b});kola("kola.bom.Event",null,function(){var a={on:function(f,b,h){if(!f||!b||!h){return this}var d=f.events;if(!f.events){d=f.events={}}var c=d[b];if(!c){var c=d[b]=[]}var g=function(){h.apply(f,arguments)};c.push({srcHandler:h,handler:g});if(f.addEventListener){f.addEventListener(b,g,false)}else{f.attachEvent("on"+b,g)}return this},un:function(j,d,k,c){if(!j||!d){return this}if(k){if(c){a._remove(j,d,k)}else{var h=j.events;if(!h){return}var g=h[d];if(!g){return}for(var f=0,b=g.length;f<b;f++){if(g[f].srcHandler==k){a._remove(j,d,g[f].handler);g.splice(f,1);f--;b--}}}}else{var h=j.events;if(!h){return}var g=h[d];if(!g){return}for(var f=0,b=g.length;f<b;f++){a._remove(j,d,g[f].handler,true)}delete h[d]}return this},_remove:function(c,b,d){if(c.removeEventListener){c.removeEventListener(b,d,false)}else{c.detachEvent("on"+b,d)}},onout:function(c,b,h){var g=a._listener.out(c,b,h),d=c._kolaEvent;if(!d){d=c._kolaEvent={out:[]}}d.out.push({e:c,n:b,l:h,f:g});a.on(document.body,b,g);return this},unout:function(g,c,j){var f;if((f=g._kolaEvent)&&(f=f.out)&&(f.length>0)){for(var d=0,b=f.length;d<b;d++){var h=f[d];if(h.e===g&&h.n===c&&h.l===j){a.un(document.body,c,h.f);f.splice(d,1);break}}}return this},fire:function(f,c,h){var g;if(!(g=f.__events)||!(g=g[c])){return}h=h||{};h.type=c;for(var d=0,b=g.length;d<b;d++){g[d].h.call(f,h)}},stop:function(b){a.stopPropagation(b);a.preventDefault(b)},stopPropagation:function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}},preventDefault:function(b){b.returnValue=false;if(b.preventDefault){b.preventDefault()}},element:function(b){return b.target||b.srcElement},_listener:{out:function(c,b,d){return function(f){if(!a.contains(c,(a.element(f)))){d.call(window,f)}}}},contains:function(c,d){if(!d){return false}var b=d;while(b=b.parentNode){if(b==c){return true}}return false}};return a});kola("kola.bom.Browser",["kola.lang.Function"],function(a){var b={render:function(){var c=navigator.userAgent,d;if(c.indexOf("MSIE")!=-1){d="ie"}else{if(c.indexOf("AppleWebKit")!=-1){d="webkit"}else{if(c.indexOf("Gecko")!=-1){d="gecko"}else{if(c.indexOf("Presto")!=-1){d="Presto"}else{d="unkown"}}}}b.render=a.x(d);return d},name:function(){var c=navigator.userAgent,d;switch(b.render()){case"ie":if(c.indexOf("QQBrowser")!=-1){d="qq"}else{if(c.indexOf("Maxthon")!=-1){d="maxthon"}else{if(c.indexOf("SE")!=-1&&c.indexOf("MetaSr")!=-1){d="sogou"}else{d="ie"}}}break;case"webkit":if(c.indexOf("Chrome")!=-1){d="chrome"}else{if(c.indexOf("QQBrowser")!=-1){d="qq"}else{if(c.indexOf("Maxthon")!=-1){d="maxthon"}else{if(c.indexOf("SE")!=-1&&c.indexOf("MetaSr")!=-1){d="sogou"}else{if(c.indexOf("Version")!=-1&&c.indexOf("Safari")!=-1){d="safari"}else{d="unkown"}}}}}break;case"gecko":d="firefox";break;case"Presto":d="opera";break}b.name=a.x(d);return d},renderVersion:function(){var c=navigator.userAgent,d;switch(b.render()){case"ie":d=parseInt(c.substr(c.indexOf("MSIE")+5,3));break;case"webkit":d=parseInt(c.substr(c.indexOf("AppleWebKit")+12,4));break;case"gecko":d=parseInt(c.substr(c.indexOf("Gecko")+6,8));break;case"presto":d=parseInt(c.substr(c.indexOf("Presto")+7,3));break}b.renderVersion=a.x(d);return d}};return b});kola("kola.net.Ajax",["kola.lang.Function"],function(Function){var Ajax={request:function(url,options){var trans=getTransport();var opt={method:"get",async:true};for(var it in (options=options||{})){opt[it]=options[it]}if(!opt.method){opt.method="get"}if(opt.method=="get"&&typeof(opt.data)=="string"){url+=(url.indexOf("?")==-1?"?":"&")+opt.data;opt.data=null}trans.open(opt.method,url,opt.async);if(opt.method=="post"){trans.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8")}trans.onreadystatechange=Function.bind(this._onStateChange,this,trans,url,opt);trans.send(opt.data||null);return trans},text:function(url,options){options.format="text";return this.request(url,options)},json:function(url,options){options.format="json";return this.request(url,options)},xml:function(url,options){options.format="xml";return this.request(url,options)},_onStateChange:function(trans,url,options){if(trans.readyState==4){trans.onreadystatechange=function(){};var s=trans.status;if((typeof(s)=="number")&&s>=200&&s<300){if(typeof(options.succ)!="function"){return}var ctt=trans;if(typeof(options.format)=="string"){switch(options.format){case"text":ctt=trans.responseText;break;case"json":ctt=eval("("+trans.responseText+")");break;case"xml":ctt=trans.responseXML;break}}options.succ(ctt)}else{if(window.closed){return}if(typeof(options.fail)=="function"){var error={status:trans.status,statusText:trans.statusText};if(trans.readyState==4&&(trans.status==0||trans.status==12030)){error.status=-1}options.fail(error)}}}}};var getTransport=function(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return false}}}};return Ajax});kola("newt.lib.jqueryTool","jquery.Core",function(){(function(h){h.tools=h.tools||{};h.tools.tabs={version:"1.0.4",conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",api:false,rotate:false},addEffect:function(b,a){j[b]=a}};var j={"default":function(a,b){this.getPanes().hide().eq(a).show();b.call()},fade:function(c,k){var d=this.getConf(),a=d.fadeOutSpeed,b=this.getPanes();if(a){b.fadeOut(a)}else{b.hide()}b.eq(c).fadeIn(d.fadeInSpeed,k)},slide:function(a,b){this.getPanes().slideUp(200);this.getPanes().eq(a).slideDown(400,b)},ajax:function(a,b){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),b)}};var f;h.tools.tabs.addEffect("horizontal",function(a,b){if(!f){f=this.getPanes().eq(0).width()}this.getCurrentPane().animate({width:0},function(){h(this).hide()});this.getPanes().eq(a).animate({width:f},function(){h(this).show();b.call()})});function g(d,c,k){var l=this,a=h(this),b;h.each(k,function(n,m){if(h.isFunction(m)){a.bind(n,m)}});h.extend(this,{click:function(r,t){var s=l.getCurrentPane();var q=d.eq(r);if(typeof r=="string"&&r.replace("#","")){q=d.filter("[href*="+r.replace("#","")+"]");r=Math.max(d.index(q),0)}if(k.rotate){var p=d.length-1;if(r<0){return l.click(p,t)}if(r>p){return l.click(0,t)}}if(!q.length){if(b>=0){return l}r=k.initialIndex;q=d.eq(r)}if(r===b){return l}t=t||h.Event();t.type="onBeforeClick";a.trigger(t,[r]);if(t.isDefaultPrevented()){return}j[k.effect].call(l,r,function(){t.type="onClick";a.trigger(t,[r])});t.type="onStart";a.trigger(t,[r]);if(t.isDefaultPrevented()){return}b=r;d.removeClass(k.current);q.addClass(k.current);return l},getConf:function(){return k},getTabs:function(){return d},getPanes:function(){return c},getCurrentPane:function(){return c.eq(b)},getCurrentTab:function(){return d.eq(b)},getIndex:function(){return b},next:function(){return l.click(b+1)},prev:function(){return l.click(b-1)},bind:function(n,m){a.bind(n,m);return l},onBeforeClick:function(m){return this.bind("onBeforeClick",m)},onClick:function(m){return this.bind("onClick",m)},unbind:function(m){a.unbind(m);return l}});d.each(function(m){h(this).bind(k.event,function(n){l.click(m,n);return false})});if(location.hash){l.click(location.hash)}else{if(k.initialIndex===0||k.initialIndex>0){l.click(k.initialIndex)}}c.find("a[href^=#]").click(function(m){l.click(h(this).attr("href"),m)})}h.fn.tabs=function(a,d){var c=this.eq(typeof d=="number"?d:0).data("tabs");if(c){return c}if(h.isFunction(d)){d={onBeforeClick:d}}var b=h.extend({},h.tools.tabs.conf),k=this.length;d=h.extend(b,d);this.each(function(o){var q=h(this);var p=q.find(d.tabs);if(!p.length){p=q.children()}var n=a.jquery?a:q.children(a);if(!n.length){n=k==1?h(a):q.parent().find(a)}c=new g(p,n,d);q.data("tabs",c)});return d.api?c:this}})(jQuery);(function(j){var h=[];j.tools=j.tools||{};j.tools.tooltip={version:"1.1.2",conf:{effect:"toggle",fadeOutSpeed:"fast",tip:null,predelay:0,delay:30,opacity:1,lazy:undefined,position:["top","center"],offset:[0,0],cancelDefault:true,relative:false,oneInstance:true,events:{def:"mouseover,mouseout",input:"focus,blur",widget:"focus mouseover,blur mouseout",tooltip:"mouseover,mouseout"},api:false},addEffect:function(c,a,b){f[c]=[a,b]}};var f={toggle:[function(d){var c=this.getConf(),b=this.getTip(),a=c.opacity;if(a<1){b.css({opacity:a})}b.show();d.call()},function(a){this.getTip().hide();a.call()}],fade:[function(a){this.getTip().fadeIn(this.getConf().fadeInSpeed,a)},function(a){this.getTip().fadeOut(this.getConf().fadeOutSpeed,a)}]};function g(w,v){var a=this,r=j(this);w.data("tooltip",a);var q=w.next();if(v.tip){q=j(v.tip);if(q.length>1){q=w.nextAll(v.tip).eq(0);if(!q.length){q=w.parent().nextAll(v.tip).eq(0)}}}function b(l){var m=v.relative?w.position().top:w.offset().top,n=v.relative?w.position().left:w.offset().left,k=v.position[0];m-=q.outerHeight()-v.offset[0];n+=w.outerWidth()+v.offset[1];var p=q.outerHeight()+w.outerHeight();if(k=="center"){m+=p/2}if(k=="bottom"){m+=p}k=v.position[1];var o=q.outerWidth()+w.outerWidth();if(k=="center"){n-=o/2}if(k=="left"){n-=o}return{top:m,left:n}}var t=w.is(":input"),z=t&&w.is(":checkbox, :radio, select, :button"),u=w.attr("type"),c=v.events[u]||v.events[t?(z?"widget":"input"):"def"];c=c.split(/,\s*/);if(c.length!=2){throw"Tooltip: bad events configuration for "+u}w.bind(c[0],function(k){if(v.oneInstance){j.each(h,function(){this.hide()})}var l=q.data("trigger");if(l&&l[0]!=this){q.hide().stop(true,true)}k.target=this;a.show(k);c=v.events.tooltip.split(/,\s*/);q.bind(c[0],function(){a.show(k)});if(c[1]){q.bind(c[1],function(){a.hide(k)})}});w.bind(c[1],function(k){a.hide(k)});if(!j.browser.msie&&!t&&!v.predelay){w.mousemove(function(){if(!a.isShown()){w.triggerHandler("mouseover")}})}if(v.opacity<1){q.css("opacity",v.opacity)}var d=0,s=w.attr("title");if(s&&v.cancelDefault){w.removeAttr("title");w.data("title",s)}j.extend(a,{show:function(k){if(k){w=j(k.target)}clearTimeout(q.data("timer"));if(q.is(":animated")||q.is(":visible")){return a}function l(){q.data("trigger",w);var m=b(k);if(v.tip&&s){q.html(w.data("title"))}k=k||j.Event();k.type="onBeforeShow";r.trigger(k,[m]);if(k.isDefaultPrevented()){return a}m=b(k);q.css({position:"absolute",top:m.top,left:m.left});var n=f[v.effect];if(!n){throw'Nonexistent effect "'+v.effect+'"'}n[0].call(a,function(){k.type="onShow";r.trigger(k)})}if(v.predelay){clearTimeout(d);d=setTimeout(l,v.predelay)}else{l()}return a},hide:function(k){clearTimeout(q.data("timer"));clearTimeout(d);if(!q.is(":visible")){return}function l(){k=k||j.Event();k.type="onBeforeHide";r.trigger(k);if(k.isDefaultPrevented()){return}f[v.effect][1].call(a,function(){k.type="onHide";r.trigger(k)})}if(v.delay&&k){q.data("timer",setTimeout(l,v.delay))}else{l()}return a},isShown:function(){return q.is(":visible, :animated")},getConf:function(){return v},getTip:function(){return q},getTrigger:function(){return w},bind:function(l,k){r.bind(l,k);return a},onHide:function(k){return this.bind("onHide",k)},onBeforeShow:function(k){return this.bind("onBeforeShow",k)},onShow:function(k){return this.bind("onShow",k)},onBeforeHide:function(k){return this.bind("onBeforeHide",k)},unbind:function(k){r.unbind(k);return a}});j.each(v,function(l,k){if(j.isFunction(k)){a.bind(l,k)}})}j.prototype.tooltip=function(c){var b=this.eq(typeof c=="number"?c:0).data("tooltip");if(b){return b}var a=j.extend(true,{},j.tools.tooltip.conf);if(j.isFunction(c)){c={onBeforeShow:c}}else{if(typeof c=="string"){c={tip:c}}}c=j.extend(true,a,c);if(typeof c.position=="string"){c.position=c.position.split(/,?\s/)}if(c.lazy!==false&&(c.lazy===true||this.length>20)){this.one("mouseover",function(d){b=new g(j(this),c);b.show(d);h.push(b)})}else{this.each(function(){b=new g(j(this),c);h.push(b)})}return c.api?b:this}})(jQuery);(function(d){d.tools=d.tools||{};d.tools.scrollable={version:"1.1.2",conf:{size:5,vertical:false,speed:400,keyboard:true,keyboardSteps:null,disabledClass:"disabled",hoverClass:null,clickable:true,activeClass:"active",easing:"swing",loop:false,items:".items",item:null,prev:".prev",next:".next",prevPage:".prevPage",nextPage:".nextPage",api:false}};var g;function f(s,u){var a=this,c=d(this),F=!u.vertical,E=s.children(),w=0,A;if(!g){g=a}d.each(u,function(j,h){if(d.isFunction(h)){c.bind(j,h)}});if(E.length>1){E=d(u.items,s)}function v(h){var j=d(h);return u.globalNav?j:s.parent().find(h)}s.data("finder",v);var D=v(u.prev),B=v(u.next),C=v(u.prevPage),t=v(u.nextPage);d.extend(a,{getIndex:function(){return w},getClickIndex:function(){var h=a.getItems();return h.index(h.filter("."+u.activeClass))},getConf:function(){return u},getSize:function(){return a.getItems().size()},getPageAmount:function(){return Math.ceil(this.getSize()/u.size)},getPageIndex:function(){return Math.ceil(w/u.size)},getNaviButtons:function(){return D.add(B).add(C).add(t)},getRoot:function(){return s},getItemWrap:function(){return E},getItems:function(){return E.children(u.item)},getVisibleItems:function(){return a.getItems().slice(w,w+u.size)},seekTo:function(n,j,m){if(n<0){n=0}if(w===n){return a}if(d.isFunction(j)){m=j}if(n>a.getSize()-u.size){return u.loop?a.begin():this.end()}var l=a.getItems().eq(n);if(!l.length){return a}var k=d.Event("onBeforeSeek");c.trigger(k,[n]);if(k.isDefaultPrevented()){return a}if(j===undefined||d.isFunction(j)){j=u.speed}function h(){if(m){m.call(a,n)}c.trigger("onSeek",[n])}if(F){E.animate({left:-l.position().left},j,u.easing,h)}else{E.animate({top:-l.position().top},j,u.easing,h)}g=a;w=n;k=d.Event("onStart");c.trigger(k,[n]);if(k.isDefaultPrevented()){return a}D.add(C).toggleClass(u.disabledClass,n===0);B.add(t).toggleClass(u.disabledClass,n>=a.getSize()-u.size);return a},move:function(h,j,k){A=h>0;return this.seekTo(w+h,j,k)},next:function(h,j){return this.move(1,h,j)},prev:function(h,j){return this.move(-1,h,j)},movePage:function(h,j,k){A=h>0;var m=u.size*h;var l=w%u.size;if(l>0){m+=(h>0?-l:u.size-l)}return this.move(m,j,k)},prevPage:function(h,j){return this.movePage(-1,h,j)},nextPage:function(h,j){return this.movePage(1,h,j)},setPage:function(j,h,k){return this.seekTo(j*u.size,h,k)},begin:function(h,j){A=false;return this.seekTo(0,h,j)},end:function(j,k){A=true;var h=this.getSize()-u.size;return h>0?this.seekTo(h,j,k):a},reload:function(){c.trigger("onReload");return a},focus:function(){g=a;return a},click:function(l){var k=a.getItems().eq(l),n=u.activeClass,m=u.size;if(l<0||l>=a.getSize()){return a}if(m==1){if(u.loop){return a.next()}if(l===0||l==a.getSize()-1){A=(A===undefined)?true:!A}return A===false?a.prev():a.next()}if(m==2){if(l==w){l--}a.getItems().removeClass(n);k.addClass(n);return a.seekTo(l,time,fn)}if(!k.hasClass(n)){a.getItems().removeClass(n);k.addClass(n);var h=Math.floor(m/2);var j=l-h;if(j>a.getSize()-m){j=a.getSize()-m}if(j!==l){return a.seekTo(j)}}return a},bind:function(j,h){c.bind(j,h);return a},unbind:function(h){c.unbind(h);return a}});d.each("onBeforeSeek,onStart,onSeek,onReload".split(","),function(j,h){a[h]=function(k){return a.bind(h,k)}});D.addClass(u.disabledClass).click(function(){a.prev()});B.click(function(){a.next()});t.click(function(){a.nextPage()});if(a.getSize()<u.size){B.add(t).addClass(u.disabledClass)}C.addClass(u.disabledClass).click(function(){a.prevPage()});var z=u.hoverClass,b="keydown."+Math.random().toString().substring(10);a.onReload(function(){if(z){a.getItems().hover(function(){d(this).addClass(z)},function(){d(this).removeClass(z)})}if(u.clickable){a.getItems().each(function(h){d(this).unbind("click.scrollable").bind("click.scrollable",function(j){if(d(j.target).is("a")){return}return a.click(h)})})}if(u.keyboard){d(document).unbind(b).bind(b,function(j){if(j.altKey||j.ctrlKey){return}if(u.keyboard!="static"&&g!=a){return}var h=u.keyboardSteps;if(F&&(j.keyCode==37||j.keyCode==39)){a.move(j.keyCode==37?-h:h);return j.preventDefault()}if(!F&&(j.keyCode==38||j.keyCode==40)){a.move(j.keyCode==38?-h:h);return j.preventDefault()}return true})}else{d(document).unbind(b)}});a.reload()}d.fn.scrollable=function(c){var b=this.eq(typeof c=="number"?c:0).data("scrollable");if(b){return b}var a=d.extend({},d.tools.scrollable.conf);c=d.extend(a,c);c.keyboardSteps=c.keyboardSteps||c.size;this.each(function(){b=new f(d(this),c);d(this).data("scrollable",b)});return c.api?b:this}})(jQuery);(function(j){j.tools=j.tools||{};j.tools.overlay={version:"1.1.2",addEffect:function(c,b,a){f[c]=[b,a]},conf:{top:"10%",left:"center",absolute:false,speed:"normal",closeSpeed:"fast",effect:"default",close:null,oneInstance:true,closeOnClick:true,closeOnEsc:true,api:false,expose:null,target:null}};var f={};j.tools.overlay.addEffect("default",function(a){this.getOverlay().fadeIn(this.getConf().speed,a)},function(a){this.getOverlay().fadeOut(this.getConf().closeSpeed,a)});var h=[];function g(t,p){var a=this,c=j(this),b=j(window),q,r,s,v=p.expose&&j.tools.expose.version;var u=p.target||t.attr("rel");r=u?j(u):null||t;if(!r.length){throw"Could not find Overlay: "+u}if(t&&t.index(r)==-1){t.click(function(k){a.load(k);return k.preventDefault()})}j.each(p,function(l,k){if(j.isFunction(k)){c.bind(l,k)}});j.extend(a,{load:function(k){if(a.isOpened()){return a}var n=f[p.effect];if(!n){throw'Overlay: cannot find effect : "'+p.effect+'"'}if(p.oneInstance){j.each(h,function(){this.close(k)})}k=k||j.Event();k.type="onBeforeLoad";c.trigger(k);if(k.isDefaultPrevented()){return a}s=true;if(v){r.expose().load(k)}var l=p.top;var m=p.left;var w=r.outerWidth({margin:true});var o=r.outerHeight({margin:true});if(typeof l=="string"){l=l=="center"?Math.max((b.height()-o)/2,0):parseInt(l,10)/100*b.height()}if(m=="center"){m=Math.max((b.width()-w)/2,0)}if(!p.absolute){l+=b.scrollTop();m+=b.scrollLeft()}r.css({top:l,left:m,position:"absolute"});k.type="onStart";c.trigger(k);n[0].call(a,function(){if(s){k.type="onLoad";c.trigger(k)}});if(p.closeOnClick){j(document).bind("click.overlay",function(z){if(!a.isOpened()){return}var A=j(z.target);if(A.parents(r).length>1){return}j.each(h,function(){this.close(z)})})}if(p.closeOnEsc){j(document).unbind("keydown.overlay").bind("keydown.overlay",function(z){if(z.keyCode==27){j.each(h,function(){this.close(z)})}})}return a},close:function(k){if(!a.isOpened()){return a}k=k||j.Event();k.type="onBeforeClose";c.trigger(k);if(k.isDefaultPrevented()){return}s=false;f[p.effect][1].call(a,function(){k.type="onClose";c.trigger(k)});var l=true;j.each(h,function(){if(this.isOpened()){l=false}});if(l){j(document).unbind("click.overlay").unbind("keydown.overlay")}return a},getContent:function(){return r},getOverlay:function(){return r},getTrigger:function(){return t},getClosers:function(){return q},isOpened:function(){return s},getConf:function(){return p},bind:function(l,k){c.bind(l,k);return a},unbind:function(k){c.unbind(k);return a}});j.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(l,k){a[k]=function(m){return a.bind(k,m)}});if(v){if(typeof p.expose=="string"){p.expose={color:p.expose}}j.extend(p.expose,{api:true,closeOnClick:p.closeOnClick,closeOnEsc:false});var d=r.expose(p.expose);d.onBeforeClose(function(k){a.close(k)});a.onClose(function(k){d.close(k)})}q=r.find(p.close||".close");if(!q.length&&!p.close){q=j('<div class="close"></div>');r.prepend(q)}q.click(function(k){a.close(k)})}j.fn.overlay=function(c){var b=this.eq(typeof c=="number"?c:0).data("overlay");if(b){return b}if(j.isFunction(c)){c={onBeforeLoad:c}}var a=j.extend({},j.tools.overlay.conf);c=j.extend(true,a,c);this.each(function(){b=new g(j(this),c);h.push(b);j(this).data("overlay",b)});return c.api?b:this}})(jQuery);(function(d){d.tools=d.tools||{};d.tools.expose={version:"1.0.5",conf:{maskId:null,loadSpeed:"slow",closeSpeed:"fast",closeOnClick:true,closeOnEsc:true,zIndex:9998,opacity:0.8,color:"#456",api:false}};function f(){if(d.browser.msie){var a=d(document).height(),b=d(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a-b<20?b:a]}return[d(window).width(),d(document).height()]}function g(c,k){var m=this,a=d(this),n=null,l=false,b=0;d.each(k,function(j,h){if(d.isFunction(h)){a.bind(j,h)}});d(window).resize(function(){m.fit()});d.extend(this,{getMask:function(){return n},getExposed:function(){return c},getConf:function(){return k},isLoaded:function(){return l},load:function(p){if(l){return m}b=c.eq(0).css("zIndex");if(k.maskId){n=d("#"+k.maskId)}if(!n||!n.length){var j=f();n=d("<div class='overlay-cover'/>").css({position:"absolute",top:0,left:0,width:j[0],height:j[1],display:"none",opacity:0,zIndex:k.zIndex});if(k.maskId){n.attr("id",k.maskId)}if(d("#t-sky").length>0){d("#t-sky").append(n)}else{d("body").append(n)}var o=n.css("backgroundColor");if(!o||o=="transparent"||o=="rgba(0, 0, 0, 0)"){n.css("backgroundColor",k.color)}if(k.closeOnEsc){d(document).bind("keydown.unexpose",function(q){if(q.keyCode==27){m.close()}})}if(k.closeOnClick){n.bind("click.unexpose",function(q){m.close(q)})}}p=p||d.Event();p.type="onBeforeLoad";a.trigger(p);if(p.isDefaultPrevented()){return m}d.each(c,function(){var q=d(this);if(!/relative|absolute|fixed/i.test(q.css("position"))){q.css("position","relative")}});c.css({zIndex:Math.max(k.zIndex+1,b=="auto"?0:b)});var h=n.height();if(!this.isLoaded()){n.css({opacity:0,display:"block"}).fadeTo(k.loadSpeed,k.opacity,function(){if(n.height()!=h){n.css("height",h)}p.type="onLoad";a.trigger(p)})}l=true;return m},close:function(h){if(!l){return m}h=h||d.Event();h.type="onBeforeClose";a.trigger(h);if(h.isDefaultPrevented()){return m}n.fadeOut(k.closeSpeed,function(){h.type="onClose";a.trigger(h);c.css({zIndex:d.browser.msie?b:null})});l=false;return m},fit:function(){if(n){var h=f();n.css({width:h[0],height:h[1]})}},bind:function(j,h){a.bind(j,h);return m},unbind:function(h){a.unbind(h);return m}});d.each("onBeforeLoad,onLoad,onBeforeClose,onClose".split(","),function(j,h){m[h]=function(o){return m.bind(h,o)}})}d.fn.expose=function(c){var b=this.eq(typeof c=="number"?c:0).data("expose");if(b){return b}if(typeof c=="string"){c={color:c}}var a=d.extend({},d.tools.expose.conf);c=d.extend(a,c);this.each(function(){b=new g(d(this),c);d(this).data("expose",b)});return c.api?b:this}})(jQuery)});kola("lib.JSON",null,function(){var isJSONBuildIn=(window.JSON!=null&&typeof JSON.stringify==="function"&&typeof JSON.parse==="function");if(isJSONBuildIn){return JSON}else{return getJSONWraper()}function getJSONWraper(){var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());return JSON}});kola("mvc.view.template.engine.Elapse",[],function(){var REG_EXP={R_N:/\n/g,R_R:/\r/g,R_T:/\t/g,R_F:/\f/g,R_AB:/[&<>"]/igm,R_QUOTE:/\"/g,R_SLASH:/\\/g,R_TRIM:/(^\s*)|(\s*$)/g};var escapehash={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"};function replaceAB(m){return escapehash[m]}function trim(str){return str.replace(REG_EXP.R_TRIM,"")}var RUNTIME="#TERUNTIME";var TEMPLATES={};window[RUNTIME]={outputVal:function(value,filter_data){if(filter_data!=false){return wrou(value)}else{return value}},outputUnicode:function(str){return typeof(str)=="string"?str.replace(REG_EXP.R_AB,replaceAB):str},register:function(uri,template){TEMPLATES[uri]=template},include:function(uri,data){if(TEMPLATES[uri]==undefined){throw'include exception: name "'+uri+'" not found.'}return TEMPLATES[uri].render({data:data})}};var wrou=window[RUNTIME].outputUnicode;var STATE={STATIC_CONTENT:0,JAVASCRIPT:1,OUTPUT_VAL:2,END_MARKER:3,KEYWORD:4,IF_CON:5,ELSEIF_CON:6,FORARR_CON:7,SWITCH_CON:8,CASE_CON:9,FOREACH_CON:10,FOR_CON:11,EVAL_CON:12,SET_CON:13,IDEL:14,NAME_CON:15,INCLUDE_CON:16,LOOP_CON:17,WHILE_CON:18};var KEYWORD={IF:"if",FOREACH:"foreach",FORARR:"forarr",FOR:"for",SWITCH:"switch",ELSE:"else",ELSE_IF:"elseif",CASE:"case",BREAK:"break",CONTINUE:"continue",EVAL:"eval",SET:"set",NAME:"name",INCLUDE:"include",LOOP:"loop",WHILE:"while",DEFAULT:"default"};var KEYWORD_STR=[];for(var keyWordName in KEYWORD){KEYWORD_STR.push(KEYWORD[keyWordName])}var WORD_CONSTANT=["true","false","undefined","null","NaN","new","delete"];var SINGLE_KEYWORD=[KEYWORD.BREAK,KEYWORD.CONTINUE,KEYWORD.CASE,KEYWORD.ELSE,KEYWORD.ELSE_IF,KEYWORD.EVAL,KEYWORD.SET,KEYWORD.NAME,KEYWORD.INCLUDE,KEYWORD.DEFAULT];var TEMP_VAR_MAP={length:"l",index:"i",value:"tv",key:"k",over:"o",step:"st"};var TEMP_SHORTVARNAME=[];for(var name in TEMP_VAR_MAP){TEMP_SHORTVARNAME.push(TEMP_VAR_MAP[name])}var PARSEVAL_STATE={FOUND_VAL:0,FINDING:1,FOUND_STR_START_QUOTE:2,FOUND_STR_START_SINGLEQUOTE:3,FOUND_LEFT_SQUARE:4,FOUND_RIGHT_SQUARE:5};var PARSE_ITERVALNAME={FOUND_AS:1,FOUND_STR_START_QUOTE:2,FOUND_STR_START_SINGLEQUOTE:3,FOUND_LEFT_SQUARE:4,FOUND_RIGHT_SQUARE:5,FINDING:6,FOUND_VAL:7};var FIND_LOOP_SETTINGS={FOUND_STR_START_QUOTE:2,FOUND_STR_START_SINGLEQUOTE:3,FOUND_LEFT_SQUARE:4,FOUND_RIGHT_SQUARE:5,FINDING:6,FOUND_VAL:7};function inArray(value,arr){for(var i=0,l=arr.length;i<l;++i){if(arr[i]==value){return true}}return false}var Translater={parseStaticContent:function(staticContent){return'cb.push("'+staticContent.replace(REG_EXP.R_SLASH,"\\\\").replace(REG_EXP.R_QUOTE,'\\"')+'");'},parseLoopSetting:function(source){var state=FIND_LOOP_SETTINGS.FINDING;var settings=[];var valBuffer=[];source=trim(source);for(var i=0,l=source.length;i<l;++i){var curChar=source.charAt(i);switch(state){case FIND_LOOP_SETTINGS.FINDING:if(curChar==","){settings.push(valBuffer.join(""));valBuffer=[];continue}if(i==source.length-1){valBuffer.push(curChar);settings.push(valBuffer.join(""));valBuffer=[];continue}valBuffer.push(curChar);if(curChar=='"'){state=FIND_LOOP_SETTINGS.FOUND_STR_START_QUOTE;continue}if(curChar=="'"){state=FIND_LOOP_SETTINGS.FOUND_STR_START_SINGLEQUOTE;continue}var charCode=curChar.charCodeAt(0);if(curChar=="@"||curChar=="#"||charCode==36||charCode==95||(charCode>=97&&charCode<=122)||(charCode>=65&&charCode<=90)){state=FIND_LOOP_SETTINGS.FOUND_VAL;continue}break;case FIND_LOOP_SETTINGS.FOUND_STR_START_QUOTE:valBuffer.push(curChar);if(curChar=='"'){state=FIND_LOOP_SETTINGS.FINDING;continue}break;case FIND_LOOP_SETTINGS.FOUND_STR_START_SINGLEQUOTE:valBuffer.push(curChar);if(curChar=="'"){state=FIND_LOOP_SETTINGS.FINDING;continue}break;case FIND_LOOP_SETTINGS.FOUND_LEFT_SQUARE:valBuffer.push(curChar);if(curChar=="]"){state=FIND_LOOP_SETTINGS.FOUND_VAL;continue}break;case FIND_LOOP_SETTINGS.FOUND_VAL:var charCode=curChar.charCodeAt(0);if(curChar=="["){valBuffer.push(curChar);state=FIND_LOOP_SETTINGS.FOUND_LEFT_SQUARE;continue}if(curChar=="#"||parseInt(curChar)==curChar||curChar=="."||curChar=="["||curChar=="]"||charCode==36||charCode==95||(charCode>=97&&charCode<=122)||(charCode>=65&&charCode<=90)){valBuffer.push(curChar);continue}else{if(curChar==","){--i}state=FIND_LOOP_SETTINGS.FINDING;continue}break}}return settings},parseIterValName:function(source){var state=PARSE_ITERVALNAME.FINDING;var parsedSource=[];var tmpVars=[];var tmpVarBuffer=[];for(var i=0,l=source.length;i<l;++i){var curChar=source.charAt(i);switch(state){case PARSE_ITERVALNAME.FINDING:if(curChar=="a"&&source.charAt(i+1)=="s"&&source.charAt(i+2)==" "){i+=2;state=PARSE_ITERVALNAME.FOUND_AS;continue}parsedSource.push(curChar);if(curChar=='"'){state=PARSE_ITERVALNAME.FOUND_STR_START_QUOTE;continue}if(curChar=="'"){state=PARSE_ITERVALNAME.FOUND_STR_START_SINGLEQUOTE;continue}var charCode=curChar.charCodeAt(0);if(curChar=="@"||curChar=="#"||charCode==36||charCode==95||(charCode>=97&&charCode<=122)||(charCode>=65&&charCode<=90)){state=PARSE_ITERVALNAME.FOUND_VAL;continue}break;case PARSE_ITERVALNAME.FOUND_AS:if(curChar==" "||i==(source.length-1)){if(tmpVarBuffer.length<=0){continue}else{tmpVarBuffer.push(curChar);state=PARSE_ITERVALNAME.FINDING;tmpVars.push(tmpVarBuffer.join(""));tmpVarBuffer=[];continue}}else{tmpVarBuffer.push(curChar);continue}break;case PARSE_ITERVALNAME.FOUND_STR_START_QUOTE:parsedSource.push(curChar);if(curChar=='"'){state=PARSE_ITERVALNAME.FINDING;continue}break;case PARSE_ITERVALNAME.FOUND_STR_START_SINGLEQUOTE:parsedSource.push(curChar);if(curChar=="'"){state=PARSE_ITERVALNAME.FINDING;continue}break;case PARSE_ITERVALNAME.FOUND_LEFT_SQUARE:parsedSource.push(curChar);if(curChar=="]"){state=PARSE_ITERVALNAME.FOUND_VAL;continue}break;case PARSE_ITERVALNAME.FOUND_VAL:var charCode=curChar.charCodeAt(0);if(curChar=="["){parsedSource.push(curChar);state=PARSE_ITERVALNAME.FOUND_LEFT_SQUARE;continue}if(curChar=="#"||parseInt(curChar)==curChar||curChar=="."||curChar=="["||curChar=="]"||charCode==36||charCode==95||(charCode>=97&&charCode<=122)||(charCode>=65&&charCode<=90)){parsedSource.push(curChar);continue}else{parsedSource.push(curChar);state=PARSE_ITERVALNAME.FINDING;continue}break}}return[parsedSource.join(""),tmpVars[0]]},parseVal:function(source){source+=" ";var state=PARSEVAL_STATE.FINDING;var parsedSource=[];var varBuffer=[];for(var i=0,l=source.length;i<l;++i){var curChar=source.charAt(i);switch(state){case PARSEVAL_STATE.FINDING:if(curChar=='"'){state=PARSEVAL_STATE.FOUND_STR_START_QUOTE;parsedSource.push(curChar);continue}if(curChar=="'"){state=PARSEVAL_STATE.FOUND_STR_START_SINGLEQUOTE;parsedSource.push(curChar);continue}var charCode=curChar.charCodeAt(0);if(curChar=="@"||curChar=="#"||charCode==36||charCode==95||(charCode>=97&&charCode<=122)||(charCode>=65&&charCode<=90)){varBuffer=[curChar];state=PARSEVAL_STATE.FOUND_VAL;continue}parsedSource.push(curChar);break;case PARSEVAL_STATE.FOUND_STR_START_QUOTE:parsedSource.push(curChar);if(curChar=='"'){state=PARSEVAL_STATE.FINDING;continue}break;case PARSEVAL_STATE.FOUND_STR_START_SINGLEQUOTE:parsedSource.push(curChar);if(curChar=="'"){state=PARSEVAL_STATE.FINDING;continue}break;case PARSEVAL_STATE.FOUND_LEFT_SQUARE:varBuffer.push(curChar);if(curChar=="]"){var varBufferStr=varBuffer.join("");var leftSquareIndex=varBufferStr.indexOf("[");var rightSquareIndex=varBufferStr.lastIndexOf("]");if(leftSquareIndex!=-1&&rightSquareIndex!=-1){var content=Translater.parseVal(trim(varBufferStr.substring(leftSquareIndex+1,rightSquareIndex)));varBufferStr=varBufferStr.substring(0,leftSquareIndex+1)+content+varBufferStr.substr(rightSquareIndex);state=PARSEVAL_STATE.FOUND_VAL;varBuffer=[varBufferStr];continue}}break;case PARSEVAL_STATE.FOUND_VAL:var charCode=curChar.charCodeAt(0);if(curChar=="["){state=PARSEVAL_STATE.FOUND_LEFT_SQUARE;varBuffer.push(curChar);continue}if(curChar=="#"||parseInt(curChar)==curChar||curChar=="."||curChar=="["||curChar=="]"||charCode==36||charCode==95||(charCode>=97&&charCode<=122)||(charCode>=65&&charCode<=90)){varBuffer.push(curChar)}else{state=PARSEVAL_STATE.FINDING;var varBufferStr=varBuffer.join("");if(inArray(varBufferStr,WORD_CONSTANT)==false){switch(varBufferStr.charAt(0)){case"#":varBufferStr=varBufferStr.substr(1);if(varBufferStr.charAt(0)=="."){varBufferStr=varBufferStr.substr(1)}if(varBufferStr&&varBufferStr.length>0){if(varBufferStr.charAt(0)=="["){varBufferStr="vsb"+varBufferStr}else{varBufferStr="vsb."+varBufferStr}}else{varBufferStr="vsb"}varBuffer=[varBufferStr];break;case"@":varBufferStr=varBufferStr.substr(1);if(varBufferStr.charAt(0)=="."){varBufferStr=varBufferStr.substr(1)}if(varBufferStr&&varBufferStr.length>0){if(varBufferStr.charAt(0)=="["){varBufferStr="window"+varBufferStr}else{varBufferStr="window."+varBufferStr}}else{varBufferStr="window"}varBuffer=[varBufferStr];break;default:var tempNameSplited=varBuffer.join("").split(".");var subVars=tempNameSplited.shift().split("#");var varName=subVars.shift();if(subVars.length>0){var subVar=TEMP_VAR_MAP[subVars[0]];if(subVar===undefined){throw'tempvar exception: no such tempvar "#'+subVar+'".';varBuffer=['""']}else{tempNameSplited.unshift(subVar)}}else{tempNameSplited.unshift("v")}var squareSplited=varName.split("[");if(squareSplited.length>1){var nextAll="v["+squareSplited.slice(1);squareSplited.splice(1);squareSplited=squareSplited.concat(nextAll);varBuffer=["tsb."+squareSplited.join(".")]}else{varBuffer=["tsb."+varName+"."+tempNameSplited.join(".")]}}}varBuffer.push(curChar);parsedSource=parsedSource.concat(varBuffer);varBuffer=[];continue}break}}parsedSource=parsedSource.join("");return parsedSource.substr(0,parsedSource.length-1)},start:function(source){source+=" ";var javascriptSource=['var vsb=arguments[0],tsb={},settings={},rt=window["'+RUNTIME+'"],cb=[];'];var staticContentBuffer=[];var keywordBuffer=[];var outputValBuffer=[];var valBuffer=[];var codeFound=0;var userSettings={};var state=STATE.STATIC_CONTENT;var returnComplete=false;for(var i=0,l=source.length;i<l;++i){var curChar=source.charAt(i);if(curChar=="}"){switch(state){case STATE.OUTPUT_VAL:javascriptSource.push("cb.push(rt.outputVal("+Translater.parseVal(outputValBuffer.join(""))+',settings["filter_data"]));');outputValBuffer=[];break;case STATE.STATIC_CONTENT:if(returnComplete==false){staticContentBuffer.push(curChar)}break}if(keywordBuffer.length>0){state=STATE.KEYWORD;returnComplete=true;i-=2;continue}returnComplete=false;state=STATE.STATIC_CONTENT;continue}switch(state){case STATE.STATIC_CONTENT:if(curChar=="$"&&source.charAt(i+1)=="{"){if(trim(staticContentBuffer.join("")).length>0){javascriptSource.push(Translater.parseStaticContent(staticContentBuffer.join("")))}staticContentBuffer=[];state=STATE.JAVASCRIPT;codeFound=0;++i;continue}staticContentBuffer.push(curChar);break;case STATE.JAVASCRIPT:switch(curChar){case"\\":if(codeFound==0){staticContentBuffer.push(source.charAt(i+1));if(source.charAt(i+2)!="}"){return}state=STATE.STATIC_CONTENT;++i;++codeFound;continue}break;case"/":if(codeFound==0){javascriptSource.push("}");state=STATE.END_MARKER;++codeFound;continue}default:if(curChar!=" "){keywordBuffer.push(curChar)}else{if(keywordBuffer.length>0){state=STATE.KEYWORD;++codeFound;continue}}break}break;case STATE.OUTPUT_VAL:outputValBuffer.push(curChar);break;case STATE.IF_CON:valBuffer.push(curChar);break;case STATE.ELSEIF_CON:valBuffer.push(curChar);break;case STATE.FORARR_CON:valBuffer.push(curChar);break;case STATE.FOREACH_CON:valBuffer.push(curChar);break;case STATE.FOR_CON:valBuffer.push(curChar);break;case STATE.SWITCH_CON:valBuffer.push(curChar);break;case STATE.CASE_CON:valBuffer.push(curChar);break;case STATE.LOOP_CON:valBuffer.push(curChar);break;case STATE.EVAL_CON:valBuffer.push(curChar);break;case STATE.SET_CON:valBuffer.push(curChar);break;case STATE.END_MARKER:break;case STATE.NAME_CON:valBuffer.push(curChar);break;case STATE.WHILE_CON:valBuffer.push(curChar);break;case STATE.INCLUDE_CON:valBuffer.push(curChar);break;case STATE.IDEL:break;case STATE.KEYWORD:switch(keywordBuffer.join("")){case KEYWORD.IF:if(valBuffer.length>0){javascriptSource.push(Translater.parseVal(valBuffer.join(""))+"){");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{javascriptSource.push("if(");valBuffer=[curChar];state=STATE.IF_CON;continue}break;case KEYWORD.ELSE:javascriptSource.push("}else{");keywordBuffer=[];state=STATE.STATIC_CONTENT;break;case KEYWORD.ELSE_IF:if(valBuffer.length>0){javascriptSource.push(Translater.parseVal(valBuffer.join(""))+"){");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{javascriptSource.push("}else if(");valBuffer=[curChar];state=STATE.ELSEIF_CON}break;case KEYWORD.SWITCH:if(valBuffer.length>0){javascriptSource.push(Translater.parseVal(valBuffer.join(""))+"){");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{javascriptSource.push("switch(");valBuffer=[curChar];state=STATE.SWITCH_CON;continue}break;case KEYWORD.CASE:if(valBuffer.length>0){javascriptSource.push(Translater.parseVal(valBuffer.join(""))+":");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{javascriptSource.push("case ");valBuffer=[curChar];state=STATE.CASE_CON}break;case KEYWORD.BREAK:javascriptSource.push("break;");keywordBuffer=[];state=STATE.STATIC_CONTENT;break;case KEYWORD.CONTINUE:javascriptSource.push("continue;");keywordBuffer=[];state=STATE.STATIC_CONTENT;break;case KEYWORD.DEFAULT:javascriptSource.push("default:");keywordBuffer=[];state=STATE.STATIC_CONTENT;break;case KEYWORD.EVAL:if(valBuffer.length>0){javascriptSource.push(Translater.parseVal(valBuffer.join(""))+";");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.EVAL_CON;continue}break;case KEYWORD.SET:if(valBuffer.length>0){var setting=valBuffer.join("").split(":");javascriptSource.push('settings["'+trim(setting[0])+'"]='+trim(setting[1])+";");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.SET_CON;continue}break;case KEYWORD.NAME:if(valBuffer.length>0){userSettings[KEYWORD.NAME]=trim(valBuffer.join(""));valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.NAME_CON;continue}break;case KEYWORD.INCLUDE:if(valBuffer.length>0){var setting=valBuffer.join("").split(":");setting[1]=setting.length>=2?trim(setting.slice(1).join(":")):null;javascriptSource.push('cb.push(rt.include("'+setting[0]+'",'+(setting[1]?Translater.parseVal(setting[1]):null)+"));");userSettings[KEYWORD.INCLUDE]=userSettings[KEYWORD.INCLUDE]||{};userSettings[KEYWORD.INCLUDE][setting[0]]=true;valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.INCLUDE_CON;continue}break;case KEYWORD.FORARR:if(valBuffer.length>0){var iterInfo=Translater.parseIterValName(valBuffer.join(""));var tsbval='tsb["'+(iterInfo[1]||new Date().getTime())+'"]';var indexName=tsbval+".i";var lengthName=tsbval+".l";var finalValName=trim(Translater.parseVal(iterInfo[0]));javascriptSource.push(tsbval+"={};for("+indexName+"=0,"+lengthName+"="+finalValName+".length;"+indexName+"<"+lengthName+";++"+indexName+"){"+tsbval+".v="+finalValName+"["+indexName+"];");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.FORARR_CON;continue}break;case KEYWORD.FOREACH:if(valBuffer.length>0){var iterInfo=Translater.parseIterValName(valBuffer.join(""));var tsbval='tsb["'+(iterInfo[1]||new Date().getTime())+'"]';var keyName=tsbval+".k";var finalValName=Translater.parseVal(iterInfo[0]);javascriptSource.push(tsbval+"={};for("+keyName+" in "+finalValName+"){"+tsbval+".v="+finalValName+"["+keyName+"];");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.FOREACH_CON;continue}break;case KEYWORD.LOOP:if(valBuffer.length>0){var iterInfo=Translater.parseIterValName(valBuffer.join(""));var tsbval='tsb["'+(iterInfo[1]||new Date().getTime())+'"]';var indexName=tsbval+".v";var lengthName=tsbval+".o";var stepName=tsbval+".st";var setting=Translater.parseLoopSetting(iterInfo[0]);if(setting.length<=1){setting.push(1)}if(setting.length<=2){setting.push(0)}javascriptSource.push(tsbval+"={};for("+indexName+"="+Translater.parseVal(setting[2])+","+lengthName+"="+Translater.parseVal(setting[0])+","+stepName+"="+Translater.parseVal(setting[1])+";"+indexName+"<"+lengthName+";"+indexName+"+="+stepName+"){");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.LOOP_CON;continue}break;case KEYWORD.WHILE:if(valBuffer.length>0){javascriptSource.push("while("+Translater.parseVal(valBuffer.join(""))+"){");valBuffer=[];keywordBuffer=[];state=STATE.STATIC_CONTENT;continue}else{valBuffer=[curChar];state=STATE.WHILE_CON;continue}break;default:++codeFound;outputValBuffer.push(keywordBuffer.join("")+(returnComplete?"":curChar));state=STATE.OUTPUT_VAL;valBuffer=[];keywordBuffer=[];continue}break}}if(staticContentBuffer.length>0){javascriptSource.push(Translater.parseStaticContent(staticContentBuffer.join("")))}javascriptSource.push('return cb.join("");');return{builderSource:javascriptSource.join("").replace(REG_EXP.R_N,"\\n").replace(REG_EXP.R_R,"\\r").replace(REG_EXP.R_T,"\\t").replace(REG_EXP.R_F,"\\f"),userSettings:userSettings}}};function Template(options){var self=this;this.compiled=Translater.start(options.source);eval("this.builder = function () {"+this.compiled.builderSource+"};");if(this.compiled.userSettings){var name=this.compiled.userSettings[KEYWORD.NAME];var includes=this.compiled.userSettings[KEYWORD.INCLUDE];var loadCount=0;var hasInclude=false;if(includes){for(var includeName in includes){if(TEMPLATES.hasOwnProperty(includeName)==false){hasInclude=true;++loadCount;loadTemplate(includeName,function(){if(--loadCount<=0){if(name){window[RUNTIME].register(name,self)}options.complete(self)}})}}}if(hasInclude==false){if(name){window[RUNTIME].register(name,this)}options.complete(self)}}delete this.compiled}Template.prototype.render=function(options){options=options||{};return this.builder(options.data)};var templateLoader=function(name,setter){setter('"'+name+'"无法加载，未设置loader。')};function loadTemplate(name,complete){templateLoader(name,function(source){Engine.compile({source:source,complete:function(template){if(complete){complete(template)}}})})}var Engine={setLoader:function(options){templateLoader=options.loader},renderFromSource:function(options){options=options||{};Engine.compile({source:options.source,complete:function(template){var text=Engine.render({template:template,data:options.data});options.complete(text)}})},render:function(options){options=options||{};return options.template.render({data:options.data||{}})},compile:function(options){options=options||{};new Template({source:options.source,complete:function(template){options.complete(template)}})},getTemplate:function(options){options=options||{};if(TEMPLATES.hasOwnProperty(options.name)){if(options.complete){options.complete(TEMPLATES[options.name])}}else{loadTemplate(options.name,function(template){if(options.complete){options.complete(template)}})}},removeTemplate:function(options){options=options||{};delete TEMPLATES[options.name]}};return Engine});kola("newt.widget.CommonDialog","newt.dialog.Notice",function(c){var b=false;var a=[];return{alert:function(g,d){var f=function(){if(a.length==0){b=false;return}var h=a.shift();var k=h.text;var j=h.handle;tw.notice.alert(k,function(){if(j instanceof Function){try{j()}catch(l){}}},{onClose:function(){window.setTimeout(function(){f()},100)}})};if(b){a.push({text:g,handle:d})}else{b=true;tw.notice.alert(g,function(){if(d instanceof Function){try{d()}catch(h){}}},{onClose:function(){window.setTimeout(function(){f()},100)}})}}}});kola("newt.composer.SwfUploader",["jquery.Core","newt.swf.SwfUpload","newt.util.Browser","newt.widget.CommonDialog","newt.ca.ca"],function(f,a,g,d){function c(h){var j=[].slice.call(arguments);this.init.apply(this,j)}var b=(function(){var h=0;return function(){return"__upldr__"+h++}})();c.prototype={consturcotr:c,init:function(h){if(!h||!h.uploadUrl){throw"错误的配置参数，请指定上传服务器地址！"}if(!h.caHead){h.caHead=""}this.MAX_SELECT_COUNT=h.MAX_SELECT_COUNT||12;this.maxFileSize=this.readFileSize(h);this.uploaderMap={};this.selectQueue=[];this.fileList=[];this.fileMap={};this.config=h;this.enableSelect=true;this.handlerScope=h.handlerScope;this.initUploaderImpl(h)},upload:function(h){var j=this.fileMap[h];if(!j){return}j.status=this.FILE_UPLOADING;var k=this.uploaderMap[j.uploaderId];if(k){k.startUpload(h)}},abort:function(h){this._cancelUpload(h);this.deleteFileRecord(h)},deleteFileRecord:function(j){var m,h,l,k=this.fileList;for(m=0,h=k.length;m<h;m++){l=k[m];if(l.id==j){k.splice(m,1);break}}delete this.fileMap[j]},_cancelUpload:function(h){var l,j=this.fileMap[h];if(!j){return}var l=this.uploaderMap[j.uploaderId];if(l){try{l.cancelUpload(h,false)}catch(k){}}},getFile:function(h){return this.fileMap[h]},getFiles:function(){return this.fileList},getStatus:function(){var m,h,j,l,k=this.fileList;if(k.length==0){return this.STATUS_NOT_SELECT}for(m=0,h=k.length;m<h;m++){l=k[m];j=l.status;if(j==this.FILE_UPLOAD_ERROR){return this.STATUS_HAS_ERROR}else{if(j==this.STATUS_UPLOADING){return this.STATUS_UPLOADING}}}return this.STATUS_COMPLETE_ALL},isEnableSelect:function(){return this.enableSelect},setEnableSelect:function(h){var j,k=this.uploaderMap;this.enableSelect=h;for(j in k){if(j&&k.hasOwnProperty(j)){try{k[j].setButtonDisabled(!h)}catch(l){}}}},reset:function(){var h,k,l=this.uploaderMap;for(h in l){if(!l.hasOwnProperty(h)){continue}k=l[h];if(k){try{k.reset()}catch(j){}}}this.fileMap={};this.enableSelect=true;this.fileList.length=0;this.selectQueue.length=0;this.status=this.STATUS_NOT_SELECT},destroy:function(){var h,k,l=this.uploaderMap;for(h in l){if(!l.hasOwnProperty(h)){continue}k=l[h];if(k&&typeof k.destroy=="function"){try{k.destroy()}catch(j){if(window.console&&console.error){console.error("SwfUploader.destroy: call uploader.destory error, info:"+j)}}}}this.uploaderMap=null;this.selectQueue=null;this.fileList=null;this.fileMap=null;this.config=null;this.handlerScope=null},onClick:function(k){var h=this.config;var j=h.onClick;if(j instanceof Function){try{j.call(this.handlerScope,k)}catch(l){}}},onDialogOpen:function(){this.fireCallback("onDialogOpen")},onSelect:function(o){var h=this.selectQueue;if(h.length==0){return}var k=this.MAX_SELECT_COUNT;var u=this.fileList;var o=h.length;var t=u.length;var v=this.config.onSelect;var s=h[0].uploaderId=="__upldr__0"?"composer_img_flash_select":"composer_img_add_flash_select";var q=s+(o>1?"_n":"_1");CA.q(this.config.caHead+q);if(t>=k){return}h.sort(function(w,z){return w.name<z.name?-1:1});var l,m,j,r=this.fileMap,p=h.slice(0,k-u.length);this.fileList=u.concat(p);for(l=0,m=p.length;l<m;l++){j=p[l];r[j.id]=j}if(v instanceof Function){try{v.call(this.handlerScope,p,o)}catch(n){}}},onProgress:function(j,h,m){var k=this.config.onProgress;if(k instanceof Function){try{var o=Math.floor(h/m*100);var l=o<99?o:99;k.call(this.handlerScope,j.id,l)}catch(n){}}},onSuccess:function(k,n){if(!n){return}var j=k.id;var h=this.config;var r=this.handlerScope;var s=f.parseJSON(n);var q=h.onProgress;var p=h.onSuccess;if(s.status!=0&&s.status!="success"){this.onError(k,s.status,s.statusText);return}var l=this.fileMap[j];if(l){if(q instanceof Function){try{q.call(r,j,100)}catch(o){}}var m=s.data;l.serverUrl=m.smallest;l.sizeInfo=m.extraData;l.status=this.FILE_UPLOAD_SUCCESS;if(p instanceof Function){try{p.call(r,j,s)}catch(o){}}}},onError:function(k,o,m){if(k!=null){var h=k.id;var j=this.fileMap[h];var l=this.config.onError;if(j){j.status=this.FILE_UPLOAD_ERROR;if(l instanceof Function){try{l.call(this.handlerScope,h,o,m)}catch(n){}}}}},onThumbOk:function(h){var j=this.config.onThumbOk;if(j instanceof Function){try{j.call(this.handlerScope,h)}catch(k){}}},onThumbError:function(h){if(this.config.onThumbError instanceof Function){try{this.config.onThumbError(h)}catch(j){}}},initUploaderImpl:function(j){var l,h,k,p,o,m=this,n=j.uploadAnchors;for(l=0,h=n.length;l<h;l++){k=n[l];p="__upldr__"+l;o=this.buildUploader(p,k);m.uploaderMap[p]=o}},buildUploader:function(l,h){var k=this.getImplConfigs(l,h);var j=new SWFUpload(k);return j},getImplConfigs:function(w,m){var s,q,o,t,n=this,k=this.config,l=this.MAX_SELECT_COUNT,v=('<div class="swfuploadbutton" style="display:block; height:100%"></div>"'),j=(function(){var B=k.fileFilter||"";var D=B.match(/\w+/g)||[];var C,z,A=[];if(D.length>0){for(C=0,z=D.length;C<z;C++){A.push("*."+D[C])}return A.join(";")}else{return"*.*"}})();q=m.el;o=f(q).parent();s=f(o).find(".swfuploadbutton")[0]||f(v).appendTo(o)[0];t=(k.singleSelect||k.MAX_SELECT_COUNT==1)?SWFUpload.BUTTON_ACTION.SELECT_FILE:SWFUpload.BUTTON_ACTION.SELECT_FILES;var h=navigator.userAgent;var u=window.name=="360_debug";var p=h.indexOf("Windows NT 6.1")!=-1;var r=(k.preventCache==true||(p&&g.isIE&&!u));return{upload_url:k.uploadUrl,post_params:k.postParams,load_thumb:k.createThumb,button_width:m.width,button_height:m.height,button_placeholder:s,privew_img_width:(k.privewImgWidth||110),privew_img_height:(k.privewImgHeight||110),debug:false,flash_url:CRTWCONFIG.MUPLOAD_SWF_SRC,button_cursor:SWFUpload.CURSOR.HAND,button_image_url:CRTWCONFIG.C_SWF,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_action:t,file_types:j,file_post_name:"Filedata",file_size_limit:n.maxFileSize,file_upload_limit:"0",file_types_description:"Image Files",prevent_swf_caching:r,file_dialog_start_handler:function(){n.onDialogOpen()},file_queued_handler:function(z){z.status=n.FILE_NOT_UPLOAD;z.uploaderId=w;n.selectQueue.push(z)},file_queue_error_handler:k.file_queue_error_handler||function(z,B,A){var D=z.name.length>16?z.name.slice(0,13)+"...":z.name;switch(B){case -130:d.alert('您上传的文件"'+D+'"无法被系统识别, 选择其他图片!');break;case -110:var C=n.maxFileSize;d.alert('您上传的文件"'+D+'"太大, 请不要上传超过'+C+"的图片!");CA.q(n.config.caHead+"composer_img_error_excessbyte");break}},file_dialog_complete_handler:function(z,A){n.onSelect(z);n.selectQueue.length=0},upload_progress_handler:function(){var z=[].slice.call(arguments);n.onProgress.apply(n,z)},upload_error_handler:function(){var z=[].slice.call(arguments);n.onError.apply(n,z)},upload_success_handler:function(){var z=[].slice.call(arguments);n.onSuccess.apply(n,z)},thumb_loaded_handler:function(z){n.onThumbOk(z)},thumb_load_error_handler:function(z){n.onThumbError.call(n,z)},button_disabled_handler:function(){n.onClick(false)}}},fireCallback:function(h){var k=this.config;var m=k[h];var j,l;if(m instanceof Function){try{j=[].slice.call(arguments,1);l=this.handlerScope;m.apply(l,j)}catch(n){}}},readFileSize:function(h){if(!h.maxFileSize){return"10MB"}else{var j=Math.abs(parseInt((h.maxFileSize||0),10));if(j<1024){return Math.floor(j)+"B"}else{if(j<1024*1024){return Math.floor(j/1024)+"KB"}else{return Math.floor(j/(1024*1024))+"MB"}}}},STATUS_NOT_SELECT:0,STATUS_UPLOADING:1,STATUS_HAS_ERROR:2,STATUS_COMPLETE_ALL:3,FILE_NOT_UPLOAD:0,FILE_UPLOADING:1,FILE_UPLOAD_ERROR:2,FILE_UPLOAD_SUCCESS:3};return c});kola("newt.composer.AjaxUploader",["jquery.Core","newt.ca.ca","newt.util.ImageUtil","newt.util.Browser","newt.widget.CommonDialog"],function(h,a,b,j,d){var g=0;function c(k){var l=[].slice.call(arguments);this.init.apply(this,l)}function f(){return"__file__"+g++}c.prototype={consturcotr:c,init:function(k){if(!k||!k.uploadUrl){throw"错误的配置参数，请指定上传服务器地址！"}this.MAX_SELECT_COUNT=k.MAX_SELECT_COUNT||12;this.uploadUrl=k.uploadUrl;this.postParams=k.postParams;this.handlerScope=k.handlerScope;this.maxFileSize=k.maxFileSize||10*1024*1024;this._enableSelect=true;this._filterReg=(function(){var l=k.fileFilter||"";var m=l.match(/\w+/g)||[];if(m.length>0){return new RegExp("^(?:"+m.join("|")+")$","i")}else{return new RegExp("^.*?$")}})();this.fileCtrls=[];this.fileList=[];this.fileMap={};this.config=k;this._initUploaderImpl(k)},upload:function(k){var p,l,o,n,m=this.fileMap[k];if(!m){return}n=this;l=this.uploadUrl;p=new XMLHttpRequest();o=this._getPostForm(m);p.upload.addEventListener("progress",function(q){n.onProgress(m,q.loaded,q.total)});p.onreadystatechange=function(r){if(p.readyState!=4){return}var q=p.status;if(q>=200&&q<300||q===304){try{m.status=n.FILE_UPLOAD_SUCCESS;n.onSuccess(m,p.responseText);delete m.__upldr__}catch(r){}}else{try{m.status=n.FILE_UPLOAD_ERROR;n.onError(m,q)}catch(r){}}};m.status=this.FILE_UPLOADING;m.__upldr__=p;p.open("POST",l,true);p.send(o)},abort:function(k){var m,l=this.fileMap[k];if(!l){return}m=l.__upldr__;if(m){m.abort()}this.deleteFileRecord(k)},reset:function(){this.fileMap={};this.fileList.length=0;this.status=this.STATUS_NOT_SELECT},destroy:function(){var m,k,l,n=this.fileCtrls;for(m=0,k=n.length;m<k;m++){l=n[m];h(l).unbind("click").unbind("change").remove()}this._enableSelect=false},onSelect:function(k,t){if(k.length==0){return}var n=this.MAX_SELECT_COUNT;var B=this.fileList;var A=B.length;var t=k.length;var l=this.config;var p=this;var z=k[0].uploaderId=="__upldr__0"?"composer_img_file_select":"composer_img_add_file_select";var v=z+(t>1?"_n":"_1");a.q(v);if(A>=n){return}k.sort(function(D,E){return D.name<E.name?-1:1});var s=this.config.createThumb;var C=j.supportDataURL()&&typeof FileReader!="undefined";var o,q,m,w=this.fileMap,u=k.slice(0,n-B.length);this.fileList=B.concat(u);for(o=0,q=u.length;o<q;o++){m=u[o];w[m.id]=m;if(s&&C&&m.size<5242880){try{this._createPriviewData(m)}catch(r){}}}if(l.onSelect instanceof Function){try{l.onSelect.call(this.handlerScope,u,t)}catch(r){}}},onProgress:function(l,k,o){var m=this.config.onProgress;if(m instanceof Function){try{var q=Math.floor(k/o*100);var n=q<99?q:99;m.call(this.handlerScope,l.id,n)}catch(p){}}},onSuccess:function(m,p){var k=this.config;var l=m.id;var u=h.parseJSON(p);var s=k.onProgress;var r=k.onSuccess;var t=k.handlerScope;if(u.status!=0&&u.status!="success"){this.onError(m,u.status,u.statusText);return}var n=this.fileMap[l];if(n){if(s instanceof Function){try{s.call(t,l,100)}catch(q){}}var o=u.data;n.serverUrl=o.smallest;n.sizeInfo=o.extraData;n.status=this.FILE_UPLOAD_SUCCESS;if(r instanceof Function){try{r.call(t,l,u)}catch(q){}}}},onError:function(n,r,p){if(!n){return}var k=n.id;var l=this.config;var m=this.fileMap[k];var o=l.onError;if(m){m.status=this.FILE_UPLOAD_ERROR;if(o instanceof Function){try{o.call(this.handlerScope,k,r,p)}catch(q){}}}},onThumbOk:function(k){var l=this.config.onThumbOk;if(l instanceof Function){try{l.call(this.handlerScope,k)}catch(m){}}},getFile:function(k){return this.fileMap[k]},getFiles:function(){return this.fileList},getStatus:function(){var o,k,l,n,m=this.fileList;if(m.length==0){return this.STATUS_NOT_SELECT}for(o=0,k=m.length;o<k;o++){n=m[o];l=n.status;if(l==this.FILE_UPLOAD_ERROR){return this.STATUS_HAS_ERROR}else{if(l==this.FILE_UPLOADING){return this.STATUS_UPLOADING}}}return this.STATUS_COMPLETE_ALL},setEnableSelect:function(k){this._enableSelect=k},isEnableSelect:function(){return this._enableSelect},deleteFileRecord:function(l){var o,k,n,m=this.fileList;for(o=0,k=m.length;o<k;o++){n=m[o];if(n.id==l){m.splice(o,1);break}}delete this.fileMap[l]},_initUploaderImpl:function(l){var o,k,n,m,r,p=this,q=l.uploadAnchors;for(o=0,k=q.length;o<k;o++){n=q[o];m="__upldr__"+o;r=this._buildFileSelect(m,n.el);this._regFileSelectEvent(r);this.fileCtrls.push(r)}this._regDragDropEvent(l)},_buildFileSelect:function(k,m){if(!m||m.length==0){return}m=m.length>0?m[0]:m;var n=h(m).children();var l=document.createElement("input");l.type="file";h(l).attr("class","file");if(this.MAX_SELECT_COUNT>1){h(l).attr("multiple","multiple")}if(n.length>0){m.insertBefore(l,n[0])}else{m.appendChild(l)}return l},_regFileSelectEvent:function(m){var o=this,p;var n=this.config.onClick;var k=this.config.onDialogOpen;var l=function(s){var r=s.target.files;var q=r.length;o._handleSelectFiles(r,q)};if(n instanceof Function){p=function(q){if(!o._enableSelect){q.preventDefault()}try{n(o._enableSelect);if(onDialogOpen instanceof Function){onDialogOpen()}}catch(q){}}}else{p=function(q){if(!o._enableSelect){q.preventDefault()}}}h(m).bind({click:p,change:l})},_regDragDropEvent:function(u){var r=u.dragAnchor||document;if(!r||r.length==0){return}r=(function(){var z=r.length>0?r[0]:r;if(z==document.body){z=document}return z})();var l=u.onDragEnter;var n=u.onDragLeave;var k=u.onDragDrop;var w=this.handlerScope;var s=this;var v,t,q,p;var o=function(){t=1;q=-1;p=true;v=window.setInterval(function(){if(q==t){m();try{n.call(w)}catch(z){}}else{q=t}},200)};var m=function(){if(v){window.clearInterval(v);v=null}p=false};if(l instanceof Function){r.addEventListener("dragover",function(A){var z=j.isDragFile(A);t++;if(z){A.preventDefault()}if(z&&!p){o();try{l.call(w)}catch(A){}}},true)}r.addEventListener("drop",function(D){var C=D.dataTransfer.files,A=s._enableSelect,B,z=[];m();if(C.length>0){D.preventDefault()}if(A){C=D.dataTransfer.files;B=C.length;z=s._handleSelectFiles(C,B)}if(k instanceof Function){try{k.call(w,{enableSelect:A,recogFiles:z,position:{clientX:D.clientX,clientY:D.clientY}})}catch(D){}}},true)},_handleSelectFiles:function(p,o){if(p.length==0){return}var n,l,m,k=[];for(n=0,l=p.length;n<l;n++){m=p[n];if(this._checkFile(m)){m.status=this.FILE_NOT_UPLOAD;m.id=f();k.push(m)}}if(k.length>0){this.onSelect(k,o)}return k.concat()},_createPriviewData:function(l){var m=this;var n=function(p,o){p.priviewData=o;m.onThumbOk(p)};var k=function(o){m.onThumbError(o)};b.getImagePriview(l,n,k,this)},_getPostForm:function(l){var n=this.postParams;var m=new FormData();var k;m.append("file",l);for(k in n){if(k&&n.hasOwnProperty(k)){m.append(k,n[k])}}return m},_checkFile:function(m){var q=m.name;var l=m.size;var n=this._filterReg;var p=this.maxFileSize;var o=q.substring(q.lastIndexOf(".")+1);if(!n.test(o)){d.alert('您上传的文件"'+q+'"无法被系统识别, 选择其他图片!');return false}if(l>p){var k;if(p<1024){k=Math.floor(p)+"B"}else{if(p<1024*1024){k=Math.floor(p/1024)+"KB"}else{k=Math.floor(p/(1024*1024))+"MB"}}d.alert('您上传的文件"'+q+'"太大, 请不要上传超过'+k+"的图片!");return false}return true},STATUS_NOT_SELECT:0,STATUS_UPLOADING:1,STATUS_HAS_ERROR:2,STATUS_COMPLETE_ALL:3,FILE_NOT_UPLOAD:0,FILE_UPLOADING:1,FILE_UPLOAD_ERROR:2,FILE_UPLOAD_SUCCESS:3};return c});kola("sohu.anim.Draggable",["jquery.Core","sohu.tool.Selection"],function(c,b){var a=function(k,h){h=c.extend({handle:"",draggingClass:"dragging",dragStyle:"absolute"},h||{});var g=this;k=c(k);this.mouseDownEleClientX;this.mouseDownEleClientY;this.mouseDownClientX;this.mouseDownClientY;function f(n){var m=g.mouseDownEleClientX+n.pageX-g.mouseDownClientX;var l=g.mouseDownEleClientY+n.pageY-g.mouseDownClientY;k.css("left",m);k.css("top",l);k.trigger("dragging")}function d(l){k.trigger("beforeDrop");k.removeClass(h.draggingClass);c(document).unbind("mousemove",f);c(document).unbind("mouseup",d);k.trigger("afterDrop")}function j(l){l.preventDefault()}k.mousedown(function(l){if(h.handle&&c(l.target).closest(h.handle).length==0){return}k.trigger("beforeDrag");b.clearSelection();k.focus();g.mouseDownEleClientX=k.position().left;g.mouseDownEleClientY=k.position().top;k.css("left",g.mouseDownEleClientX);k.css("top",g.mouseDownEleClientY);k.css("position",h.dragStyle);k.addClass(h.draggingClass);g.mouseDownClientX=l.pageX;g.mouseDownClientY=l.pageY;c(document).mousemove(f);c(document).mouseup(d);k.trigger("afterDrag")})};return a});kola("sohu.tool.Selection",["jquery.Core"],function(b){var a={clearSelection:function(){if(window.getSelection){if(window.getSelection().anchorNode){window.getSelection().collapseToStart()}}else{var c=document.selection.createRange();c.collapse(true);c.select()}},setUnselectable:function(c){b(c).css("-moz-user-select","-moz-none");b(c).css("-webkit-user-select","none");b(c).attr("onselectstart",'if(event.srcElement.tagName!=="INPUT");return false')},setSelectable:function(c){b(c).css("-moz-user-select","-moz-all");b(c).css("-webkit-user-select","auto");b(c).attr("onselectstart","")}};return a});kola("newt.util.ImageUtil",null,function(){var d=[];var f=false;var c=(function(){var j=document.createElement("canvas");j.setAttribute("width",110);j.setAttribute("height",110);j.style.display="none";return j})();var h=(function(){var j=new Image();j.style.display="none";j.onload=function(){var l=d.shift();var k=l.onOK;var m=l.url;if(!l){return}try{k(a(this));if(window.URL){window.URL.removeObjectURL(m)}else{window.webkitURL.removeObjectURL(m)}}catch(n){}if(d.length>0){this.src=d[0].url}else{this.src="";f=false}};j.onerror=function(){var k=d.shift();var m=k.onFailed;var l=k.url;if(!k){return}try{m();if(window.URL){window.URL.removeObjectURL(l)}else{window.webkitURL.removeObjectURL(l)}}catch(n){console.log("proxyImg.onerror : "+n)}if(d.length>0){this.src=d[0].url}else{this.src="";f=false}};return j})();function b(l,o,p,n,k){var m=window.URL?window.URL.createObjectURL(l):window.webkitURL?window.webkitURL.createObjectURL(l):null;if(m){d.push({url:m,onOK:function(q){o.call(n,l,q)},onFailed:function(){p.call(n,l)}});if(!f){f=true;h.src=m}return}var j=new FileReader();j.onloadend=function(r){var q=r.target.result;if(q){d.push({url:q,onOK:function(s){o.call(n,l,s)},onFailed:function(){p.call(n,l)}});if(!f){f=true;h.src=q}}else{try{p.call(n,l)}catch(r){}}};j.readAsDataURL(l)}function a(k,n){var s=n&&n.preImgWidth?n.preImgWidth:110;var m=n&&n.preImgHeight?n.preImgHeight:110;var t=k.height;var j=k.width;var q,p,r,l,o;if(j<=s&&t<=m){return k.src}if(j>s&&t<=m){q=Math.floor((j-s)/2);return g(k,q,0,s,t,{dx:0,dy:0})}if(j<=s&&t>m){p=Math.floor((t-m)/2);return g(k,0,p,j,m,{dx:0,dy:0})}if(j>s&&t>m){o=Math.min(s,m)/Math.min(j,t);r=Math.floor(j*o);l=Math.floor(t*o);q=r-s>0?-Math.floor((r-s)/2):0;p=l-m>0?-Math.floor((l-m)/2):0;return g(k,q,p,r,l)}}function g(k,o,n,j,q,m){var p=m&&m.preImgWidth?m.preImgWidth:110;var l=m&&m.preImgHeight?m.preImgHeight:110;var r=c.getContext("2d");if(!r){return}if(j<p){c.setAttribute("width",j)}if(q<l){c.setAttribute("height",q)}r.clearRect(0,0,c.width,c.height);if(m&&m.dx&&m.dy){r.drawImage(k,o,n,j,q,m.dx,m.dy,j,q)}else{r.drawImage(k,o,n,j,q)}return c.toDataURL("image/jpeg")}return{getImagePriview:b}});kola("newt.timeline.vote.View",["newt.data.JData","newt.Config","newt.cr.crEvent","newt.tool.Tool","newt.dialog.Notice"],function(f,a,b){var d=function(j,h){var g=this;g.opts=h;g.vid=g.opts.vid;g.mid=g.opts.mid;g.page=g.opts.page;g.box=$(j);$.extend(g,{init:function(){if(a.VOTE_INIT_PROCESSER){a.VOTE_INIT_PROCESSER(g);return}g.init_view()},init_view:function(){g.getData(function(k){g.box.find("div.vote").remove();g.box.find(".AP_i,.jsVoteMini").hide();if(g.box.is("div.twiRoot")){g.box.find("div.twiB").eq(0).before(k.getBody());g.box.find("div.twi").addClass("twiShowVote")}else{g.box.find("div.twiB").eq(0).before(k.getBody())}g._initEvent(g.box.find("div.vote"));if(typeof(g.opts.onExpand)=="function"){try{g.opts.onExpand(g.mid,g.vid)}catch(l){}}})},getData:function(k){$.ajax({url:HOST+"/twapp/vote/voteview",dataType:"json",type:"post",data:"voteid="+g.vid,success:function(l){if(l.status==0){l=new f(l);k(l)}else{kola("newt.dialog.Notice",function(){tw.notice.alert(l.statusText)})}}})},_initEvent:function(l){var k;k=l.find("ul.voteC").children("li:not(.voted)");k.each(function(){var n=$(this);n.click(function(p){var o=n.find("input");if(p.target!=o[0]){o.attr("checked",o.attr("checked")?false:true)}g._checkSelected(l);p.stopPropagation()})});g.box.find(".jsVoteMini").find("input:checked").each(function(){k.filter("[vid="+$(this).attr("vid")+"]").find("input").attr("checked",true);$(this).attr("checked",false)});g._checkSelected(l);l.find("a.crjs_submit").click(function(){if(!isLogin){kola("newt.util.Tool",function(p){p.iNoLogin()});return}var o="voteid="+g.vid;var n=[];l.find("ul.voteC").children("li").each(function(){var p=$(this);if(p.find("input").attr("checked")){o+="&options="+p.attr("vid");n.push(p.find(".ttl").text())}});g.submit(o,n)});var m=g.mid.toString();if(m.indexOf("_")!=-1){m=m.split("_")[1]}if(g.page&&g.page=="toRoot"){l.find("p.APoper").remove();l.find("i.signArr").remove()}else{l.find("p.APoper a:last").attr("href","/m/"+m)}},_checkSelected:function(n){var l,m,k;l=n.find("ul.voteC").children("li:not(.voted)");l.each(function(){var p=$(this);if(p.find("input").attr("checked")){p.addClass("selected")}else{p.removeClass("selected")}});m=l.filter(".selected");k=n.find(".btns");if(l.size()>0){if(m.size()==0){k.find("a").addClass("btn_dis");k.find("i").removeClass("noDis")}else{k.find("a").removeClass("btn_dis");k.find("i").addClass("noDis")}}},submit:function(m,k){if(m.split("&").length<=1){return}if(a.VOTE_POST_PROCESSER){a.VOTE_POST_PROCESSER(m,k,g);return}var l='选择了"'+k.join("，")+'"';$.ajax({url:"/twapp/vote/newvoting",type:"post",data:m,dataType:"json",success:function(o){if(o.status===0){g.init_view();if(g.opts.onVoted instanceof Function){try{g.opts.onVoted(g.mid,g.vid,l)}catch(p){}}b.send("send_vote_ok",{voteId:g.vid,messageId:g.mid});if(g.opts.showTransferWin!=false){var n=l;if(o.data){n=o.data}kola("newt.twitter.Twitter",function(){tw.build({type:"at",msgid:g.mid,initText:n})})}}else{kola("newt.dialog.Notice",function(){tw.notice.alert(o.statusText)})}}})}});g.init()};$.fn.crTicketViewAC=function(g){return $(this).each(function(){var h=new d(this,g);$(this).removeData("crTicketViewAC").data("crTicektViewAC",h)})};var c={init:function(m,g,k,j){var l,h;j=j||{};l=$(m);h=l.closest("div.twiRoot");if(h.size()==0){h=l.closest("div.twi")}h.crTicketViewAC($.extend({vid:g,mid:k},j))},initP:function(g,j){var h=$("#"+j+"_con div.twiC");h.crTicketViewAC({vid:g,mid:j,page:"toRoot"})},hiddenView:function(g){var j,h;j=$(g.THIS);h=j.closest("div.twiRoot");if(h.length<1){h=j.closest("div.twi")}h.find("div.vote").remove();h.find(".AP_i,.jsVoteMini").show();h.find("div.twiShowVote").removeClass("twiShowVote")}};tw.ticketView=c;return d});kola("newt.timeline.zoom.Magnifier",["newt.util.Browser","newt.timeline.zoom.JQueryZoom","newt.ca.ca"],function(b){function a(c){var h=false,j={pageX:0,pageY:0,clientX:0,clientY:0},k={},p=false,g=false,m=(b.isFirefox?100:200),s=null;var r=function(t){var v=t.target;$(v).css("cursor","");p=true;s=l();s.show();var u=function(w){p=false;l().hide();$(w.target).unbind("mousemove",f).unbind("mouseout",u)};$(v).bind({mousemove:f,mouseout:u,click:function(){p=false;l().hide()}})};var q=function(){$(c).delegate("img[data-rt]:not([data-rt='1']):not([data-rt='1.0'])","mouseenter",r)};var o=function(){if(g){return}var t=h?$("#magnifier"):$("#magnifierTip");t.hide();g=true;window.setTimeout(function(){g=false},m)};$("body").bind("keyup",function(v){if(v.keyCode!=70||!p){return}if(!h){$(c).undelegate();d();h=true;CA.q("user_press_F_open_magnifier")}else{h=false;$(c).undelegate("mouseover");var z=$("#magnifier");var u=z.data("rect");var t=$("#magnifier").data("position");z.data("isFold",true);z.stop(true,false).animate({height:"0px",width:"0px"},200,function(){z.css({display:"none"});f(t)});$("#magnifier").unbind();if(k){var w=k;w.css("cursor","");w.unbind("").bind("mousemove",f).bind("mouseout click",function(A){l().hide();p=false;$(A.target).unbind()})}q();CA.q("user_press_F_close_magnifier")}});var n=b.isIE6?"#t-sys":window;$(n).bind("scroll",o);q();var f=function(u){for(var t in j){j[t]=u[t]}if(u.target){k=$(u.target)}if(h){return}s.css({top:(u.pageY-15)+"px",left:(u.pageX+20)+"px"}).show();s.data("scrollTop",$(document).scrollTop())};var l=function(){if($("#magnifierTip").length!=0){return $("#magnifierTip")}return $("<div id='magnifierTip' class='picFT' ></div>").append("<div class='picDc'></div><p>按“F”键局部放大</p>").appendTo($("body")).bind("mouseover",function(t){l().css({top:(t.pageY+15)+"px",left:(t.pageX+20)+"px"}).show()})};var d=function(){if(k){var u=k;var v=u.attr("src").replace("m_","");var t=$.extend(j,{target:u});$(u).css("cursor","auto");l().hide();$(u).imageLens({imageSrc:v,currEvent:t})}$(c).delegate("img[data-rt]:not([data-rt='1']):not([data-rt='1.0'])","mouseover ",function(z){for(var w in j){j[w]=z[w]}k=$(z.target);p=true;var A=z.target;var B=A.src;$(A).css("cursor","auto").bind("mouseout click",function(C){p=false;$(C.target).unbind("mouseout click",arguments.callee)});B=B.replace("m_","");$(A).imageLens({imageSrc:B})})}}return{listenArea:a}});kola("newt.map.Map",["jquery.Core","newt.Config"],function(b){var a=function(){var c=this;c.i=0;c.dom=null;c._m=null;c.t_id="tw_map";c.point=null;c.width=350;c.height=260;c.m_flag=false;b.extend(c,{init:function(){if(!c.dom||!c.dom.html()){c.i=0}if(!c.i){c.dom=c.buildMapBox();c.box=c.dom.find("div.bubC");c.initSelfEvent();c.m_flag=false;c.aLoad=false;c._m=null;c.i=1}},buildMapBox:function(){if(!c.dom||!c.dom.html()){c.dom=b(['<div class="bubble bubLbs">','<div class="bubC" style="padding:3px;">','<a href="javascript:void(0);" onclick="tw.map.close();" title="关闭" class="close"></a>','<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<p class="oper"><a title="放大" class="t1" href="javascript:void(0)"></a><a title="缩小" class="t2" href="javascript:void(0)"></a></p>','<div class="bubBd"><div style="width:390px;height:270px;position:relative;" id="',c.t_id,'"></div></div>',"</div></div>"].join(""));var f=b("#"+c.t_id).get(0);try{if(document.addEventListener){f.addEventListener("DOMMouseScroll",function(g){g.preventDefault()},false)}else{if(document.attachEvent){f.attachEvent("onmousewheel",function(){window.event.cancelBubble=true;return false})}}f.onmousewheel=function(g){return false}}catch(d){}b(document).keyup(function(g){if(g.keyCode==27){c.close()}})}return c.dom},createCtrl:function(B,A){var z,w,u,t,s=_stopEvent,D,r;function v(d){return d.getMapHeight()}function l(d){return d.getMapWidth()}function C(d){return Math.floor(d)}function j(f,d){f.className=d}function m(d){return document.createElement(d)}function p(f){var d=m("div");d.className=f;return d}function q(f,d){f.appendChild(d)}function n(d){return d+"px"}function o(f,d){f.style.left=n(d)}function k(f,d){f.style.top=n(d)}z=p("Bn");if(!A){w=p("BnN");q(z,w);w.onclick=function(d){B.map.pan(0,C(v(B)*0.5));s(d)};w=p("BnS");q(z,w);w.onclick=function(d){B.map.pan(0,C(v(B)*-0.5));s(d)};w=p("BnW");q(z,w);w.onclick=function(d){B.map.pan(C(l(B)*0.5),0);s(d)};w=p("BnE");q(z,w);w.onclick=function(d){B.map.pan(C(l(B)*-0.5),0);s(d)};w=p("BnR");w.title="定位到全国";q(z,w);w.onclick=function(d){B.resetMap();s(d)}}w=p("BnIn");w.title="放大";if(A){o(w,0);k(w,0)}w=c.dom.find("p.oper a").get(0);w.onclick=function(g){var f=B.getSds().getMplevels(),d=B.getLevelIndex()+1;if(d<f.length){B.animateZoomTo(d)}};w=p("BnOut");w.title="缩小";if(A){o(w,0);k(w,20)}w=c.dom.find("p.oper a").get(1);w.onclick=function(g){var f=B.getSds().getMplevels(),d=B.getLevelIndex()-1;if(d>=0){B.animateZoomTo(d)}};q(B.map.container,z);u=p("Sw");D=w=p("mp2");q(u,w);w.onclick=function(d){B.setHyBrid(false);j(D,"mp2");j(r,"hb2");s(d)};r=w=p("hb2");q(u,w);w.onclick=function(d){B.setHyBrid(true,true);j(D,"mp1");j(r,"hb1");s(d)};q(B.map.container,u)},buildMap:function(d,g){var f=c.dom;c._m=c._m||new MapClient(b("#"+c.t_id).empty().get(0));if(!c.m_flag){Event.addListener(c._m,"inited",function(h){if(b.browser.msie&&(b.browser.version=="6.0")&&!b.support.style){c.point=c._m.map.addPoint(d,g,c._name,null,"t02",{style:"",on:"true"})}else{c.point=c._m.map.addPoint(d,g,c._name,null,"t01",{style:"",on:"true"})}c.m_flag=true;c._m.coordRecenterTo(d,g,13);f.removeClass("mw_loading");window.setTimeout(function(){c._m.map.onResize()},10)});c._m.setStyleLibraryRoot(HOST+CRTWCONFIG.MAP_ICON);c._m.init();SEvent.addListener(c._m.map,"poiclick",function(j){var h=j.points[0],k=h.x+","+h.y;window.open(("http://map.sogou.com/?tip="+escape(j.caption)+","+k+"&c="+k+",13"))});c.createCtrl(c._m,1)}else{c._m.coordRecenterTo(d,g,13);c._m.map.removeFeature(c.point);if(b.browser.msie&&(b.browser.version=="6.0")&&!b.support.style){c.point=c._m.map.addPoint(d,g,c._name,null,"t02",{style:"",on:"true"})}else{c.point=c._m.map.addPoint(d,g,c._name,null,"t01",{style:"",on:"true"})}if(f.hasClass("mw_loading")){f.removeClass("mw_loading")}}f.find("div.Bn").prev("div").hide();f.find("span.F01").hide()},show:function(f,d,k,j){f=f||window.event;if(b(f.target||f.srcElement).closest("div.bubLbs").length==1){return}var g=b(f.target||f.srcElement).closest("div.lbs");c.init();var h=c.buildMapBox();h.addClass("mw_loading");j=j||0;c._name=j?j:(c._name||b(g).parents("div.twi").find("p.twit1").find("a:first").text()||"我在这里");c.load(function(){c.buildMap(d,k)});c.showMap(g)},initSelfEvent:function(){c.box.hide();var d=[];tw.twcontainer.container.find("div.twi div.lbs").each(function(){var f=b(this);d.push(f)});c.dom.crOut({outHandle:function(f){if(b(f.target).closest("div.lbs").length==1){return}c.close()},outItems:d,bind:"mousedown"})},showMap:function(d){if(d.offset().top-(b(CRTWCONFIG.SCROLL_DOM).scrollTop())>300){d.prepend(c.dom);c.dom.removeClass("bubD")}else{d.append(c.dom);c.dom.addClass("bubD")}c.open();c.dom.find("a.close").focus()},load:function(g){if(c.aLoad){g()}else{var d=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(d);d.setAttribute("charset","GBK");d.onGo2mapApiLoad=function(){c.aLoad=true;g()};var f=function(){d.setAttribute("src",CRTWCONFIG.MAP+"lib/js/api.js")};setTimeout(f,10)}},close:function(){c.box.fadeOut(500)},open:function(){c.box.show()}})};tw.map=new a();return a});kola("newt.reply.Reply",["newt.composer.SwfUploader","newt.timeline.Num","newt.Config","newt.cr.crSimpleEdit","newt.templete.Templete","newt.cr.crEvent","newt.service.Message","newt.service.UserService","newt.util.Browser","newt.reply.VCode","newt.lib.autoResize","newt.composer.emote.Emote","newt.timeline.Container","newt.tool.Tool","newt.timeline.Other","newt.twitter.Twitter","newt.ca.ca"],function(h,f,b,d,l,c,j,g,k,m){var a=function(){var n=this;n.rpOpt=null;n.w="";n.wE="";n.wB="";n.wo="";n.rPg={};n.editorCount=0;n.editorMap={};n.inputMap={};n.CACHE_KEY_PRE="TRP_";n.INPUT_SCAN_INTERVAL=800;n.INPUT_SCAN_THREAD=null;n.CACHE_EXPR_TIME=1000*3600*12;n.picEditor=null;function o(r,q){var p;if(q){p=$(q).closest("div.twiRoot");if(p.size()==0){p=$(q).closest('div.twi[id$="_con"]')}}else{p=$("#"+r+"_con")}return p}$.extend(n,{init:function(){},regDataCa:function(q){if(typeof(q)=="undefined"||q==null){return false}var r=$("div#"+n.options.msgid+"_con");for(var p in q){$(r).find(p).attr("data-ca",q[p])}},rp_show:function(H){n.options=H;if(b.COMMENT_PROXY){b.COMMENT_PROXY(H);return}if(b.GUB_EXP_TWITTER_OPS){if($.inArray(H.type,b.GUB_EXP_TWITTER_OPS.split("|"))==-1){if(window.isLogin==false){kola("newt.util.Tool",function(I){I.iNoLogin()});return false}}}CA.q("comments_list_of_weibo_show");var q=H.msgid,z,p,G;z=o(H.msgid,H.ele);var F=z.parent("div.twiFinal");if(F.length>0&&!z.hasClass("twiRoot")){p=F.find("div.post").getCrControl("crSimpleEdit");if(p){p.setFocus()}this.refreshReplys(H,F.find("div.post"));return false}if(z.hasClass("twiRoot")){z=z.children("div.twi");var r=z.parents("div.twi:first");if((k.isIE7||k.isIE8)&&r.hasClass("twiTraPic")&&!r.hasClass("twiShow")){z.data("hacker",true)}else{z.data("hacker",false)}}var D=z.find("#relist_"+q);if(D.length){if(D.hasClass("noDis")){$.cr.event.send("cmt_expand",D);D.removeClass("noDis");p=D.find("div.post").getCrControl("crSimpleEdit");if(p){p.setFocus()}if(z.data("hacker")){z.css("zoom",0)}this.refreshReplys(H,D.find("div.post"))}else{D.addClass("noDis");if(z.data("hacker")){z.css("zoom","")}}return}$.cr.event.send("cmt_expand",D);D=$(l.ReplyTemp(q,{canUploadPic:b.CAN_UPLOAD_PIC_WHEN_REPLY})).appendTo(z);var C={okHandle:function(I){return(tw.login.check()&&I!="")}};m.init(D.find(".postCmt"),C);if(H.checkRetweet===true){D.find(".postAtt input[type='checkbox']").attr("checked",true)}if(z.data("hacker")){z.css("zoom",0)}var w=D.find("#rebox_"+q),v='<div class="loading"><em>载入中</em></div>',B='<div class="noCnt"><p class="ttl">还没有人评论过，赶快抢个沙发</p></div>',u=D.find("div.post");if(u.getCrControl("crSimpleEdit")){setTimeout(u.getCrControl("crSimpleEdit").setFocus,10);return false}var E=null;kola("newt.data.Synchronizer",function(I){I.bind("verify_phone_done",function(J){if(J==true){window.isUserMobileVerified=true;D.find("span.js-phonevalid-area:first").remove();D.find("a.js-btn-submit:first").unbind("click",E).find("b:first").html("发表")}})});var A=u.crSimpleEdit({max:300,cut:false,state:true,ctrlEnterHandle:function(){if(A.getVal()==""){return}if(A.getLimitStatus()){return}if(D.find("a.btnM").hasClass("btn_dis")){return}if(D.find("a.btnM").hasClass("btn_loading")){return}if(window.isUserMobileVerified==false){return}D.find("a.btnM").addClass("btn_loading");n.rp({msgid:H.msgid,ele:H.ele})},syncHandle:function(){m.editChange(u,C)},focusHandle:function(){n.onInputStart(A,q)},firstActiveHandle:function(){u.find("div.tarea").removeClass("tarea_min")}}).getCrControl("crSimpleEdit");D.find("a.btnM").click(function(){if(window.isUserMobileVerified==false){return}if($(this).hasClass("btn_dis")){return}n.rp({msgid:H.msgid,ele:H.ele})});$('<div class="atFake" style="font-size:12px;line-height:1.4"></div>').prependTo(u.find("div.tarea"));new tw.AtTip(u);var t=D.find("textarea");if(t.data("autoResize")!="true"){t.autoResize({extraSpace:17,limit:150}).data("autoResze","true")}var s=this._getCachedInput(q);if(s){A.setVal(s);A.setCursorEnd();$(A.edit).trigger("keyup")}tw.emote.initEmoteBtn(u,u.getCrControl("crSimpleEdit"),1);D.find("a.close").click(function(){D.addClass("noDis");n.onInputEnd(A,q);if(z.data("hacker")){z.css("zoom","")}if(n.picEditor&&n.picEditor.isShow()){n.picEditor.close(false)}CA.q("comments_list_of_weibo_close")});D.find("li.crJs_ig").bind("mouseover",function(){n.uploadPIc(D.find("span.swfuploadbutton").parent(),A,H.msgid);$(this).unbind("mouseover",arguments.callee)});w.html(v);n.showPage({msgid:q,pageNo:1,ele:H.ele});u.find("div.tarea textarea").focus();z.find("#same_to_twitter_"+q).unbind().click(function(){CA.q("tw_"+CRTWCONFIG.CA_SRC+"_reply_sameto_checkbox")});TOOL.addLabelId(z.find("#relist_"+q));kola("newt.service.StatisticService",function(I){I.log("newt_msg_reply","click",{page:location.href,twiId:H.msgid})});n.regDataCa(n.options.dataca);return false},refreshReplys:function(q,p){n.showPage({msgid:q.msgid,pageNo:1,ele:q.ele});if(p){m.refresh(p)}},updateReplyNum:function(r,p){var q=$("#num_"+r);$(q).html("("+p+")")},onInputStart:function(p,q){this._startInputScan();var r=this.editorMap;if(!r.hasOwnProperty(q)){r[q]=p;this.editorCount++}},onInputEnd:function(p,q){var r=this.editorMap;if(r.hasOwnProperty(q)){delete r[q]}else{return}delete this.inputMap[q];this._removeCachedInput(q);this.editorCount--;if(this.editorCount==0){this._stopInputScan()}p.setVal("")},onReplySuccess:function(p){this._removeCachedInput(p)},_getStorage:function(){if(this.store==null){var p=g.getUserLocalStorage(UID);this.store=p;if(p!=null){this._clearExpiresData()}}return this.store},_clearExpiresData:function(){var v=this._getStorage();if(v==null){return}var s,t,w,r,u,p=new Date().getTime(),q=new RegExp("^"+this.CACHE_KEY_PRE+"\\w+$","i"),z=v.getKeys();for(s=0,t=z.length;s<t;s++){w=z[s];if(!q.test(w)){continue}r=v.get(w);if(!r||!r.expr){continue}u=r.expr;if(p-r.expr>0){v.remove(w)}}},_cacheInput:function(s,t){var p=this._getStorage();if(p==null){return}var q=this.CACHE_KEY_PRE+s;var r=new Date().getTime()+this.CACHE_EXPR_TIME;p.set(q,{expr:r,val:t})},_removeCachedInput:function(r){var p=this._getStorage();if(p==null){return}var q=this.CACHE_KEY_PRE+r;p.remove(q)},_getCachedInput:function(r){var q,p=this._getStorage();if(p){q=p.get(this.CACHE_KEY_PRE+r)}q=q&&q.val?q.val:"";if(q){CA.q("load_catch_input_for_reply_form")}return q?q:""},_startInputScan:function(){if(this.INPUT_SCAN_THREAD!=null){return}var r=this;var p=this.INPUT_SCAN_INTERVAL;var q=function(){var u,w,v,t,s=r.inputMap,z=r.editorMap;for(u in z){if(!z.hasOwnProperty(u)){continue}w=z[u];v=s[u];t=w.getVal();if(t&&t!=v){s[u]=t;r._cacheInput(u,t)}}};this.INPUT_SCAN_THREAD=window.setInterval(q,p)},_stopInputScan:function(){window.clearInterval(this.INPUT_SCAN_THREAD);this.INPUT_SCAN_THREAD=null},nPage:function(p){n.showPage(p)},pPage:function(p){n.showPage(p)},showPage:function(p){var q="";if(p.next_cursor){q+="next_cursor="+p.next_cursor}else{if(p.pre_cursor){q+="pre_cursor="+p.pre_cursor}}var r,s=p.msgid;r=o(s,p.ele);tw.build({type:"rp_show",msgid:s,pageNo:p.pageNo,cursor:q,success:function(w){if(!w.getStatus()){return}var A=(r?r.find("#rebox_"+s):$("#rebox_"+p.msgid));if(A.data("init")!=1){n._initPageEvent(A);A.data("init",1)}A.hide();var v=$.parseJSON(w.d.addAttr).reply_count;if(n.options.isHiddeComment===true&&v>0){n.hiddeComment(A,p.msgid,v);A.html(w.getBody());tw.reply.reportBind(A)}else{A.fadeOut(300,function(){$(this).html(w.getBody()).show();tw.reply.reportBind(A)})}$(A).find("a.fuc").each(function(){$.cr.setUnselectable($(this).get(0))});var u,t;t=w.d.addAttr;if(t){try{u=$.parseJSON(t).reply_count;n.updateReplyNum(s,u)}catch(z){}}n.regDataCa(n.options.dataca)}})},_initPageEvent:function(p){p.bind("click",function(q){var r=$(q.target).closest("a.crjs_pg");if(r.length>0&&!r.hasClass("dis")){n.goPage({url:r.attr("href").replace(HOST,""),box:p});return false}})},rp_rp:function(B){var w="回复@"+B.replyName+"：",u="";var q=$(B.THIS),z;z=o(B.msgid,B.THIS);if(q.closest("div.twiRoot").length==1){u=q.closest("div.twiRoot").find("div.crjs_cmt")}else{u=z.find("#relist_"+B.msgid)}if(u.length==0){u=$("#relist_"+B.msgid)}var v=u.find("div.post").getCrControl("crSimpleEdit");var s=$.cr.str.trim(v.getVal());var p=u.find("textarea");var r=p.data("reply_name_msg");if(r&&s.indexOf(r)!=-1){v.setVal(s.replace(r,w))}else{if(s){var t=s.indexOf("：");var A=s.slice(0,t+1);s=s.replace(A,"")}v.setVal(w+s)}p.data("reply_name_msg",w);if(n.rpOpt){n.rpOpt=null}n.rpOpt={msgid:"",rpid:"",replyTo:"",replyName:""};$.extend(n.rpOpt,B);v.setCursorEnd();if(!u.data("tw_rp_add")){u.data("tw_rp_add"," //@"+B.replyName+" "+tw.twcontainer.getReplyContent(B.rpid))}return false},postRp:function(){var r=n.wE.getVal(),p=n.wo;if(!r){return false}var q={type:"rp",rp:r,msgid:p.msgid,rpOpt:{replyTo:p.replyTo,rpid:p.rpid,cmtid:p.rpid},success:function(t){if(n.picEditor&&n.picEditor.isShow()){n.picEditor.close(false)}if(t&&417==t.status){kola("newt.ui.window.dialog.realname.ValidIDCardModel",function(u){u.show({style:"plain"})});m.refresh(n.wP);n.wB.setEnable();return}common.showTip("回复成功");n.w.close();$.cr.event.send("tw_add_rp")}};if(n.picEditor!=null){var s=n.picEditor.getStatus();if(s!=n.picEditor.STATUS_NOT_SELECT){if(s==n.picEditor.STATUS_UPLOADING){rpBtn.removeClass("btn_dis btn_loading");return false}else{q.pic=n.picEditor.getValue()}}}if(n.ck.attr("checked")){q.url="/twAction/reTwitter"}q=m.getValue(n.wP,q);tw.build(q)},show_rpWin:function(p){n.wo=p;if(!n.w){n.w=tw.window.getWindow("rp_win",{canUploadPic:b.CAN_UPLOAD_PIC_WHEN_REPLY});n.w.elem.find("a.close:first").click(function(){if(n.picEditor&&n.picEditor.isShow()){n.picEditor.close(false)}});n.w.elem.find(".postSub>.opt").removeClass("noVis nodis noDis")}var q=n.w.getElement();q.find("div.repost_c").html("回复："+$("#"+p.rpid+"_con").find("p.twit q.ugc").html());if(!n.wB){n.wB=$(q).find("a.overlaySubmitB").crButton({submitHandle:n.postRp}).getCrControl("crButton")}else{n.wB.setEnable()}if(!n.wE){n.wP=$(q).find("div.post");n.wE=n.wP.crSimpleEdit({max:300,state:true,cut:false,syncHandle:function(s){m.editChange(n.wP)},ctrlEnterHandle:n.postRp}).getCrControl("crSimpleEdit");m.init(n.wP,{okHandle:function(s){return s!=""}})}else{m.refresh(n.wP)}tw.emote.initEmoteBtn(q,n.wE);q.find("li.crJs_ig").bind("mouseover",function(){var s=q.find("span.swfuploadbutton").parent();n.uploadPIc(s,n.wE,p.msgid,false);$(this).unbind("mouseover",arguments.callee)});if(!n.ck){n.ck=$(q).find("input[type='checkbox']")}n.ck.attr("checked",false);new tw.AtTip($(q).find("div.post"));n.w.show();n.wE.setVal("");n.wE.insert("回复@"+p.replyName+"：");var r=$(q).find("textarea").height(62);setTimeout(function(){n.wE.setCursorEnd();$(n.wE.edit).trigger("keyup")},50);return false},rp_del:function(p){var q=tw.login.check();if(!q){return false}var s=p.msgid,r;r=o(p.msgid,p.ele);var u=TOOL.target()?TOOL.target().closest("div.crjs_cmt").find("#rp_"+s):(r?r.find("#rp_"+s):$("#rp_"+s));var t=function(){p.type="rp_del";p.success=function(w){u.fadeOut(800,function(){$(this).remove()});if(u.closest("div.twiRoot").length==1){f.del(u.closest("div.twiRoot").find(".js_rp"))}else{f.del($("#num_"+p.ptid))}var v=$("div.comment b.num");if(v.length==1){v.text(parseInt(v.text(),10)-1)}};tw.build(p)};kola("newt.tipbox.Tipbox",function(){tw.tipbox.delTwTipbox({posi:"2",msg:"确认删除这条评论吗？",submitHandle:t,elem:u.find(".tags").children(".tag").eq(0).find("a.fuc")})})},rp:function(C){var v=1;if(typeof(C.globalIntercept)!="undefined"&&C.globalIntercept==false){v=0}if(v==1){var B=tw.login.check();if(!B){return false}}var p=C.msgid,u;u=o(C.msgid,C.ele);if(u.find("div[twi_delete]").length==1){tw.showSysMsg("对不起，由于原微博被删除，不能评论");q.removeClass("btn_loading");return}var s=C.rplistBox||u.find("#relist_"+p),t=s.find("div.post").getCrControl("crSimpleEdit"),z=t.getVal(),r=C.rpBox||TOOL.getCurrent("#rebox_"+p),q=s.find("a.btnM").addClass("btn_dis btn_loading"),w=0;if(!z){t.getElement().effect("highlight",{color:"#ffdcdc"},1000);q.removeClass("btn_dis btn_loading");return false}C=m.getValue(s.find("div.post"),C);if(this.picEditor!=null){var A=this.picEditor.getStatus();if(A!=this.picEditor.STATUS_NOT_SELECT){if(A==this.picEditor.STATUS_UPLOADING){tw.notice.showErrTip3("图片上传中..");q.removeClass("btn_dis btn_loading");return false}else{C.pic=this.picEditor.getValue()}}}if(s.find(".postAtt input:[type='checkbox']").attr("checked")){w=1}C.type="rp";if(p.indexOf("_")>0){C.msgid=p.split("_")[1]}if(w==1){C.url="/twAction/reTwitter";if(b.INSERT_WEIBO_URL){C.url=b.INSERT_WEIBO_URL}}C.rp=z;if(n.rpOpt){C.rpOpt=n.rpOpt;C.rpOpt.replyTo=n.rpOpt.replyTo;C.rpOpt.cmtid=n.rpOpt.rpid}if(typeof(C.success)!="function"){C.success=function(H){n.rpOpt=null;m.refresh(s.find("div.post"));if(H.status===0){q.removeClass("btn_loading");r=u.find("#rebox_"+p);if(r.size()==0){r=$("#rebox_"+p)}r.removeClass("noDis");var E;if(w!=1){E=$(H.data);r.prepend(E);E.hide();E.slideDown("normal",function(){$(this).css("overflow","visible")});tw.other.insertReply(p,$(H.data))}else{E=$(H.data.reply);E.prependTo(r);E.hide();E.slideDown("normal",function(){$(this).css("overflow","visible")});tw.other.insertReply(p,E);tw.twcontainer.addOne(H.data.timeline);f.add(TOOL.getAll("#"+C.msgid+"_con .crJs_rt:last q"))}r.find("div.noCnt").remove();t.setVal("");$.cr.event.send("tw_add_rp");var D=22;s.find("textarea").height(D);f.add(u.find("#num_"+p));var G=TOOL.getCurrent("div.comment b.num");if(G.length==1){G.text(parseInt(G.text(),10)+1)}if(n.picEditor&&n.picEditor.isShow()){n.picEditor.close(false)}if(n.onReplySuccess instanceof Function){try{n.onReplySuccess(p)}catch(I){}}$.cr.event.send("reply_weibo_success",H.data);if(w==1){$.cr.event.send("reply_forward_weibo_success",H.data)}var J=b.CAN_UPLOAD_PIC_WHEN_REPLY;var F=!!C.pic;CA.q("reply_weibo"+(F?"_with_pic":"_no_pic")+(J?"_when_upload_enable":"_when_upload_disable"))}else{q.removeClass("btn_dis");q.removeClass("btn_loading");if(H&&417==H.status){kola("newt.ui.window.dialog.realname.ValidIDCardModel",function(K){K.show({style:"plain"})})}else{tw.showSysMsg(H.statusText)}}}}C.error=C.sysError=function(){m.refresh(s.find("div.post"));q.removeClass("btn_loading")};tw.build(C);return false},reportBind:function(p){p.delegate("div.twi","mouseenter",function(){$(this).find(".crJs_report").removeClass("noDis")});p.delegate("div.twi","mouseleave",function(){$(this).find(".crJs_report").addClass("noDis")})},goPage:function(q){var r=q.box;var p={type:"replyGoPage",url:q.url,success:function(s){r.css("visibility","hidden").html(s).css("visibility","visible").fadeIn(800);CRTWCONFIG.SCROLL_DOM.scrollTo(r,200,{axis:"y",offset:-120})}};kola("newt.twitter.Twitter",function(){tw.build(p)})},_setAfterGoPagePosi:function(s){var u="",t="";switch(TOOL.getPart()){case 1:break;case 2:u=TOOL.getRight("div.comment h4");t=TOOL.getRight("div.paneC");break;case 3:u=TOOL.getLeft("div.comment h4");t=$("div.LAND");break}if(u.length!=1||t.length!=1){return}var r=t.scrollTop()-(TOOL.target().offset().top-u.offset().top);t.scrollTop(r)},uploadPIc:function(p,r,s,q){kola("newt.composer.MultiPicEditor",function(t){n.picEditor=new t({id:"picEditor"+s||"",anchor:p,confirm:typeof q!="undifined"?q:true,dragAnchor:document.body,postParams:{uid:UID,serviceid:"32"},uploadUrl:CRTWCONFIG.MULTI_PIC_UPLOAD_URL,fileFilter:"jpg, jpeg, png, gif, bmp, JPG, JPEG, GIF, BMP",maxFileSize:10*1024*1024,MAX_SELECT_COUNT:1,onOpen:function(){if(r.getVal()==""){r.setVal("图片评论")}var v=n.picEditor.getEditorClientRect();var w=k.isIE6?$("#t-sys"):document;var u=document.compatMode=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight;if(v.bottom>u){var z=$(w).scrollTop();var A=20;$(w).scrollTop(z+v.bottom-u+A)}r.setCursorEnd();tw.emote.em.hide()},onDelPic:function(u){var v=r.getVal();var z=v&&v!="图片评论";var w=u.getValue()!="";if(!z&&!w){r.setVal("")}r.setCursorEnd()},onClose:function(w,v){var z=r.getVal();var u=z&&z!="图片评论";if(v&&!u||!v){r.setVal("")}r.setCursorEnd()}})})},hiddeComment:function(r,s,p){var q=$("#expand_"+s);if(q.length>0){return}q=$('<div id="expand_'+s+'" class="plusM">共有<b>'+p+'</b>条评论，<a href="javascript:void(0);" class="fuc"><b>点击查看</b><i class="sign signArr6" title="signArr6"><q>◇</q><q class="k2">×</q></i></a></div>');$(r).before(q);q.find("a.fuc").click(function(){q.remove();var t=$("#rebox_"+s);t.show()})}})};tw.reply=new a();return a});kola("template.main.app.recommends.guess",[],function(){return'<div class="ap">\n    <h4>\n        ${if #.length > 0}\n            <span class="opt"><a href="javascript: void(0);" title="换一批" data-ca="newt-guesswidget-next" class="js-next"><i class="i iS iRefresh"></i></a></span>\n        ${/if}\n        <em>猜你感兴趣</em>\n    </h4>\n    ${if #.length > 0}\n        <div class="usrLi js-guess-userlist" style="display: none;">\n            ${forarr # as user}\n                <div class="usr3 js-user-${user.id} js-user" data-userid="${user.id}">\n                    ${include template.main.app.recommends.guess_avatar_content: user}\n                </div>\n            ${/forarr}\n        </div>\n        <div class="apb"><p class="fucs2"><a class="fuc" href="/follow/guess" target="_self" data-ca="newt-guesswidget-more"><b>更多</b>&gt;&gt;</a></p></div>\n        ${else}\n            <p class="h4Inf">猜不到你认识的人，可能是资料不完整。立即完善资料，或者去邀请朋友</p>\n    ${/if}\n</div>'});kola("newt.comet.News",["jquery.Core","kola.lang.Class"],function(c,b){var a=b.create({_init:function(g){var f=this;var d=c.extend({controlPanel:"div.jsControlReminder",autoPanel:"div.jsAutoReminder",hideCls:"noDis",src:"/twAction/getNew.do",millisec:30000,maxDisplay:99,onReceive:null},g||{});c.extend(f,d);f.controlPanel=c(f.controlPanel);f.autoPanel=c(f.autoPanel);if(typeof(f.onReceive)=="function"){f.updateHandle=f.onReceive}else{f.updateHandle=f.update}f.getNew();f.loop();f.initEvt()},initEvt:function(){var d=this;d.autoPanel.find("a.close").bind("click",function(){d._ajax("/twAction/clearNotice",function(f){if(f&&f.status==0){d.autoPanel.data("totalNum",0);d.autoPanel.addClass(d.hideCls)}})});clearInterval(d.interId);d.interId=setInterval(function(){var f=0;f=d.autoPanel.data("totalNum");if(f){f=parseInt(f,10)}if(d._hasAnyVisiblePanel()){d.autoPanel.addClass(d.hideCls)}else{if(f>0){d.autoPanel.removeClass(d.hideCls)}}},500)},_hasAnyVisiblePanel:function(){var g=false,d,f;d=c("#crjs_headbar").find("div.dropDown");f=d.filter(".noDis,.nodis").size();if(d.size()>f){g=true}return g},getNew:function(){var d=this;d._ajax(d.src+"?ts="+(new Date()).getTime(),function(f){if(f&&f.status==0){d.updateHandle(f.data)}})},loop:function(){var d=this;d.timeId=setTimeout(function(){d.getNew();d.loop()},d.millisec)},_ajax:function(f,d){c.ajax({url:HOST+f,global:false,type:"get",dataType:"json",success:function(g){if(typeof(d)=="function"){d(g)}}})},update:function(f){var d=this;d.updateTitle(f);d.updateMailNotice(f.mail);delete f.mail;d.updateAutoPanel(f);d.updateControlPanel(f);d.updateIE9Icon(f)},updateMailNotice:function(g){var f=this,d=0,h="";d=parseInt(g,10);h=d>f.maxDisplay?(f.maxDisplay+"+"):d;kola("newt.cr.crEvent",function(){c.cr.event.send("tw_notice_mail_update",h)})},updateAutoPanel:function(k){var j=this,f=0,l="",h=0,d;d=j.autoPanel.find("div.dropC");d.children().addClass(j.hideCls).removeClass("last");for(var g in k){f=parseInt(k[g],10);if(f>0){h+=f;l=f>j.maxDisplay?(j.maxDisplay+"+"):f;d.find(".js_"+g).removeClass(j.hideCls).find("b").text(l)}}j.autoPanel.data("totalNum",h);if(h>0&&j.controlPanel.hasClass(j.hideCls)){d.children().not(".noDis").filter(":last").addClass("last");j.autoPanel.removeClass(j.hideCls)}else{j.autoPanel.addClass(j.hideCls)}},updateControlPanel:function(l){var k=this,g=0,m="",f,d,j;f=k.controlPanel.find("div.dropC");for(var h in l){g=parseInt(l[h],10);d=f.find(".js_"+h).find("a");if(d.size()>0){if(g>0){m=g>k.maxDisplay?(k.maxDisplay+"+"):g;j=d.attr("data-txtNew");if(j){j=j.replace("{0}",m);d.find("a").html(j)}}else{j=d.attr("data-txtDefault")}d.html(j)}}},updateIE9Icon:function(h){var g=(c.browser.msie&&c.browser.version)>=9?1:0;if(!g){return}var m=this;var f=[],j,l,o,d,k=m.autoPanel;for(var n in h){j=parseInt(h[n],10);if(j>0){l=k.find(".js_"+n).text();o=k.find(".js_"+n+" b").text();l=l.replace(o,"");d=k.find(".js_"+n+" a").attr("href");f.push({val:j,txt:l,url:d})}}if(f.length>0){m.showIE9Icon(f)}},updateTitle:function(j){var h=this,g=0,d="";h.resetTitle();for(var f in j){g+=parseInt(j[f],10)}if(g>0){d=g>h.maxDisplay?(h.maxDisplay+"+"):g;h.setTitle(d)}},showIE9Icon:function(p){var m=this;try{var d=window.external.msIsSiteMode();var o="/favicon.ico";if(d){window.external.msSiteModeClearJumpList()}var n=0,h,k,j,g,f;f=m.maxDisplay?m.maxDisplay:99;j=p;k=j.length;for(h=0;h<k;h++){n+=j[h]["val"]}if(n>0){window.external.msSiteModeSetIconOverlay("http://s5.cr.itc.cn/i/1/131.ico","有新的通知");if(d){window.external.msSiteModeCreateJumplist("通知");for(h=0;h<k;h++){g=j[h]["val"];if(g>0){g=g>f?(f+"+"):g;window.external.msSiteModeAddJumpListItem(g+j[h]["txt"],j[h]["url"],o)}}}}else{window.external.msSiteModeClearIconOverlay()}}catch(l){}},setTitle:function(d){document.title="("+d+") "+document.title},resetTitle:function(){document.title=document.title.replace(/\([0-9]+\+?\)\s/gi,"")}});return a});kola("newt.timeline.DropdownMenu",["newt.Config","newt.tool.Url"],function(){var a=function(c){var b=this;b.opts=$.extend({actCls:"act",noDis:"noDis",onCls:"on",menus:'[data-menu="title"]',groupMenu:"#t-comp-nenu-group",commentMenu:"#t-comp-nenu-comment",group:"#t-timeline",comment:"#t-comments"},c||{});b.groupData=null;var f="/follow/getfriendgroupbyinfoTshou";var h,d,g,j,k;h=$(b.opts.menus);d=$(b.opts.groupMenu);g=$(b.opts.commentMenu);j=$(b.opts.group);k=$(b.opts.comment);$.extend(b,{init:function(){var l,m;l=j.find("i.i.i4");m=k.find("i.i.i4");$("body").click(function(n){$('div[data-menu="content"]').addClass("noDis");b.resetTabClass()});l.unbind().click(function(n){if(d.hasClass(b.opts.noDis)&&b.groupData==null){b.initGroupData(function(){b.toggle_group()})}else{b.chgSelectGroup();b.toggle_group()}n.cancelBubble=true;if(n.stopPropagation){n.stopPropagation()}return false}).mouseout(function(n){$(this).removeClass("i4_hover");$(this).addClass("i4")}).mouseover(function(n){$(this).removeClass("i4");$(this).addClass("i4_hover")});m.unbind().click(function(n){b.toggle_comment();n.cancelBubble=true;if(n.stopPropagation){n.stopPropagation()}return false}).mouseout(function(n){$(this).removeClass("i4_hover");$(this).addClass("i4")}).mouseover(function(n){$(this).removeClass("i4");$(this).addClass("i4_hover")})},resetTabClass:function(){h.each(function(){var m,l;m=$(this);l=b.opts.actCls;if(m.data("tw_add_on")){l+=" "+b.opts.onCls}m.removeClass(l).data("tw_add_on",0)})},toggle_group:function(){var l=b.opts.actCls;if(d.hasClass(b.opts.noDis)){k.removeClass(b.opts.actCls);b.resetTabClass();d.removeClass(b.opts.noDis);if(!j.hasClass(b.opts.onCls)){l+=" "+b.opts.onCls;j.data("tw_add_on",1)}j.addClass(l);g.addClass(b.opts.noDis)}else{d.addClass(b.opts.noDis);if(j.data("tw_add_on")){l+=" "+b.opts.onCls;j.data("tw_add_on",0)}j.removeClass(l);g.addClass(b.opts.noDis)}},toggle_comment:function(){var l=b.opts.actCls;if(g.hasClass(b.opts.noDis)){j.removeClass(b.opts.actCls);b.resetTabClass();g.removeClass(b.opts.noDis);if(!k.hasClass(b.opts.onCls)){l+=" "+b.opts.onCls;k.data("tw_add_on",1)}k.addClass(l);d.addClass(b.opts.noDis)}else{g.addClass(b.opts.noDis);d.addClass(b.opts.noDis);if(k.data("tw_add_on")){l+=" "+b.opts.onCls;k.data("tw_add_on",0)}k.removeClass(l)}},initGroupData:function(l){b.ajax("",f,{okHandle:function(m){if(m.status==0&&m.data.length>0){b.groupData=m.data;b.GroupDataHandle(m.data);if(typeof(l)=="function"){l()}}}})},chgSelectGroup:function(){var m,l,n;n=j.find("b").text();m=$("#t-comp-group").find("a");m.each(function(){l=$(this).text();if(l==n){$(this).addClass("selected")}else{$(this).removeClass("selected")}})},GroupDataHandle:function(s){var r="",q,p,n;q=j.find("b").text();if(s.length>1){for(var o=0,m=s.length;o<m;o++){p=s[o].name=="全部"?"全部分组":s[o].name;n=q==p?'class = "selected"':"";if(s[o].gid!="-1"){r+='<a href="/home?group='+s[o].gid+'" data-menu-title="#t-timeline" '+n+">"+p+"</a>"}else{r+='<a href="/home" data-menu-title="#t-timeline" '+n+">"+p+"</a>"}}}else{r+='<b class="noItem">没有分组</b>'}r+='<b class="dropL"><a href="/following">分组管理</a></b>';$("#t-comp-group")&&$("#t-comp-group").html(r)},ajax:function(n,l,m){m=$.extend({errHandle:function(o,p){}},m||{});$.ajax({url:l,data:n,dataType:"json",type:"post",success:function(o){if(typeof(m.okHandle)=="function"){m.okHandle(o)}},error:function(o,p){if(typeof(m.errHandle)=="function"){m.errHandle(o,p)}}})}})};return a});kola("newt.comet.Feed",["newt.Config","newt.twitter.Twitter","newt.timeline.Container","newt.tool.Tool","newt.cr.crEvent"],function(){var a=function(){var b=this;b.t=0;b.pMsgid=0;b.pStat=0;b.scrollWin=CRTWCONFIG.SCROLL_DOM;b.ie9icon=($.browser.msie&&$.browser.version)>=9?1:0;b.msgNum=0;b.newMail=0;b.isInit=0;var h=['<div id="notice_jingxuan" class="notice notice0 noDis">','<div class="c"><a  data-ca="newt_bar_reminder_jingxuan" target="_self" href="http://t.sohu.com/jingxuan">没有新微博可看啦？去“<b>微精选</b>”看看吧！</a></div>',"</div>"].join("");function d(){kola("newt.util.helper.AutoFix",function(k){b.tipEle=$(h);$("div.ap.stream").before(b.tipEle);b.tipFix=new k({target:b.tipEle,doFix:function(m,l){if(j()){$("#t-sky div.cloud").append(m)}},doRestore:function(m,l){if(j()){l.append(m)}},adjustPos:function(){if(!this._pause){if(j()){$("div.ap.stream").before(this.wrapper);if(!this.target[0].innerHTML){this.target[0].innerHTML='<div class="c"><a data-ca="newt_bar_reminder_jingxuan" target="_self" href="http://t.sohu.com/jingxuan">没有新微博可看啦？去“<b>微精选</b>”看看吧！</a></div>'}}var l=this.wrapper.offset();if((this.doc.scrollTop()+this.doFixOffset)<l.top){this.doRestore(this.target,this.wrapper)}else{this.doFix(this.target,this.fix_wrapper)}}}})})}function j(){var m,l,k=false;m=window.location.href;l=m.split("/");if(l.length>0){m=l[l.length-1];k=m.indexOf("home")>-1?true:false}return k}function g(){b.tipTime=180;b.tipFlag=1}function f(){b.tipFlag=0;b.tipEle.addClass("noDis")}function c(){b.tipEle.removeClass("noDis");b.tipFlag=0}$.extend(b,{init:function(){if(b.isInit){return}d();g();b.tipTimeId=setInterval(function(){if(!j()){f();g();return}if(b.tipFlag){b.tipTime=b.tipTime-1;if(b.tipTime==0&&j()){kola("newt.ca.ca",function(){CA.q("newt_bar_reminder_jingxuan_appear")});c()}}},1000);$.cr.event.bind("tw_gotop_end",function(){window.setTimeout(b.showTw,10)});b.isInit=1},auto:function(){if(b.t>0){clearInterval(b.t)}var k=function(){var l=tw.twcontainer.getLastMsgId();tw.build({type:"update_tw",data:l,success:function(m){tw.twcontainer.addOne(m)}})};b.t=setInterval(k,CRTWCONFIG.FT)},judgeMsg:function(k){var l=parseInt(tw.twcontainer.getLastMsgId());if(l>b.pMsgid||parseInt(k)>l){b.pMsgid=l;return k}else{return 0}},twFeed:function(l){var k=b.judgeMsg(l.twid);if(k>0&&!b.pStat){b.pStat=1;setTimeout(function(){b.pStat=0},300);tw.build({type:"update_tw",data:k,success:b.updateTw,error:function(){}})}},twFeedGroup:function(){var k=tw.twcontainer.getLastMsgId();if(!b.pStat){b.pStat=1;setTimeout(function(){b.pStat=0},300);tw.build({type:"update_group_tw",data:k,gid:window.GID,success:b.updateTw,error:function(){}})}},updateTw:function(l){f();tw.twcontainer.addSilence(l);var k=tw.twcontainer.getNodisTwsNum();if(k>0){b.updateNoticeBar(k)}},updateMyStatus:function(q){var p=$("#crjs_headbar div.reminder");p.find("a.close").unbind().bind("click",function(){p.addClass("noDis")});var m=p.find(".dropC").children("p");var k=false;r("fed",q.fed);r("ated",q.ated);r("replyme",q.replyme);r("notice",q.notice);if(b.ie9Icon){n(q)}b.newMail=parseInt(q.mail,10);var o=parseInt(q.fed,10)+parseInt(q.ated,10)+parseInt(q.replyme,10)+parseInt(q.notice);b.msgNum=o;b.updateTitleNum();window.setTimeout(function(){$.cr.event.send("tw_notice_num_update",o);var s=b.newMail;if(s>99){s="99+"}$.cr.event.send("tw_notice_mail_update",s)},100);function r(t,s){var u=p.find("p.js_"+t+" b");s=parseInt(s);if(s>0){if(s>9999){s="9999+"}u.addClass("em2").text(s);k=true}else{u.removeClass("em2").text(s)}}var l=parseInt(q.replyme);if(l>0){if(l>99){l="99+"}$("#labRecComNum").text(l).attr("title","收到"+l+"条新评论");if($.trim($("#t-comments").find("b").text())=="收到评论"&&!$("#t-comments").hasClass("on")){$("#labRecComNum").removeClass("noDis")}}else{$("#labRecComNum").addClass("noDis")}l=parseInt(q.ated);if(l>0){if(l>99){l="99+"}$("#labAtMeNum").text(l).attr("title",l+"条新@提到我的").removeClass("noDis")}else{$("#labAtMeNum").addClass("noDis")}function n(w){try{var t=w.ated;var C=w.replyme;var D=w.fed;var u=w.mail;var s=window.external.msIsSiteMode();var B="/favicon.ico";var v="http://t.sohu.com/";if(s){window.external.msSiteModeClearJumpList()}if(t+C+D+u>0){window.external.msSiteModeSetIconOverlay("http://s5.cr.itc.cn/i/1/131.ico","有新的通知");if(s){var A=function(G,E,F){if(G>0){window.external.msSiteModeAddJumpListItem(G+F,v+E,B)}};window.external.msSiteModeCreateJumplist("通知");A(D,"followers","个新粉丝");A(t,"mentions","条@提到我的微博");A(C,"comments","条新评论");A(u,"inbox","封私信")}}else{window.external.msSiteModeClearIconOverlay()}}catch(z){}}},_reminderPosi:function(k){if(b.scrollWin.scrollTop()>79){k.appendTo(TOOL.getRight("div.Cloud"))}else{k.appendTo(TOOL.getLeft("div.tray"))}},_tTop:276,updateNoticeBar:function(k){if($("div.ap.noticeWrap").find("div.notice0").length>1){$("div.ap.noticeWrap").find("div.notice0:gt(0)").remove()}var l=$("#notice_container");if(k>50){l.find("a").unbind("click").attr("href","/home").attr("target","_self")}else{l.find("a").unbind("click").attr("href","javascript:void(0);").click(function(){b.goTop(b.showTw)})}k=k>99?"99+":k;if(l.hasClass("noDis")){l.removeClass("noDis").hide();l.find("div.c span").text(k);l.slideDown("normal",function(){l.removeAttr("style")});kola("newt.ca.ca",function(){CA.q("newt_bar_appear")})}else{l.find("div.c span").text(k)}b._tTop=$("#t-main").children(".noticeWrap").removeClass("noDis").offset().top;if(!$.isWindow(b.scrollWin[0])){b._tTop+=b.scrollWin.scrollTop()}b.scrollWin.unbind("scroll.notice").bind("scroll.notice",function(){b._posiNoticeBar()});b._posiNoticeBar()},_posiNoticeBar:function(){var o=35;var n=$("#notice_container"),l=$("#t-main").children(".noticeWrap");if(!l.offset()){return}var k=b._tTop-o,m=b.scrollWin.scrollTop();if(m>=k){if(n.data("posi")==1){return}n.appendTo($("div.Cloud div.cloud")).data("posi",1)}else{if(n.data("posi")==2){return}n.appendTo(l).data("posi",2)}},goTop:function(k){k=k||function(){};var l=$("#gotoTop");if(l.length==1){if($("#notice_container").data("posi")==1){l.getCrControl("crGoTop").goSomewhere($("#t_mytimeline_tab"),-35);window.setTimeout(k,1000)}else{k()}}},showTw:function(){g();$("#notice_container").addClass("noDis");$("#t-main").children(".noticeWrap").addClass("noDis");tw.twcontainer.showSilenceTw()},updateTitleNum:function(){b.resetTitle();var k=b.msgNum+b.newMail;if(k){k=k>99?"99+":k;b.setTitle(k)}},setTitle:function(k){document.title="("+k+") "+document.title},resetTitle:function(){document.title=document.title.replace(/\([0-9]+\+?\)\s/gi,"")}})};tw.feed=new a();return a});kola("newt.monitor.Performance",null,function(){var a={sendLog:function(c){var b=this;kola("newt.service.StatisticService",function(d){var f=b.getSimJson();if(f){d.log(c,"be-record",f)}})},getJson:function(){var g,f,c,b=window,d=null;g=b.performance||b.msPerformance||b.webkitPerformance||b.mozPerformance;if(g&&g.timing&&g.navigation){f=g.timing;c=g.navigation;d={};d.navigationStart=f.navigationStart;d.unloadEventStart=f.unloadEventStart;d.unloadEventEnd=f.unloadEventEnd;d.redirectStart=f.redirectStart;d.redirectEnd=f.redirectEnd;d.fetchStart=f.fetchStart;d.domainLookupStart=f.domainLookupStart;d.domainLookupEnd=f.domainLookupEnd;d.connectStart=f.connectStart;d.connectEnd=f.connectEnd;d.secureConnectionStart=f.secureConnectionStart?f.secureConnectionStart:0;d.requestStart=f.requestStart;d.responseStart=f.responseStart;d.responseEnd=f.responseEnd;d.domLoading=f.domLoading;d.domInteractive=f.domInteractive;d.domContentLoadedEventStart=f.domContentLoadedEventStart;d.domContentLoadedEventEnd=f.domContentLoadedEventEnd;d.domComplete=f.domComplete;d.loadEventStart=f.loadEventStart;d.loadEventEnd=f.loadEventEnd;d.msFirstPaint=f.msFirstPaint?f.msFirstPaint:0;d.navRedirectCount=c.redirectCount;d.navType=c.type;d.domContentLoadedTime=d.domContentLoadedEventStart?d.domContentLoadedEventStart-d.fetchStart:-1;d.windowLoadedTime=d.loadEventStart?d.loadEventStart-d.fetchStart:-1}return d},getSimJson:function(){var b=this,d,c=null,d=null;d=b.getJson();if(d){c={};c.navS=d.navigationStart;c.unEvS=d.unloadEventStart;c.unEvE=d.unloadEventEnd;c.redS=d.redirectStart;c.redE=d.redirectEnd;c.fetS=d.fetchStart;c.doLoS=d.domainLookupStart;c.doLoE=d.domainLookupEnd;c.conS=d.connectStart;c.conE=d.connectEnd;c.seCoS=d.secureConnectionStart;c.reqS=d.requestStart;c.resS=d.responseStart;c.resE=d.responseEnd;c.doLo=d.domLoading;c.doIn=d.domInteractive;c.doCoLoEvS=d.domContentLoadedEventStart;c.doCoLoEvE=d.domContentLoadedEventEnd;c.doCom=d.domComplete;c.loEvS=d.loadEventStart;c.loEvE=d.loadEventEnd;c.firstP=d.msFirstPaint;c.naReCnt=d.navRedirectCount;c.naType=d.navType;c.doCoLoT=d.domContentLoadedTime;c.wiLoT=d.windowLoadedTime}return c},getArr:function(){var b=this,d,c=[];d=b.getJson();if(d){c.push(d.navigationStart);c.push(d.unloadEventStart);c.push(d.unloadEventEnd);c.push(d.redirectStart);c.push(d.redirectEnd);c.push(d.fetchStart);c.push(d.domainLookupStart);c.push(d.domainLookupEnd);c.push(d.connectStart);c.push(d.connectEnd);c.push(d.secureConnectionStart);c.push(d.requestStart);c.push(d.responseStart);c.push(d.responseEnd);c.push(d.domLoading);c.push(d.domInteractive);c.push(d.domContentLoadedEventStart);c.push(d.domContentLoadedEventEnd);c.push(d.domComplete);c.push(d.loadEventStart);c.push(d.loadEventEnd);c.push(d.msFirstPaint);c.push(d.navRedirectCount);c.push(d.navType);c.push(d.domContentLoadedTime);c.push(d.windowLoadedTime)}return c},getDesArr:function(){var b=this,d,c=[];d=b.getJson();if(d){c.push("navigationStart:"+d.navigationStart);c.push("unloadEventStart:"+d.unloadEventStart);c.push("unloadEventEnd:"+d.unloadEventEnd);c.push("redirectStart:"+d.redirectStart);c.push("redirectEnd:"+d.redirectEnd);c.push("fetchStart:"+d.fetchStart);c.push("domainLookupStart:"+d.domainLookupStart);c.push("domainLookupEnd:"+d.domainLookupEnd);c.push("connectStart:"+d.connectStart);c.push("connectEnd:"+d.connectEnd);c.push("secureConnectionStart:"+d.secureConnectionStart);c.push("requestStart:"+d.requestStart);c.push("responseStart:"+d.responseStart);c.push("responseEnd:"+d.responseEnd);c.push("domLoading:"+d.domLoading);c.push("domInteractive:"+d.domInteractive);c.push("domContentLoadedEventStart:"+d.domContentLoadedEventStart);c.push("domContentLoadedEventEnd:"+d.domContentLoadedEventEnd);c.push("domComplete:"+d.domComplete);c.push("loadEventStart:"+d.loadEventStart);c.push("loadEventEnd:"+d.loadEventEnd);c.push("msFirstPaint:"+d.msFirstPaint);c.push("navRedirectCount:"+d.navRedirectCount);c.push("navType:"+d.navType);c.push("domContentLoadedTime:"+d.domContentLoadedTime);c.push("windowLoadedTime:"+d.windowLoadedTime)}return c}};return a});kola("template.main.app.recommends.hot.simpleface",[],function(){return'<div class="ap newUsrLi">\n    <h4>\n        ${if #list.length > 0}\n            <span class="opt"><a href="javascript: void(0);" class="js-next" title="换一批" data-ca="newt-hot${#widget}widget-next"><i class="i iS iRefresh"></i></a></span>\n        ${/if}\n        <em>人气推荐</em>\n    </h4>\n    ${if #list.length > 0}\n        <div class="usrLi js-recommends-list" style="display: none;">\n            ${include template.main.app.recommends.hot.sublist: #}\n        </div>\n        ${else}\n            暂时找不到推荐了。。。\n    ${/if}\n    <p class="fucs2"><a href="/following/recommend" class="fuc" target="_self" data-ca="newt-hot${#widget}widget-more"><b>更多</b>&gt;&gt;</a></p>\n</div>'});kola("newt.ca.pv",null,function(){var a=function(){var l=new Date(),p=function(n){var d,q=new RegExp("(^| )"+n+"=([^;]*)(;|$)","gi");if(d=q.exec(unescape(document.cookie))){return(d[2])}return null},k=function(d){return d>10?d:("0"+d)},c=p("SUV");if(!c){var g=""+Math.floor(Math.random()*10000)+"0000",m=l.getFullYear().toString().substr(2)+k(l.getMonth()+1)+k(l.getDate())+k(l.getHours())+k(l.getMinutes())+k(l.getSeconds())+g.substr(0,4),j=new Date();j.setTime(j.getTime()+100*365*24*60*60*1000);document.cookie="SUV="+escape(m)+"; expires="+j.toGMTString()+"; path=/; domain=sohu.com"}var o=[],f=document.createElement("script"),b;o.push("t="+l.getTime());if(typeof(b=document.referrer)=="string"&&b.length>0){o.push("r="+encodeURIComponent(b))}else{if(typeof(b=p("S_rr"))=="string"&&b.length>0){o.push("r="+encodeURIComponent(b));document.cookie="S_rr=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/reg/; domain="+document.domain}else{o.push("r=")}}o.push("version=1.5");f.src="http://z.t.sohu.com/pv.gif?"+o.join("&");f.type="text/javascript";if(navigator.userAgent.toLowerCase().indexOf("msie")==-1){f.setAttribute("async",true)}document.getElementsByTagName("head")[0].appendChild(f);var h=document.createElement("script");h.charset="GBK";h.type="text/javascript";h.src="http://js.sohu.com/mail/pv/pv_v203.js";document.getElementsByTagName("head")[0].appendChild(h)};return a});kola("newt.component.NavBar",["newt.service.Common","newt.util.StrUtil","kola.lang.String","newt.Config","newt.cr.crEvent","newt.cr.crOut","newt.cr.crInput","newt.cr.cr","newt.ca.ca"],function(c,d,b){var a=function(h,g){var f=this;f.elem=$(h);f.opti=$.extend({search:".crjs_search",login:".crjs_login"},g||{});f.search=f.elem.find(f.opti.search);f.login=f.elem.find(f.opti.login);f.remind=f.elem.find("ul.navG:last").find("li.navL").eq(3).find(".crjs_number");f.remind1=f.elem.find("ul.navG:last").find("li.navL").eq(2).find(".crjs_number");f.searchInput=f.search.find("input[type=text]");f.suggestList=null;f.activeIndex=-1;f.suggestShow=false;f.searchCache={HOLD_TIME:600000,MAX_COUNT:10,count:0,keys:[],datas:{}};$.extend(f,{init:function(){if(f.elem.data("init")!=1){f._initView();f._initEvent();f.elem.data("init",1)}},_initView:function(){var k,j;j=f.elem.find("a.nava").not($("#topLoginBtn")[0]);k=f.elem.find("li.navL>div.dropDown");j.bind("click",function(){var l,m;l=$(this);m=l.next("div.dropDown");if(m.size()==0){j.removeClass("act");k.addClass("noDis")}l.addClass("act");if(m.size()>0){if(m.hasClass("noDis")){l.addClass("act");m.removeClass("noDis")}else{l.removeClass("act");m.addClass("noDis")}}});k.each(function(){var l,m;m=$(this);l=m.prev("a.nava");m.crOut({outItems:l,outHandle:function(){if(!m.hasClass("noDis")){l.removeClass("act");m.addClass("noDis")}}})});k.find("a").bind("click",function(){j.removeClass("act");k.addClass("noDis");return true})},_initEvent:function(){if(f.search.length==1){kola("newt.component.combox.ComboxSearch, newt.component.combox.ComboxManager",function(){f._initSearch()})}if(f.login.length==1){f.login.children("a").click(function(){f._initLogin()})}$.cr.event.bind("tw_notice_num_update",function(k,j){if(parseInt(j)>0){f.remind.removeClass("noVis").find("em").text(j)}else{f.remind.addClass("noVis")}});$.cr.event.bind("tw_notice_mail_update",function(k,j){if(parseInt(j)>0){f.remind1.removeClass("noVis").find("em").text(j)}else{f.remind1.addClass("noVis")}})},_initLogin:function(){kola("newt.component.Login",function(){tw.login.doLogin3(f.login.children("div.dropLogin"))})},_initSearch:function(){this._initSuggestDom();this._bindSearchSuggestEvents();var j=f.search.crInput({editBox:"i.txt",submitBtn:"a.none",initText:"搜微博、搜人...",submitHandle:function(){k(j.getVal())}}).data("crInput");f.search.find("a").click(function(){k(j.getVal())});f.search.find("input").val("").blur();f.search.hover(function(){$(this).addClass("jumper_hover")},function(){$(this).removeClass("jumper_hover")});function k(l){if(l!=""&&f.activeIndex==-1){window.setTimeout(function(){f._sendCA("click_search_input_box_to_search");location.href="/twsearch/twSearch?key="+l.replace(/(\#|\&)/gi,"")},100)}}},_initSuggestDom:function(){var k=$('<div class="dropDown nodis"><div class="dropD"><i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i><div class="dropC"></div></div></div>');var j=function(){var l=f.searchInput;var m=l[0].getBoundingClientRect();var o=(m.bottom+2)+"px";var n=m.left+"px";k.css({left:n,top:o})};if(document.documentMode&&document.documentMode==8){k.appendTo("body").css({position:"fixed",zIndex:1000});j();window.onresize=j}else{k.appendTo(f.search)}this.suggestList=k},_bindSearchSuggestEvents:function(){var u=f.searchInput;var k=null;var l=200;var r="";var m=false;var q=this;var t=function(){if(m){return}m=true;k=window.setInterval(function(){var v=$.trim(u.val());if(v!=r){r=v;q._onInputChange(v)}},l)};var p=function(){r="";m=false;window.clearInterval(k);if(q.suggestList){window.setTimeout(function(){if(!m){q._hideSuggest()}},200)}};var j=function(w){var v,z=$(w.target)[0];z=z.tagName!="A"?$(z).parents("[data-mt]"):$(z);v=z.length>0?z.attr("href"):"";if(v){q._sendCA(z);location.href=v;q._hideSuggest();w.preventDefault();w.stopPropagation()}};var n=function(v){q._onInputKeyDown(v)};var s=function(){$(q.suggestList).find("[data-mt]").removeClass("dhover");q.activeIndex=-1};var o=function(){var z,v,A,w=q.activeIndex,B=$(q.suggestList).find("[data-mt]");$(B[w]).removeClass("dhover");for(z=0,v=B.length;z<v;z++){A=B[z];if(A==this){q.activeIndex=z;$(A).addClass("dhover");break}}};$(f.suggestList).bind("click",j);$("[data-mt]",this.suggestList[0]).live({mouseenter:o,mouseleave:s});$(u).bind({click:t,focus:t,blur:p,keydown:n})},_onInputChange:function(l){if(l==""){this._hideSuggest();return}var j=this._getCacheData(l);if(j){this._showSuggest(j);return}var n=this;var m=function(q){var r,p,o=n.searchInput.val();if(q.data){r=q.data;p=r.key;if(q.status==0&&p==o){n._showSuggest(r)}}else{n._hideSuggest()}};var k=function(q){var p=json.kw;var o=n.searchInput.val();if(p==o){n._hideSuggest()}};c.search({uid:UID,key:encodeURIComponent(encodeURIComponent(l)),success:m,error:k})},_onInputKeyDown:function(s){if(!this.suggestShow||!this.suggestList){return}var t=s.keyCode;var p=t==38;var q=t==40;var r=t==13;if(!p&&!q&&!r){return}var j=this.suggestList;var m=this.suggestList.find("[data-mt]");var u=this.activeIndex;var l=m.length;if(l==0){return}if(r){var o=$(m[u]);if(o.length>0){this._sendCA(o);window.setTimeout(function(){location.href=o.attr("href")},100)}return}if(p||q){var n=p?-1:1;var k=u+n<0?l-1:u+n>=l?0:u+n;$(m[u]).removeClass("dhover");$(m[k]).addClass("dhover");this.activeIndex=k;return true}},_sendCA:function(n){if(typeof n=="string"){CA.q(n);return}var k=n.attr("data-mt")=="suggest-title";var l=n.attr("href").indexOf("userSearch")!=-1;var m=n.attr("href").indexOf("twsearch")!=-1;var j;if(k){j=l?"click_user_title_of_search_result":"click_weibo_title_of_search_result"}else{j=m?"click_weibo_key_word_of_search_result":"click_user_key_word_of_search_result"}CA.q(j)},_hideSuggest:function(){var j=this.suggestList;this.activeIndex=-1;this.suggestShow=false;j.addClass("nodis");j.find(".dhover").removeClass("dhover")},_showSuggest:function(k){var l=this.suggestList;var j=0;this.suggestShow=true;this.activeIndex=-1;if(typeof k=="string"){l.find(".dropC").html(k);l.removeClass("nodis");return}if(k.weibo instanceof Array){j+=k.weibo.length}if(k.usr instanceof Array){j+=k.usr.length}this._fillSuggestList(k);l.removeClass("nodis")},_fillSuggestList:function(p){var m,j,o,n=p.key,k=[],l=this.suggestList.find(".dropC");l.html("");o=p.weibo||[];k.push(this._addSuggestGroup(n,"weibo",o,this.WEIBO_SUGGEST_TEMPLETE));o=p.usr||[];k.push(this._addSuggestGroup(n,"user",o,this.USER_SUGGEST_TEMPLETE));m=k.join("");this._addCacheData(n,m);l.html(m)},_addSuggestGroup:function(v,u,l,w){var m,q,o,j,n,v,s,k,t,p,r=[];if(!l||!w){return""}r.push('<div class="dropl">');t=u=="weibo"?"/twsearch/twSearch?key="+$.cr.encodeUTF(v):"/twsearch/userSearch?key="+$.cr.encodeUTF(v);p=b.SimpinLen(v)>4?b.cutSimpStr(v,3)+"...":v;r.push('<a data-mt="suggest-title" href="'+t+'" class="tit" title="'+v+'"><b>搜"<em class="em3">'+p+'</em>"相关'+(u=="weibo"?"微博":"用户")+"</b>&gt;&gt;</a>");for(m=0,q=l.length;m<q;m++){o=l[m];n=o.match||"";if(o.name){j=o.name;o.name_title=j;o.vicon_display=o.isVip?"":"none";if(o.isVip){if(o.isWeiboStar){o.vicon="pVer3"}else{if(o.isOrganVip){o.vicon="pOrg"}else{o.vicon="pVer"}}}j=b.SimpinLen(j)>6?b.cutSimpStr(j,5)+"...":j;o.name=j.replace(n,"<em class='em3'>"+n+"</em>")}if(o.kw){s=o.kw;o.kw_title=s;s=b.SimpinLen(s)>10?b.cutSimpStr(s,9)+"...":s;o.kw=s.replace(n,"<em class='em3'>"+n+"</em>")}r.push(d.format(w,o))}r.push("</div>");return r.join("")},_addCacheData:function(p,q){var l=f.searchCache;if(!l){return}var o=l.count;var k=l.MAX_COUNT;var n=l.keys;var j=l.datas;var m;if(o==k){m=n.shift();delete j[m];l.count--}l.count++;n.push(p);j[p]={saveTime:new Date().getTime(),cacheData:q}},_getCacheData:function(q){var n=this.searchCache;var m,l,k;var o,j,p=n.keys;if(n&&n.datas[q]){m=n.datas[q];k=m.cacheData;l=m.saveTime;if(new Date().getTime-l>n.HOLD_TIME){for(o=0,j=p.length;o<j;o++){if(p[o]==q){p.splice(o,1);break}}delete n[q];return""}return n.datas[q].cacheData}else{return""}},WEIBO_SUGGEST_TEMPLETE:('<a data-mt="suggest-item" href="{url}" title="{kw_title}">{kw}</a>'),USER_SUGGEST_TEMPLETE:('<a href="{furl}" data-mt="suggest-item"><span class="usr3"><i class="avt avt32"><i class="img" style="background-image:url({img})"></i></i><b class="nm" title="{name_title}">{name}<i class="p {vicon}" title="" style="display:{vicon_display}"><i class="png"></i></i></b><q>粉丝：<i>{followcount}</i></q></span></a>')});f.init()};return a});kola("sohu.view.Page",["kola.html.Element","kola.net.Ajax","kola.lang.Function","kola.bom.Event","sohu.tool.History","sohu.data.Model","sohu.view.TBrowser","kola.bom.Dispatcher","sohu.loader.CssLoader","sohu.view.Local","jquery.Core","newt.Config"],function(m,b,c,p,f,d,a,q,k,h){if(typeof o==="undefined"){var o={}}o.log=function(r){if(window.console){console.log(r)}};o.error=function(r){if(window.console){console.error(r)}};Object.extend=function(s,t){for(var r in t){s[r]=t[r]}return s};Object.each=function(u,t){var r=0;for(var s in u){t(u[s],s,r++)}};Object.clone=function(t,r){var u={};if(r&&r.items){r.items.each(function(w,v){u[w]=t[w]})}else{for(var s in t){u[s]=t[s]}}return u};var l=function(t){var u=document.createElement("div");u.innerHTML=t;if(u.childNodes.length>0){var t=[],s,r;for(s=0,r=u.childNodes.length,r;s<r;s++){t.push(u.childNodes[s].nodeValue)}return t.join("")}return""};if(typeof o.view==="undefined"){o.view={}}var j=o.view.Page;j={init:function(){this._initEvents();this._initHistory();this._firstLoad()},switchView:function(s,t){var r=this._validLocation(s);if(r){this._switchView(r,t)}else{window.location.href=s}},_switchView:function(s,t){this._setProperties(s);if(!t){t={}}var u=t.method;t.method=null;var r=t.noTimestamp;t.noTimestamp=null;this._setOptions(t);if(this._switchBefore(s,t)){this._requestView(s,{method:u,noTimestamp:r,data:t.data})}},setHistory:function(r){this._setReferrer();if(this._firstLoad){this._firstLoad=false}else{f.add(r,"")}},_setReferrer:function(){if(this._firstLoad){j.referrer=document.referrer}else{var r=location.hash;if(r==""){j.referrer=location.href}else{j.referrer="http://"+j.domain+location.hash.split("#")[1]}}},pause:function(s,r){this._isPause=true;this._autoSetHistory=typeof(s)=="boolean"?s:true;this._autoProceed=typeof(r)=="boolean"?r:true},stop:function(r){this._isStop=true;this._autoStart=typeof(r)=="boolean"?r:true;f.stopListen()},start:function(){this._isStop=false;f.startListen();return true},proceed:function(){this._isPause=false},switchBefore:function(r){this._beforeCb=r},switchAfter:function(r){this._afterCb=r},_setProperties:function(r){r=this._getAbsoluteUrl(r);this.location=r;this._intUrl=r;this._viewMode=_view_context;this._sourceUrl=r;this._isPause=false;this._autoSetHistory=true;this._autoProceed=true;this._isStop=false;this._autoStart=true;this._vState=0},_setOptions:function(r){this._options=Object.extend({bfCallback:typeof(this._beforeCb)=="function"?this._beforeCb:function(){return true},afCallback:typeof(this._afterCb)=="function"?this._afterCb:function(){return true},erCallback:function(){return true}},r||{});this._beforeCb=null;this._afterCb=null},_switchBefore:function(r,s){return this._options.bfCallback(r,s)},_switchTab:function(u){var t=u.element,s,v,w,r,z;if(!t){return}s=t.up("[data-component=tab]");v="";w=m("[data-tab-context="+this.orgTab+"]");r=m("[data-tab-context="+this.curTab+"]");if(s&&s._elements.length>0){z=m(s._elements[0]);v=z.attr("data-component-tag")||"a";if(v=="a"){if(w&&r){w.removeClass("on");r.addClass("on")}else{z.down(v).removeClass("on");t.addClass("on")}}else{z.down(v).removeClass("on");m(t.upWithMe(v)._elements[0]).addClass("on")}}else{w&&w.removeClass("on");r&&r.addClass("on");var A=t.attr("data-menu-title")&&m(t.attr("data-menu-title"));if(A){A.addClass("on");m(A.first()._elements[0]).html(t.html());m(A._elements[0]).attr("href",t.attr("href"));window.groupID=t.attr("href").split("=")[1]}}},_switchAfter:function(){if(this._options){this._switchTab(this._options);if(this._options.afCallback()){this.setHistory(this._sourceUrl);this.scroll2Top()}}this._vState=this._vState+1;this._fireLoad()},scroll2Top:function(){CRTWCONFIG.SCROLL_DOM.scrollTop(0)},_switchError:function(r){if(this._options.erCallback(r)){this.setHistory(this._sourceUrl);this._showError(r)}this._endLoading()},_initEvents:function(){var r=this;m(document.body).on("click",function(s){r._onBodyClick(s||window.event)});this._dispatcher=new q();this._dataLoad=false},_fireLoad:function(r){this._dispatcher.fire("dataload",{data:{url:this.location}},r)},on:function(r,s){this._dispatcher.on.call(this._dispatcher,r,s);if(r=="dataload"&&this._dataLoad){this._fireDataLoad(arguments[1])}},un:function(){this._dispatcher.un.apply(this._dispatcher,arguments)},_initHistory:function(){f.init(c.bind(this._historyChange,this))},_firstLoad:function(){var r=window.location.href,s=this._getAbsoluteUrl(r);this._firstLoad=false;if(r&&r.indexOf("#")!=-1&&r.split("#")[1]){this._switchView(s)}},_onBodyClick:function(w){var z=document.all?w.button==0:w.which==1,t,u,s,v,r;if(z&&!w.ctrlKey){t=m(p.element(w));u=t&&t.upWithMe("a")||null;if(t&&(t.upWithMe("input")||t.upWithMe("label"))){return}if(u&&!u.attr("target")){s=u.attr("href");s=this._validLocation(s);if(typeof(s)=="string"&&s.length>0&&s.indexOf("javascript")!=0){p.stop(w);r=typeof(v=u.attr("view-timestamp"))=="string"&&v=="false";if(u.upWithMe("div.twi")){if(!t.upWithMe("div.cmt")){this._requestInTBrowser(s,u);return true}else{if(u._elements[0].tagName=="A"){this._requestInTBrowser(s,u);return true}else{return true}}}this._switchView(s,{method:u.attr("view-method")||"get",noTimestamp:r,afCallback:c.bind(this.start,this),element:u})}else{if(this._doAsLocalView(u)){p.stop(w)}else{return true}}}else{return true}}},_requestInTBrowser:function(r,s){if(j.browserType.indexOf(s.attr("data-browser-type"))!=-1||/^\/n\//.test(r)||/#$/.test(r)){if(g&&/^\/n\//.test(r)){r=escape(r)}window.location.href=r;return}else{window.location.href=r}},_doAsLocalView:function(s){if(s.attr("data-view-disabled")=="true"){return false}var r=h;if(r.canDoAsView(s)){r.asView(s);return true}else{return false}},_validLocation:function(s){var r=this._getAbsoluteUrl(s),v,u,t;if(/^http/.test(r)){v=r.indexOf("/u/");if(v!=-1){r=j.domain+"/people?uid="+r.substring(v+3)}else{u=r.indexOf("//")+2;t=r.indexOf(".");r=j.domain+"/people?dm="+r.substring(u,t)}}return r},_getAbsoluteUrl:function(r){if(j.domain!=r){r=r.replace(j.domain,"")}return r},_getViewMode:function(A){var z=typeof(this._sourceUrl)=="undefined"?"":this._sourceUrl,t=z.split("/"),w=A.split("/"),s=[];for(var v=0,r=w.length;v<r;v++){if(w[v]!=t[v]){for(var u=v;u<r;u++){if(u==(r-1)){s.push(w[u].split(".")[0])}else{s.push(w[u])}}break}}return s.join("_")},_requestView:function(s,r){var t=this._createModel(this._intUrl,r);this._startLoading();t.show(Object.extend({_context:this._viewMode},r.data||{}),{succ:c.bind(this._manageView,this),fail:c.bind(this._switchError,this)})},_manageView:function(z){if(z.location){this.switchView(z.location)}var w,r=[],B,v;if((w=z.beforeload)&&w.length>0){for(B=0,v=w.length;B<v;B++){var A=w[B];if(A.type=="javascript"){if(typeof(A.src)=="string"&&A.src!=""){if(!this.Cache.get(A.src)){this.loadJs(A.src);this.Cache.set(A.src,true)}}if(typeof(A.text)=="string"&&A.text!=""){this.evalJs(A.text)}}else{if(A.type=="csss"){var C=A.src;if(typeof(C)=="string"&&C!=""){var E=typeof(A.scope)=="string"&&A.scope=="view";if(E){r.push(C)}else{if(!this.Cache.get(C)){this.Cache.set(C,true);this.loadCss(C)}}}if(typeof(A.text)=="string"&&A.text!=""){this.evalCss(A.text)}}}}}var u=this._viewCssUrls,t=r.length>0;if(u&&u.length){needDel=true;if(r&&u.length==r.length){var D=false;for(B=0,v=u.length;B<v;B++){if(u[B]!=r[B]){D=true;break}}if(!D){needDel=false;t=false}}if(needDel){k.delHrefs(u);this._viewCssUrls=null}}if(t){this._viewCssUrls=r;var s=this._afterBootload.bind(this,z);k.load(r.concat(),{timeout:1500,success:s,failure:s})}else{this._afterBootload(z)}},_afterBootload:function(r){var t=r.context;var s=r.previousContext;this._canvas=this._getCanvas(s,t);this._showView(r.body);this._showPageTitle(r.title);this._onload(r.onload);this._endLoading();this._switchAfter();this._destroy();kola("newt.composer.emote.Emote",function(){tw.emote.clearEm()})},_delLastLoad:function(){try{var r=m("head [name=loadByJs]");if(r){r.remove()}}catch(s){}},_destroy:function(){this.orgTab=null;this.curTab=null;this._options=null;this.location=null;this._intUrl=null;this._viewMode=null;this._sourceUrl=null},_getCanvas:function(z,A){var r=_view_context.split("\n\n"),t=A.split("\n\n"),u="t-",v=-1,B="";if(_view_context==A){if(z!=A){return this._canvas}else{B=t[t.length-2].split("\n");B=B&&B[0]||t[t.length-2];this._setTabFocus(t[t.length-1],t[t.length-1])}}else{for(var s=0,w=Math.min(t.length,r.length);s<w;s++){if(r[s]!=t[s]){v=s-1;this._setTabFocus(r[s],t[s]);break}else{continue}}B=t[v].split("\n");B=B&&B[0]||t[v];if(v<0){return}}_view_context=A;return u+B},_setTabFocus:function(s,r){this.orgTab=s.split("\n")[0];this.curTab=r.split("\n")[0]},_showPageTitle:function(r){if(r){document.title=(typeof(r)!="string"?"":(l(r).split("-")[0]))}},_showView:function(r){$("#"+this._canvas).find("*").unbind();if(g&&typeof CollectGarbage=="function"){CollectGarbage()}r='<div style="display:none">&nbsp;</div>'+r;m("#"+this._canvas).html(r)},_onload:function(r){setTimeout(c.bind(this._load,this,r),0)},_load:function(t){if(typeof(t)=="object"){for(var r=0;r<t.length;r++){var s=t[r];if(s.type=="javascript"){if(typeof(s.src)=="string"&&s.src!=""){if(!this.Cache.get(s.src)){this.loadJs(s.src);this.Cache.set(s.src,true)}}if(typeof(s.text)=="string"&&s.text!=""){this.evalJs(s.text)}}else{if(s.type=="css"){if(typeof(s.src)=="string"&&s.src!=""){if(!this.Cache.get(s.src)){this.loadCss(s.src);this.Cache.set(s.src,true)}}if(typeof(s.text)=="string"&&s.text!=""){this.evalCss(s.text)}}}}}},loadJs:function(s){var r=document.createElement("script");m(r).attr("name","loadByJs").attr("type","text/javascript").attr("src",s);m("head").append(r);return r},evalJs:function(s){var r=document.createElement("script");r.type="text/javascript";r.text=s;document.getElementsByTagName("head")[0].appendChild(r)},loadCss:function(r){var s=document.createElement("link");m(s).attr("name","loadByJs").attr("rel","stylesheet").attr("type","text/css").attr("href",r);m("head").append(s);return s},evalCss:function(s){var r=kola.Element.create("style");r.attr("name","loadByJs").attr("type","text/css");if(r.prop("styleSheet")){r.prop("styleSheet").cssText=s}else{r.append(document.createTextNode(s))}m("head").append(r);return r},_showError:function(s){var r=s.status;if(r==404){window.location.href="/404.html"}else{if(r==500){window.location.href="/500.html"}else{if(r=="401"){var t=s.data;if(t.toView){location.href=t.toView}}}}},_createModel:function(s,r){return new d({actions:{show:{url:s,method:(!!r&&r.method)?r.method:"get",cache:false,format:"json",encode:"uri"}},url:""})},_historyChange:function(r){if(this._isPause){if(kola.Browser.ie){if(this._isFirstCall){this._isFirstCall=false}else{this._isFirstCall=true;return}}else{if(this._autoSetHistory){this.setHistory(r)}}if(this._autoProceed){this.proceed()}}else{if(r==""){r=window.location.href.replace(/#/igm,"");this._firstLoad=true}this._switchView(r)}},_startLoading:function(){m(document.body).addClass("cursor-wait");m("#t-g-loading").removeClass("noVis")},_endLoading:function(){m(document.body).removeClass("cursor-wait");m("#t-g-loading").addClass("noVis")}};j.scrollTop=true;j.toView=j.switchView;j.domain="http://"+location.host;j.browserType="user,twi";j.referrer=document.referrer;j.Cache={data:{},set:function(r,s){this.data[r]=s},get:function(r){return this.data[r]}};j.ERROR={get:function(r){if(r!=404){r=500}if(typeof(viewLyoutType)=="string"&&viewLyoutType=="blank"){return this.blank[r]}else{return this.systemApp[r]}},systemApp:{404:'<div class="msg msg-404-full" style="margin-top: 100px;"><h4>找不到你请求的页面</h4><p>你可能点击了过期的链接或者输入错误的链接，一些链接区分大小写。</p><p class="msgActs"><a href="javascript:history.go(-1)">返回上一页</a><span class="pipe">|</span><a title="去首页" href="/home.do">去首页</a></p></div>',500:'<div class="msg msg-404-full" style="margin-top: 100px;"><h4>此服务暂时不可用</h4><p>可能运转出现了点小问题，请稍等片刻再尝试一下~如果一直无法解决，请联系客服热线</p><p class="msgActs"><a href="javascript:history.go(-1)">返回上一页</a><span class="pipe">|</span><a title="去首页" href="/home.do">去首页</a></p></div>'},blank:{404:'<div class="msg msg-404-full" style="margin-top: 100px;"><h4>找不到你请求的页面</h4><p>你可能点击了过期的链接或者输入错误的链接，一些链接区分大小写。</p><p class="msgActs"><a href="javascript:location.reload()">尝试刷新</a><span class="pipe">|</span><a href="javascript:window.close()">关闭页面</a></p></div>',500:'<div class="msg msg-404-full" style="margin-top: 100px;"><h4>此应用暂时不可用</h4><p>可能运转出现了点小问题，请稍等片刻再尝试一下~如果一直无法解决，请联系客服热线</p><p class="msgActs"><a href="javascript:location.reload()">尝试刷新</a><span class="pipe">|</span><a href="javascript:window.close()">关闭页面</a></p></div>'}};j.EVENTS={load:"load"};var n=navigator.userAgent.toLowerCase(),g=(n.indexOf("msie 6.0")!=-1&&n.indexOf("msie 7.0")==-1&&n.indexOf("msie 8.0")==-1);return j});kola("newt.usercard.UserCard",["newt.cr.crEvent","newt.service.UserService","newt.group.action.GrpAct","newt.group.action.TwGrpActionMenu","sohu.ctrl.Tips","newt.Config","newt.service.StatisticService","newt.black.blacklist"],function(CrEvent,UserSrv,GrpAct,GrpActMenu,Tips,Cfg,Statistic,Blacklist){var UserCard=function(){var self=this;self.box=null;self.st=0;self.t=0;self.t2=0;self.cache={};self.id_name_map={};self.fire_el_st=null;self._hasRegEvt=false;$.extend(self,{init:function(){var bigBox=$("#t-sys");if(!bigBox.data("tw_usercard_init")){$("#t-sys").mouseover(self.evtCache).mousedown(self.hideMe).data("tw_usercard_init",true)}self.regEvent()},regEvent:function(){if(self._hasRegEvt){return}else{self._hasRegEvt=true}var userCard=$("#t-user-card");$("[st-data]",userCard).live("mousedown",function(e){self.onMouseDown($(this));e.stopPropagation()});$('[meta="add-follow-to"]',userCard).live("click",function(e){var srcEl=$(this);var data=$.parseJSON(srcEl.attr("event-data"));data.fireEventElement=srcEl;self.doFollowUser(data);e.stopPropagation()});$('[meta="add-follow-quietly"]',userCard).live("click",function(e){var srcEl=$(this);var data=$.parseJSON(srcEl.attr("event-data"));data.fireEventElement=srcEl;self.doFollowQuietly(data);e.stopPropagation()});$('[meta="cancel-follow-to"]',userCard).live("click",function(e){var srcEl=$(this);var data=$.parseJSON(srcEl.attr("event-data"));data.fireEventElement=srcEl;self.doCancelFollow(data);e.stopPropagation()});$('[meta="cancel-block"]',userCard).live("click",function(e){var srcEl=$(this);var data=$.parseJSON(srcEl.attr("event-data"));try{data.fireEventElement=srcEl;self.doCancelBlock(data)}catch(e){}e.stopPropagation()});CrEvent.bind("tw_follow_user",function(){var args=[].slice.call(arguments);self.onFollowUser.apply(self,args)});CrEvent.bind("tw_follow_quietly",function(){var args=[].slice.call(arguments);self.onFollowQuietly.apply(self,args)});CrEvent.bind("tw_update_follow_del",self.onCancelFollow);CrEvent.bind("tw_user_group_change",self.onUserGroupChange)},doCancelBlock:function(data){if(!data||!data.uid||!data.fireEventElement){return}Blacklist.del_fresh({uid:data.uid})},doFollowUser:function(data){if(!data||!data.uid||!data.fireEventElement){return}var fireEvtEl=$(data.fireEventElement);if(fireEvtEl.hasClass("btn_dis")){return}fireEvtEl.css("cursor","wait").addClass("btn_dis btn_loading");data.error=function(){fireEvtEl.css("cursor","").removeClass("btn_dis btn_loading")};data.success=function(data){fireEvtEl.css("cursor","").removeClass("btn_dis btn_loading");var card=$("#t-user-card");if(card.length>0){var scrollTop=$(document).scrollTop(),cardRect=card[0].getBoundingClientRect(),btnRect=fireEvtEl[0].getBoundingClientRect(),btnLeft=parseInt(btnRect.left),btnTop=parseInt(btnRect.top)+scrollTop,tipsMove=Math.floor(Math.abs(cardRect.top-btnRect.top))+50;Tips.showFucusAddTips(btnLeft,btnTop,-tipsMove);var hasFollowMe=!!data.followed;var followUid=data.uid;self.switchPanel(followUid,hasFollowMe,"add");self.showGroupList()}};UserSrv.followUser(data)},doCancelFollow:function(data){if(!data||!data.uid||!data.fireEventElement){return}UserSrv.cancelFollow(data)},onFollowUser:function(event,data){var userCardDom=$("#t-user-card");var followUid=data.uid;if(userCardDom.length==0){return}try{self._showRecommandUsers(userCardDom,data)}catch(e){if(console&&console.log){console.log("UserCard.onFollowUser: execute _showRecommandUsers error:"+e)}}var showUser=self.getUserData();if(showUser.uid==followUid){userCardDom.find(".memo .fuc").html("（<b>设置备注</b>）")}self.clearCachedUserData(data.uid)},doFollowQuietly:function(data){if(!data||!data.uid||!data.fireEventElement){return}var fireEvtEl=$(data.fireEventElement);if(fireEvtEl.hasClass("btn_dis")){return}kola("newt.service.Follows",function(Follows){Follows.followQuietly({params:{friendId:data.uid},success:function(data){if(data.status==0){kola("newt.dialog.Notice",function(){tw.notice.showTip("悄悄关注成功")})}else{kola("newt.dialog.Notice",function(){tw.notice.alert(data.statusText)})}},fail:function(){kola("newt.dialog.Notice",function(){tw.notice.alert("服务器爆炸！请稍后再试！")})}})})},onFollowQuietly:function(event,data){var followUid=data.name;var lookUsrId=LOOKEDUSER.name;if(followUid!=lookUsrId){return}this.switchPanel(data.followRelation,"addQuietly");$(".usrStat .memo").removeClass("nodis")},_showRecommandUsers:function(userCardDom,data){if(eval("("+userCardDom.find("div.ncardBd:first").attr("data-udata")+")").uid==data.uid){kola("newt.service.Recommends",function(Recommends){if(window.LOOKEDUSER&&window.LOOKEDUSER.id){var userId=data.uid;Recommends.getOtherRecommends({params:{uid:userId,page:1,pageSize:6},success:function(data){if(data.data&&data.data.length>0){kola("mvc.view.TemplateEngine",function(TemplateEngine){TemplateEngine.getTemplate({name:"template.card.following.face",complete:function(template){$("#t-user-card div.relat:first").html(template.render({data:{list:data.data,userId:userId}}))}})})}}})}})}},onCancelFollow:function(event,data){if(!data||!data.uid||$("#t-user-card").length==0){return}var cancelUid=data.uid,hasFollowMe=!!data.followed;self.clearCachedUserData(cancelUid);if(cancelUid==self.getUserData().uid){self.switchPanel(cancelUid,hasFollowMe,"cancel");$('#t-user-card [meta="menu-text"]').html("未分组")}},onUserGroupChange:function(event,data){var editUserId=data.editUserId;if(editUserId){self.clearCachedUserData(editUserId)}},onMouseDown:function(srcEl){var data=srcEl.attr("st-data");var json=null;try{json=$.parseJSON(data)}catch(e){return}if(!json){return}var fireElSt=self.fire_el_st;var firePosi=fireElSt?fireElSt.posi+"_":"";var posi=firePosi+json.posi;var uid=self.getUserData().uid;Statistic.log(posi,"click",{uid:uid})},switchPanel:function(uid,hasFollowMe,showPanelCode){var followBtn=$("#t-user, #t-user-card").find("#"+uid+"_rel");if(followBtn.length==0){return}var addFlwPanel='[meta="panel-not-followed"]',blockPanel='[meta="panel-has-blocked"]',quietlyPanel='[meta="panel-followed-quietly"]',followPanel=(hasFollowMe?"[meta='panel-followed-together']":"[meta='panel-has-followed']"),showPanelMap={add:followPanel,addQuietly:quietlyPanel,cancel:addFlwPanel,addBlock:blockPanel,delBlock:addFlwPanel},showPanel=showPanelMap[showPanelCode];if(showPanel){followBtn.find('[meta^="panel"]').addClass("noDis");followBtn.find(showPanel).removeClass("noDis")}},evtCache:function(event){var doFun=function(){self.t=0;var target=$(event.target);var needHandle=(function(){var tagName=event.target.tagName;if(!/^(a|b|i)$/i.test(tagName)){return false}if(target.closest("#t-user-card").length>0){return false}return true})();if(!needHandle){return}var fireElSt,name=null;var targetDom=target.hasClass("at")?target.closest("a"):target;try{name=$.parseJSON(targetDom.attr("data-content"))}catch(e){}if(name&&name.type&&"nick"==name.type){fireElSt=targetDom.attr("st-data")||targetDom.parents("[st-data]").attr("st-data");if(fireElSt){try{self.fire_el_st=$.parseJSON(fireElSt)}catch(e){console.log("UserCard.evtCache: "+e)}}self.showCard({name:name.nick,dom:targetDom})}};if(self.t>0){clearTimeout(self.t);self.t=setTimeout(doFun,500)}else{self.t=setTimeout(doFun,500)}},dirty:function(name){self.cache[name]=null},getData:function(name,handle){if(self.cache[name]){handle(self.cache[name])}else{tw.build({type:"getNameCard",name:name,success:function(data){if(!data.status){var html=data.data.body;if(data.addAttr){var userInfo=$.parseJSON(data.addAttr);self.id_name_map[userInfo.id]=userInfo.name}self.cache[name]=html;handle(html)}}})}},getUserData:function(){var meta=$("#t-user-card .ncardBd").attr("data-udata");var data=null;try{data=eval("("+meta+")")}catch(e){}return data},clearCachedUserData:function(uid){var userName=self.id_name_map[uid];if(userName&&self.cache[userName]){delete self.cache[userName]}},buildCard:function(name,handle){if(!self.box){var html=['<div id="t-user-card" class="ncard ncard_bottom" style="left:-500px">','<div class="ncardC">','<a class="close" title="关闭" href="javascript:void(1)" >','<i class="sign signX">',"<q>&#215;</q>",'<q class="k2">&#215;</q>',"</i>","</a>",'<i class="sign signArr">',"<q>&#9670;</q>",'<q class="k2">&#9671;</q>','<q class="k3">&#9670;</q>',"</i>",'<div class="ncardloading crJs_by">',"<em>正在加载…</em>","</div>","</div>","</div>"];var land=$("div.LAND");if(land.length==0){land=$("body")}self.land=land;self.box=$(html.join("")).appendTo(land);self.box.bind({mouseenter:function(){self.stopHide()},mouseleave:function(){self.delayHide()},mousedown:function(){var name=self.box.data("card");if(name){self.dirty(name)}}});self.boxBy=self.box.find("div.crJs_by")}self.getData(name,function(data){var groupMenuDom=$("#t-user-card #tw_flgrp_action_menu");if(groupMenuDom.length>0){$(document.body).append(groupMenuDom)}self.boxBy.html(data).removeClass("ncardloading");self.initApp();self.box.data("card",name);handle()})},showCard:function(options){self.stopHide();self.buildCard(options.name,function(){self.show(options.dom)});var hide=function(){self.delayHide();options.dom.unbind("mouseout",hide)};options.dom.bind("mouseout",hide)},show:function(targetDom){self.box.css(self.getPos(targetDom));self.st=1;var udata=self.getUserData();var posi=this._getSTPosi(targetDom);var lookUsrId=udata.uid;var isFollowed=udata.isFollowed;var reasonNode=$("#t-user-card [data-rsn]");var recmdReason=reasonNode.length>0?reasonNode.attr("data-rsn"):"";Statistic.log(posi,"view-ucard",{uid:lookUsrId,isFollowed:isFollowed,isRecmdUsr:!!recmdReason,recmdReason:recmdReason||""});kola("newt.data.Synchronizer",function(Synchronizer){Synchronizer.save("usercard_status","show")})},_getSTPosi:function(targetDom){var posiNodes=$(targetDom).closest("[data-st], [st-data]");var dftPosi="page["+location.href.substring(7)+"]";var posiObj=null;var stData;if(posiNodes.length==0){return dftPosi}try{stData=posiNodes.attr("data-st")||posiNodes.attr("st-data");posiObj=$.parseJSON(stData);return posiObj.posi||dftPosi}catch(e){return dftPosi}},showGroupList:function(){var userData=self.getUserData();if(!userData||!userData.uid){return}var fireMenuEl=self.box.find('[meta="group-list-menu"]:visible');GrpActMenu.showUserGroupMenu(userData.uid,fireMenuEl)},hideGroupList:function(){GrpActMenu.hideUserGroupMenu()},hideMe:function(event){if(!$(event.target).closest("#t-user-card").length){if(self.t){clearTimeout(self.t);self.t=0}self.hide()}},hide:function(){if(self.st!=0&&self.box){self.box.css("left",-500);self.st=0;self.hideGroupList()}kola("newt.data.Synchronizer",function(Synchronizer){Synchronizer.save("usercard_status","hide")})},delayHide:function(){if(self.t2>0){self.stopHide()}self.t2=setTimeout(self.hide,500)},stopHide:function(){clearTimeout(self.t2);self.t2=0},getPos:function(targetDom){var offset=targetDom.offset();if(!offset.top){return{top:0,left:-500}}var cardWidth=self.boxBy.width(),cardHeight=self.boxBy.height(),bodyWidth=$("body").width(),scrollLeft=self.land.scrollLeft(),scrollTop=self.land.scrollTop(),domTop=offset.top-(CRTWCONFIG.SCROLL_DOM.get(0)==window?CRTWCONFIG.SCROLL_DOM.scrollTop():0),fixed=40;self.box.removeClass("ncard_tl ncard_tr ncard_bl ncard_br");if(domTop>cardHeight+70){if(bodyWidth-offset.left>cardWidth){self.box.addClass("ncard_bl")}else{self.box.addClass("ncard_br");fixed=295}return{top:offset.top+scrollTop-cardHeight-10,left:offset.left+scrollLeft+targetDom.width()/2-fixed}}else{if(bodyWidth-offset.left>cardWidth){self.box.addClass("ncard_tl")}else{self.box.addClass("ncard_tr");fixed=295}return{top:offset.top+scrollTop+targetDom.height()+10,left:offset.left+scrollLeft+targetDom.width()/2-fixed}}},initApp:function(){kola("newt.left.Init",function(Init){Init.initUserOperBar();kola("newt.group.Flgrp",function(){tw.grpAct.init()})})}})};var card=new UserCard();tw.usercard=card;return card});kola("sohu.ctrl.ImagePlayer",["jquery.Core"],function(){var a=function(d,b){var c=this;c.ele=d;c.opt=$.extend({auto:0,size:1,width:0,disClass:"dis",onClass:"on",hideClass:"",effect:"",eType:"click",onChange:$.noop},b||{});c.list=c.ele.find("[data-pager = list]");c.title=c.ele.find("[data-pager = title]");c.next=c.ele.find("[data-pager = next]");c.prev=c.ele.find("[data-pager = prev]");c.numList=c.ele.find("[data-pager = numList]");c.curNum=c.ele.find("[data-pager = curNum]");c.totalNum=c.ele.find("[data-pager = totalNum]");c.curpager=1;c.isplaying=0;c.isStop=0;c.totalsize=Math.ceil(c.list.children().size()/c.opt.size);c._init();c._bindEvent()};a.prototype={_init:function(){var g=this;if(g.opt.effect!="scroll"){if(g.opt.hideClass){g.list.children().addClass(g.opt.hideClass).slice(0,g.opt.size).removeClass(g.opt.hideClass)}else{g.list.children().hide().slice(0,g.opt.size).show()}}g.title.children().hide().slice(0,g.opt.size).show();g.curNum.html(g.curpager);g.totalNum.html(g.totalsize);if(g.curpager==1){g.prev.addClass(g.opt.disClass)}if(g.curpager==g.totalsize){g.next.addClass(g.opt.disClass)}if(g.numList.length>0){var f=0,b=g.totalsize,d,c;d=g.numList.children(":eq(0)");for(f=1;f<b;f++){c=d.clone().removeClass(g.opt.onClass);if(c.html()){c.html(f+1)}g.numList.append(c)}g.numList.children().each(function(h){var j=$(this);j.bind(g.opt.eType,function(){clearTimeout(g.timeEId);var k=h+1;(g.curpager!=k)&&g.opt.onChange(h+1);g.timeEId=setTimeout(function(){g.go(h+1)},500)})})}if(g.opt.auto){g.ele.mouseenter(function(){g.isStop=1}).mouseleave(function(){g.isStop=0});g._auto(g.opt.auto)}},_bindEvent:function(){var b=this;b.next.click(function(){b._next();return false});b.prev.click(function(){b._prev();return false})},_next:function(){var b=this;if(!b.next.hasClass(b.opt.disClass)){var c=parseInt(b.curpager)+1;b.go(c)}},_prev:function(){var b=this;if(!b.prev.hasClass(b.opt.disClass)){var c=parseInt(b.curpager)-1;b.go(c)}},_auto:function(c){var b=this;clearTimeout(b.timeId);b.timeId=setTimeout(function(){if(b.isStop){b._auto(c);return}var d=b.curpager+1;d=d>b.totalsize?1:d;b.go(d,function(){b._auto(c)})},c)},play:function(){var b=this;b.isStop=0;if(!b.opt.auto){b._auto(1000)}},stop:function(){var b=this;b.isStop=1},go:function(f,l){var k=this;if(f==k.curpager||k.isplaying==1){return}k.isplaying=1;var b,c=parseInt(k.list.css("text-indent"));b=c+(k.curpager-f)*(k.opt.width?k.opt.width:k.ele.width());var j,g,h,d;j=k.list.children();g=j.size();h=(f-1)*k.opt.size;d=h+k.opt.size;d=d>g?g:d;k.title.children().hide().slice(h,d).show();switch(k.opt.effect){case"opacity":j.animate({opacity:0.5},function(){j.hide();if(--g==0){g=d-h;j.slice(h,d).show().animate({opacity:1},function(){if(--g==0){k._update(f,l)}})}});break;case"scroll":k.list.animate({textIndent:b+"px"},"normal",null,function(){k._update(f,l)});break;default:if(k.opt.hideClass){j.addClass(k.opt.hideClass).slice(h,d).removeClass(k.opt.hideClass)}else{j.hide().slice(h,d).show()}k._update(f,l)}},_update:function(b,c){var d=this;d.curpager=b;d.curNum.html(b);d.numList.children().removeClass(d.opt.onClass);d.numList.children(":eq("+(b-1)+")").addClass(d.opt.onClass);if(b==1){d.prev.addClass(d.opt.disClass)}if(b>1){d.prev.removeClass(d.opt.disClass)}if(b<d.totalsize){d.next.removeClass(d.opt.disClass)}if(b==d.totalsize){d.next.addClass(d.opt.disClass)}if(typeof(c)=="function"){c(b)}d.isplaying=0}};return a});kola("newt.timeline.zoom.JQueryZoom",[],function(){(function(c){c.fn.imageLens=function(g){var h={offset:15};var g=c.extend(h,g);return this.each(function(){var n,m,j,k,l=c(this);j=function(o){a(l,g.offset,o)};hideMagn=function(){l.unbind("mousemove mouseout mouseover click");d()};m=g.imageSrc?g.imageSrc:c(this).attr("src");n=b(g);n.find(".picFc").first().css({backgroundImage:"url('"+m+"')"});n.unbind("mousemove").bind("mousemove",function(o){j(o)});if(g.currEvent){j(g.currEvent)}c(this).bind({mousemove:j,mouseout:function(){hideMagn()},click:hideMagn})})};function b(g){if(c("#magnifier").length!=0){return c("#magnifier")}else{var h=c("<div id='magnifier' class='picF picFLT' ></div>");h.append("<div class='picFc'></div><p>再按“F”键取消放大</p>").appendTo("body");h.data("rect",{height:h.height(),width:h.width()});h.css("display","none");return h}}function a(m,k,p){var o=b();var q=o.find(".picFc").first();var g={height:q.height(),width:q.width()};var h=m[0].getBoundingClientRect();var j=parseInt(p.clientX-h.left);var n=parseInt(p.clientY-h.top);var v,t,s=m.attr("data-rt");var l=h.width?h.width:(h.right-h.left),r=h.height?h.height:(h.bottom-h.top),u=o.data("direction");if(j<0||n<0||j>l||n>r){m.unbind("mousemove mouseout mouseover click");o.unbind();d()}else{j=String(((p.clientX-h.left)*s-g.width/2)*(-1));n=String(((p.clientY-h.top)*s-g.height/2)*(-1));v=m.width()*s-g.width;t=m.height()*s-g.height;if(j>0){j=0}else{if(j<-v){j=v*(-1)}}if(n>0){n=0}else{if(n<-t){n=t*(-1)}}o.find(".picFc").first().css({backgroundPosition:j+"px "+n+"px"});j=String(p.pageX+k);n=String(p.pageY+k);if((p.clientY+g.height+k)>c(window).height()){n=String(p.pageY-g.height-k)}else{if((p.clientX+g.width+k)>c(window).width()){j=String(p.pageX-g.width-k)}}o.css({left:j+"px",top:n+"px"});if(o.data("isFold")==true||o.css("display")=="none"){f()}}o.data("position",{pageY:p.pageY,pageX:p.pageX,clientX:p.clientX,clientY:p.clientY})}function f(){var h=b();var g=h.data("rect");h.data("isFold",false);h.css({display:"block"});h.stop(true,false).animate({height:g.height+"px",width:g.width+"px"},200)}function d(){var h=b();var g=h.data("rect");h.data("isFold",true);h.stop(true,false).animate({height:"0px",width:"0px"},200,function(){h.css({display:"none"})})}})(jQuery)});kola("newt.timeline.Num","jquery.Core",function(){var a={add:function(c,b){b=b||1;this._add(c,b)},del:function(c,b){b=b||-1;this._add(c,b)},_add:function(c,b){c.each(function(){var f=$(this);var d=f.text().replace("(","").replace(")","");if(d){d=parseInt(d,10);d+=b}else{d=b}if(d<1){f.text("")}else{f.text("("+d+")")}})}};return a});kola("newt.templete.Templete","jquery.Core",function(){var a={Template:function(){var b=this;$.extend(b,{getHtml:function(c){return["",c].join("")}})},TagTemp:function(){var b=this;$.extend(b,{getHtml:function(g){var h=[];if(g.length){for(var f=g.length-1,c=0;f>=0;f--,c++){h.push('<a href="/search/tag.jsp?key='+g[c]+'">'+g[c]+"</a>")}}return['<div class="apt"><h6>个人标签</h6>',"</div>",'<div class="apc" id="apc_tag">'].concat(h,["</div>",'<p class="fucs nodis"><a class="fuc1" href="/app/tag/tag.jsp"><b>设置</b></a></p>']).join("")}})},FollowTemp:function(){var b=this;$.extend(b,{getHtml:function(h){var g=h.follows;if(g.length){var k=[];for(var f=g.length-1,c=0;f>=0;f--,c++){k.push('<p class="avt"><a title="',g[c].name,'" href="',g[c].url,'"><img alt="',g[c].name,'" lazysrc="',g[c].icon,'"></a></p>')}if(h.more){k.push('<p class="fucs"><a href="/follow/following.jsp?uid=',h.uid,'" class="fuc1"><b>全部</b></a></p>')}return['<div class="faces" >'].concat(k,["</div>"]).join("")}else{return""}}})},FollowTemp_PRE:function(){var b=this;$.extend(b,{getHtml:function(h){var g=h.follows;if(g.length){var k=[];for(var f=g.length-1,c=0;f>=0;f--,c++){k.push('<p class="avt"><a title="',g[c].name,'" href="',g[c].url,'"><img alt="',g[c].name,'" lazysrc="',g[c].icon,'"></a></p>')}if(h.more){k.push('<p class="fucs"><a href="javascript:void(0);" onclick="tw.build({type:\'preHomeFollowed\'});" class="fuc1"><b>全部</b></a></p>')}return['<div class="faces" >'].concat(k,["</div>"]).join("")}else{return""}}})},GroupTemp:function(){var b=this;$.extend(b,{getHtml:function(h){var c=h.groups,g=CRTWCONFIG.MG_NUM;if(c.length){var j=[],f;f=function(l,n){var m=['<ul class="lis',(n?" crJs_more nodis":""),'">'];for(var k=l.length-1,d=0;k>=0;k--,d++){m.push('<li><a target="_blank" href="/g/',l[d].domain,'">',l[d].name,"</a><q>(",l[d].count,")</q></li>")}m.push("</ul>");return m};if(c.length>g){return j.concat(f(c.slice(0,g)),f(c.slice(g),true),['<p class="fucs crJs_triger"><a class="fuc0" href="javascript:void(1);"><b>更多微群</b><i class="i itrig"></i></a></p>']).join("")}else{return f(c).join("")}return['<div class="faces" >'].concat(j,["</div>"]).join("")}else{return""}}})},HotTopicTemp:function(){var b=this;$.extend(b,{getHtml:function(c){return["",c].join("")}})},ReplyPosterTemp:function(c){c=c||{};var d=c.lite==true;var h=c.canUploadPic==true;var b=(!h?"":('<li class="crJs_ig" ><a data-ca="tw_composer_img" class="fuc" href="javascript:void(0)"><span class="swfuploadbutton"></span><i class="i iS iAtt i36"></i><b>图片</b></a></li>'));var g=['<span class="postMb nodis js-phonevalid-area">','<span class="txt">','<span class="bubble bub2 bubR js-bubble-wrapper">','<span class="bubC">','<a href="javascript: void(0);" onclick="$(this).parents(\'span.js-bubble-wrapper:first\').remove();" title="关闭" class="close"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a>	<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<span class="bubBd">','<i class="i i134"></i>','<span class="checkMbTip">',"<em>验证手机号，提高安全性</em>",'<b><i class="dot" title="dot"></i>账号数据有备份，可以找回</b>','<b><i class="dot" title="dot"></i>身份有保障，不被盗用</b>','<b><i class="dot" title="dot"></i>只需验证一次，永久有效</b>',"</span>",'<span class="fucs2"><a class="fuc" href="#"><b>了解更多</b>&gt;&gt;</a></span>',"</span>","</span>","</span>",'<i class="i i135"></i><input type="text" name="phoneNumber" placeholder="输入手机号">',"</span>",'<em class="tip">请填写手机号</em>',"</span>"].join("");var f=['<div class="post postCmt">',(d)?"":'<h3 class="ttl"><em>评论微博</em><q>(评论内容不通知你的粉丝)</q></h3>',(d)?"":'<p class="avt avt24"><a data-browser-type="user" href="/people?uid='+UID+'"><i style="background-image: url('+(window.UID_S_ICON||"http://s4.cr.itc.cn/img/t/avt_48.jpg")+');" class="img"></i></a></p>','<div class="tarea tarea_min blur"><textarea></textarea></div>','<p class="postSub">',(d)?"":g,'<span class="opt"><b class="postMax">还可输入<i class="editstatus">140</i>字</b></span><a class="btn btnM btn_dis js-btn-submit" href="javascript:void(0);"><b>评 论</b></a></p>','<ul class="postAtt">','<li><a href="javascript:void(0);" class="fuc crJs_emote"><i class="i iS iAtt i37"></i><b>表情</b></a></li>',b,'<li><label class="cbox"><input type="checkbox">同时转发到我的微博</label></li>',"</ul>","</div>"].join("");return f},ReplyTemp:function(f,b){b=b||{};var d=this;var c=['<div id="relist_',f,'" class="cmt crjs_cmt">','<i class="sign signArr8"><q>&#9671;</q><q class="k2">&#9670;</q></i>','<a href="javascript:void(0);" title="关闭" class="close"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a>',d.ReplyPosterTemp(b),'<div id="rebox_',f,'"></div>',"</div>"].join("");return c}};return a});kola("newt.service.Message",["jquery.Core","newt.data.Model","newt.cr.cr","newt.cr.crEvent","newt.data.JData"],function(c,f,b,g,d){var a=f.create({sendSimpleMessage:function(j){var h=this;c.ajax({url:"/twAction/insertTwitter",type:"post",dataType:"json",data:"msg="+c.cr.encodeUTF(j.msg),success:function(k){h.doSuccess(k)},error:function(k){h.doFail("服务器错误")}})},getMessage4Event:function(j){var h=this;c.ajax({url:"/event/minfo",type:"get",dataType:"json",data:"mid="+j.msgId,success:function(k){h.doSuccess(k)},error:function(k){h.doFail("服务器错误")}})},getMessage:function(j){var h=this;if(Object.prototype.toString.apply(j.msgId)==="[object Array]"){j.msgid=j.msgId.join(",");delete j.msgId}c.ajax({url:"/twAction/getNewTwitter2.do",global:false,type:"get",dataType:"json",data:j,success:function(k){h.doSuccess(k)},error:function(){h.doFail("爆炸了，呵呵。。。")}})},updateMessage:function(j){var h=this;c.ajax({url:"/twAction/getNewTwitter.do",type:"post",dataType:"json",data:"msgid="+j.msgId,success:function(k){h.doSuccess(k)},error:function(k){h.doFail("服务器错误")}})},sendMessage:function(j){if(j.url==null||j.url==""||j.url===undefined){j.url=CRTWCONFIG.SAD}var l=c.cr.encodeUTF(j.content);var m="msg="+l;if(typeof TOPICID!="undefined"){m+="&act=insertWeiPing&topicid="+TOPICID;if(typeof j.msgid!="undefined"){m+="&wpat="+j.msgid}}else{}if(j.pics){m+="&pics="+c.cr.encodeUTF(j.pics)}if(j.pic&&j.pic!=""){m+="&pic="+c.cr.encodeUTF(j.pic)}if(j.at&&typeof j.at!="string"){j.at=j.at.toString()}if(j.at&&j.at.indexOf("_")>0){j.at=j.at.split("_")[1]}if(j.at&&j.at!=""){m+="&at="+j.at}if(j.same_to_reply){m+="&same_to_reply="+c.cr.encodeUTF(j.same_to_reply)}if(j.geo){m+="&geo={web_longitude:"+j.geo.longitude+",web_latitude:"+j.geo.latitude+"}"}if(typeof FROM_TYPE!="undefined"){m+="&type="+FROM_TYPE}if(j.voteid){m+="&voteid="+j.voteid}if(typeof TAG!="undefined"){m+="&tag="+c.cr.encodeUTF(TAG)}if(typeof FROMTAG!="undefined"){m+="&fromtag="+FROMTAG}for(var k in CRTWCONFIG.ADP){m+="&"+k+"="+c.cr.encodeUTF(CRTWCONFIG.ADP[k])}var h=this;c.ajax({url:HOST+j.url,global:false,type:"post",dataType:"json",data:m,success:function(n){tw.sysout(n);if(n.status==0){c.cr.event.send("tw_add_twi")}h.doSuccess(n)},error:function(p,o,n){h.doFail({xhr:p,text:o,ex:n})}})},getPageMessage:function(j){var h=this;var k="pagesize="+j.pSize;c.ajax({url:HOST+j.url,global:false,type:"post",dataType:"json",data:k,success:function(l){l=new d(l);h.doSuccess(l)},error:function(n,m,l){h.doFail({xhr:n,text:m,ex:l})}})},getReplys:function(j){var k=this;var h=("msgid="+j.msgId+"&pageNo="+j.pageNo);c.ajax({url:"/reply/replyNew",type:"post",data:h,dataType:"json",success:function(l){if(l.addAttr){try{l.addAttr=c.parseJSON(l.addAttr)}catch(m){}}k.doSuccess(l)},error:function(l){k.doFail("获取回复信息失败!")}})}});f.addProcessors({model:a.sendSimpleMessage,beforeCall:function(h){if(window.isLogin==false||window.isLogin=="false"){kola("newt.util.Tool",function(j){j.iNoLogin()});return false}}});return a});kola("newt.reply.VCode",["jquery.Core","newt.model.Security","newt.widget.VerifyCode"],function(d,c,b){var a=function(f){c.replyVerifyCode({success:function(g){f.success(g)},fail:function(g){f.fail(g)}})};return{init:function(f,g){var h=this;var j;j=f.data("verifyCode");if(!j){j=h.build({placeholder:f,onBlur:function(){if(g&&typeof(g.onBlur)=="function"){g.onBlur(f)}else{h.editChange(f,g)}},onFirstUpdate:function(){h.editChange(f,g)}});f.data("verifyCode",j)}return j},build:function(f){var h=d.extend({imgSrc:"/regist/getCaptchaIMGNumIE6",onFresh:a},f||{});var g=new b(h);return g},getValue:function(f,g){var h,j;j=f.data("verifyCode");if(!g){g={}}if(j){h=j.getValue();if(h.code){g.captchaSeed=h.seed;g.captchaCode=encodeURIComponent(h.code)}}return g},isPass:function(f){var j=f.data("verifyCode"),h=1;if(j){var g=j.getValue();if(g.enable){if(g.isPass){h=1}else{h=0}}}return h},refresh:function(f){var g=this;var h;h=f.data("verifyCode");if(h){h.refresh()}else{g.init(f)}},editChange:function(k,h){var m=this,o=k.data("verifyCode"),f=k.data("crSimpleEdit"),g=k.find(".postSub>a.btn:eq(0)"),n=g.data("crButton"),l,p;if(n){l=function(){setTimeout(function(){n.setEnable()},20)};p=function(){setTimeout(function(){n.setDisable()},20)}}else{l=function(){setTimeout(function(){g.removeClass("btn_dis")},20)};p=function(){setTimeout(function(){g.addClass("btn_dis")},20)}}var j=f.getVal();if(!f.getLimitStatus()&&m.isPass(k)){if(h&&typeof(h.okHandle)=="function"){if(h.okHandle(j)){l()}else{p()}}else{l()}}else{p();if(h&&typeof(h.errHandle)=="function"){h.errHandle()}}}}});kola("newt.timeline.Other","newt.tool.Tool",function(){var a={delTwitter:function(c){var b=$("#POSI_"+c);if(b.length!=1){return}b=$("div.twiFinal");b.fadeOut(500,function(){b.html("此微博已经被作者删除！ ").show()})},insertReply:function(d,b){var c=$("#POSI_"+d);if(c.length!=1){return}c=c.parent("div").find("div.comment div.cmt");if(c.find("div.noCnt").length>0){c.find("div.noCnt").remove()}b.prependTo(c).hide().slideDown("normal",function(){})}};if(!tw.other){tw.other=a}return a});kola("template.main.app.recommends.guess_avatar_content",[],function(){return'<p class="oper"><a style="display: none;" data-ca="newt-guesswidget-remove" class="del js-remove" data-userid="${#id}" href="javascript:void(0);" title="不感兴趣"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a></p><p class="avt avt32"><a data-st=\'{"postion" : "Guess_UserIcon" : "uid" : ${#id}}\' data-ca="newt-guesswidget-viewprofile" href="${#.furl}" target="_self" title="${#name}"><i data-content=\'{"type": "nick", "nick": "${#name}"}\' class="img" style="background-image: url(${#.img});"></i></a></p>\n<b class="nm"><a data-st=\'{"postion" : "UserName" : "uid" : ${#id}}\' href="${#.furl}" target="_self" data-ca="newt-guesswidget-viewprofile" data-content=\'{"type": "nick", "nick": "${#name}"}\' title="${#.name}">${#.name}</a>${if #isVip}<a target="_blank" href="/news/vinfo" title="${(#description || #desc) ? (#description || #desc) : ""}"><i class="p\n${if #isWeiboStar}\npVer3\n${else}\n    ${if #isOrganVip}\n        pOrg\n    ${else}\n        pVer\n    ${/if}\n${/if}\n"><i class="png"></i></i></a>${/if}</b><p class="fucs"><a data-ca="${#recommendationSource}" title="+关注" href="javascript:void(0);" class="fuc fucAdd js-add-follow"><i class="add"><q class="k1"></q><q class="k2"></q></i><b>关注</b></a></p>\n${if ( #relatedFollowing && #relatedFollowing.length > 0 ) || ( #sameFollowing && #sameFollowing.length > 0 ) || ( #strongRelation && #strongRelation.length > 0 ) || ( #otherFollowingReason && #otherFollowingReason.length > 0 )}\n    <q class="relat">${if #strongRelation  && #strongRelation.length > 0}\n            ${#strongRelation[0].reason}\n        ${elseif #relatedFollowing && #relatedFollowing.length > 0}你关注的人中${forarr #relatedFollowing as user}<a data-content=\'{"type": "nick", "nick": "${user.userName}"}\' href="${user.url}" title="${user.userName}" target="_self">${user.userName.length > 5 ? ( user.userName.substr(0, 5) + "..") : user.userName}</a>${( user#index < #relatedFollowing.length - 1 ) ? "、" : ""}${/forarr}\n            ${if #relatedFollowingCount > #relatedFollowing.length}\n                等<a href="/followers?uid=${#id}&type=1" target="_blank"><b>${#relatedFollowingCount}</b></a>人关注了${else} 关注了${/if}${#sex == 0 ? "她" : "他"}\n        ${elseif #sameFollowing && #sameFollowing.length > 0}你们共同关注了\n            ${forarr #sameFollowing as user}<a data-content=\'{"type": "nick", "nick": "${user.userName}"}\' href="${user.url}" title="${user.userName}" target="_self">${user.userName.length > 5 ? ( user.userName.substr(0, 5) + "..") : user.userName}</a>${( user#index < #sameFollowing.length - 1 ) ? "、" : ""}${/forarr}\n            ${if #sameFollowingCount > #sameFollowing.length}\n                等<a href="/following?uid=${#id}&type=1" target="_blank"><b>${#sameFollowingCount}</b></a>人\n            ${/if}\n        ${else}\n            ${#otherFollowingReason ? #otherFollowingReason : ""}\n        ${/if}\n    </q>\n${/if}'});kola("newt.util.helper.AutoFix",["jquery.Core"],function(f){var a=0;var b=f("#t-sky").children("div.Tray:first").after("<div id='app_util_AutoFix_fixwrapper' style=''></div>");var c=f("#app_util_AutoFix_fixwrapper");var d=f(window);function g(j){var h=this;j=f.extend({doFix:function(l,k){if(h.fixOffset==null){l.appendTo(k)}else{l.appendTo(k).css("top",h.fixOffset+"px")}},doRestore:function(l,k){l.appendTo(k).css("top","")},id:"app_util_AutoFix_"+(++a),doFixOffset:40,_pause:false,fixOffset:null,wrapper:f("<div style=''></div>")},j);f.extend(this,j);h.wrapper.attr("id",h.id);h.target.wrap(h.wrapper);h.wrapper.height(h.target.outerHeight());h.wrapper.width(h.target.outerWidth());h.wrapper=f("#"+h.id);f(function(){h.doc=d;h.fix_wrapper=c;h.adjustPos();if(f.browser.msie&&(f.browser.version=="6.0")){f("#t-sys").bind("scroll",function(){h.adjustPos()});h.doc.bind("resize",function(){h.adjustPos()})}else{h.doc.bind("scroll resize",function(){h.adjustPos()})}})}g.prototype.adjustPos=function(){var j=this;if(!j._pause&&j.doc){var h=j.wrapper.offset();if((j.doc.scrollTop()+j.doFixOffset)<h.top){j.doRestore(j.target,j.wrapper)}else{j.doFix(j.target,j.fix_wrapper)}}};g.prototype.hide=function(){this.target.hide()};g.prototype.pause=function(){this._pause=true};g.prototype.resume=function(){this._pause=false};g.prototype.show=function(){this.target.show()};return g});kola("sohu.tool.History",["jquery.Core"],function(b){var a={isIE:false,isOpera:false,isSafari:false,isKonquerer:false,isGecko:false,isSupported:false,init:function(c){this.create({debug:false});this.setFirstLoad();this.addListener(c)},create:function(g){var k=this;var j=navigator.userAgent.toLowerCase();var c=navigator.platform.toLowerCase();var l=navigator.vendor||"";if(l==="KDE"){this.isKonqueror=true;this.isSupported=false}else{if(typeof window.opera!=="undefined"){this.isOpera=true;this.isSupported=true}else{if(typeof document.all!=="undefined"&&Number(b.browser.version)<8){this.isIE=true;this.isSupported=true}else{if(l.indexOf("Apple Computer, Inc.")>-1){this.isSafari=true;this.isSupported=(c.indexOf("mac")>-1)}else{if(j.indexOf("gecko")!=-1||(b.browser.msie&&Number(b.browser.version)>=8)){this.isGecko=true;this.isSupported=true}}}}}if(this.isGecko){a.storage.hideStyles="display:none"}a.storage.setup(g);if(this.isSafari){this.createSafari()}else{if(this.isOpera){this.createOpera()}}var d=this.getCurrentLocation();this.currentLocation=d;if(this.isIE){this.createIE(d)}var h=function(){k.firstLoad=null;k.iframe=null;a.storage.storageField=null};this.addEventListener(window,"unload",h);if(this.isIE){this.ignoreLocationChange=true}else{if(!a.storage.hasKey(this.PAGELOADEDSTRING)){this.ignoreLocationChange=true;this.firstLoad=true;a.storage.put(this.PAGELOADEDSTRING,true)}else{this.ignoreLocationChange=false;this.fireOnNewListener=true}}var f=function(){k.checkLocation()};this._interval=setInterval(f,200)},startListen:function(){var d=this;this.stopListen();this.currentLocation=location.hash.replace("#","");var c=function(){d.checkLocation()};this._interval=setInterval(c,200)},stopListen:function(){window.clearInterval(this._interval)},setFirstLoad:function(){if(this.isIE){if(!a.storage.hasKey(this.PAGELOADEDSTRING)){this.fireOnNewListener=false;this.firstLoad=true;a.storage.put(this.PAGELOADEDSTRING,true)}else{this.fireOnNewListener=true;this.firstLoad=false}}},addListener:function(c){this.listener=c;if(this.fireOnNewListener){this.fireHistoryEvent(this.currentLocation);this.fireOnNewListener=false}},addEventListener:function(f,d,c){if(f.addEventListener){f.addEventListener(d,c,false)}else{if(f.attachEvent){f.attachEvent("on"+d,function(){c(window.event)})}}},add:function(f,g){if(this.isSafari){f=this.removeHash(f);a.storage.put(f,g);this.currentLocation=f;window.location.hash=f;this.putSafariState(f)}else{var d=this;var c=function(){if(d.currentWaitTime>0){d.currentWaitTime=d.currentWaitTime-d.waitTime}f=d.removeHash(f);if(document.getElementById(f)&&d.debugMode){var h="Exception: History locations can not have the same value as _any_ IDs that might be in the document, due to a bug in IE; please ask the developer to choose a history location that does not match any HTML IDs in this document. The following ID is already taken and cannot be a location: "+f;throw new Error(h)}a.storage.put(f,g);d.ignoreLocationChange=true;d.ieAtomicLocationChange=true;d.currentLocation=f;window.location.hash=f;if(d.isIE){d.iframe.src="/html/support/history.html?"+f}d.ieAtomicLocationChange=false};window.setTimeout(c,this.currentWaitTime);this.currentWaitTime=this.currentWaitTime+this.waitTime}},isFirstLoad:function(){return this.firstLoad},getVersion:function(){return"0.6"},getCurrentLocation:function(){var c=(this.isSafari?this.getSafariState():this.getCurrentHash());return this.getCurrentHash();return c},getCurrentHash:function(){var d=window.location.href;var c=d.indexOf("#");return(c>=0?d.substr(c+1):"")},PAGELOADEDSTRING:"DhtmlHistory_pageLoaded",listener:null,waitTime:200,currentWaitTime:0,currentLocation:null,iframe:null,safariHistoryStartPoint:null,safariStack:null,safariLength:null,ignoreLocationChange:null,fireOnNewListener:null,firstLoad:null,ieAtomicLocationChange:null,createIE:function(d){this.waitTime=400;var f=(a.storage.debugMode?"width: 800px;height:80px;border:1px solid black;":a.storage.hideStyles);d=d||"";var h="rshHistoryFrame",g='<iframe frameborder="0" id="'+h+'" style="'+f+'" src="/html/support/history.html?'+d+'"></iframe>',c=document.createElement("div");c.innerHTML=g;document.body.appendChild(c);this.iframe=document.getElementById(h)},createOpera:function(){this.waitTime=400;var d='<img src="javascript:location.href=\'javascript:dhtmlHistory.checkLocation();\';" style="'+a.storage.hideStyles+'" />',c=document.createElement("div");c.innerHTML=d;document.body.appendChild(c)},createSafari:function(){var j="rshSafariForm";var g="rshSafariStack";var f="rshSafariLength";var d=a.storage.debugMode?a.storage.showStyles:a.storage.hideStyles;var c=(a.storage.debugMode?"width:800px;height:20px;border:1px solid black;margin:0;padding:0;":a.storage.hideStyles);var k='<form id="'+j+'" style="'+d+'"><input type="text" style="'+c+'" id="'+g+'" value="[]"/><input type="text" style="'+c+'" id="'+f+'" value=""/></form>';var h=document.createElement("div");h.innerHTML=k;document.body.appendChild(h);this.safariStack=document.getElementById(g);this.safariLength=document.getElementById(f);if(!a.storage.hasKey(this.PAGELOADEDSTRING)){this.safariHistoryStartPoint=history.length;this.safariLength.value=this.safariHistoryStartPoint}else{this.safariHistoryStartPoint=this.safariLength.value}},getSafariStack:function(){var c=this.safariStack.value;return a.storage.fromJSON(c)},getSafariState:function(){var c=this.getSafariStack();var d=c[history.length-this.safariHistoryStartPoint-1];return d},putSafariState:function(d){var c=this.getSafariStack();c[history.length-this.safariHistoryStartPoint]=d;this.safariStack.value=a.storage.toJSON(c)},fireHistoryEvent:function(c){var d=a.storage.get(c);this.listener(c,d)},checkLocation:function(){if(!this.isIE&&this.ignoreLocationChange){this.ignoreLocationChange=false;return}if(!this.isIE&&this.ieAtomicLocationChange){return}var c=this.getCurrentLocation();if(c==this.currentLocation){return}this.ieAtomicLocationChange=true;if(this.isIE&&this.getIframeHash()!=c){this.iframe.src="/html/support/history.html?"+c}else{if(this.isIE){return}}this.currentLocation=c;this.ieAtomicLocationChange=false;this.fireHistoryEvent(c)},getIframeHash:function(){var d=this.iframe.contentWindow.document;var c=String(d.location.search);if(c.length==1&&c.charAt(0)=="?"){c=""}else{if(c.length>=2&&c.charAt(0)=="?"){c=c.substring(1)}}return c},removeHash:function(d){var c;if(d===null||d===undefined){c=null}else{if(d===""){c=""}else{if(d.length==1&&d.charAt(0)=="#"){c=""}else{if(d.length>1&&d.charAt(0)=="#"){c=d.substring(1)}else{c=d}}}}return c},iframeLoaded:function(c){if(this.ignoreLocationChange){this.ignoreLocationChange=false;return}var d=String(c.search);if(d.length==1&&d.charAt(0)=="?"){d=""}else{if(d.length>=2&&d.charAt(0)=="?"){d=d.substring(1)}}window.location.hash=d;this.fireHistoryEvent(d)}};a.storage={setup:function(d){if(typeof d!=="undefined"){if(d.debugMode){this.debugMode=d.debugMode}}var h="rshStorageForm";var k="rshStorageField";var c=this.debugMode?a.storage.showStyles:a.storage.hideStyles;var j=(a.storage.debugMode?"width: 800px;height:80px;border:1px solid black;":a.storage.hideStyles);var f='<form id="'+h+'" style="'+c+'"><textarea id="'+k+'" style="'+j+'"></textarea></form>';var g=document.createElement("div");g.innerHTML=f;document.body.appendChild(g);this.storageField=document.getElementById(k);if(typeof window.opera!=="undefined"){this.storageField.focus()}},put:function(c,d){this.assertValidKey(c);if(this.hasKey(c)){this.remove(c)}this.storageHash[c]=d;this.saveHashTable()},get:function(c){this.assertValidKey(c);this.loadHashTable();var d=this.storageHash[c];if(d===undefined){d=null}return d},remove:function(c){this.assertValidKey(c);this.loadHashTable();delete this.storageHash[c];this.saveHashTable()},reset:function(){this.storageField.value="";this.storageHash={}},hasKey:function(c){this.assertValidKey(c);this.loadHashTable();return(typeof this.storageHash[c]!=="undefined")},isValidKey:function(c){return(typeof c==="string")},showStyles:"border:0;margin:0;padding:0;",hideStyles:"left:-1000px;top:-1000px;width:1px;height:1px;border:0;position:absolute;",debugMode:false,storageHash:{},hashLoaded:false,storageField:null,assertValidKey:function(c){var d=this.isValidKey(c);if(!d&&this.debugMode){throw new Error("Please provide a valid key for History.storage. Invalid key = "+c+".")}},loadHashTable:function(){if(!this.hashLoaded){var c=this.storageField.value;if(c!==""&&c!==null){this.storageHash=this.fromJSON(c);this.hashLoaded=true}}},saveHashTable:function(){this.loadHashTable();var c=this.toJSON(this.storageHash);this.storageField.value=c},toJSON:function(c){return c.toString()},fromJSON:function(c){return c}};window.History=a;return a});kola("sohu.view.TBrowser",["kola.html.Element","kola.lang.Function","kola.bom.Event","sohu.data.Model","kola.lang.Function","jquery.Core","newt.tool.Tool"],function(k,g,j,c,b){return function(){};var h=navigator.userAgent.toLowerCase(),f=(h.indexOf("msie 6.0")!=-1&&h.indexOf("msie 7.0")==-1&&h.indexOf("msie 8.0")==-1),d=(h.indexOf("msie 7.0")!=-1&&h.indexOf("msie 8.0")==-1);var a={cacheRequest:[],hasInit:false,url:"",lastTwi:null,loadingHtml:'<div class="loading"><em>载入中</em></div>',browserType:null,init:function(l,m){this.panel=k(m.container);if(!this.panel){window.location.href=l;return}this.innerPanel=$("#t-innerpanel");this.containerEl=this.panel.down('[data-browser-content="true"]');this.backEl=this.panel.down('[data-browser-back="true"]');this.aside=k("#t-aside");this.tsys=k("#t-sys");this._open();this._bindEvent()},_bindEvent:function(){this._onscroll=b.bind(this._onScroll,this);this.tsys.on("scroll",this._onscroll)},_onScroll:function(m){var l=this;setTimeout(function(){l._setAsidePos()},0)},_clear:function(){TOOL.clearBindEvent(this.containerEl);this.containerEl.html("");this.containerEl.html(this.loadingHtml)},_open:function(){this._setAsidePos();this.innerPanel.css("left","-100%");this.panel.removeClass("noDis");this.innerPanel.stop().animate({left:"0%"},"fast","linear");this.hasInit=true;this.aside&&this.aside.addClass("noDis")},_setAsidePos:function(){var A=this.tsys._elements[0].scrollTop;var n=k("#t-doc"),u=n.hasClass("DomUpgrade"),p=k("#t-bdy");var w,v,z,r,m=115,t=146,l=156,s=-156,q=-156;if(u){m=149;t=180;l=190;s=-180;q=-190}var o=0;if(A<m&&A>0){o=m-A;v=l-A;w=s+A;z=t-A;r=q+A}else{if(A==0){o=m;v=l;w=s;z=t;r=q}else{o=10;v=51;w=-41;z=41;r=-51}}if(!f&&!d){k("#t-lay").style("paddingTop",o+"px")}else{this.tsys.style("paddingBottom",v);this.tsys.style("marginTop",w);n.style("paddingTop",z);p.style("marginBottom",r)}},_setTwiStatus:function(m,n){var o=false,p=n.element,l=p.upWithMe("[data-browser-type=twi]");if(this.url){if(this.url==m){if(this.browserType=="twi"){this._close()}o=true}else{if(l&&this.lastTwi&&(this.lastTwi.elements()[0]!=l.elements()[0])){l.addClass("twi_act");if(!p.upWithMe(n.container)){this.lastTwi.removeClass("twi_act")}}}}else{l&&l.addClass("twi_act")}if(!p.upWithMe(n.container)){this.lastTwi=l;this.browserType=p.attr("data-browser-type")}return o},request:function(l,m){if(this._setTwiStatus(l,m)){return}if(!this.hasInit){this.init(l,m)}if(m.element.attr("data-browser-close")!=null){this._close();return}if(m.element.attr("data-browser-back")!=null){this._getBackData();return}if(m.element.upWithMe(m.container)){this._setHistory(l);if(this._getHistoryLength()>1){this.backEl.removeClass("noDis")}}else{this._removeAllHistory();this._setHistory(l);this.backEl.addClass("noDis");this.url=l}this._clear();this._getData(l)},_getBackData:function(){var l=this._getHistory();if(l){this._getData(l)}if(this._getHistoryLength()==0){this.backEl.addClass("noDis");this._setHistory(l);a.lastClickUrl=null}},_getData:function(l){var m=this._createModel(l);m.show({_context:"twi_browser"},{succ:g.bind(this._success,this),fail:g.bind(this._failure,this)})},_createModel:function(l){return new c({actions:{show:{url:l,method:"get",cache:true,format:"json"}},url:""})},_success:function(l){this.containerEl.html(l.body);kola("newt.data.JData",function(m){l=new m({data:l});l.setAfterload()})},_failure:function(l){},_close:function(){var l=this;this._twiRemoveClass();this.hasInit=false;this.url=null;if(this.lastTwi){this.lastTwi.removeClass("twi_act");this.lastTwi.removeClass("twi_hover")}this.lastTwi=null;this.browserType=null;this.aside&&this.aside.removeClass("noDis");this._clear();this._removeAllHistory();this.tsys&&this.tsys.un("scroll",this._onscroll);this.innerPanel.stop().animate({left:"-100%"},"fast","linear",function(){l.panel&&l.panel.addClass("noDis");l.panel=l.innerPanel=null});this.containerEl=this.backEl=null;this.aside=this.tsys=null},_twiRemoveClass:function(){if(this.lastTwi){this.lastTwi.removeClass("twi_act");this.lastTwi.addClass("twi_hover")}},_removeAllHistory:function(){this.cacheRequest.length=0},_getHistoryLength:function(){return this.cacheRequest.length},_setHistory:function(l){this.cacheRequest.push(l)},_getHistory:function(){if(!a.lastClickUrl){a.lastClickUrl=this.cacheRequest[this.cacheRequest.length-1];this.cacheRequest.splice(this.cacheRequest.length-1,1)}var l=this.cacheRequest.pop();return l}};return a});kola("kola.bom.Dispatcher",["kola.lang.Class"],function(a){return a.create({_init:function(){this._listeners={}},on:function(b,d){var c=this._listeners[b];if(typeof(c)!="object"){c=this._listeners[b]=[]}c.push(d)},un:function(c,g){var f=this._listeners[c];if(typeof(f)!="object"){return}for(var d=0,b=f.length;d<b;d++){if(f[d]==g){f=f.splice(d,1);return}}},fire:function(c,j,h){var f=this._listeners[c];if(typeof(f)!="object"){return}var d,b,g;if(h){for(d=f.length-1;d>=0;d--){if(f[d]==h){g=h(j)}}}else{for(d=0,b=f.length;d<b;d++){if(g!==false){g=f[d](j)}}}return g}})});kola("sohu.loader.CssLoader",["kola.html.Element","kola.lang.Function"],function(b,a){CssLoader=function(h,f){if(typeof(h)=="string"){h=[{src:h}]}for(var g=0,c=h.length;g<c;g++){var d=h[g];if(typeof(d)=="string"){d={src:d};h[g]=d}h[d.src]=d}this._urls=h;this._options=f};CssLoader.prototype={load:function(){var s=document.getElementsByTagName("head")[0].getElementsByTagName("link"),m=0,k={};if(s&&(m=s.length)){for(m=m-1;m>-1;m--){var q=s[m];if(q&&q.href){k[q.href]=true}}}var r=navigator.userAgent.toLowerCase();var p=this._urls,n=(r.indexOf("msie")!=-1)||(r.indexOf("opera")!=-1),f=[];for(var j=0,g=p.length;j<g;j++){var h=p[j],c=h.src;if(k[c]){p.del(h);j--;g--;break}var q=b(document.createElement("link"));if(n){q.on("load",a.bind(this._loadSucc,this,c));q.on("readystatechange",a.bind(this._readystate,this,c))}else{var o="_CP_"+c.substr(c.indexOf("/r/c/")+5).replace(/_v\d+/g,"").replace(".css","").split("/").join("_");p[o]=h;var d=document.createElement("div");d.id=o;h.checkEl=document.body.appendChild(d);f.push(o)}q.attr("rel","stylesheet").attr("type","text/css").attr("href",c);h.link=q;b("head").append(q)}if(p.length==0){this._callback();return}if(!n){this._checkTimer=window.setInterval(this._checkLink.bind(this),100);this._checkIds=f}this._timeoutTimer=window.setTimeout(this._timeout.bind(this),2000)},_checkLink:function(){var g,j=this._urls;if(!(g=this._checkIds)){return}for(var d=0,c=g.length;d<c;d++){var k=g[d],h=j[k];if(!h){continue}var f=window.getComputedStyle(h.checkEl,null);if(f.getPropertyValue("display")=="block"){this._setReady(k)}}this._check()},_setReady:function(d){var c=this._urls[d];if(c){if(c.checkEl&&c.checkEl.parentNode){c.checkEl.parentNode.removeChild(c.checkEl);c.checkEl=null}c.link=null;this._urls.del(c)}},_loadSucc:function(c){this._setReady(c);this._check()},_readystate:function(d){var c=this._urls[d];if(c&&c.link&&c.link.prop("readyState")=="complete"){this._setReady(d);this._check()}},_timeout:function(){this._clear();if(this._options&&this._options.failure){this._options.failure()}},_check:function(){if(this._urls.length==0){this._callback()}},_callback:function(){this._clear();if(this._options&&this._options.success){this._options.success()}},_clear:function(){if(this._checkTimer){window.clearInterval(this._checkTimer);this._checkTimer=null}if(this._timeoutTimer){window.clearTimeout(this._timeoutTimer);this._timeoutTimer=null}var g=this._urls;this._urls=null;if(g){for(var f=0,c=g.length;f<c;f++){var d=g[f];if(d.checkEl&&d.checkEl.parentNode){d.checkEl.parentNode.removeChild(d.checkEl);d.checkEl=null}d.link=null}}this._checkIds=null}};CssLoader.load=function(f,c){var d=new sohu.node.Css(f,c);d.load();return d};CssLoader.delHrefs=function(j){if(!j||j.length<1){return}var h={};for(var f=j.length-1;f>=0;f--){h[j[f]]=true}var d=document.getElementsByTagName("head")[0].getElementsByTagName("link"),c=0;if(d&&(c=d.length)){for(c=c-1;c>-1;c--){var g=d[c];if(g&&g.href&&h[g.href]){g.parentNode.removeChild(g)}}}}});kola("newt.component.combox.ComboxSearch",["jquery.Core","newt.cr.crOut"],function(b){var c={c:null,d:null,t:null,a:null,e:null,func:null,manager:null};b.fn.crSearchComBox=function(f){if(f){b.extend(c,f)}for(var g in c){if(!c[g]){return}}return new d(this)};function a(j){var h=b(j);var m=h.offset();var l=m.top;var g=m.left+h.width();var f=m.top+h.height()+7;var k=m.left;return{top:l,right:g,bottom:f,left:k}}function d(f){this.initialize(f,c)}d.prototype={initialize:function(h,g){var f=this;f.settings=g;f.b=h;f.d=b(g.d);f.c=g.c;f.t=g.t;f.e=g.e;f.i=null;f.ic=null;f.func=g.func;f.manager=g.manager;f.showFlag=false;f.selectIndex=0;if(f.manager){f.mIndex=f.manager.register(f)}f.index=null;f.li=f.d.find("q.crjs_per");f.em=f.d.find("em");f.d.crOut({outHandle:function(){f.d.addClass("noDis")}});f.eventBind()},eventBind:function(){var f=this;f.b.each(function(k,o){var h=b(o);var l=h.find("input");var g=h.find("i");var j=h.find(f.settings.a);if(l.val()!=f.t){g.removeClass("blur")}l.bind("click",function(n){var m=b(this);if(f.manager){f.manager.setActive(f.mIndex)}if(f.showFlag&&k!=f.index){f.hide(true)}f.index=k;f.i=m;f.ic=g;if(m.val()==f.t){m.val("")}else{if(m.val()!=""){f.show(this);f.setDropText(m.val())}}g.removeClass("blur");n.stopPropagation()});l.bind("blur",function(n){var m=b(this);if(m.val()==""){m.val(f.t);g.addClass("blur")}});l.bind("keydown",function(n){var p=n.originalEvent.charCode?n.originalEvent.charCode:0;var m=n.originalEvent.keyCode;if(f.showFlag){if(f.func.length==4){if(0<=f.selectIndex&&f.selectIndex<3&&p==0&&m==40){f.selectIndex++;f.setCss()}else{if(0<f.selectIndex&&f.selectIndex<=3&&p==0&&m==38){f.selectIndex--;f.setCss()}}}else{if(40==m){f.selectIndex++;if(f.selectIndex>2){f.selectIndex=0}}else{if(38==m){f.selectIndex--;if(f.selectIndex<0){f.selectIndex=2}}}f.setCss()}if(p==0&&m==13){j.addClass(f.e);f.fireFunc((l.val()==f.t)?"":l.val())}}});l.bind("keyup",function(n){var p=n.originalEvent.charCode?n.originalEvent.charCode:0;var m=n.originalEvent.keyCode;if(p==0&&m==13){j.removeClass(f.e)}});if(b.browser.msie){l.bind("propertychange",function(n){var m=b(this);(m.val()==""||m.val()==f.t)?f.hide():f.show(this);f.setDropText(m.val())})}else{l.bind("input",function(n){var m=b(this);(m.val()=="")?f.hide():f.show(this);f.setDropText(m.val())})}j.bind("click",function(m){if(l.val()==""||l.val()==f.t){return}f.func[0].apply(f,[(l.val()==f.t)?"":l.val()]);m.stopPropagation()})});f.li.each(function(h){var g=b(this);g.click(function(j){if(f.func.length==4){f.func[h+1].apply(f,[f.i.val()])}else{f.func[h].apply(f,[f.i.val()])}j.stopPropagation()});g.mouseover(function(j){f.clearCss();g.addClass(f.c)})})},setDropText:function(h){var f=this;var g=h.replace("<","&lt;").replace(">","&gt;");b.each(f.em,function(j,k){b(k).html(g)})},getKey:function(){if(this.i.val()==this.t){return""}return this.i.val()},fireFunc:function(f){this.func[this.selectIndex].apply(this,[f])},setCss:function(){var f=this;this.li.each(function(){b(this).removeClass(f.c)});if(this.func.length==4){if(this.selectIndex==1||this.selectIndex==2||this.selectIndex==3){b(this.li[this.selectIndex-1]).addClass(this.c)}}else{b(this.li[this.selectIndex]).addClass(this.c)}},clearCss:function(){var f=this;this.li.each(function(){b(this).removeClass(f.c)})},show:function(f){var g=a(f);this.d.removeClass("noDis");this.d.css("z-index","10001");this.showFlag=true;this.setCss()},hide:function(g){var f=this;f.d.addClass("noDis");f.showFlag=false;f.selectIndex=0;if(f.index!=null&&g){f.b.find("input").each(function(h,j){if(f.index==h&&b(j).val()==""){b(j).val(f.t);f.ic.addClass("blur")}})}},hideByManager:function(){this.hide(true);this.index=null}};return""});kola("newt.component.combox.ComboxManager","jquery.Core",function(a){a.fn.crComBoxManager=function(){return new b()};function b(){this.initialize()}b.prototype={initialize:function(){var c=this;c.nu=0;c.com={};c.activeIndex=null;c.activeObject=null},register:function(d){this.com[this.nu]=d;var c=this.nu;this.nu++;return c},setActive:function(c){if(this.activeIndex!=c){this.unActiveObject(this.activeIndex);this.activeIndex=c;this.activeObject=this.com[c]}},setUnActive:function(c){if(this.activeIndex==c){this.activeIndex=null;this.activeObject=null}},unActiveObject:function(c){if(this.com[c]){this.com[c].hideByManager()}},closeAll:function(){if(this.activeIndex==null){return}this.com[this.activeIndex].hideByManager();this.activeIndex=null;this.activeObject=null}};return""});kola("newt.group.action.GrpAct",["jquery.Core","newt.group.action.TwGrpActionMenu","newt.twitter.Twitter","newt.cr.crOut","newt.cr.crInput","newt.window.Window","newt.cr.crButton"],function($,GroupMenu){var Action=function(){var self=this;self.ginfo=null;self.hasRegEvent=false;$.extend(self,{init:function(menuButtons){if(self.isInit){return}self.isInit=true;self.regEvent()},regFollowEvt:function(){self.regEvent()},regEvent:function(){if(self.hasRegEvent){return}else{self.hasRegEvent=true}if(!self.isInit){self.init()}var crEvent=$.cr.event;crEvent.bind("tw_options_menu_show",function(event,data){self._hideMenu()});$('[meta="group-list-menu"]').live("click",function(e){var fireMenuEl=$(this);var eventData=null;try{eventData=eval("("+fireMenuEl.attr("event-data")+")");eventData.fireMenuEl=fireMenuEl;self.onUserGroupMenuClick(e,eventData)}catch(e){}});crEvent.bind("tw_show_group_droplist",self.showGroupDropList);crEvent.bind("tw_hide_group_droplist",self.hideGroupDropList);crEvent.bind("tw_group_del",self.onGroupDel);crEvent.bind("tw_user_group_change",self.onUserGroupChange)},onUserGroupMenuClick:function(event,data){var fireMenuEl=data.fireMenuEl;var uid=data.uid;if(fireMenuEl.hasClass("btn_act")){GroupMenu.hideUserGroupMenu()}else{GroupMenu.showUserGroupMenu(uid,fireMenuEl)}event.stopPropagation()},onUserGroupChange:function(event,data){var editUserId=data.editUserId;var inGroupNames;var userDom;if(!editUserId){return}userDom=$("#"+editUserId+"_con");if(userDom.length==0){return}inGroupNames=data.inGroupNames;if(inGroupNames){userDom.find('[meta="menu-text"]').html(inGroupNames)}self._changeGroupCount(data)},displayMenu:function(){var btn=$(this);if(btn.hasClass("btn_act")){self._hideMenu(btn)}else{self._showMenu(btn)}},showGroupDropList:function(event,data){var fireMenuEl=data.fire_menu_el;var followUid=data.follow_uid;GroupMenu.showUserGroupMenu(followUid,fireMenuEl)},hideGroupDropList:function(event,data){GroupMenu.hideUserGroupMenu()},_changeGroupCount:function(data){if(data.groupbys){for(var i=0;i<data.groupbys.length;i++){$("#group_"+data.groupbys[i].gid).html(["<b>",data.groupbys[i].gname,"</b>","<q>(",data.groupbys[i].gcount,")</q>"].join(""))}}},_hideMenu:function(fireMenuEl){GroupMenu.hideUserGroupMenu()},_showMenu:function(fireMenuEl,follow_uid){var menu_el_id=fireMenuEl.attr("id");var follow_uid=follow_uid||menu_el_id.substring(menu_el_id.indexOf("_")+1);GroupMenu.showUserGroupMenu(follow_uid,fireMenuEl)},showMemoEdit:function(opti){var op=$.extend({uid:UID,target:"",success:function(){}},opti||{});var win=tw.window.getWindow("tw_add_memo_win",{});var winDom=win.getElement();winDom.find(".overlayOkBtn").unbind().bind("click",sub);var editBox=winDom.find("div.post").getCrControl("crSimpleEdit");if(!editBox){editBox=winDom.find("div.post").crSimpleEdit({intxt:"",max:30,countSimple:true,ctrlEnterHandle:function(){sub()}}).getCrControl("crSimpleEdit")}$("#tw_memo_editBox textarea").unbind("keydown").bind("keydown",function(e){if(e.which==13){sub();return false}});winDom.data("uid",op.uid);var target=$(op.target);winDom.data("tar",op.target);if(target.find("b").first().text()==""||target.find("b").first().text()=="设置备注"){editBox.setVal("")}else{editBox.setVal(target.find("b").first().attr("data-text"))}win.show();editBox.setFocus();editBox.setCursorEnd();function sub(){var val=editBox.getval();if(val==""){val=""}var uid=winDom.data("uid");var target=$(winDom.data("tar"));var name=$(".jsNickBox_"+opti.uid).find("b.nm").children().first().text();tw.build({type:"user_add_memo",uid:uid,memo:val,success:function(msg){if(msg.status==0){if(val==""){if($("b.jsNickBox_"+opti.uid).attr("data-memoedit")=="show"){target.find("b").text("设置备注")}else{target.find("b").text("");target.find("b").attr("data-text",val);target.addClass("noDis")}}else{if(val.length>3){if($("b.jsNickBox_"+opti.uid).attr("data-wrap")=="true"&&name.length>=8){$("b.jsNickBox_"+opti.uid).addClass("pd1");if(val.length==4){target.find("b").text(val)}else{target.find("b").text(val.substring(0,4)+"...")}}else{if($("b.jsNickBox_"+opti.uid).attr("data-wrap")=="false"){$("b.jsNickBox_"+opti.uid).removeClass("pd1");target.find("b").text(val)}else{if($("b.jsNickBox_"+opti.uid).attr("data-wrap")=="true"){$("b.jsNickBox_"+opti.uid).removeClass("pd1");target.find("b").text(val.substring(0,3)+"...")}else{$("b.jsNickBox_"+opti.uid).removeClass("pd1");if(val.length<=10){target.find("b").text(val)}else{target.find("b").text(val.substring(0,7)+"...")}}}}target.find("b").attr("data-text",val);target.removeClass("noDis")}else{if($("b.jsNickBox_"+opti.uid).attr("data-wrap")=="true"&&name.length>=8){$("b.jsNickBox_"+opti.uid).addClass("pd1");target.find("b").text(val)}else{$("b.jsNickBox_"+opti.uid).removeClass("pd1");target.find("b").text(val)}target.find("b").attr("data-text",val);target.removeClass("noDis")}}tw.usercard.clearCachedUserData(opti.uid)}win.close()}})}}})};if(!tw.grpAct){var act=new Action();act.init();tw.grpAct=act}return tw.grpAct});kola("newt.group.action.TwGrpActionMenu",["jquery.Core","newt.twitter.Twitter","newt.cr.crMenu","newt.service.GroupService","newt.cr.crOut","newt.cr.crInput","newt.cr.crEvent","kola.lang.String"],function(c,f,p,a,m,n,b,l){var k=0,j=null,h=null,d=function(){return"__twGrpMenu__"+k},g=function(){return c("#__twGrpMenu__"+k)},o=function(){k++;return"__twGrpMenu__"+k};return{MAX_GROUP_COUNT:CRTWCONFIG.G_NUM,REMIND_CREATE_GROUP:"为Ta设置分组",DEFAULT_MENU_TEXT:"设置分组帮你更好地管<br/>理关注的人，同时更快<br/>筛选信息。",showUserGroupMenu:function(q,t){var s=this;var r=g();this.hideUserGroupMenu(r);a.getUserGroups(q,function(u){s.setData(q,u.data);s.buildMenu(t,u.data);c(t).addClass("btn_act");j=t;s.updateMenuShow();s.regMenuEvents(g(),t)});return r},hideUserGroupMenu:function(q){q=(q==undefined||q==null)?g():q;if(this._isMenuDel(q)){return}this.saveGroupEdit(q);if(j){c(j).removeClass("btn_act");j=null}q.getCrControl("crOut").unbind();if(q.length>0){q.remove()}h=null},buildMenu:function(w,u){var v,q,z,t=[],s=[];this.checked="";for(v=0,q=u.length;v<q;v++){z=u[v];if(z.gid>0){s.push(z.checked?z.gid+",":"");t.push(this._getGroupRecordHtml(z.gid,z.name,z.num,z.checked))}this.checked=s.join("")}var r=['<div id="'+o()+'" class="dropDown dropGroup">','<div class="dropD">','<i class="sign signArr"><q>◇</q><q class="k2">◆</q><q class="k3">◆</q></i>','<div class="dropC" style="width:135px">','<p meta="text-part" class="ttl">为Ta设置分组</p>',t.join(""),'<div meta="operate-part" class="c">','<p meta="create-group-part" class="fucs">','<a class="fuc" href="javascript:void(0)">','<i class="add" title="add">','<q class="k1"></q>','<q class="k2"></q>',"</i>","<b>创建分组</b>","</a>","</p>",'<i meta="group-input-part" class="cr_input_box txt blur nodis">','<input meta="txt-gname" type="text" value="分组名...">',"</i>",'<a meta="btn-create" class="btn btnM nodis cr_input_sBtn" href="javascript:void(0)"><b>创建</b></a>','<span meta="error-info" class="cr_input_tip err nodis"></span>',"</div>","</div>","</div>","</div>"].join("");c(r).insertAfter(w)},regMenuEvents:function(s,r){if(!s||!r||s.length==0||r.length==0){return}var q=this;s.delegate(":checkbox","click",function(v){var t=c(this);if(t.length==0){return}var u=parseInt(t.attr("ucount"));if(t.attr("checked")){u++}else{u--}t.attr("ucount",u);t.next().html("("+u+")")});s.find('[meta="create-group-part"]').click(function(){q.showInputBox()});h=s.crInput({initText:"新建分组..",submitBtnState:"disabled",submitHandle:function(){CA.q("tw_"+CRTWCONFIG.CA_SRC+"_group_create_from_menu");q.addGrp()},inputHandle:function(t,u){if(u.length>0){t.enableSubmitBtn()}else{t.disableSubmitBtn()}}}).getCrControl("crInput");s.crOut({outItems:r,outHandle:function(t){if(q._isMenuDel(s)){s.getCrControl("crOut").unbind()}else{q.hideUserGroupMenu(s)}}}).getCrControl("crOut")},addGrp:function(){var v,s=this,u=0,r=1,t=h,q=t.getVal();if(!q){return}t.showWaiting();f.build({type:"addgrp_following_grp",name:q,selfSuccess:1,error:function(w){t.stopWaiting()},success:function(z){if(z.status==u){var w={num:u,gid:z.id,name:q};t.clearTip();t.setVal("");s.addItem(w,true);s.updateMenuShow();s.highLightNewGroup();b.send("tw_add_following_group",w,true)}else{t.showTip(z.statusText)}t.stopWaiting()}})},highLightNewGroup:function(){var q=this.getCheckBox(),s=q.length,r=(s>0?q[s-1]:null),t=(r?c(r).parent():null);if(t){t.css("backgroundColor","yellow");window.setTimeout(function(){t.css("backgroundColor","#fff")},800)}},updateMenuShow:function(){var r=this.getCheckBox().length;this.setText(r==0?this.DEFAULT_MENU_TEXT:this.REMIND_CREATE_GROUP);if(r<this.MAX_GROUP_COUNT){this.enableCreateGroup();var q=h;if(q){q.disableSubmitBtn()}}else{this.disableCreateGroup()}},saveGroupEdit:function(u){var w=this.getData(u),t="",q="",s=[],v=[];this.getCheckBox().each(function(){var z=c(this);if(z.attr("checked")){v.push(z.attr("gname"));s.push(z.attr("gid"));t+=z.attr("gid")+"_1,"}else{t+=z.attr("gid")+"_0,"}});if(!this.isEdit(s,w.checked)){return}CA.q("tw_"+CRTWCONFIG.CA_SRC+"_group_set_from_menu");var r=j;f.build({type:"oper_members_following_grp",gid:t,members:w.uid,success:function(A){var z=v.join(",")||"";z=(l.SimpinLen(z)>6)?(l.cutSimpStr(z,5)+".."):z;A.inGroupNames=z;A.editUserId=w.uid;if(r){r.find('[meta="menu-text"]').html(z)}b.send("tw_user_group_change",A)}})},isEdit:function(q,s){var r=s.match(/\d+/g);if(r){return q.sort().join("|")!=r.sort().join("|")}else{return q.length>0}},setData:function(q,r){this.uid=q;this.gInfo=r},getData:function(){return{uid:this.uid,gInfo:this.gInfo,checked:this.checked}},getChecked:function(q){return g().find(":checked")},getCheckBox:function(){return g().find(":checkbox")},addItem:function(s,r){this.gInfo.push(s);if(s.num==0&&r){s.num=1}var q=g().find('div[meta="operate-part"]')[0];if(q){c(this._getGroupRecordHtml(s.gid,s.name,s.num,r)).insertBefore(q)}},setText:function(r){var q=g().find('[meta="text-part"]');if(q){q.html(r)}},disableCreateGroup:function(){var q=g().find('[meta="operate-part"]');if(q){q.addClass("nodis")}},enableCreateGroup:function(){var q=g().find('[meta="operate-part"]');if(q){q.removeClass("nodis")}},hideInputBox:function(){var q=c("#"+d());q.find('[meta="create-group-part"]').removeClass("nodis");q.find('[meta="group-input-part"]').addClass("nodis");q.find('[meta="btn-create"]').addClass("nodis");q.find('[meta="error-info"]').addClass("nodis")},showInputBox:function(){var q=c("#"+d());q.find('[meta="create-group-part"]').addClass("nodis");q.find('[meta="group-input-part"]').removeClass("nodis");q.find('[meta="btn-create"]').removeClass("nodis");q.find('[meta="error-info"]').removeClass("nodis")},_getGroupRecordHtml:function(r,q,t,s){return('<label class="cbox"><input type="checkbox" '+(s?'checked="true" ':" ")+'gid="'+r+'" gname="'+q+'" ucount="'+t+'"/>'+q+"<q>("+t+")</q></label>")},_isMenuDel:function(q){return(!q||q.length==0||c(q).parents("body").length==0)}}});kola("newt.black.blacklist","newt.twitter.Twitter,newt.dialog.Notice",function(){var a=function(){var c=this;$.extend(c,{add:function(d){tw.notice.confirm({msg:"确定要屏蔽 "+d.name+" 么？",subMsg:"屏蔽后，对方和你的各种关系立即解除，虽然还能搜索到你，但不能对你+关注、@你、评论你、转发你，也不能发私信给你",subHandle:function(){d.type="add_black_list";c.action(d)}})},del:function(f){var d="";tw.notice.confirm({msg:" 从黑名单删除后，他可以搜索到你、对你+关注、@你、评论你、转发你。确定删除吗？",subHandle:function(){f.type="del_black_list";f.success=function(g){if(g.status==0){tw.notice.showTip("操作成功");kola("sohu.view.Local",function(j){var h=encodeURIComponent(_view_context);j.href("/settings/blacklist?_context="+h,"#t-setting")});$.cr.event.send("black_del_fresh")}else{setTimeout(function(){tw.notice.alert(g.statusText)},1000)}};c.action(f)}})},add_fresh:function(d){d.success=function(f){if(f.status==0){tw.notice.showTip("操作成功");$.cr.event.send("black_add_fresh",d.uid,d.part,f.data)}else{tw.notice.showErrTip("操作失败")}};c.add(d)},del_fresh:function(d){d.success=function(f){if(f.status==0){tw.notice.showTip(f.statusText)}};c.del(d)},action:function(d){var f=$.extend({success:function(g){if(g.status==0){tw.notice.showTip(g.statusText)}else{tw.notice.alert(g.statusText)}}},d);tw.build(f)}})};var b=new a();tw.blacklist=b;return b});kola("template.main.app.recommends.hot.sublist",[],function(){return'${forarr #list as user}\n    <div class="usr3 js-user js-user-${user.id}" data-userid="${user.id}">\n        ${eval user._widget = #widget}\n        ${include template.main.app.recommends.hot.avatarcontent: user}\n    </div>\n${/forarr}'});kola("newt.data.Model",["mvc.aop.Builder","mvc.aop.Settings"],function(b,a){a.addBuilder({builder:function(c){if(typeof c=="object"){return{beforeCall:c.beforeCall,success:c.success,fail:c.fail,progress:c.progress,complete:c.complete,fn:function(f){var d=this;kola("jquery.Core",function(h){var g={};if(c.hasOwnProperty("cache")==false){c.cache=false}g.cache=c.cache;if(c.hasOwnProperty("async")==false){c.async=true}g.async=c.async;switch(c.format){case"json":g.dataType="json";break;case"text":g.dataType="text";break;default:g.dataType="json"}switch(c.method){case"post":g.type="post";break;case"get":g.type="get";break;default:g.type="post"}if(c.hasOwnProperty("params")==false){g.data=f;j()}else{if(typeof c.params=="string"){kola("mvc.view.TemplateEngine",function(k){k.renderFromSource({source:"${set filter_data: false}"+c.params,data:f,complete:function(r){var r=h.trim(r);if(r.length<=0){g.data=undefined;j();return}var p=r.split("&");var m=[];for(var o=0,n=p.length;o<n;++o){var q=p[o].split("=");if(q.length==1){q.push(f[q[0]])}m.push(q[0]+"="+q[1])}g.data=m.join("&");j()}})})}else{g.data=undefined;j()}}function j(){if(c.hasOwnProperty("url")==false){c.url=location.href}g.url=c.url;kola("mvc.view.TemplateEngine",function(k){k.renderFromSource({source:"${set filter_data: false}"+g.url,data:f,complete:function(s){var q=h.trim(s).split("?");if(q.length>=2){var p=q[1].split("&");var m=[];for(var o=0,n=p.length;o<n;++o){var r=p[o].split("=");if(r.length==1){r.push(f[r[0]])}m.push(r[0]+"="+r[1])}q[1]=m.join("&");g.url=q.join("?")}else{g.url=q[0]}g.success=function(l){d.doSuccess(l)};g.error=function(u,t,l){d.doFail({text:t,ex:l})};h.ajax(g)}})})}})}}}}});return b});kola("newt.model.Security",["jquery.Core","newt.data.Model"],function(a,c){var b=c.create({replyVerifyCode:function(f){var d=this;a.ajax({url:"/twAction/isCaptchaShow?t="+new Date().getTime(),dataType:"json",type:"post",success:function(g){d.doSuccess(g)},error:function(g){d.doFail("服务器错误")}})},checkRelation:function(g){var f=this;var d={friendId:g.fid,friendName:encodeURIComponent(g.fName)};a.ajax({url:"/mailBox/checkRelation?t="+new Date().getTime(),dataType:"json",type:"post",data:d,success:function(h){f.doSuccess(h)},error:function(h){f.doFail("服务器错误")}})},checkValidateIMG:function(g){var f=this;var d={captchaSeed:g.seed,captchaCode:g.code};a.ajax({url:"/regist/checkCaptcha",dataType:"json",type:"post",data:d,success:function(h){f.doSuccess(h)},error:function(h){f.doFail("服务器错误")}})}});return b});kola("newt.widget.VerifyCode",["jquery.Core","kola.lang.Class","newt.model.Security"],function(f,b,d){var g="noDis";var c=['<div class="form form2 '+g+'">','<div class="frm frm_vc">','<div class="frmC"><i class="txt blur"><input name="captchaCode" type="text" value="输验证码"></i>','<p class="vcflush"><img title="点击刷新图片" style="cursor:pointer;" src="//builder.oliv.cn/i/4/040.gif">','<a href="javascript:void(0)" >刷新</a></p>','<p class="frmTip"><i class="i"></i><b></b></p>',"</div>","</div>","</div>"].join("");var a=b.create({_init:function(j){var h=this;f.extend(h,{imgSrc:j.imgSrc?j.imgSrc:"/regist/getCaptchaIMGNumIE6",placeholder:f(j.placeholder),onRender:typeof(j.onRender)=="function"?j.onRender:null,onBlur:typeof(j.onBlur)=="function"?j.onBlur:null,onFresh:typeof(j.onFresh)=="function"?j.onFresh:null,onFirstUpdate:typeof(j.onFirstUpdate)=="function"?j.onFirstUpdate:null});h.build();if(h.onRender){h.onRender(h.panel)}else{if(h.placeholder.size()>0){h.placeholder.append(h.panel)}}h.updateCode()},build:function(){var h=this;h.panel=f(c);h.img=h.panel.find("img");h.code=h.panel.find("input[name=captchaCode]");h.btnFresh=h.panel.find("a");h.code.bind("blur",function(){var j=f(this).val();h.code.closest("i").addClass("blur");if(j=="输验证码"){j=""}h.check(j,function(){if(h.onBlur){h.onBlur(h.getValue())}})}).bind("focus",function(){var j=f(this).val();if(j=="输验证码"){f(this).val("").closest("i").removeClass("blur")}if(!h.isPass&&h.code.closest("div.frm").hasClass("frm_err")){h.updateCode()}});h.btnFresh.bind("click",function(){h.updateCode(function(){h.code.val("输验证码")})});h.img.bind("click",function(){h.updateCode(function(){h.code.val("输验证码")})})},showTip:function(j){var k=this;var h=k.code.closest("div.frm");h.removeClass("frm_ok").removeClass("frm_err");switch(j.type){case"ok":h.addClass("frm_ok");break;case"err":h.addClass("frm_err");break}if(typeof(j.msg)!="undefined"){h.find(".frmTip b").html(j.msg)}},refresh:function(l,h){var j=this,k;j.params=l;k=function(){j.code.val("输验证码").closest("i").addClass("blur");if(typeof(h)=="function"){h()}};j.updateCode(k)},getValue:function(){var j=this;var h={};if(j.code){h.code=f.trim(j.code.val())}h.seed=j.seed;h.isPass=j.isPass;if(j.panel&&!j.panel.hasClass(g)){h.enable=1}return h},check:function(h,j){var l=this;h=f.trim(h);var m=function(){if(typeof(j)=="function"){j()}};var k=function(){l.isPass=0;l.showTip({type:"err",msg:"验证码错误"});if(h==""){l.code.val("输验证码").closest("i").addClass("blur")}};if(!h){k();m();return}h=encodeURIComponent(h);d.checkValidateIMG({params:{seed:l.seed,code:h},success:function(n){if(n.status==0){l.isPass=1;l.showTip({type:"ok",msg:""})}else{k()}m()}})},updateCode:function(h){var j=this;var k=function(l){j.isPass=0;j.showTip({type:"",msg:""});j.seed=l;if(j.img){j.img.attr("src",j.imgSrc+"?captchaSeed="+l)}};j.onFresh({params:j.params,success:function(l){if(typeof(h)=="function"){h(l)}if(l.status==1){k(l.data);j.show();if(j.onFirstUpdate){j.onFirstUpdate();j.onFirstUpdate=null}}else{j.hide()}},fail:function(){j.hide()}})},show:function(){var j=this;var h=j.panel;if(h){h.removeClass(g);setTimeout(function(){h.closest("div.post").addClass("post_vc")},4)}},hide:function(){var j=this;var h=j.panel;if(h){h.addClass(g);h.closest("div.post").removeClass("post_vc")}}});return a});kola("newt.service.Recommends",["jquery.Core","newt.data.Model","newt.cr.cr"],function(b,d,a){var c=d.create({getOtherRecommends:function(g){var f=this;b.ajax({url:"/user/recommend/getOtherRecommends",dataType:"json",type:"post",data:"uid="+g.uid+"&page="+g.page+"&pageSize="+g.pageSize,success:function(h){f.doSuccess(h)},error:function(h){f.doFail("服务器错误")}})},getHotRecommends:function(g){var f=this;b.ajax({url:"/user/recommend/getHotRecommends",type:"post",dataType:"json",data:"cons="+g.cons,success:function(h){f.doSuccess(h)},error:function(h){f.doFail("服务器错误")}})},getGuessRecommends:function(h){var f=h.cons.split(",");if(f.length>3){f[3]=b.cr.encodeUTF(f[3])}var g=this;b.ajax({url:"/user/recommend/getGuessRecommends",type:"post",dataType:"json",data:"cons="+f.join(",")+"&src="+(h.src?h.src:"widget"),success:function(j){g.doSuccess(j)},error:function(j){g.doFail("服务器错误")}})},removeGuess:function(g){var f=this;b.ajax({url:"/user/recommend/removeGuess",type:"post",dataType:"json",data:{uid:g.uid},success:function(h){f.doSuccess(h)},error:function(h){f.doFail("服务器错误")}})}});return c});kola("newt.cr.crMenu",["jquery.Core"],function(){(function(b){var a=function(f,d){var c=this;c.elem=b(f);c.opts=b.extend({autoReBuild:true,clickHandle:function(){},beforeShowHandle:function(){},beforeHideHandle:function(){},showHandle:function(){},hideHandle:function(){}},d||{});c.on=0;c.stamp=(new Date()).getTime();c.elem.data("cr_menu_stamp",c.stamp);b.extend(c,{init:function(){c.elem.click(c.clickHandle)},getElement:function(){return c.elem},getStamp:function(){return c.elem.data("cr_menu_stamp")},clickHandle:function(g){c.opts.clickHandle()},getStatus:function(){return c.on?"show":"hide"},build:function(){},show:function(h,g){c.opts.beforeShowHandle();c.on=1;if(c.opts.autoReBuild){c.build()}if(g){c.elem.removeClass("noDis")}else{c.elem.css({left:h.left,top:h.top}).removeClass("noDis")}c.opts.showHandle()},hide:function(){c.opts.beforeHideHandle();c.on=0;c.elem.addClass("noDis").css("direction","");c.opts.hideHandle()},toggle:function(){if(!c.on){c.show()}else{c.hide()}}});c.init()};b.fn.crMenu=function(c){return b(this).each(function(){b(this).removeData("crMenu").data("crMenu",new a(this,c))})}})(jQuery)});kola("newt.service.GroupService",null,function(){var a={getUserGroups:function(g,j,d,c){var f="/follow/getfriendgroupbyinfo";var h="sid="+g;var c=c||{};var b=c.checkFn;$.ajax({url:HOST+f,global:false,type:"post",dataType:"json",data:h,success:function(k){if(b&&b instanceof Function&&!b(k)){return}if(typeof(j)=="function"){j(k)}},error:function(k){if(typeof d=="function"){d(k)}}})},addUserGroup:function(d,g,c,f,b){},saveUserGroupEdit:function(d,g,c,f,b){}};return a});kola("template.main.app.recommends.hot.avatarcontent",[],function(){return'<p class="oper"><a data-ca="newt-hot${#_widget}widget-remove" class="del js-del" href="javascript:void(0);" data-userid="${#id}" title="不感兴趣" style="display: none;"><i class="sign signX"><q>×</q><q class="k2">×</q></i></a></p><p class="avt avt32"><a title="${#name}" href="${#furl}" target="_self" data-ca="newt-hot${#_widget}widget-viewprofile"><i data-content=\'{"type": "nick", "nick": "${#name}"}\' class="img" style="background-image: url(${#img});"></i></a></p>\n<b class="nm"><a data-content=\'{"type": "nick", "nick": "${#name}"}\' title="${#name}" href="${#furl}" target="_self" data-ca="newt-hot${#_widget}widget-viewprofile">${#.name}</a>${if #isVip}<a target="_blank" href="/news/vinfo" title="${(#description || #desc) ? (#description || #desc) : ""}"><i class="p\n${if #isWeiboStar}\npVer3\n${else}\n    ${if #isOrganVip}\n        pOrg\n    ${else}\n        pVer\n    ${/if}\n${/if}\n"><i class="png"></i></i></a>${/if}</b>\n<p class="fucs"><a title="+关注" href="javascript:void(0);" class="fuc fucAdd js-add-follow" data-ca="newt-hot${#_widget}widget-follow"><i class="add"><q class="k1"></q><q class="k2"></q></i><b>关注</b></a></p><q class="bio" title="${#description ? #description : ""}">${if #description}${#description.length > 10 ? ( #description.substr(0, 10) + " ..." ) : #description}${/if}</q>'});kola("mvc.aop.Builder",["mvc.aop.Settings"],function(a){function k(s,o,p,q,t,r){this.params=s;this.result=o;this.model=p;this.fn=q;this.fnName=t;this.userOptions=r;this._data={}}k.prototype.reCall=function(){var o=this;var q={params:o.params};for(var p in o.userOptions){q[p]=o.userOptions[p]}o.fn(q)};k.prototype.data=function(){if(arguments.length>=2){this._data[arguments[0]]=arguments[1]}else{if(arguments.length==1){return this._data[arguments[0]]}}};k.prototype.getFnExNum=function(){return j[this.model+this.fnName]};var f=a._GLOBAL_PROCESSORS;var j={};function c(o,q){var p=o+q;if(j.hasOwnProperty(p)==false){j[p]=1}else{++j[p]}}function n(o,p){--j[o+p]}var b={};var h={};var d=0;function l(q,r){for(var p=0,o=q.length;p<o;++p){if(q[p](r.result,r)==false){return false}}return true}function g(r,p,q,o){return{doSuccess:function(s){q.result=s;if(l(f.success,q)==true){if(l(p.PROCESSOR_CHAIN.success,q)==true){if(l(p.FN_PROCESSOR_CHAIN[r]["success"],q)==true){if(o.success){o.success(q.result,q)}}}}if(l(f.complete,q)==true){if(l(p.PROCESSOR_CHAIN.complete,q)==true){if(l(p.FN_PROCESSOR_CHAIN[r]["complete"],q)==true){if(o.complete){o.complete(q.result,q)}}}}n(q.model,q.fnName)},doFail:function(s){q.result=s;if(l(f.fail,q)==true){if(l(p.PROCESSOR_CHAIN.fail,q)==true){if(l(p.FN_PROCESSOR_CHAIN[r]["fail"],q)==true){if(o.fail){o.fail(q.result,q)}}}}if(l(f.complete,q)==true){if(l(p.PROCESSOR_CHAIN.complete,q)==true){if(l(p.FN_PROCESSOR_CHAIN[r]["complete"],q)==true){if(o.complete){o.complete(q.result,q)}}}}n(q.model,q.fnName)},doProgress:function(s){q.result=s;if(l(f.progress,q)==true){if(l(p.PROCESSOR_CHAIN.progress,q)==true){if(l(p.FN_PROCESSOR_CHAIN[r]["progress"],q)==true){if(o.progress){o.progress(q.result,q)}}}}}}}var m={create:function(z){function q(){}q.prototype.toString=(function(A){return function(){return"model#"+A}})(++d);q.PROCESSOR_CHAIN={beforeCall:[],success:[],fail:[],progress:[],complete:[]};q.FN_PROCESSOR_CHAIN={};q.FUNCTIONS={};q.CONSTANTS={};var p=new q();b[p]=q;if(z){for(var o in z){var v=z[o];var u={model:p,name:o};if(typeof v=="function"){u.fn=v}else{for(var t=0,s=a._BUILDER.length;t<s;++t){var r=a._BUILDER[t](v);if(typeof r=="object"){break}}if(typeof r!="object"){throw"fn options error."}for(var w in r){if(u.hasOwnProperty(w)==false){u[w]=r[w]}}}m.fn(u)}}return p},fn:function(q){var p=b[q.model];p.FUNCTIONS[q.name]=q.fn;var u=p.FN_PROCESSOR_CHAIN;var s=u[q.name]={beforeCall:[],success:[],fail:[],progress:[],complete:[]};q.model[q.name]=function(B){c(q.model,q.name);B=B||{};var z=B.params||{};delete B.params;var A=new k(z,undefined,q.model,q.model[q.name],q.name,B);var v=g(q.name,p,A,B);for(var w in v){A[w]=v[w]}if(l(f.beforeCall,A)==false){n(q.model,q.name);return}if(l(p.PROCESSOR_CHAIN.beforeCall,A)==false){n(q.model,q.name);return}if(l(p.FN_PROCESSOR_CHAIN[q.name]["beforeCall"],A)==false){n(q.model,q.name);return}if(B.beforeCall){if(B.beforeCall(A.result,A)==false){return}}p.FUNCTIONS[q.name].call(v,z)};q.model[q.name].toString=(function(v){return function(){return"model-method#"+v}})(++d);h[q.model[q.name]]=[p,q.name];for(var t in s){var r=q[t];if(r){var o={model:q.model[q.name]};o[t]=r;m.addProcessors(o)}}},addProcessors:function(w){var r={};if(!w.model){for(var v in f){var o=w[v];if(o){var s=f[v].push(o);r[v]=[null,s-1]}}return r}var u=b[w.model];if(u){var u=b[w.model];var t=u.PROCESSOR_CHAIN;for(var v in t){var o=w[v];if(o){var s=u.PROCESSOR_CHAIN[v].push(o);r[v]=[w.model,s-1]}}return r}else{var p=h[w.model];if(p){var q=p[0].FN_PROCESSOR_CHAIN[p[1]];for(var v in q){var o=w[v];if(o){var s=p[0].FN_PROCESSOR_CHAIN[p[1]][v].push(o);r[v]=[w.model,s-1]}}return r}}},removeProcessors:function(p){for(var q in p.handle){var o=p.handle[q];m.removeProcessor({model:o[0],name:q,index:o[1]})}},removeProcessor:function(p){var o=b[p.model];if(!p.model){f[p.name].splice(p.index,1);return}if(o){o.PROCESSOR_CHAIN[p.name].splice(p.index,1)}else{var q=h[p.model];if(q){q[0].FN_PROCESSOR_CHAIN[q[1]][p.name].splice(p.index,1)}}}};return m});kola("mvc.aop.Settings",[],function(b){var a={_GLOBAL_PROCESSORS:{beforeCall:[],success:[],fail:[],progress:[],complete:[]},_BUILDER:[],addGlobalProcessors:function(c){var h={};for(var g in a._GLOBAL_PROCESSORS){var f=c[g];if(f){var d=a._GLOBAL_PROCESSORS[g].push(f);h[g]=[null,d-1]}}return h},removeGlobalProcessors:function(d){for(var f in d.handle){var c=d.handle[f];a.removeGlobalProcessor({name:f,index:c[1]})}},removeGlobalProcessor:function(c){a._GLOBAL_PROCESSORS[c.name].splice(c.index,1)},addBuilder:function(c){return(a._BUILDER.push(c.builder))-1},removeBuilder:function(c){a._BUILDER.splice(c.handle,1)}};return a});kola("newt.view.template.core.engine",["jquery.Core","newt.net.NetCommon"],function($,NetCommon){if(window.jQuery&&!window.jQuery.createTemplate){(function(jQuery){var Template=function(s,includes,settings){this._tree=[];this._param={};this._includes=null;this._templates={};this._templates_code={};this.settings=jQuery.extend({disallow_functions:false,filter_data:true,filter_params:false,runnable_functions:false,clone_data:true,clone_params:true},settings);this.f_cloneData=(this.settings.f_cloneData!==undefined)?(this.settings.f_cloneData):(TemplateUtils.cloneData);this.f_escapeString=(this.settings.f_escapeString!==undefined)?(this.settings.f_escapeString):(TemplateUtils.escapeHTML);this.splitTemplates(s,includes);if(s){this.setTemplate(this._templates_code.MAIN,includes,this.settings)}this._templates_code=null};Template.prototype.version="0.7.8";Template.DEBUG_MODE=true;Template.prototype.splitTemplates=function(s,includes){var reg=/\{#template *(\w*?)( .*)*\}/g;var iter,tname,se;var lastIndex=null;var _template_settings=[];while((iter=reg.exec(s))!=null){lastIndex=reg.lastIndex;tname=iter[1];se=s.indexOf("{#/template "+tname+"}",lastIndex);if(se==-1){throw new Error('jTemplates: Template "'+tname+'" is not closed.')}this._templates_code[tname]=s.substring(lastIndex,se);_template_settings[tname]=TemplateUtils.optionToObject(iter[2])}if(lastIndex===null){this._templates_code.MAIN=s;return}for(var i in this._templates_code){if(i!="MAIN"){this._templates[i]=new Template()}}for(var i in this._templates_code){if(i!="MAIN"){this._templates[i].setTemplate(this._templates_code[i],jQuery.extend({},includes||{},this._templates||{}),jQuery.extend({},this.settings,_template_settings[i]));this._templates_code[i]=null}}};Template.prototype.setTemplate=function(s,includes,settings){if(s==undefined){this._tree.push(new TextNode("",1,this));return}s=s.replace(/[\n\r]/g,"");s=s.replace(/\{\*.*?\*\}/g,"");this._includes=jQuery.extend({},this._templates||{},includes||{});this.settings=new Object(settings);var node=this._tree;var op=s.match(/\{#.*?\}/g);var ss=0,se=0;var e;var literalMode=0;var elseif_level=0;for(var i=0,l=(op)?(op.length):(0);i<l;++i){var this_op=op[i];if(literalMode){se=s.indexOf("{#/literal}");if(se==-1){throw new Error("jTemplates: No end of literal.")}if(se>ss){node.push(new TextNode(s.substring(ss,se),1,this))}ss=se+11;literalMode=0;i=jQuery.inArray("{#/literal}",op);continue}se=s.indexOf(this_op,ss);if(se>ss){node.push(new TextNode(s.substring(ss,se),literalMode,this))}var ppp=this_op.match(/\{#([\w\/]+).*?\}/);var op_=RegExp.$1;switch(op_){case"elseif":++elseif_level;node.switchToElse();case"if":e=new opIF(this_op,node);node.push(e);node=e;break;case"else":node.switchToElse();break;case"/if":while(elseif_level){node=node.getParent();--elseif_level}case"/for":case"/foreach":node=node.getParent();break;case"foreach":e=new opFOREACH(this_op,node,this);node.push(e);node=e;break;case"for":e=opFORFactory(this_op,node,this);node.push(e);node=e;break;case"continue":case"break":node.push(new JTException(op_));break;case"include":node.push(new Include(this_op,this._includes));break;case"param":node.push(new UserParam(this_op));break;case"cycle":node.push(new Cycle(this_op));break;case"ldelim":node.push(new TextNode("{",1,this));break;case"rdelim":node.push(new TextNode("}",1,this));break;case"literal":literalMode=1;break;case"/literal":if(Template.DEBUG_MODE){throw new Error("jTemplates: Missing begin of literal.")}break;default:if(Template.DEBUG_MODE){throw new Error("jTemplates: unknown tag: "+op_+".")}}ss=se+this_op.length}if(s.length>ss){node.push(new TextNode(s.substr(ss),literalMode,this))}};Template.prototype.get=function(d,param,element,deep){++deep;var $T=d,_param1,_param2;if(this.settings.clone_data){$T=this.f_cloneData(d,{escapeData:(this.settings.filter_data&&deep==1),noFunc:this.settings.disallow_functions},this.f_escapeString)}if(!this.settings.clone_params){_param1=this._param;_param2=param}else{_param1=this.f_cloneData(this._param,{escapeData:(this.settings.filter_params),noFunc:false},this.f_escapeString);_param2=this.f_cloneData(param,{escapeData:(this.settings.filter_params&&deep==1),noFunc:false},this.f_escapeString)}var $P=jQuery.extend({},_param1,_param2);var $Q=(element!=undefined)?(element):({});$Q.version=this.version;var ret="";for(var i=0,l=this._tree.length;i<l;++i){ret+=this._tree[i].get($T,$P,$Q,deep)}--deep;return ret};Template.prototype.setParam=function(name,value){this._param[name]=value};TemplateUtils=function(){};TemplateUtils.escapeHTML=function(txt){return txt.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};TemplateUtils.cloneData=function(d,filter,f_escapeString){if(d==null){return d}switch(d.constructor){case Object:var o={};for(var i in d){o[i]=TemplateUtils.cloneData(d[i],filter,f_escapeString)}if(!filter.noFunc){if(d.hasOwnProperty("toString")){o.toString=d.toString}}return o;case Array:var o=[];for(var i=0,l=d.length;i<l;++i){o[i]=TemplateUtils.cloneData(d[i],filter,f_escapeString)}return o;case String:return(filter.escapeData)?(f_escapeString(d)):(d);case Function:if(filter.noFunc){if(Template.DEBUG_MODE){throw new Error("jTemplates: Functions are not allowed.")}else{return undefined}}default:return d}};TemplateUtils.optionToObject=function(optionText){if(optionText===null||optionText===undefined){return{}}var o=optionText.split(/[= ]/);if(o[0]===""){o.shift()}var obj={};for(var i=0,l=o.length;i<l;i+=2){obj[o[i]]=o[i+1]}return obj};var TextNode=function(val,literalMode,template){this._value=val;this._literalMode=literalMode;this._template=template};TextNode.prototype.get=function(d,param,element,deep){var __t=this._value;if(!this._literalMode){var __template=this._template;var $T=d;var $P=param;var $Q=element;__t=__t.replace(/\{(.*?)\}/g,function(__0,__1){try{var __tmp=eval(__1);if(typeof __tmp=="function"){if(__template.settings.disallow_functions||!__template.settings.runnable_functions){return""}else{__tmp=__tmp($T,$P,$Q)}}return(__tmp===undefined)?(""):(String(__tmp))}catch(e){if(Template.DEBUG_MODE){if(e instanceof JTException){e.type="subtemplate"}throw e}return""}})}return __t};var opIF=function(oper,par){this._parent=par;oper.match(/\{#(?:else)*if (.*?)\}/);this._cond=RegExp.$1;this._onTrue=[];this._onFalse=[];this._currentState=this._onTrue};opIF.prototype.push=function(e){this._currentState.push(e)};opIF.prototype.getParent=function(){return this._parent};opIF.prototype.switchToElse=function(){this._currentState=this._onFalse};opIF.prototype.get=function(d,param,element,deep){var $T=d;var $P=param;var $Q=element;var ret="";try{var tab=(eval(this._cond))?(this._onTrue):(this._onFalse);for(var i=0,l=tab.length;i<l;++i){ret+=tab[i].get(d,param,element,deep)}}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}}return ret};opFORFactory=function(oper,par,template){if(oper.match(/\{#for (\w+?) *= *(\S+?) +to +(\S+?) *(?:step=(\S+?))*\}/)){oper="{#foreach opFORFactory.funcIterator as "+RegExp.$1+" begin="+(RegExp.$2||0)+" end="+(RegExp.$3||-1)+" step="+(RegExp.$4||1)+" extData=$T}";return new opFOREACH(oper,par,template)}else{throw new Error('jTemplates: Operator failed "find": '+oper)}};opFORFactory.funcIterator=function(i){return i};var opFOREACH=function(oper,par,template){this._parent=par;this._template=template;oper.match(/\{#foreach (.+?) as (\w+?)( .+)*\}/);this._arg=RegExp.$1;this._name=RegExp.$2;this._option=RegExp.$3||null;this._option=TemplateUtils.optionToObject(this._option);this._onTrue=[];this._onFalse=[];this._currentState=this._onTrue};opFOREACH.prototype.push=function(e){this._currentState.push(e)};opFOREACH.prototype.getParent=function(){return this._parent};opFOREACH.prototype.switchToElse=function(){this._currentState=this._onFalse};opFOREACH.prototype.get=function(d,param,element,deep){try{var $T=d;var $P=param;var $Q=element;var fcount=eval(this._arg);var key=[];var mode=typeof fcount;if(mode=="object"){var arr=[];jQuery.each(fcount,function(k,v){key.push(k);arr.push(v)});fcount=arr}var extData=(this._option.extData!==undefined)?(eval(this._option.extData)):(($T!=null)?($T):({}));var s=Number(eval(this._option.begin)||0),e;var step=Number(eval(this._option.step)||1);if(mode!="function"){e=fcount.length}else{if(this._option.end===undefined||this._option.end===null){e=Number.MAX_VALUE}else{e=Number(eval(this._option.end))+((step>0)?(1):(-1))}}var ret="";var i,l;if(this._option.count){var tmp=s+Number(eval(this._option.count));e=(tmp>e)?(e):(tmp)}if((e>s&&step>0)||(e<s&&step<0)){var iteration=0;var _total=(mode!="function")?(Math.ceil((e-s)/step)):undefined;var ckey,cval;for(;((step>0)?(s<e):(s>e));s+=step,++iteration){ckey=key[s];if(mode!="function"){cval=fcount[s]}else{cval=fcount(s);if(cval===undefined||cval===null){break}}if((typeof cval=="function")&&(this._template.settings.disallow_functions||!this._template.settings.runnable_functions)){continue}if((mode=="object")&&(ckey in Object)){continue}var prevValue=extData[this._name];extData[this._name]=cval;extData[this._name+"$index"]=s;extData[this._name+"$iteration"]=iteration;extData[this._name+"$first"]=(iteration==0);extData[this._name+"$last"]=(s+step>=e);extData[this._name+"$total"]=_total;extData[this._name+"$key"]=(ckey!==undefined&&ckey.constructor==String)?(this._template.f_escapeString(ckey)):(ckey);extData[this._name+"$typeof"]=typeof cval;for(i=0,l=this._onTrue.length;i<l;++i){try{ret+=this._onTrue[i].get(extData,param,element,deep)}catch(ex){if(ex instanceof JTException){switch(ex.type){case"continue":i=l;break;case"break":i=l;s=e;break;default:throw e}}else{throw e}}}delete extData[this._name+"$index"];delete extData[this._name+"$iteration"];delete extData[this._name+"$first"];delete extData[this._name+"$last"];delete extData[this._name+"$total"];delete extData[this._name+"$key"];delete extData[this._name+"$typeof"];delete extData[this._name];extData[this._name]=prevValue}}else{for(i=0,l=this._onFalse.length;i<l;++i){ret+=this._onFalse[i].get($T,param,element,deep)}}return ret}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}return""}};var JTException=function(type){this.type=type};JTException.prototype=Error;JTException.prototype.get=function(d){throw this};var Include=function(oper,includes){oper.match(/\{#include (.*?)(?: root=(.*?))?\}/);this._template=includes[RegExp.$1];if(this._template==undefined){if(Template.DEBUG_MODE){throw new Error("jTemplates: Cannot find include: "+RegExp.$1)}}this._root=RegExp.$2};Include.prototype.get=function(d,param,element,deep){var $T=d;var $P=param;try{return this._template.get(eval(this._root),param,element,deep)}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}}return""};var UserParam=function(oper){oper.match(/\{#param name=(\w*?) value=(.*?)\}/);this._name=RegExp.$1;this._value=RegExp.$2};UserParam.prototype.get=function(d,param,element,deep){var $T=d;var $P=param;var $Q=element;try{param[this._name]=eval(this._value)}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}param[this._name]=undefined}return""};var Cycle=function(oper){oper.match(/\{#cycle values=(.*?)\}/);this._values=eval(RegExp.$1);this._length=this._values.length;if(this._length<=0){throw new Error("jTemplates: cycle has no elements")}this._index=0;this._lastSessionID=-1};Cycle.prototype.get=function(d,param,element,deep){var sid=jQuery.data(element,"jTemplateSID");if(sid!=this._lastSessionID){this._lastSessionID=sid;this._index=0}var i=this._index++%this._length;return this._values[i]};jQuery.fn.setTemplate=function(s,includes,settings){if(s.constructor===Template){return jQuery(this).each(function(){jQuery.data(this,"jTemplate",s);jQuery.data(this,"jTemplateSID",0)})}else{return jQuery(this).each(function(){jQuery.data(this,"jTemplate",new Template(s,includes,settings));jQuery.data(this,"jTemplateSID",0)})}};jQuery.fn.setTemplateURL=function(url_,includes,settings){var s=jQuery.ajax({url:url_,async:false}).responseText;return jQuery(this).setTemplate(s,includes,settings)};jQuery.fn.setTemplateElement=function(elementName,includes,settings){var s=jQuery("#"+elementName).val();if(s==null){s=jQuery("#"+elementName).html();s=s.replace(/&lt;/g,"<").replace(/&gt;/g,">")}s=jQuery.trim(s);s=s.replace(/^<\!\[CDATA\[([\s\S]*)\]\]>$/im,"$1");s=s.replace(/^<\!--([\s\S]*)-->$/im,"$1");return jQuery(this).setTemplate(s,includes,settings)};jQuery.fn.hasTemplate=function(){var count=0;jQuery(this).each(function(){if(jQuery.getTemplate(this)){++count}});return count};jQuery.fn.removeTemplate=function(){jQuery(this).processTemplateStop();return jQuery(this).each(function(){jQuery.removeData(this,"jTemplate")})};jQuery.fn.setParam=function(name,value){return jQuery(this).each(function(){var t=jQuery.getTemplate(this);if(t===undefined){if(Template.DEBUG_MODE){throw new Error("jTemplates: Template is not defined.")}else{return}}t.setParam(name,value)})};jQuery.fn.processTemplate=function(d,param){return jQuery(this).each(function(){var t=jQuery.getTemplate(this);if(t===undefined){if(Template.DEBUG_MODE){throw new Error("jTemplates: Template is not defined.")}else{return}}jQuery.data(this,"jTemplateSID",jQuery.data(this,"jTemplateSID")+1);jQuery(this).html(t.get(d,param,this,0))})};jQuery.fn.processTemplateURL=function(url_,param,options){var that=this;options=jQuery.extend({type:"GET",async:true,cache:false},options);jQuery.ajax({url:url_,type:options.type,data:options.data,dataFilter:options.dataFilter,async:options.async,cache:options.cache,timeout:options.timeout,dataType:"json",success:function(d){var r=jQuery(that).processTemplate(d,param);if(options.on_success){options.on_success(r)}},error:options.on_error,complete:options.on_complete});return this};var Updater=function(url,param,interval,args,objs,options){this._url=url;this._param=param;this._interval=interval;this._args=args;this.objs=objs;this.timer=null;this._options=options||{};var that=this;jQuery(objs).each(function(){jQuery.data(this,"jTemplateUpdater",that)});this.run()};Updater.prototype.run=function(){this.detectDeletedNodes();if(this.objs.length==0){return}var that=this;jQuery.getJSON(this._url,this._args,function(d){var r=jQuery(that.objs).processTemplate(d,that._param);if(that._options.on_success){that._options.on_success(r)}});this.timer=setTimeout(function(){that.run()},this._interval)};Updater.prototype.detectDeletedNodes=function(){this.objs=jQuery.grep(this.objs,function(o){if(jQuery.browser.msie){var n=o.parentNode;while(n&&n!=document){n=n.parentNode}return n!=null}else{return o.parentNode!=null}})};jQuery.fn.processTemplateStart=function(url,param,interval,args,options){return new Updater(url,param,interval,args,this,options)};jQuery.fn.processTemplateStop=function(){return jQuery(this).each(function(){var updater=jQuery.data(this,"jTemplateUpdater");if(updater==null){return}var that=this;updater.objs=jQuery.grep(updater.objs,function(o){return o!=that});jQuery.removeData(this,"jTemplateUpdater")})};jQuery.extend({createTemplate:function(s,includes,settings){return new Template(s,includes,settings)},createTemplateURL:function(url_,includes,settings){var s=jQuery.ajax({url:url_,async:false}).responseText;return new Template(s,includes,settings)},getTemplate:function(element){return jQuery.data(element,"jTemplate")},processTemplateToText:function(template,data,parameter){return template.get(data,parameter,undefined,0)},jTemplatesDebugMode:function(value){Template.DEBUG_MODE=value}})})(jQuery)}var Engine={UI_HOST:"",render:function(options){if(options.remoteData){var _success=options.remoteData.success;options.remoteData.success=function(data){if(_success){_success(data)}delete options.remoteData;options.data=data;Engine.render(options)};if(options.remoteData.queueRequest==true){NetCommon.queueRequest(options.remoteData)}else{NetCommon.request(options.remoteData)}return}Engine.loadTemplate({ui:options.ui,jsonp:options.jsonp,callback:function(uiData){$(options.parent).empty().setTemplate(uiData,options.includes,options).processTemplate(options.data);if(options.callback){options.callback(options.parent)}}})},loadTemplate:function(options){if(options&&options.jsonp==true){delete options.jsonp;NetCommon.request({url:Engine.UI_HOST+options.ui,dataType:"script",cache:true,dataCache:true,noIntercept:true,success:function(uiData){Engine.loadTemplate(options)}});return}NetCommon.request({url:Engine.UI_HOST+options.ui,dataType:"text",cache:true,dataCache:true,noIntercept:true,success:function(uiData){if(options.callback){options.callback(uiData)}}})},renderToText:function(options){if(options.callback){Engine.loadTemplate({ui:options.ui,callback:function(uiData){options.callback($.processTemplateToText($.createTemplate(uiData,options.includes,options),options.data))}})}},addTemplate:function(name,face){NetCommon.pushCache(name,[face])}};return Engine});