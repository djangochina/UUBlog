kola("newt.widget.AutoComplete",["jquery.Core"],function(c){var a=0;function b(f){var e=this;this.wrapper=c("<div>").addClass("autocomplete-wrapper passportL").attr("id","ac_"+(++a));this.sid=a;if(f.title){c("<p>").addClass("autocomplete-title ttl").html(f.title).appendTo(this.wrapper)}this.list=c("<ul>").addClass("autcomplete-list");this.wrapper.append(this.list);this.input=f.input;for(var g=0,d=f.list.length;g<d;++g){c("<li id='acl"+e.sid+"_item_"+g+"' class='autocomplete-listitem' style='overflow: hidden;'>"+f.list[g]+"</li>").appendTo(this.list).bind("click",function(){if(e._disabled){return}e.complete(c(this).data("source_txt"));if(f.input){c(f.input).trigger("focus")}}).hover(function(){if(e._disabled){return}e.cleanSelect();c(this).addClass("hover Hover")},function(){if(e._disabled){return}e.cleanSelect();c(this).removeClass("hover Hover")})}this.listSource=f.list;this.mode=f.mode;this.auto=f.auto;this.onComplete=f.onComplete;if(f.input){c(f.input).attr("autocomplete","off").bind("keyup",function(){if(e._disabled){return}var i=c(this);var h=i.val();if(h&&h.length>0){e.show({value:h})}else{e.hide()}}).bind("keydown",function(i){if(e._disabled||e._hide){return}switch(i.keyCode){case 40:e.selectNext();break;case 38:e.selectPrev();break;case 13:var h=e.getSelect();if(h){e.complete(h.data("source_txt"));i.stopPropagation();return false}case 9:var h=e.getSelect();if(h){e.complete(h.data("source_txt"))}break}})}this.wrapper.bind("click",function(h){h.stopPropagation();return false});c(document.body).bind("click",function(){e.hide()})}b.prototype.getDOM=function(){return this.wrapper};b.prototype.getSelect=function(){var d=this.list.find("li.hover:first");return(d&&d.size()>0)?d:null};b.prototype.select=function(f){var e=c("#acl"+this.sid+"_item_"+f);if(e&&e.size()>0){var d=this.getSelect();if(d){d.removeClass("hover Hover")}e.addClass("hover Hover")}};b.prototype.selectNext=function(){var d=this.getSelect();if(d){var e=d.nextAll("li.autocomplete-show:first");if(e&&e.size()>0){d.removeClass("hover Hover");e.addClass("hover Hover")}}else{this.list.find("li.autocomplete-show:first").addClass("hover Hover")}};b.prototype.selectPrev=function(){var d=this.getSelect();if(d){var e=d.prevAll("li.autocomplete-show:first");if(e&&e.size()>0){d.removeClass("hover Hover");e.addClass("hover Hover")}}};b.prototype.cleanSelect=function(){this.list.find("li.hover").removeClass("hover Hover")};b.prototype.complete=function(d){if(this.input){this.input.val(d);this.hide();if(this.onComplete){this.onComplete()}}};b.prototype.disabled=function(){this._disabled=true};b.prototype.enabled=function(){this._disabled=false};b.prototype.show=function(v){var u=this;var p=false;var q=0;switch(this.mode){case"tip":if(v.value){for(var m=0,f=this.listSource.length;m<f;++m){var s=this.listSource[m].charAt(0);var r=v.value.indexOf(s);var o=false;if(r==-1){var t=c("#acl"+u.sid+"_item_"+m);var e=v.value+this.listSource[m];t.data("source_txt",e);if(e.length>28){e="..."+e.substr(e.length-28)}t.html(e).addClass("autocomplete-show").show();o=true;++q}else{var k=v.value.substr(r);var d=v.value.substr(0,r);var n=true;for(var g=0,h=k.length;g<h;++g){if(k.charAt(g)!=this.listSource[m].charAt(g)){n=false;break}}if(n){var t=c("#acl"+u.sid+"_item_"+m);var e=d+this.listSource[m];t.data("source_txt",e);if(e.length>28){e="..."+e.substr(e.length-28)}t.html(e).addClass("autocomplete-show").show();o=true;if((d+k).length==c("#acl"+u.sid+"_item_"+m).html().length){p=true}++q}}if(o==false){c("#acl"+u.sid+"_item_"+m).removeClass("autocomplete-show hover Hover").hide()}}}break;case"match":break}if(p==false&&q!=0){this._hide=false;this.wrapper.show()}else{this.hide()}if(!this.getSelect()){this.selectNext()}};b.prototype.hide=function(){this._hide=true;this.wrapper.hide()};return b});kola("newt.widget.ConnectLogin",["jquery.Core","newt.ca.ca"],function(b){var a={MSNLogin:function(c){c=c||{};if(c.hasOwnProperty("height")==false){c.height=400}if(c.hasOwnProperty("width")==false){c.width=500}var e="https://consent.live.com/Connect.aspx";var d="wrap_callback=http://"+document.location.host+"/msn/callBack&wrap_client_id=000000004004F407&wrap_scope=WL_Activities.Update,WL_Contacts.View,WL_Profiles.View,Messenger.SignIn,IMControl.IMAllowAll,WL_Activities.View,WL_Photos.View&mkt=zh-cn&wrap_client_state=1&nexturl="+location.href;window.open(e+"?"+d,"connect_window_open","top=0, left=0,height="+c.height+",width="+c.width);window.CA.q("connect_msn")},QQLogin:function(c){c=c||{};if(c.hasOwnProperty("height")==false){c.height=350}if(c.hasOwnProperty("width")==false){c.width=450}window.open("/regist/thirdlogin?thirdParty=qq&nexturl="+location.href,"sohutconnectloginwin","top=0, left=0, height= "+c.height+", width= "+c.width+", location=no, menubar=no, scrollbars=no, status=no, titlebar=no, toolbar=no, resizable=yes");CA.q("connect_qq")},renrenLogin:function(c){c=c||{};if(c.hasOwnProperty("height")==false){c.height=330}if(c.hasOwnProperty("width")==false){c.width=700}window.open("/regist/thirdlogin?thirdParty=renren&nexturl="+location.href,"sohutconnectloginwin","top=0, left=0, height= "+c.height+", width= "+c.width+", location=no, menubar=no, scrollbars=no, status=no, titlebar=no, toolbar=no, resizable=yes");CA.q("connect_renren")},taobaoLogin:function(c){c=c||{};if(c.hasOwnProperty("height")==false){c.height=530}if(c.hasOwnProperty("width")==false){c.width=415}window.open("/regist/thirdlogin?thirdParty=taobao&nexturl="+location.href,"sohutconnectloginwin","top=0, left=0, height= "+c.height+", width= "+c.width+", location=no, menubar=no, scrollbars=no, status=no, titlebar=no, toolbar=no, resizable=yes");CA.q("connect_taobao")},baiduLogin:function(c){c=c||{};if(c.hasOwnProperty("height")==false){c.height=300}if(c.hasOwnProperty("width")==false){c.width=560}window.open("/regist/thirdlogin?thirdParty=baidu&nexturl="+location.href,"sohutconnectloginwin","top=0, left=0, height= "+c.height+", width= "+c.width+", location=no, menubar=no, scrollbars=no, status=no, titlebar=no, toolbar=no, resizable=yes");CA.q("connect_baidu")},feixinLogin:function(c){c=c||{};if(c.hasOwnProperty("height")==false){c.height=300}if(c.hasOwnProperty("width")==false){c.width=560}window.open("/regist/thirdlogin?thirdParty=feixin&nexturl="+location.href,"sohutconnectloginwin","top=0, left=0, height= "+c.height+", width= "+c.width+", location=no, menubar=no, scrollbars=no, status=no, titlebar=no, toolbar=no, resizable=yes");CA.q("connect_feixin")},show:function(c){var c=b(c);window.open(c.attr("openwindowurl")+"&nexturl="+location.href,"sohutconnectloginwin","top=0, left=0, height= "+c.attr("openwindowheight")+", width= "+c.attr("openwindowwidth")+", location=no, menubar=no, scrollbars=no, status=no, titlebar=no, toolbar=no, resizable=yes");CA.q(c.attr("catag"))},defaultInit:function(){b(function(){b("a.js-connect-a").bind("click",function(){a.show(this)})})}};return a});kola("newt.widget.CutTheImage",["jquery.Core","mvc.view.TemplateEngine","newt.cr.crButton","newt.Config","newt.swf.SwfUpload","newt.swf.jquerySwfUpload","newt.avatar.Imgareaselect","newt.dialog.Common","newt.dialog.Notice"],function($,TemplateEngine,CrButton,_Config,_SwfUpload,_$Swfupload,_ImgareaSelect,_Common,_Notice){function CutTheImage(options){options=options||{};options=$.extend({success:function(){},error:function(){},opFun:function(_options){var self=this;var photo_w=self.target.find("div.js-preview2 img").width();var photo_h=self.target.find("div.js-preview2 img").height();var oldPhoto=(typeof PHOTOICON=="string")?PHOTOICON.replace(/.*\//gi,""):"avt_180.png";kola("newt.model.Image",function(ImageModel){ImageModel.cut({params:{name:self.icon_path,left:parseInt(self.icon.left*self.img_w/photo_w),top:parseInt(self.icon.top*self.img_h/photo_h),width:parseInt(self.icon.width*self.img_w/photo_w),height:parseInt(self.icon.height*self.img_h/photo_h)},success:function(data,process){if(data){if(data.status==0){_options.success(data.data);self.target.find("div.js-preview2").addClass("nodis");self.target.find("div.js-upavt-container").addClass("nodis");self.target.find("p.js-apb-container").addClass("nodis");self.target.find("a.js-save-icon").getCrControl("crButton").setEnable();self.target.find("a.js-save-icon").html("<b>保 存</b>");if(self.imgAreaSelect){self.imgAreaSelect.cancelSelection()}}else{_options.error(data.statusText)}}else{_options.error("服务器返回数据异常")}},fail:function(data,process){_options.error("抱歉，服务器出现未知错误。")}})})}},options);$.extend(this,options);var self=this;self.state="ready";TemplateEngine.getTemplate({name:"template.main.avatar.upload",complete:function(template){self.target.html(template.render({data:{viewTitle:self.viewTitle,uploadTip:self.uploadTip,opTip:self.opTip,hasSaveBtn:self.hasSaveBtn}}));self.icon="";self.icon={left:0,top:0,width:100,height:100};self.img_w=100,self.img_h=100;self.imgAreaSelect;self.icon_path="";function preview(img,selection){if(!selection.width||!selection.height){return}var scaleX=180/selection.width;var scaleY=180/selection.height;self.target.find("p.js-preview img").css({width:Math.round(scaleX*parseInt(self.target.find("div.js-preview2 img").width()))+"px",height:Math.round(scaleY*parseInt(self.target.find("div.js-preview2 img").height()))+"px",marginLeft:-Math.round(scaleX*selection.x1)+"px",marginTop:-Math.round(scaleY*selection.y1)+"px"});self.icon={left:selection.x1,top:selection.y1,width:selection.width,height:selection.height}}function loadimg(src){var img=new Image();$(img).load(function(){$(this).hide().unbind();self.target.find("div.js-preview2").removeClass("loading2").html("").append(this);$(this).fadeIn();self.img_w=$(this).width();self.img_h=$(this).height();var preview2img=self.target.find("div.js-preview2 img");if(parseInt(self.img_w)>parseInt(self.img_h)){preview2img.attr("width",252);preview2img.attr("height",parseInt(252*self.img_h/self.img_w))}else{preview2img.attr("height",252);preview2img.attr("width",parseInt(252*self.img_w/self.img_h))}if(self.imgAreaSelect){self.imgAreaSelect.cancelSelection()}var view2img_w=preview2img.attr("width");var view2img_h=preview2img.attr("height");var size=view2img_w>view2img_h?view2img_h:view2img_w;size=size>100?100:size;self.imgAreaSelect=self.target.find("div.js-preview2 img").imgAreaSelect({aspectRatio:"1:1",parent:self.target.find("div.js-preview2"),handles:true,fadeSpeed:200,onSelectChange:preview,instance:true,x1:0,y1:0,x2:size,y2:size,persistent:true});var img2=new Image();$(img2).load(function(){$(this).hide().unbind();self.target.find("p.js-preview").removeClass("loading2").html("").append(this);$(this).fadeIn();preview(self.target.find("p.js-preview img"),self.imgAreaSelect.getSelection())}).error(function(){}).attr("src",src)}).error(function(){}).attr("src",src)}if(self.hasSaveBtn!=false){self.target.find("a.js-save-icon").crButton({loadingHTML:'<b><i class="i iloading"></i>保存中</b>',submitHandle:function(){self.op()},status:"on"})}self.target.find("a.js-left-rotate").click(function(){$.ajax({url:"/pic/proxy",global:false,type:"post",dataType:"json",data:"act=rotate&serviceid=31&uid="+UID+"&name="+escape(self.icon_path)+"&rdep=-90&callback=",success:function(data){self.icon_path=data.statusText;self.target.find("p.js-preview").addClass("loading2").html("");self.target.find("div.js-preview2").addClass("loading2").html("");self.imgAreaSelect.cancelSelection();loadimg(data.data)},error:function(error){}})});self.target.find("a.js-right-rotate").click(function(){$.ajax({url:"/pic/proxy",global:false,type:"post",dataType:"json",data:"act=rotate&serviceid=31&uid="+UID+"&name="+escape(self.icon_path)+"&rdep=90&callback=",success:function(data){self.icon_path=data.statusText;self.target.find("p.js-preview").addClass("loading2").html("");self.target.find("div.js-preview2").addClass("loading2").html("");loadimg(data.data);self.imgAreaSelect.cancelSelection()},error:function(error){}})});self.target.find("div.js-swfupload-control").swfupload({upload_url:CRTWCONFIG.UPURL,file_size_limit:"10240",file_types:"*.jpg;*.jpeg;*.png;*.gif;*.bmp;*.JPG;*.JPEG;*.PNG;*.GIF;*.BMP",file_types_description:"Image Files",file_upload_limit:"0",button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,flash_url:CRTWCONFIG.UPLOAD_SWF,button_image_url:CRTWCONFIG.I_SWF,button_width:220,button_height:26,button_placeholder:self.target.find("input.js-button")[0],debug:false,post_params:{uid:406469160,serviceid:"31"},file_post_name:"Filedata",custom_settings:{something:"here"}}).bind("fileQueued",function(event,file){$(this).swfupload("startUpload")}).bind("uploadStart",function(event,file){self.target.find("p.js-apb-container").addClass("nodis");if(self.imgAreaSelect){self.imgAreaSelect.cancelSelection()}self.target.find("p.js-preview").removeClass("nodis").html("").addClass("loading2");self.target.find("div.js-preview2").removeClass("nodis").addClass("loading2").find("img").addClass("novis");self.target.find("div.js-upavt-container").removeClass("nodis")}).bind("uploadSuccess",function(event,file,serverData){var data=eval("("+serverData+")");self.icon_path=data.statusText;self.imgAreaSelect=null;self.state="view";loadimg(data.data);self.target.find("p.js-apb-container").removeClass("nodis")}).bind("uploadComplete",function(event,file){$(this).swfupload("startUpload")});var img=new Image();$(img).load(function(){self.target.find("p.js-preview").removeClass("loading2").append(this)}).error(function(){}).attr("src",self.defaultImage)}})}CutTheImage.prototype.op=function(options){var self=this;options=$.extend({success:function(){},error:function(){}},options);this.opFun.call(this,{success:function(data){self.state="ready";self.success(data);options.success(data)},error:function(data){self.error(data);options.success(data)}})};return CutTheImage});kola("newt.widget.DatePicker",null,function(){document.domain="sohu.com";function a(){var c,b;(function(){var ag={$wdate:true,$dpPath:"http://images.sohu.com/cs/sohuim/widget/date97/4.72.1/",$crossFrame:true,doubleCalendar:false,enableKeyboard:true,enableInputMask:true,autoUpdateOnChanged:null,whichDayIsfirstWeek:4,position:{},lang:"auto",skin:"default",dateFmt:"yyyy-MM-dd",realDateFmt:"yyyy-MM-dd",realTimeFmt:"HH:mm:ss",realFullFmt:"%Date %Time",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59",startDate:"",alwaysUseStartDate:false,yearOffset:1911,firstDayOfWeek:0,isShowWeek:false,highLineWeekDay:true,isShowClear:true,isShowToday:true,isShowOK:true,isShowOthers:true,readOnly:false,errDealMode:0,autoPickDate:null,qsEnabled:true,autoShowQS:false,specialDates:null,specialDays:null,disabledDates:null,disabledDays:null,opposite:false,onpicking:null,onpicked:null,onclearing:null,oncleared:null,ychanging:null,ychanged:null,Mchanging:null,Mchanged:null,dchanging:null,dchanged:null,Hchanging:null,Hchanged:null,mchanging:null,mchanged:null,schanging:null,schanged:null,eCont:null,vel:null,errMsg:"",quickSel:[],has:{}};b=i;var f=window,p="document",u="documentElement",ab="getElementsByTagName",h,ad,j,v,ae;switch(navigator.appName){case"Microsoft Internet Explorer":j=true;break;case"Opera":ae=true;break;default:v=true;break}ad=s();if(ag.$wdate){r(ad+"skin/WdatePicker.css")}h=f;if(ag.$crossFrame){try{while(h.parent&&h.parent[p]!=h[p]&&h.parent[p][ab]("frameset").length==0){h=h.parent}}catch(o){}}if(!h.$dp){h.$dp={ff:v,ie:j,opera:ae,el:null,win:f,status:0,defMinDate:ag.minDate,defMaxDate:ag.maxDate,flatCfgs:[]}}ac();if(c.status==0){d(f,function(){i(null,true)})}if(!f[p].docMD){z(f[p],"onmousedown",aa);f[p].docMD=true}if(!h[p].docMD){z(h[p],"onmousedown",aa);h[p].docMD=true}z(f,"onunload",function(){if(c.dd){n(c.dd,"none")}});function ac(){h.$dp=h.$dp||{};obj={$:function(B){return(typeof B=="string")?f[p].getElementById(B):B},$D:function(C,B){return this.$DV(this.$(C).value,B)},$DV:function(E,F){if(E!=""){this.dt=c.cal.splitDate(E,c.cal.dateFmt);if(F){for(var H in F){if(this.dt[H]===undefined){this.errMsg="invalid property:"+H}else{this.dt[H]+=F[H];if(H=="M"){var G=F.M>0?1:0,D=new Date(this.dt.y,this.dt.M,0).getDate();this.dt.d=Math.min(D+G,this.dt.d)}}}}if(this.dt.refresh()){return this.dt}}return""},show:function(){var C=h[p].getElementsByTagName("div"),E=100000;for(var F=0;F<C.length;F++){var D=parseInt(C[F].style.zIndex);if(D>E){E=D}}this.dd.style.zIndex=E+2;n(this.dd,"block")},hide:function(){n(this.dd,"none")},attachEvent:z};for(var A in obj){h.$dp[A]=obj[A]}c=h.$dp;c.dd=h[p].getElementById("_my97DP")}function z(C,E,D){if(j){C.attachEvent(E,D)}else{if(D){var F=E.replace(/on/,"");D._ieEmuEventHandler=function(A){return D(A)};C.addEventListener(F,D._ieEmuEventHandler,false)}}}function s(){var D,C,E=f[p][ab]("script");for(var F=0;F<E.length;F++){D=E[F].src.substring(0,E[F].src.toLowerCase().indexOf("wdatepicker.js"));C=D.lastIndexOf("/");if(C>0){D=D.substring(0,C+1)}if(D){break}}return D}function y(T){var U,L;if(T.substring(0,1)!="/"&&T.indexOf("://")==-1){U=h.location.href;L=location.href;if(U.indexOf("?")>-1){U=U.substring(0,U.indexOf("?"))}if(L.indexOf("?")>-1){L=L.substring(0,L.indexOf("?"))}var S,Q,O="",K="",N="",P,R,M="";for(P=0;P<Math.max(U.length,L.length);P++){S=U.charAt(P).toLowerCase();Q=L.charAt(P).toLowerCase();if(S==Q){if(S=="/"){R=P}}else{O=U.substring(R+1,U.length);O=O.substring(0,O.lastIndexOf("/"));K=L.substring(R+1,L.length);K=K.substring(0,K.lastIndexOf("/"));break}}if(O!=""){for(P=0;P<O.split("/").length;P++){M+="../"}}if(K!=""){M+=K+"/"}T=U.substring(0,U.lastIndexOf("/")+1)+M+T}ag.$dpPath=T}function r(C,F,H){var G=f[p][ab]("HEAD").item(0),E=f[p].createElement("link");if(G){E.href=C;E.rel="stylesheet";E.type="text/css";if(F){E.title=F}if(H){E.charset=H}G.appendChild(E)}}function d(B,A){z(B,"onload",A)}function x(J){J=J||h;var C=0,G=0;while(J!=h){var K=J.parent[p][ab]("iframe");for(var H=0;H<K.length;H++){try{if(K[H].contentWindow==J){var I=g(K[H]);C+=I.left;G+=I.top;break}}catch(L){}}J=J.parent}return{leftM:C,topM:G}}function g(Q){if(Q.getBoundingClientRect){return Q.getBoundingClientRect()}else{var L={ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i},R=false,N=null,O=Q.offsetTop,P=Q.offsetLeft,I=Q.offsetWidth,K=Q.offsetHeight,J=Q.offsetParent;if(J!=Q){while(J){P+=J.offsetLeft;O+=J.offsetTop;if(k(J,"position").toLowerCase()=="fixed"){R=true}else{if(J.tagName.toLowerCase()=="body"){N=J.ownerDocument.defaultView}}J=J.offsetParent}}J=Q.parentNode;while(J.tagName&&!L.ROOT_TAG.test(J.tagName)){if(J.scrollTop||J.scrollLeft){if(!L.OP_SCROLL.test(n(J))){if(!ae||J.style.overflow!=="visible"){P-=J.scrollLeft;O-=J.scrollTop}}}J=J.parentNode}if(!R){var M=af(N);P-=M.left;O-=M.top}I+=P;K+=O;return{left:P,top:O,right:I,bottom:K}}}function q(E){E=E||h;var F=E[p],C=(E.innerWidth)?E.innerWidth:(F[u]&&F[u].clientWidth)?F[u].clientWidth:F.body.offsetWidth,D=(E.innerHeight)?E.innerHeight:(F[u]&&F[u].clientHeight)?F[u].clientHeight:F.body.offsetHeight;return{width:C,height:D}}function af(E){E=E||h;var F=E[p],C=F[u],D=F.body;F=(C&&C.scrollTop!=null&&(C.scrollTop>D.scrollTop||C.scrollLeft>D.scrollLeft))?C:D;return{top:F.scrollTop,left:F.scrollLeft}}function aa(B){var A=B?(B.srcElement||B.target):null;try{if(c.cal&&!c.eCont&&c.dd&&A!=c.el&&c.dd.style.display=="block"){c.cal.close()}}catch(B){}}function e(){c.status=2;w()}function w(){if(c.flatCfgs.length>0){var A=c.flatCfgs.shift();A.el={innerHTML:""};A.autoPickDate=true;A.qsEnabled=false;t(A)}}var m,l;function i(E,M){c.win=f;ac();E=E||{};if(M){if(!I()){l=l||setInterval(function(){if(h[p].readyState=="complete"){clearInterval(l)}i(null,true)},50);return}if(c.status==0){c.status=1;t({el:{innerHTML:""}},true)}else{return}}else{if(E.eCont){E.eCont=c.$(E.eCont);c.flatCfgs.push(E);if(c.status==2){w()}}else{if(c.status==0){i(null,true);return}if(c.status!=2){return}var K=L();if(K){c.srcEl=K.srcElement||K.target;K.cancelBubble=true}c.el=E.el=c.$(E.el||c.srcEl);if(!c.el||c.el.My97Mark===true||c.el.disabled||(c.el==c.el&&n(c.dd)!="none"&&c.dd.style.left!="-1970px")){c.el.My97Mark=false;return}t(E);if(K&&c.el.nodeType==1&&c.el.My97Mark===undefined){c.el.My97Mark=false;var H,B;if(K.type=="focus"){H="onclick";B="onfocus"}else{H="onfocus";B="onclick"}z(c.el,H,c.el[B])}}}function I(){if(j&&h!=f&&h[p].readyState!="complete"){return false}return true}function L(){if(v){func=L.caller;while(func!=null){var A=func.arguments[0];if(A&&(A+"").indexOf("Event")>=0){return A}func=func.caller}return null}return event}}function k(A,B){return A.currentStyle?A.currentStyle[B]:document.defaultView.getComputedStyle(A,false)[B]}function n(A,B){if(A){if(B!=null){A.style.display=B}else{return k(A,"display")}}}function t(A,G){for(var I in ag){if(I.substring(0,1)!="$"){c[I]=ag[I]}}for(I in A){if(c[I]!==undefined){c[I]=A[I]}}var F=c.el?c.el.nodeName:"INPUT";if(G||c.eCont||new RegExp(/input|textarea|div|span|p|a/ig).test(F)){c.elProp=F=="INPUT"?"value":"innerHTML"}else{return}if(c.lang=="auto"){c.lang=j?navigator.browserLanguage.toLowerCase():navigator.language.toLowerCase()}if(!c.dd||c.eCont||(c.lang&&c.realLang&&c.realLang.name!=c.lang&&c.getLangIndex&&c.getLangIndex(c.lang)>=0)){if(c.dd&&!c.eCont){h[p].body.removeChild(c.dd)}if(ag.$dpPath==""){y(ad)}var K='<iframe style="width:1px;height:1px" src="'+ag.$dpPath+'My97DatePicker.htm" frameborder="0" border="0" scrolling="no"></iframe>';if(c.eCont){c.eCont.innerHTML=K;d(c.eCont.childNodes[0],e)}else{c.dd=h[p].createElement("DIV");c.dd.id="_my97DP";c.dd.style.cssText="position:absolute";c.dd.innerHTML=K;h[p].body.appendChild(c.dd);d(c.dd.childNodes[0],e);if(G){c.dd.style.left=c.dd.style.top="-1970px"}else{c.show();J()}}}else{if(c.cal){c.show();c.cal.init();if(!c.eCont){J()}}}function J(){var S=c.position.left,N=c.position.top,M=c.el;if(M!=c.srcEl&&(n(M)=="none"||M.type=="hidden")){M=c.srcEl}var R=g(M),P=x(f),L=q(h),O=af(h),T=c.dd.offsetHeight,Q=c.dd.offsetWidth;if(isNaN(N)){if(N=="above"||(N!="under"&&((P.topM+R.bottom+T>L.height)&&(P.topM+R.top-T>0)))){N=O.top+P.topM+R.top-T-2}else{N=O.top+P.topM+Math.min(R.bottom,L.height-T)+2}}else{N+=O.top+P.topM}if(isNaN(S)){S=O.left+Math.min(P.leftM+R.left,L.width-Q-5)-(j?2:0)}else{S+=O.left+P.leftM}c.dd.style.top=N+"px";c.dd.style.left=S+"px"}}})();window.$dp=c;window.WdatePicker=b}return a});kola("newt.widget.Flow",["jquery.Core"],function(a){function b(f){var d=this;f=f||{};f=a.extend({speed:20,dir:"up",hoverStop:true},f);a.extend(d,f);d.target=a(d.target);d.target.css({overflow:"hidden"});d.sid=null;d.paused=false;switch(d.dir){case"up":d.dSpeed=-1;break;case"down":d.dSpeed=1;var c=d.target.innerHeight();var e=0;d.target.children().each(function(){e+=a(this).outerHeight()});if(e>c){var j=null;for(var h=0;h<1;++h){var g=d.target.children().last();g.css("marginTop",(g.outerHeight()*-1)+(j==null?(0):(parseInt(j.css("marginTop"))))+"px");j=g;d.target.prepend(j)}}break}if(d.hoverStop==true){d.target.bind("mouseenter",function(){d.pause()});d.target.bind("mouseleave",function(){d.resume()})}d.start()}b.prototype.stop=function(){clearInterval(this.sid)};b.prototype.pause=function(){this.paused=true};b.prototype.resume=function(){this.paused=false};b.prototype.start=function(){var k=this;var h=k.target.children().first();var f=h.outerHeight();var d=parseInt(h.css("marginTop"));var e=k.dir;var i=k.dSpeed;var j=0;var g=k.target.innerHeight();var c=0;k.target.children().each(function(){c+=a(this).outerHeight()});k.sid=setInterval(function(){if(k.paused==false&&c>g){switch(k.dir){case"up":d+=i;j+=i;h.css("marginTop",d+"px");if(Math.abs(j)>=f){k.target.append(h);h.css("marginTop","0px");d=0;j=0;h=k.target.children().first();f=h.outerHeight()}break;case"down":d+=i;j+=i;h.css("marginTop",d+"px");if(Math.abs(j)>=f){var l=k.target.children().last();l.css("marginTop",(l.outerHeight()*-1+parseInt(h.css("marginTop")))+"px");k.target.prepend(l);h.css("marginTop","0px");j=0;h=k.target.children().first();d=parseInt(h.css("marginTop"));f=h.outerHeight()}break}}},1000/k.speed)};b.prototype.setSpeed=function(c){this.stop();this.speed=c;this.start()};return b});kola("newt.widget.Flow2",["jquery.Core"],function(a){return function(d,i){var o=a(d);if(!o[0]||(!o[0]&&o[0].nodeType)){return}var b=a.extend({speed:1200,invTime:1700,autoStart:true,easing:"swing",dir:"down",type:"shift"},i);var h;var m;var f={};var g={};var e;function k(){var p=o.children();if(p.length<2){return}var q;switch(b.type){case"shift":h=o;q=p.last();m=q.outerHeight();q.prependTo(o);h.css("top",-m+"px");f.top="0";h.animate(f,b.speed,"swing",function(){e=setTimeout(k,b.invTime)});break;case"grow":default:h=p.last();m=h.height();h.height(0).prependTo(o);f.height=m+"px";h.animate(f,b.speed,"swing",function(){e=setTimeout(k,b.invTime)})}}var c={mouseIn:function(){h.stop(false,true);h.css(f);e&&clearTimeout(e)},mouseOut:function(){e=setTimeout(k,b.invTime)}};var n=function(){l();j();b.autoStart&&k()};var l=function(){if(b.type=="shift"&&o.css("position")=="static"){o.css("position","relative")}};var j=function(){o.hover(c.mouseIn,c.mouseOut)};n();g.stop=c.mouseIn;g.start=function(){c.mouseIn();k()};g.config=function(p){if(!a.isPlainObject(p)){return}a.extend(b,p)};g.destroy=function(){o.unbind("mouseenter",c.mouseIn);o.unbind("mouseleave",c.mouseOut)};return g}});(function(){kola("newt.widget.LinkageSelect",["newt.cr.crCustomSelect2"],function(c){var b={CURSELECT_REFER:"_newt_widget_LinkageSelect_refer"};var a={createSelect:function(d){if(d){d.element=$(d.element);d.element.data(b.CURSELECT_REFER,new c(d.element,d));return d.element}},link:function(g){if(g){g.dataMap=g.dataMap?g.dataMap:{};g.dataParser=g.dataParser?g.dataParser:function(i,h){return h};g.ctrlSelect=$(g.ctrlSelect);g.linkSelect=$(g.linkSelect);var f=g.ctrlSelect.data(b.CURSELECT_REFER)||g.ctrlSelect;var d=null;if(g.linkSelect instanceof c){d=g.linkSelect}else{var e=g.linkSelect.data(b.CURSELECT_REFER);if(e){d=e}else{a.createSelect({element:g.linkSelect,options:g.dataParser(f.getValue(),g.dataMap[f.getValue()])});d=g.linkSelect.data(b.CURSELECT_REFER)}}$(f).bind("change",function(h,j,i){d.bind(g.dataParser(i,g.dataMap[i]))}).trigger("change",[f.getText(),f.getValue()])}}};return a})})();